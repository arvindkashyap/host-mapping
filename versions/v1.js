var pljssglobal,pljssglobalid;function Playerjs(options){var o={play:!1,audiosrc:[],audioctx:[],playerid:"hqwxmqpfu42s",default_w:640,default_h:360,version:"19.1.13",compilation:["HLS",""],compilations:"",fullscreen:!1,realfullscreen:!1,nativecontrols:!1,fullwheel:!1,fullscreen_start:!1,airplay:!1,pipwebkit:!1,ispipkit:!1,u:"#1KRpSE3peFC5cH2QOIbo6ocTPsWTPsVologxOH2QbEDobuglbE29lH3obuboPsWTPsWTbrVphGCxeochQrVpmEDpgGC4bubomscTMsVTPoWTbrVpgIfYdGCBNJVo6syPbEC5iHCY0GC9NochbECQPGZXbrVpaochQrVphoch0tyPbHZBfJZYNFnpiF2a0IZYdFZeNFRo6szTlofaiFZB3GDxhH3B0HC92GC5gochQrVphGCxeFZ93Hbo6sD0loftOHgxRH2QLJZe0HZAbuglbH3pdFDobucXlof9NochPrVpaE3xiH24bubp0GDxlFyologx5IZAbubp0FDa0obPbIZ9SGDxiH24bubp0H3TmHZBfJVoloftlGCtkochPrVphEC5dochPrVp0FDa0ochbobPbJfYRochbJZe0HZAbrVphGCxeochQrVphGCxeH25PHZY5ochQrVpaHfemEDxiH24bubpPH3tiJZeOHbolofpgochQrVpbF2XbucTNtVPbEfJPECxdGC5gochbtbT2oWEMtbp9rVpcH250If9lD2QiHfAbuglbH3pdFDobucslof9NochQrVp0KDUeochbI2aaIZAbrVpaE3xiH24bubplGC5eobPbGVo6sRPbIf91HfxiHfIbuboQobPbJRo6szTPrVpaochbsyolofYbFRo6ocTNsRolofYlH2YdochbsV40obPbEC92FDobubomsyoloftOHZ9RochbsWd1ECA1obPbE29lH3pbFRo6ofFfFfFfFboloftOHZ9RHZ9aFVo6ofFfFfFfFboloftOHZ9RH3FeIbo6ofFfFfFfFbolofp1FfFeIbo6KRpOHbo6sVPbE29lH3obubpfFfFfFfEbrVpaochPrcB9rVpPH3tiJZeOHbo6ofpOJnxOHyolof1aIfJiHbo6ocTMsVT1sVTPobPbGZYNFZQeochQrVpbF3UaFZxiHfIbubo1oWTMtyTPobPbJZePochQrVphGCxeochQrVphGCxeH25lGDFeochQrVphEC5dHZBhGCxeochPrVphEC5dHZBSE2YlFyo6ocXbrVp0H3U0GDTbucXlofQiHfB0GDUmEDpgGC5bH3x0H20bucXPrVphEC5dHZBaH3FeIbo6ocXbrVphEC5dHZBiE29Nochbvnt2FRU3GCx0GW0gscUPKVIMGZBiF2a0vyIRsnU4pRU2GCB3wf94vyIPoWTMscTMscTgonFeIgtiH249pSXNsyIMKZ1lHgs9p2a0JnT6DV9Ir3J3JR53sR5OIfJIrSoPsWUIr3t2FRIMKZ1lHgs6KZQiHfl9p2a0JnT6DV9Ir3J3JR53sR5OIfJIrSX5uzeIr3alGC5kpS5IHbTMoVT8FRUSJnpOG2A9p25OHfAgont0If9kFy13GCx0GW0gsyIMFfelHW0gHf9NFyIMFfelHV1RJCQevyJeJfBNH2xdpS5IHbTMoVTMoVTMvZtiIftlFyUfGCQlrC9PECtiJnd9pSTNsRIMFfelHW0go0FZxdFZxbIME3M9pSXPpRUcKz0gszTgono9pSXPpS48DV9cGDpcHZA#DZ4MoVTMoVTMoWQcGDpcHZAMFfelHW0go0FZxdFZxbIME3M9pSXPpRUcKz0gszTgono9pSwgvcQIr2tiIftlFz5IHbTMoVT8DV9gveQNvYPOI3FgvbTbrVphEC5dHZBhGCxeGC5iJVo6sD0loftOHgxRH2QLIZQaKyo6KRpOIfxeIbo6sbPbH24bucXlofecH24bubo8I3FgonJiFnxhvyIRsVIMGZBiF2a0vyIRsVI#vZIMFfelHV1RJCQevyJNH256FDpOpRU0IfYNI2FOIf09p3xREC5SHZY0FyM1rVTSqyI#vnUOHnelGC5eonUOGC50IS0gsV41uzs3tyTPrcw4tWs4oWTNtzERtyTQsR41szA2sRTQsy40sSI1oWIMsV41uzs3tyTPrcw4tWs4pRUfGCQlvyIcFfFfFfFfp1POvcQIr2I#vYPOI3FgvbolofecH24Rochbvnt2FRU3GCx0GW0gscTgoZaeGCJhJW0gscTgvcQgoZFiHZPmIgBlFz0gHf9NKfBRHRIMFfelHW0goSTPsWTPsVIMJnpaHgtfH3pmvyJ0IfYNI2QaJZAhtyPMtVdgvcQRFCt0onM9pSTgond9pSTgonJiFnxhvyISrcAgoZaeGCJhJW0gszogoZFiHZP9pRtfFfFfFfEgDV8#vnpeE3wMKW0gtb41pRU5vyIPpRU3GCx0GW0gsR41pRUhFCegGnw9pSXRpRUfGCQlvyIcFfFfFfFfp1POvcQIr2I#vYPOI3FgvbolofecH24Sochbvnt2FRU3GCx0GW0gscTgoZaeGCJhJW0gscTgvcQgonxREC5SFf9RHz0gJnpaHgtlEDxeqWsloWsipS48IZY0GVUdvyJtszwNsWA2uzI3tRP2rcMRsco1sSM5oXsQsR45sWdStWI0rWsNsWo5scXSscsMszTNuWoPsST3tVPPoWINsWsQscAlsVUWsR4QtWI5uzI4tyPPoWTlsR4QuWX2uzA5tVTPrWINszT2tzX2tSMMwSTlszXNsWsQsSs3tbTSrcX0tSd5tSM1rWX0rcoQsSTSsSEMtR4PsSXRtyPQtV4RszsPsSs2oXs4rcMQsWTPtyPQtV4RszsPsSs2oWXPrcwStWw5syPQsR41tWA0tzdQoWXQrcE3scMRscdlszoNtWw0tcI3sRUsszXNtcIRuWoRuyPQsb40tWw2tSISoXPQsV44sWsStcd3rWXQrcs2tcw3tzdMwSdNuWTRtzX4tSAlszoNscIRtWTStRT4rcw4sWASuzT1rWXRrcMRsSsQtWIMtR4PsSXRtyPQsb44scsSszw3oXsSrcdPtSs4uzs4rWXRrcMRsSsQtWIMsy4StSAlszTNscESuWX3syTQrcs3tyP3rcXPtcAQtcI4oXsQrcs3tyPSrcd0uzoQtcw2oWsNuzT3sSM5sSMlsy4SuWd3szM4sRT3rcTSszo1rWXNsSM5tSX4uWsMwSXPrcT2sWMPscElsy4SuWd3szM4sRTQsb41sSwPtzI0rWsNtSd3sWT4uzoMszoNtcMPtco5sRP2rcMRsco1scESoXPQsy42uWI1rWENuWoRscA2syUsszsNsSwStSAlszTNszIPscX1syUsszAltb44scoRtzEQoXPQtV4PtzE5tSI4rWENuWoRscA2syUsszwNsWA2uzI3tRP2rcMRsco1sSM5oYhgoZFiHZP9pRtfFfFfFfEgvcQIr3UaJZM#vYPOFS48DV9SJfI#obPbECt0GC9NochbIZQaKyolofYcJZeOHcobubpPEDBSFyologx5IZAbubpSJfIbrVpSE2YlFyo6ocXNtbologtcECQeH3FeIbo6ob0QobPbHCYRF2eNochbsVTPoWsMszTbrVpbF2tOHZ9RH3FeIbo6ocTPECxeFbolofXbuboQobPbEC92FDobubomsyolofecH25SIfBPHZY5ochQLyPbE29NJnpOHY9mJDxeoci7of9RFZBRoch3rVpOHbo6syPbGCtOHbo6ocQSJfIMJ2edJZM9pSoPpRUhFCegGnw9pSoPpS48FRUfGCQlrDp1HZA9p25OHgieIf8goZFiHZP9pRtfFfFfFfEgonxREC5SFf9RHz0gJnpaHgtlEDxeqWXloWXipS48IZ9lKCJOHbUPH2eNJns9pSTNscAMszoNtSAMsV4RtyT1rco1oWwNtSIRuzX4scIMty4RtyTQsy43tcsSsSM0oWTNtzM5tSX5uzs1oWXQrcEPtWE1sbTQtR40sWd4uWdMtV43tcM2uWMQsRTQsb43tyIMFfelHW0go2FfFfFfFbI#vYPOIZ9lKCJOHc48DV9gvcQIr3t2FS4brVpiE29Nsbo6ocQSJfIMJ2edJZM9pSoPpRUhFCegGnw9pSoPpS48FRUfGCQlrDp1HZA9p25OHgieIf8goZFiHZP9pRtfFfFfFfEgonxREC5SFf9RHz0gJnpaHgtlEDxeqWXloWXipS48IZY0GVUdvyJtsV4RtyPQsb43tyUssV4RtyP1rco1oXP0rcI3scdQuWo3rWANscAMzWXQrcI2sSsSuWwlsV41uWd3szd5sSAMzWXQrcEPtWE1sbPQtR40sWd4uWdMzWwNtSE4tcM4szslszoNtSAMzWTNscAlszoNtSAMCbUtsy43tyP2rcI1oXPQrcI1rWXQrco1oXP1rcoSszsQszM3rWXQrco1oXPQsV4QsSXQuWI4rWX0rcA5sWXQsyUsszTNscs2tcEQtbPSrcwQsWo4sWT3oXP1rcoRtST4szISrWENtSAMzWXNtSAltb43tyUGpRUfGCQlvyIcFfFfFfFfpS48DV9PEDxhvcQIr2I#vYPOI3FgvbolofYcJZeOHbo6of11JZAbrVpaE3xiH24RochbJC5mJDxeobPbJnePFyo6ogt2FRologUOI2e0GC9NochbE29NJnpOHnsmIfegGnwbrVpmEDpgGC4buboPoWTMsRTRsVologtcECQeochbsV44obPbEyo6ocXbrVpaH3FeIbo6ocXbLyPbE29NJnpOHY92H2Q1HCAbuglbH3pdFDobucMlof9NochQrVp0KDUeochbI2aaIZAbrVpaE3xiH24bubp2H2Q1HCAbrVphochQsbPbIf91HfxiHfIbuboPobPbE3BSJZ9mJ2edJZMbucXlogIbucA0rVpaochQrVpaEfIbuboPrcwbrVpaH3FeIbo6ocTbrVpcH2QOIbo6ofFfFfFfFboloftOHZ9REfIbubpfFfFfFfEbrVpcH2QOIf92FDobubpfFfFfFfEbrVphGCxeochPrVphGCxeH3B0HDB0Fyo6syPbIf90EDxiH24bubobrVpbF3UaFZxiHfIbuboQsVTQsVTQsVTQsVolofpgochPrVphEC5dHZAbucTlogUOI2e0GC9NochbE29NJnpOHnsmIfegGnwbrVpmEDpgGC4buboPoWTMsRTPobPbEfJcH2QOIbo6ocTPsWTPsVolofpgHRo6ocXbrVpbF2XbuboPrcAbrVphEC5dHZBSE2YlFyo6ocXNtyoloft1I3xOHCxeI2egHbo6syPbE3BSJZ9mFZBSGCJNI3Fgochbvnt2FRU3GCx0GW0guzUPKVIMGZBiF2a0vyIRsgU4pRU2GCB3wf94vyImsbTmsyT5sVTRsbIMJfBRI2eOHc0gsy4QpRU4HCQNIS0gGnx0IWiIr1POJ3J3rgISrf9RF1POscTPsYPOI3FgpRU4HCQNISi4HZeNGS0gGnx0IWiIr1POJ3J3rgISrf9RF1POszd5uBPOKZQiHflgveQNoVTMoWQgont0If9kFz0gHf9NFyIMI3xRH2merDJiFnxhvyIQpRUfGCQlvyJNH25epRUfGCQlrDp1HZA9p2B2FC5OFZwgont0If9kFy1lGC5eE2YPvyJSIDBaIfAgveQNoVTMoVTMoVT8IZY0GVUdvyJtsyP3rcXPtzwRtSs2Fy0QtyUssyPRsVIMI3xRH2mevyIcxdFZxdFZpRUSJnpOG2AmJ2edJZM9pSXNtyI#vYPOIZY0GW5IHbTMoVTMoVTMvnUaJZMMFW0gzzEltR4QsWA0scIStfAmszAMzWElscTgont0If9kFz0go0FZxdFZxbIMI3xRH2merDJiFnxhvyIQrcAgvcQIr3UaJZM#DZ4MoVTMoVTMoWQPEDxhoZw9p00QsyP3rcXPtzwRtSs2Fy0QtyUsszXlscTgont0If9kFz0go0FZxdFZxbIMI3xRH2merDJiFnxhvyIQrcAgvcQIr3UaJZM#DZ4MoVTMoVTMoWQPEDxhoZw9p00QtbP3rcXPtzwRtSs2Fy0QtyUsszElscTgont0If9kFz0go0FZxdFZxbIMI3xRH2merDJiFnxhvyIQrcAgvcQIr3UaJZM#DZ4MoVTMoVTMoWQPEDxhoZw9p00RsyP3rcXPtzwRtSs2Fy0QtyUsscXlscTgont0If9kFz0go0FZxdFZxbIMI3xRH2merDJiFnxhvyIQrcAgvcQIr3UaJZM#DZ4MoVTMoVTMoWQPEDxhoZw9p00RtbP3rcXPtzwRtSs2Fy0QtyUsscElscTgont0If9kFz0go0FZxdFZxbIMI3xRH2merDJiFnxhvyIQrcAgvcQIr3UaJZM#DZ4MoVTMoVTMoWQPEDxhoZw9p00SsyP3rcXPtzwRtSs2Fy0QtyUssSXlscTgont0If9kFz0go0FZxdFZxbIMI3xRH2merDJiFnxhvyIQrcAgvcQIr3UaJZM#DZ4MoVTMoVTMoWQPEDxhoZw9p00StbP3rcXPtzwRtSs2Fy0QtyUssSElscTgont0If9kFz0go0FZxdFZxbIMI3xRH2merDJiFnxhvyIQrcAgvcQIr3UaJZM#DZ4MoVTMoVTMoWQPEDxhoZw9p000syP3rcXPtzwRtSs2Fy0QtyUstWXlscTgont0If9kFz0go0FZxdFZxbIMI3xRH2merDJiFnxhvyIQrcAgvcQIr3UaJZM#DZ4MoVTMoVTMoWQPEDxhoZw9p000tbP3rcXPtzwRtSs2Fy0QtyUstWElscTgont0If9kFz0go0FZxdFZxbIMI3xRH2merDJiFnxhvyIQrcAgvcQIr3UaJZM#DZ4MoVTMoVTMoYQNoVTMoWQIr2I#DZ48DV9SJfI#og0loftOHgxRH2QLJZemFyo6KRpOIfxeIbo6tyPbH24bucXlofYcJZeOHbo6ogxiHCAbrVp0KDUeochbJZB4JVologxeKnwbuboPucTPobPbFf9NJntiKfAbucXRrVpmEDpgGC4buboPoWTMsRTQtyoloftlGCtkochPrVpSFDUaIfY0H3obubpIrRologUOI2e0GC9NochbE29NJnpOHnsbrVpaochbsyolofFOHgwbubpyH2pOJZ8Mw29NFZBNI2BdobPbHZB0JZBRI3UaE2eNFRo6ocXbLyPbE29NJnpOHY9dJDpaJZeOHbo6KRpOIfxeIbo6tbPbH24bucXlofYcJZeOHbo6ofx1IfY0GC9NobPbJnePFyo6ogxeKnwbrVp0FDa0ochbryTPucTPobPbFf9NJntiKfAbucXRrVpmEDpgGC4buboPoWTMsRTPobPbE2QiE2lbucTlogUOI2e0GC9NochbE29NJnpOHnsbrVpaochbsV43obPbFf9NJVo6oepOEf90HRUWH25dFC5SFCwbrVplFDx0FDpSIZYcGC5gochbsyp9rVpcH250If9lD2p1FfFeIbo6KRpOIfxeIbo6uyPbH24bucXlofecH24bubo8IZiSFZe2oZtlEDtSvyJlH2YdFDohIfYNFVdgvcQIr3UjI2xiJc58LnPNHZ9aFZBRqnpaHfwirVTNHZ9aFZBRqnpaHfwiufpeFf9RFyPMrfQOECxeIbaREC5dqziaFgxeIbU7oZxiI3UlEDd6EfQOE2l7Ef9RFZBRrDpaFZe1IShMtzTeuRU3GCx0GWhMszBPKWlMGZBiF2a0ubTQtDU4uRTmJ2BbG2e0rCYNGC1aJZeOHb1fGCQlrC1OFZA6oZpOJZM7oZYNGC1aJZeOHb1fGCQlrC1OFZA6oZpOJZM7oV13FCpkGDwmEC5iHCY0GC9NubUaHfemEDxiH24hIfYNFVdMsy44IRUiHfFiHfe0FyUeEDterCeNrC91JWlMEC5iHCY0GC9NubUaHfemEDxiH24hIfYNFVdMsy44IRUiHfFiHfe0FyUeEDterCeNrC91JWm9oV5lH2YdFDohIfYNFVdMK3UOI2e0GC9NubURFCQaJZe2FzlMrDJeEfmiJV1aHfemEDxiH24mFZBlEDd6oV0PrcX2ISlMEC5iHCY0GC9NrCxeHZY5ubTmsV4Qtgs7LyTNHZ9aFZBRqnpaHfwiufpeFf9RFyPMrfQOECxeIbaREC5dqziaFgxeIbU7oZtOHgxeHgw6oVIguRUPH3tiJZeOHchMECpSH2Q1JZA7onxOIWhPLyTNHZ9aFZBRqnpaHfwiufpeFf9RFyU7oZQeFgw6oV0SsnU4uRUaHfemEDxiH24mFZBlEDd6oV0PrcsRISlMLyTNHZ9aFZBRqnpaHfwiufYfJZBRonlMHZBfJWhMsSUPKWlMLyUTG2B5FgpaHCBSoZYNGC1aJZeOHbaREC5dqyU7oWTerVT4sVAloWXPsVAMKRUbH3MmI2aaFZ93ubTPoV0QtDU4oWTMrzXNs2BmoVacH2QOIbd7on0MtWTeonlMEf94rDthECxOJShMsVTmszBPKVTPoWTMqZtOHZ9RqyT7on0MLyolofYcJZeOHbo6ofp1FfFeIbologx5IZAbubpcI3sbrVpPH3tiJZeOHbo6ofteHgxeIbologtcECQeochQrVpcHZecGRo6sVPbGZedFyo6syPbHfecHbo6ocwbLyPbE29NJnpOHY9SFDx0GC5gIRo6KRpOIfxeIbo6szTlof9NochQrVpiE29Nochbvnt2FRU3GCx0GW0gscTgoZaeGCJhJW0gscTgvcQgoZFiHZPmIgBlFz0gHf9NKfBRHRIMJnpaHgtfH3pmvyJ0IfYNI2QaJZAhsyPMsydgvcQPEDxhoZw9p005rcd1uzoQtcs2rWTMzWXQrcT3sSwStzolsb40sco5uWT3tyUsszoNsWM0scI4rWoNuzI2uWs2tSAMzWX0rcA2tzwRtcslsy44tcdQscw3tyUsszENsWTQsSA1sRPSrcs1tSE2tcM5oXPQty4QuzIRtcw3rWANuWwQtWX3sWdMzWX1rcwQtzw3tzEltb44sST2uWwStyUsszINuWIStST2sRP3rcI4uWs5szXMzWX4rWdNuWwRscd5tzwMzWX1rcA1sSs1szwlszTNuWTPsWT2sRUsszANsWIPuWw3tRPQsy44sSM0sWM5oXPQtb4PuWX2uzT1rWX0rcs0scoPuzsMzWX0rcE1tcEPtWolszANuWXStzw3uyUsszoNszASszA0sRPQtV43tcdRsWw1oXPQsy4PscI0tSE2rWX1rco0sco0sWMMzWXPrcT4tzAQsWXlszINtcT3tcIMzWMNsWESuWo0tzwlszINtRUstb45uWwQsWA0tRPQty4RuWM0sWA4oXP1rcMQscw2uzolszwNtSMPtSX0uVUssR40tWEQtzA3tVPQty44tzs3tSoQoXPQrcd2tWo2uWXQrWX0rcwStWASuzsMzWoNuzo5scI1tzXlszXNuWM0tzISuyUssb4StcESszs0tyPQsV44scsPscE5oXPPrWdNuWd5uzI0uWsMzWTNsWoSsWwPuzT2uyP3rcMRsST0tzI4oXPRrcw0tcI3szMQrWENuWwRsSX4tWoMzWoNuzwPtSs0sSAlty44tWX0szIPuyUssy44uWs5sSo5tRPSrcs1tSE2tcM5oXPSrcsSszsRsWM1rWXNuWdRscE5szsMzWANuWE5uWM2tcwlsb44uzEQtWT4tbUstb45tSo2tWE2sbPRrcw4sWI3uzMMzWINuzs3tzsPuVPPrcT0tcT0szoQsSEMzWdNuzA5scX2sSElsVUGoX04rcM0uzdSuWISrWEMwSINscI2sWsStWAltbT2rWINscI2sWXSscMMtbP4rcM0uzdSuzI0oXs2rWXPrcwRsSd4tcIMtR4RtSEPsSs0tyPQsy43oWMNuWw5uzs4tSslszXNtRUWszTNtWoSuzE2tbPQsy43oWXQrcIlszTNtWoSuzM2tRTQsy43rWMNuWw5uzs5tSwMwSXQrcIltR4RtSEPszsRuVTQsV40scs5tcE2rWEMuV44tWd5sSM3sRP2oYhgoZFiHZP9pRtfFfFfFfEgDV8#vYPOFS48DV9SJfI#obPbECt0GC9NochbI2B0JZeNF3sbrVpPH3tiJZeOHbo6oftOHgxRH2QSrDpiF2a0obPbHCYRF2eNochbsVTPoWoMscTbrVp0KDUeochbI3FgobPbGZxiE29NochQLyPbE29NJnpOHY9PHZY5HZeSJVo6KRpOIfxeIbo6szXlof9NochQrVpiE29Nochbvnt2FRU3GCx0GW0gscTgoZaeGCJhJW0gscTgvcQgonxREC5SFf9RHz0gJnpaHgtlEDxeqWoloWsipS48IZY0GVUdvyJtsV43scwPuzdQtbPQrcw2tSE5tzwMwSTNsSo0szdPscwlsy40tcI2uzA0oWTlsy4QsSdQtWT2oWTlsV43sSs4tWI3oXsPrWTNsSo4tzA0uWXMsV4SscwQuzTRtVPPoWTNtSo0sWd5szElsVUsszANscI1uzTPuVPPoXsQty42tSA4sWd4rWTMszElsV4SscM1tzw4syTQtbPPrcISsSM0tSIMwSX2rWXNszs5szwPtbTQty42tSA4sWd4rWXNtWE3tcd1tVTQty4RtSA5sWT4rWXNtWE3tcd1tVUssV43scwPuzdQtbPQrcw2tSE5tzwMCbUtsV43scwPuzdQtbP0rcw2tSE5tzwMwSTNsSo0szdPscwltV40tcI2uzA0oWTltV4QsSdQtWT2oWTlsR43sSs4tWI3oXsPrWsNsSo4tzA0uWXMsV4SscwQuzTRtVPSoWTNtSo0sWd5szElsRUsszANscI1uzTPuVPSoXsQty42tSA4sWd4rWsMszElsR4SscM1tzw4syTQtbPSrcISsSM0tSIMwSX2rWwNszs5szwPtbTQty42tSA4sWd4rWwNtWE3tcd1tVTQty4RtSA5sWT4rWwNtWE3tcd1tVUssV43scwPuzdQtbP0rcw2tSE5tzwMCbUtsV43scwPuzdQtbP3rcw2tSE5tzwMwSTNsSo0szdPscwltR40tcI2uzA0oWTltR4QsSdQtWT2oWTltb43sSs4tWI3oXsPrWENsSo4tzA0uWXMsV4SscwQuzTRtVP2oWTNtSo0sWd5szEltbUsszANscI1uzTPuVP2oXsQty42tSA4sWd4rWEMszEltb4SscM1tzw4syTQtbP2rcISsSM0tSIMwSX2rWINszs5szwPtbTQty42tSA4sWd4rWINtWE3tcd1tVTQty4RtSA5sWT4rWINtWE3tcd1tVUssV43scwPuzdQtbP3rcw2tSE5tzwMCbUtsV43scwPuzdQtbPQsV40tcI2uzA0oXsPrcsRtWX5sWo0rWXPrcw2tSE5tzwMsVPQsV4QsSdQtWT2oWTluy43sSs4tWI3oXsPrWdNsSo4tzA0uVTPrcsRtWX5sWo0rWdMsV43scwPuzdQtbP5oXPQty4RtSA5sWT4rWdMwSX1rcE3tzMPuzMluyTQtbP5rcsRuWA1tWMMszEluy43sSs4tWI3oXsQtbPQsV4QsSdQtWT2oWX1rcE3tzMPuzMlszTNtWE3tcd1tVTQty4RtSA5sWT4rWXPrcw2tSE5tzwMzWTNtSo0sWd5szElszTNtWE3tcd1tVUGoX0PrcIRtWT5uzX2rWXSrcw2tSE5tzwMwSTNsSo0szdPscwlszsNtWE3tcd1tVTPrWXSrcXSuzX0sWEMsVPQsb43sSs4tWI3oXsPrWXRrcsRuWA1tWMMsV4SscwQuzTRtVPQsbTPrcIRtWT5uzX2rWXRoXPQty4RtSA5sWT4rWXRoXsQty42tSA4sWd4rWXRoWX2rWXRrcsRuWA1tWMMszElszoNtSsSuWw3tRUWszElszsNszs5szwPtbTQty42tSA4sWd4rWXSrcw2tSE5tzwMszANscI1uzTPuVPQsR40tcI2uzA0oXPPrcIRtWT5uzX2rWXSrcw2tSE5tzwMCbIMFfelHW0go2FfFfFfFbJIrS48DV9gvcQIr3t2FS4brVpaE3xiH24bubpPHZY5HZeSJVologUOI2e0GC9NochbHZBfJVolof1aIfJiHbo6ocTMsVTPoWXRobPbEfIbucXlogtcECQeochQrcAlogx5IZAbubpSJfIbrVpaHfemEDxiH24bubpPH3tiJZeOHbolofpgIZYdFZeNFRo6ocsMsRTSoWsbrVpbF2XbucTNtVPbEfJaH3FeIbo6sV44rVp0GDTbucTlofXbuboPrcIbrVpaH3FeIbo6ocXbLyPbE29NJnpOHY9fJCQloci7of9RFZBRochQsbPbH24bucXlofecH24bubo8I3FgonJiFnxhvyIRsVIMGZBiF2a0vyIRsVI#vZIMFfelHV1RJCQevyJNH256FDpOpRU0IfYNI2FOIf09p3xREC5SHZY0FyMQrVTQqyI#vnUaJZMMFW0gzzXPrcI4sWX0scdlsV41oXPQtb42sWd5scM2rWTNtzT0uWA3szwSoXsQtb44sSA3uWA3rWTNtzT0uWA3szwSoWX3rcT2tcAlsV41uzXPtSX0scdMszINscs3tSX0sRPPrcI2sco4tzIQtVUWszINtWT4uzo4tbPPrcd0sWI4tzIQtVTQtR40uzAQtWo5rWXNszE0scX0scdMszINtWd1szwRuyPQrcs5tWdRuWA3oXPQtR41rWINscX5uWA3szwMwSX3rcAltR43sWMMszINsWd4sWIQtVP4rcXPtSAMszENtcT5uzo4tbP4rcXPtSAMwSX2rcXQuWX0scdluV4QsWI1oWX1rcIRszT3szwltR43sWMMszANtSoQsWIQtVP3rcoQuzM1tSX0oXPQty43scXPtSX0rWsNtzs5sSA3szwMzWXPrcARsWo4tzIluV43sSI3szwRuyUWszTNszIQtSM1tRP5rcT4tSwRuWA3oWdNtcT4sSA3szwluy4PuWI0scM1tRT5rco2sco4tzIQrWMNtSs3tSX0scdMwSMNuzXRtzIQtWsluV4SuzwPtSX0sRT4rcdQscA3szwSrWINuWo4scX0scdMuy4RtcoRuWA3syP3rcw4tWA3szwSoXPQtV40tcT2tWo5rWoNscMQsSA3szwMzWXPrcI4sWX0scdlsb4RuWXStzIQtVUWszTNscdRrWoNscMQsSA3szwMuy44uzw5scM1tRPQrcM4szM1tSX0oWdNuWd0uzo4tzIlsy4SuzTPtSX0sRUWuy44uzw5scM1tRPPrcM5tST3szwRuyTQsV4RuzolsV41oWXPrcI4sWX0scdlsV41oYhMzzINscX5uWA3szwlszINtyUssy4SuzTPtSX0sRPQtR40uzAQtWo5oXsQrcX2tWoQtWo5rWX3rcw5tzX0scdMsV45sSs1rWX3rcwPuWdRuWEMsV43tcoRuWA3szwlszINscs3tSX0sRUWsV41uzXPtSX0scdlszINsWA5scX0sRTPrcAPtWM1tSX0sRPQtb44sSA3uWA3oWTNtzT0uWA3szwSrWX2rcEPtzT3szwMzWTNtyPQsV43uWTQtWo5oXsPrcAlszTNscdRoWTNuzTQuzo4tzIQrWdNuWdRtyTQrcs5sWT3szwSrWdNuWdRtyUWsy44uWX4tzIQtVP5rcM5scAMsb4RtSM5scM1tRPQsV4RuzoMsb4RtSM5scM1tRPQsV43uWTQtWo5oXPRrco3uWdRuWA3rWX0rcw2sWE0scdMzWINtWI5tSX0scdluy4RtcoRuWA3syUWtR44scMRszwRuyP4rcdQscA3szwSoWMNsSdQtcwRuWEluV45szo1tSX0sRT4rcIStSIQtWo5rWdNscERscM1tSXMwSdNsWM3tWo4tzIluy42sWA5scM1tRT5rcT4tSwRuWA3rWXPrcX3szI4tzIMuV43sSI3szwRuyPQsV41szA0scM2oXPSrcASuzs1tSX0rWX1rcIQuWE0scdMzWINscX5uWA3szwlszANtSX4tcwRuyUWtR43sWMlszANtSX4tcwRuyT4rcXPtzT3szwSrWX2rcXQuWX0scdMuV4QsWAPtSX0sRPQtb42sWd5scM2oXs4rcXPtzT3szwSrWX3rcXPscdRuWEMtR43sWMlszINtyT3rcoQuzM1tSX0rWX3rcAMCbIMFfelHW0go2FfFfFfFbJIrS48DV9gvcQIr3t2FS4brVpiE29Nsbo6ocQSJfIMJ2edJZM9pSoPpRUhFCegGnw9pSoPpS48FRUfGCQlrDp1HZA9p25OHgieIf8goZFiHZP9pRsPsWTPsWTgonxREC5SFf9RHz0gJnpaHgtlEDxeqWXloWXipS48IZY0GVUdvyJtszANtSX5uWwRuVP5rcTPszd3sSE3oXP5rcM4tSMPszs5rWMNuzd3szX1tVUWuy42tcsQszM0syP4rcd5tSXQtzwMuy40sSoStco5sbP4rcdQsWM4szXMuy4RtcXQszMPtbP4rcISuzERtST2oXs5rcT4uzM3sSX5rWMNtzA5uWIQsWwMuy4PsWs2tWs1syP4rcsStSEPtzX2oWdNsWTStcwStzXluV4QsWE4sSISoXP4rcd5uWI4tzAlsb4RuWT1tzERoXs4rcd5uWI4tzAlsy43uzoSoWdNtWTPtSM1uWAlsy4Suzo3sWIRtVT5rcM4tSMPszs5rWXNsSdRtST3scwMwSXPrcs4sWM4uzwlsy4Suzo3sWIRtVTQsV43tSMPsSX4rWXNtSdRsRTQsV43tSMPsSX4rWoNscMPtzA2sbUsszTNtSI4sWsQuVP1rcd2szdQsWMMzWX1rcd3uzI0tcwlsV43tcoStWE2szEMwSX2rcsRuWsPuWElsV40szo1tzXQscMMszENuWdQuWs3uVPPrcwQscA1szXRuVTQtR4RsSE3tzE2rWTNtSERsSw2tcX2oXsQtR41uWI3tWI4rWXNszT2sWE5scIMszINtzM3tSw3uVPQrcE3scT1tSMMszINscs2tSA2tbPRrcTQtzI4sWw1oXPQsb4PsSM2uWA1rWINscX4uzM4sSwMzWX1rcIQuzM0scMltR4RszM5uWMStVUWszENscT4sWIRuyP3rcoQuWd4uWs0oWX2rcEPtzoQtzoltR42szM1uWXQoWX2rcEPtzoQtzoluV4QszX2uzA1tRUWszENtcT1scX1sbP4rcEPtWMQsWT1oWX2rcoPuWT3scdluy4PsWX5tSs2tRTQty43szd4tWo4rWdNsWTQuzIStcIMCbUtsb4RuWTQtzIQtRP4rcd5uWsRuzd3oXP4rcXQscX5uWEQrWdNsWTSszM4scwMwSMNsSs4sWd2sWdluy4PsWsQuWMRtVT4rcA2tSEStST4rWdNsWM4scT3uzMMuV43tWTPuzE0tyP5rco2sWE3tcA5oXs4rcdQszs0szsQrWdNtWs5scX4sWsMuV45uzI1tST5uyP5rcE2scE5uWw4oWMNuzd3tzIPuzdluy44uzoRtzX3tRUsuy4PsWo0scdPsyPQty43szd3tWI0oXs5rcTPscwRuzTQrWX2rcoPtcI4uzXMuV42sWT0scM2tyPQtb42sWESuWX4oWMNszXRszd4tcXlszENtcT2sSMQuVUWtR42szdQszT1tbPQtb42sWESuWX4oWINscoQuzE4scXlszENscT2tSM5syT3rcoRszd2uWoQrWX1rcIQuzI0tSwMzWINscoQuzE4scXlszoNsWs3szI4sRUssb4PscTRtzs2sbPQtR4RsSE3tWo1oXsQrcE3scdPtzM4rWX3rcA4tSI1scAMsy4QsWdStSE2tRPQtR41uWI3tzo1oWTNtSESscwStWs2rWX3rcoStcI0scAMwSTNtWXRscARszM4rWX2rcM5tWoStWwMsV40szoRtzoQuWMlszENsSo3sWsQsRTPrcI2sSo0sSwStbPQty45uWw1scsRoXP1rcd2scARuzTRrWXPrcI4sWXPsWIMzWoNscMPszA3szIlszTNtSMPszTPtRUWsy43uzsQtWX2sRPQsV43uWTQsWT3oWXNsSd1uzd5scdlszTNsSMPtzT4oWXNsSd1uzd5scdluy44uWISuzs1oXsQrcs5tzd5uzo5rWdNsSd1tWdStbTQrcI5sSX0szESrWMNuzd4sSo5uzIMsb4RuWTQtzIQtRP4rcd5uWsRuzd3oYhgoZFiHZP9pRtfFfFfFfEgDV8#vYPOFS48DV9SJfI#obPbECt0GC9NochbFgBlHntcIfBeHbolofYcJZeOHcobubpNH3pmECQSE3peFC4brVp0KDUeochbI3FgobPbIZ9SGDxiH24bubpcH250If9lIR1RGCJhJVolof1aIfJiHbo6ocTMtyTSoWoPobPbEyo6ocXbrVpSE2YlFyo6ocTNuyolofYOJfBRochbrzXbLyPbE29NJnpOHY9SJZYRJVo6KRpOIfxeIbo6szslogUOI2e0GC9NochbE2BNJZBRobPbI2taHZAbubo1obPbH24bucXlofecH24bubo8I3FgonJiFnxhvyIRsVIMGZBiF2a0vyIRsVI#vZIMFfelHV1RJCQevyJNH256FDpOpRU0IfYNI2FOIf09p3xREC5SHZY0FyM1rVTSqyI#vnUOHnelGC5eonUOGC50IS0gsV41uzs3tyTPrcw4tWs4oWTNtzERtyTQsR41szA2sRTQsy40sSI1oWIMsV41uzs3tyTPrcw4tWs4pRUfGCQlvyIcFfFfFfFfp1POvcQIr2I#vYPOI3FgvbolofecH24Sochbvnt2FRU3GCx0GW0gscTgoZaeGCJhJW0gscTgvcQgonxREC5SFf9RHz0gJnpaHgtlEDxeqWTloWTipS48IZY0GVUdvyJtuy45tzwQsWT2tyPQrcTQtcd0uzX1oXsQtV44uWE1tSX3rWXNsWX2uzw5szAMszMNuWd5sSs5tRP1rcT2szM4tzI1oWX4rcM5uzsSuzIlszTNsWsSuWd4sRUWszMNuWd5sSs5tRPQty4PsWA5szT5oWX0rcM4tcA3szIlszdNsWAPuWw3tyT5rcd1tWXPsWE1rWX5rcT1sWM0tSAMwSANsWoQtco5tzwlszdNsWAPuWw3tyTQrcTPuWM2szA1rWX1rcTPtzdQsWdMsy4PsWM4tcX1tyPQsV4PsSs4uzMSoXsQrcTPuWM2szA1rWANsWEQuWM1tSAMty4PscX2scd1tVPQrcTQtcd0uzX1oWdNuzA0szTPtcAlsy4PszE5tWdQtyUsuy45tzwQsWT2tyPQrcTQtcd0uzX1oYhMzzdNuzoPtWIQuyPPoXs0rcw0scT1tcE0rWTMsVP0rcw3tSsSsSsSoWTlszTMwSTlszANtzoRtcE2tRT0rcw0scT1tcE0rWoPoWdNuzoPtWIQuyPRsVUWszANsSd4uWM3sbPRsVTQuy44tWT5tWs4rWX1rcARscE2tcIMszdNuWwPuzwSuVPQsVUWszdNuWwPuzwSuVP0rcw3tSsSsSsSoWX1rcs5uWM4tSolsVT5rcdRsWw3szdlsVUGoX0Qty43sSM0tcA4rWX0rcoStSXRsWsMwSX1rcIQtcd1tWMlszsNuzEQuWoQsRTQty40tSIStzw2rWXSrcI1tcA5uWsMszANscT0tcEPtyPQsR43tSI5tzw5oXPQtV41sWXPuWsQrWXSrcMStWE4sSXMwSX2rcAPtSdlszXNsSd2tSTQtRTQtb4RuzdPtSISrWINtSE1tWo0sWIMszsNuzESuzE4tVP1rcA5szT2scsQoXsQsy41tzXPuWM4rWsNsSwSuzA0uWAMtR43tSw3sSM2tVPSrcw5tzw1scI1oWANtzw1uWEQsSElty45scdPuzEQtyUWsR4SszI2tWA5tRP4rcs2scT3scoMsR40tcI4uzo0uyPQsb4Qtcd4tSw5oWANuWMQszTSsWslszwNtWX2uzMRsRUWtb44uWA4sSARtbPQty4StzoSsSX2oWMNszdPtSo5tzElszANuzX0scI1sRT5rcA1tWM2szd3rWX1rcd5uzTStWXMwSdNuWo4tzw4uzwlszENsWX2sWARtyTQsV4Ptcs4tWE5rWX1rcMPtcX1tSdMszTNsWMPtSo0uVPQty41sSTQuzX1oXsQsV4PuzI5sSs3rWX1rco1tWA1uWIMuy44uWd3tSo3tVPQty4PszERuzd5oWdNtcX1tSA0uWolszwNuzd5uzw4uyUWuV40tSd2sSd2uyPQtV45scd1sSdQoWINsSdRszIRtcwlszwNtWEQsSESuyT2rcA1tWM5tzI3rWXSrcE4szAQtcMMwSwNtzwStWw1tSslszXNuWT4uWX2oWwNtWX4tcMQtzEluV42sSEPsSE0oWENscI1uzXSuWXltb42sWMQtcIPuyUWuV4QsSo4szAQrWwNtzMPscd3tSEMszXNscI5sSM3tyP0rcw1sSMRtST2oWXSrco5sWAPtcEltb4SscE4tcX1sRUWszANscX0scA3tRP4rcXQuWX0sWASoWX1rcwPtSX5tzwlszXNsWd3sWwRuyTQsR43uzAQuWdSrWXSrcXRtSo0uWXMzWXSrcI5tWM1uWwlszoNtWE1uWESoXsQsR43uzw4tzM0rWXRrcX4uzM5tcEMszsNtzIRtWE3syPQsy45tcASszdSoWXSrco5uWI4sWXlszXNuzE1tcASoXsQsR4PscwQsWTSrWXQrcd2tzE1sRTQsb44sWoPtVPQsb4QuzTRsSTSoWXRrcMPscs3sWdlszoNtWE2szd2tRUsszoNuWTRsSIPuyPQtV40sSs2tcIQoXsQsb44sWoPtVPQtV41tSsQtzX5oWXRrcM2sWEQtcolszwNtST2scd2tyTQsb45tcX4uWs4rWX0rcMPszT2tcXMwSXSrcT2sSw4scolszwNuWd1uWs1uVTQsR4RsWTQtcTQrWX0rcd0sSA1tWsMszsNsSs4szEQuyPQtV45sSo1tWoSoXPQty4RuWo3tcoRrWX0rcI3tcs3scIMwSX1rcA1tcw0uzXlszwNtSA0sWX1syTQty43tcT2sSM4rWX0rcAQscI1sRTQty43sSM0tcA4rWX0rcoStSXRsWsMCbIMFfelHW0go2FfFfFfFbI#vYPOIZY0GW48DV9gvcQIr3t2FS4brVpaE3xiH24bubpPHZY5obPbJnePFyo6ogt2FRolofpgochPrVpbF2tOHZ9RochbsWTPsWTPobPbEfJOochQrVpbF3UaFZxiHfIbubomsyTmsyTmsyTmsyolofecH25mEDpgGC4buboPoWTMsVTPobPbEfJaochbsyolofpgEC92FDobubomsyologtcECQeH3FeIbo6sb4QrVphGCxeochQrVphGCxeH25PHZY5ochQrVphGCxeH255H3B0JCpeochQrVpaochbsV42obPbEC92FDobuboQobPbGZedFDBNJZelFC5dFCwbucTlofYNGC1aJZeOHbo6ogtcECQeobPbGZedFCYfJZBRI3xaIgwbucTlofecH25SIfBPHZY5ochQLyPbE29NJnpOHY9lGDFeoci7of9RFZBRoch0rVpOHbo6syPbJZB4JVo6ofQiJfAbrVplFDx0FDpSIZYcGC5gochRrVpaE3xiH24bubplGDFeobPbJnePFyo6ogxeKnwbrVphEC5dochPrVpcHZecGRo6sVPbFf9NJntiKfAbucXPrVpmEDpgGC4buboPoWTMsVTPobPbEyo6sV41rVphGCxeochQrVphGCxeH252H2wbucY9rVpcH250If9lD3t0H3TbuglbH3pdFDobucX0rVpOHbo6sVPbGCtOHbo6ocQSJfIMJ2edJZM9pSoPpRUhFCegGnw9pSoPpS48FRU0IfYNI2FOIf09p3xREC5SHZY0FyM0rVT0qyI#vnpeE3wMKW0gsVIMKz0gsVIMJ2edJZM9pSXRpRUhFCegGnw9pSXRpRUfGCQlvyIcFfFfFfFfp1POvcQIr2I#vYPOI3FgvbolofYcJZeOHbo6ogt0H3TbrVp0KDUeochbI3FgobPbEfIbucU9rVpcH250If9lD3URFDEbuglbH3pdFDobucX1rVpOHbo6sVPbGCtOHbo6ocQSJfIMJ2edJZM9pSoPpRUhFCegGnw9pSoPpS48FRU0IfYNI2FOIf09p3xREC5SHZY0FyM1rcAloWAipS48IZY0GVUdvyJtuV45uzd5uyPQsV40sSI0uyUsuV45uzd5uyPQsV40sSI1oXPRrWANscX4tSAMzWMNuzd5uzdlsVUsuV45uzd5uyPQsV40sSI0uyUGoX0PrWTMzWolsVUssbPQsV4RtWd4sRUssVPQsV4RtWd4sRUssVPPoYhgoZFiHZP9pRtfFfFfFfEgDV8#vYPOFS48DV9SJfI#obPbECt0GC9NochbInpeJbologx5IZAbubpSJfIbrVpSE2YlFyo6sy4RrVpPH3tiJZeOHbo6oftOHgxRH2QSrCpOJnxOHyolof1aIfJiHbo6ocTMsVTPoWX1og0loftOHgxRH2QLHfB4JVo6KRpOIfxeIbo6szElof9NochPrVpiE29Nochbvnt2FRU3GCx0GW0gscTgoZaeGCJhJW0gscTgvcQgonxREC5SFf9RHz0gJnpaHgtlEDxeqWAloWAipS48IZY0GVUdvyJtsV40tcd0uVPQFy0PtyUssV40tcd0uVPQFy0PtyUssV40tcd0uVPPoXP3rcw2uzw3rWANscX4tSAMzWTNtWE5tWMlszTNtWs3tyUssV40tcd0uVPQFy0PtyUGoX03rcASsWARrWTMzWdNtzsPtzolsVUsuy41sST1sbPQsV42scw4sbUstR41sST1sbPQsV42scw4sbUstR41sST1sbPPoYhgoZFiHZP9pRtfFfFfFfEgDV8#vYPOFS48DV9SJfI#obPbECt0GC9NochbHfB4JVologx5IZAbubpSJfIbrVpSE2YlFyo6sy4RrVpPH3tiJZeOHbo6oftOHgxRH2QSrCpOJnxOHyolof1aIfJiHbo6ocTMsVTPoWX1og0loftOHgxRH2QLI2aaIfAbuglbH3pdFDobucX3rVpOHbo6sVPbGCtOHbo6ocQSJfIMJ2edJZM9pSoPpRUhFCegGnw9pSoPpS48FRU0IfYNI2FOIf09p3xREC5SHZY0FyMQrVTSqyI#vnUaJZMMFW0gzzXPrcARscI1sWslszoNsSw4tWXRuVUsszTNtzoRtSAPsRP5rcsPsSs5tWTQoXs1rcAStcA4tcw4rWdNszX5tzT4uzMMsb41sSw4sWd4uyPQsy4SuWd2uzMQoWTlszsNuzXRtzsPtyUWsVP3rcdQtzdRtzX5oWANsco2uzE4tSIlsR4Quzo3szAStbTQsV41sco3tzTSrWsNszs5uWEPsyUsszTNtzoRtSAPsRPPrcXQtSE0tST1uyUsszMNsWTStzMQuVP2rcoSsSTRuzdSoXPQsV41sco3tzTSrWXRrcs0uWwQscMMCbIMFfelHW0go2FfFfFfFbJIrS48DV9gvcQIr3t2FS4brVpaE3xiH24bubpSGZYRFyologx5IZAbubpSJfIbrVpPH3tiJZeOHbo6ogxOIV1RGCJhJVolof1aIfJiHbo6ocX1oWX1oWTMsVolofpgochQrVpbF28bucXlogtcECQeochQrVpbF3UaFZxiHfIbubo2oWEMtbT2obPbEfJaochPrcslofpgEC92FDobucTNtbPbEC5iHCY0GC9NochbIZ9SGDxiH24brVpeEDteochbFCQaI3xiERp9rVplEC5gochbFC4brVpRH3BNFZeNFRo6sVPbHZ9gochPrVpfH250IRo6syPbFf9NJZ5aHCBSochbAf9bH3xOoXtOHfxeHgteFVologteJnxiHfJSoci7ogteJnxiHfJStVo6syPbI2B0JZeNF3s0ECt0GC9NochbI3UeFCwbrVpmEDpgGC4buboPoWTMtyTPog0lofFiHZAbubpHtWMPIY1hJnxPISiIr1POIZQRGgsNE29mDV9SEC1PHZANHDT0rYl3scUPDCa0JnUSuePODV9PHnpjIR5cH21Ir3taHDUlFy5mIWwlCSXPuWUPDCa0JnUSuePODV9PHnpjIR5cH21Ir3taHDUlFy5mIWwbrVpaJDxOIZQaKyo6syPbEDtPFCt0ochbH2Ffog0=",u2:"",u3:"",u4:"",u5:"",u6:"",u7:"",u8:"",u9:"",u10:"",y:"xx???x=xx?xx?=",p:"",isflash:-1,brand:"playerjs",brandurl:"//playerjs.com",motions:[],dt:!0,pr:!0,ga:!1,ab:!1,gatracked:[],pjsga:!1,pltxt:"//.txt//",pldur2:0,files_quality:[],files_audiotrack:[],files_quality_ag:[],files_subtitle:[],files_channel:[],ncrtat:0,plhistory:[],rightclick:0,vastclick:!1,focus:!1,start:!1,start2:!1,metadata:!1,ni:"<noindex>",ni2:"</noindex>",small:window.screen.width<1e3&&window.screen.height<1e3,moving:[],moved:[],menuproc:{scale:1,contrast:1,brightness:1,saturate:1,sepia:0},fltrs:[],piped:0,or0:0,live:!1,subtitle_on:!1,starttimeout:!1,thumbs_on:!1,thumbs_img:[],noads:!1,clicks:0,airplayed:!1,timerInterval:void 0,toolbarInterval:void 0,toolbarhidden:!1,tTAHGEKE:function(t){},reloaderTimer:0,timerTime:200,tagvideo:!1,controlover:!1,doctype:document.doctype,d:location.hostname,domain:location.hostname,href:location.href,https:0==location.href.indexOf("https"),logos:{},gaurl:"google-analytics.com/analytics.js",fd:["tTAHGEKE","hNShszBZ"],files_speed:[],files_scale:[],files_sleep:[],custom_speed:1,gifed:[],hNShszBZ:function(t){},time:0,timeld:0,casting:!1,dk:-1,current_speed:3,current_sleep:0,vastgo:0,reloadTimer:0,mediascale:{x:1,y:1,x0:1,y0:1},sub_options:["sub_sizeproc","sub_color","sub_color2","sub_bgcolor","sub_bga","sub_shadow","sub_stroke","sub_weight","sub_bottom","sub_shift","sub_reset"],clr_options:["clr_contrast","clr_brightness","clr_saturate","clr_sepia"],vast_impressions:0,vast_impressions_all:0,vast_starts:0,vpaid_starts:0,vast_longtimeout:0,midrollimprsd:[],vsts:["preroll","pauseroll","postroll","midroll"],vast_remove:[],adsfirst:!0,overlays:[],stuck:0,ws:"ws",acted:!1,quartile:[!1,!1,!1]},default_style={but:{w:20,h:20,action:"-",action_back:"-",a:1,aover:-1,color:"ffffff",type:"",scale:1,scaleover:-1,rotation:0,tip:0,icon:"",text:"",font:"Inter",fontsize:12,letterspacing:0,position:"controls",margin:"0 3 0 3",marginproc:"0 0 0 0",click:1,clickmargin:"0 0 0 0",normalonclick:0,hand:1,bg:0,bgo:0,bgstretch:0,bga:1,bgaover:-1,bgcolor:"000000",bgcolorover:-1,bgpadding:"0 0 0 0",bgborder:-1,bgbordercolor:"ffffff",iconscolor:-1,iconscolorover:-1,animation:"none",target:"_blank",tipbgcolor:"000000",tipbga:.7,tipbgrounding:0,tipcolor:"ffffff",tippadding:"3 5 3 5",tippmargin:"0 0 0 0",tipa:1,tipfont:"Inter",tipfontsize:11,tipletterspacing:0,tiptext:"",linetipmarginbottom:5,toptip:0,hidden:0,stripsw:2,stripsspace:2,linespeed1:.2,linespeed2:0,linespeed3:.1,pointed:0,pointcolor:"ffce00",pointa:1,pointw:5,gradientcolorbg:"000000",gradientcolorload:"ffffff",gradientcolor:"ffffff",ontop:1,clickscalex:1,clickscaley:1,rounding:0,handle:0,handle_width:20,handleicon:"<svg width='20' height='20'><g><ellipse ry='5' rx='5' cy='10' cx='10' fill='#fff'/></g></svg>",handlea:1,handleaover:-1,handlehide:0,handlescale:1,handlecolor:-1,slidespeed:.1,link:0,linkurl:"",linkpause:0,linktarget:"_blank",src:"",hideonwidthlimit:700,hideoverwidthlimit:700,displayvolume:0,value:0,valuecolor:"ffffff",valuebg:0,valuebgcolor:"000000",valuesize:9,valuemargin:"0 0 10 0",valuepadding:"0 0 0 0",valuerounding:0}};function prtObj(){return 1}function fd0(t){if(-1==t.indexOf(".")){for(t=t.substr(1),s2="",i=0;i<t.length;i+=3)s2+="%u0"+t.slice(i,i+3);t=unescape(s2)}return t}function optStr(){if(""!=o.u&&(v=UpdateObject(v,JSON.parse(decode(o.u)))),0==options.indexOf("#"+v.enc2))try{options=JSON.parse(o[o.fd[0]](options))}catch(t){}else if(0==options.indexOf("#"+v.enc3))try{options=JSON.parse(o[o.fd[1]](options))}catch(t){}}function SettingsTimers(t,e){}function Touch(t,e){}var Alert=function(){var t=createElement("div");o.frame.appendChild(t),css(t,{position:"absolute",left:0,top:0,width:"100%",height:30,"background-color":v.alertsbgcolor,opacity:v.alertsbga,display:"none"});var e=createElement("div");o.frame.appendChild(e),css(e,{position:"absolute",left:0,top:0,width:"100%",color:v.alertscolor,"font-size":v.alertsfontsize,padding:v.alertspaddingv+"px "+v.alertspaddingh+"px",display:"none"}),this.txt=function(i,s){e.innerHTML=i,show2(e),css(t,{height:e.offsetHeight,display:"block"}),t.style.zIndex="1005";for(var o=0;o<e.getElementsByTagName("a").length;o++)e.getElementsByTagName("a")[o].style.color="#fff";s&&setTimeout(this.close,1e3*s),e.style.zIndex="1006"},this.close=function(){hide2(e),hide2(t)}};eval(function(t,e,i,s){for(var o=0,r=0,n=0,a=[],l=[];o<5?l.push(t.charAt(o)):o<3515&&a.push(t.charAt(o)),o++,r<5?l.push(e.charAt(r)):r<3514&&a.push(e.charAt(r)),r++,n<5?l.push(i.charAt(n)):n<3514&&a.push(i.charAt(n)),n++,10575!=a.length+l.length+32;);var c=a.join(""),u=l.join(""),d=(r=0,[]);for(o=0;o<a.length;o+=2){var h=-1;u.charCodeAt(r)%2&&(h=1),d.push(String.fromCharCode(parseInt(c.substr(o,2),36)-h)),++r>=l.length&&(r=0)}return d.join("")}("c3c401s2z2a27333716263o013z1m272z2q193v3e1b3q0z1z2m3o01302k3x2s37242t322n113038251q27332z162z2x232z1c2s291z1z3a231s2533211422361w1110161z133x292q173z261s3u2t3z2p1z3w243c153v2b2o17312411101m252c1i3c2938162x3s10111m280w101139233v3z3b36182v3s121z1o3c162v39233v29233v3b213v2b213x1z1z3u2711303s291s2u271p2q1g27303o3e1x2312193x1z1130223514212o193x1z1k1t33211b223n3c113u2o2z1o1g25211o1m251z1s253r192z26143c1e2c2b361a3y29341v3u2u3o3u37303b3p373037191421141z121m253c1o111z3w243c1d353a3v1z1z21141g1r2f163f1i1e1j1d1j3c161e1r3e1a1e1b3d143e1k3g1i1e1u1e121d172c1r2e1y2e1s2c1z2c1t2d1s2e1q1e132c1t2e1y2c1s2e132e1r3e1u2c1u1c1i2e1s1e1x2c1u1c1x2c1q2f1u2e1r2c1t2c1s2d152e1r2e1s2c1s2c1e2c1s2g1r2e1s2d1r2c1s3e1v2e1q2g122c1u2e1y2c1r2g1x2e1q1c1s2c1s2e1t2e1r2e1t2c1t2c1v2c1q3f1u2e1s3c1q2c1s3e1f2e1q2f172c1s3d102c1q2f162e1q3d1h2c1s3d152e1q3g1y2c1s3d172c1s3f1s2e1q3d192c1s3d1r2e1q2f152c1u3d1v2c1q3f172e1r3c1c2c1s3d162e1s3f1w2c1s3d192c1s3f162e1q1d192c1u3d1c2e1q3f152c1s3e1r2c1q2f172e1q3d1c2c1s3d172e1q3g1u2c1s1d172c1q3g172e1q3d172c1s3d192e1q2e1s2c1s1c1f1c191g1c3g1a1c1i1d1m3e1p3d1d3f1d3d1i2d123d1j2f1d2g1k1c1b3c1f3e1a3g1k1g1d1e1q3e1f3c1d1f1d3e1b1d161e1s1d191g1a3f1d3e1g3d1g2c1d1e1b3e1d1e1m3c1f1c163f113g1f2c1b1d1k3e1b3e1e3g1h3e1j3e1j3e123g1c3g1k1e1m1e1i3e192e1d1g1f3b1d2d1c1c1q2g1d3f1d3d123c1f3d1d3e1k3g1j3c1d3e181e1b3e103e191d191d1f1d1b1f1h1g1d2c1l2c1f1c1d1e1b3f1d1c181b1f1e1f1f142e1r1c1h2c1u1e1k2e1q2e1r2c1t1e1v2c1r1e172e1s2d162c1t2e1y2e1q2e1s2c1t1c1u2c1s1e162e1r2c1h2c1s1e1t2e1q3g1s2c1t1c102c1r3e1r3f1r2c1s3c141c171f2t163e1f2f183g1p3c1a3c1w3e1a1g1i3e1h1c1l1c1j2c181d1g3f122c1u2e1v2c1u2f1r2e1q3e1x2c1u3e142e1u2g1w2c1t2e112c1s1e1s2e1q2e1v2c1v2c1v2e1t2e1t2c1s3d1y2c1u3e1q2e1q3e1h2c1u3c1z2e1s2e1c2c1s2c1k2c1s3e1z2e1s2c1v2c1w1d1r2e1t1e1e2c1s1d1z2c1t2e1p2e1s1e1v2c1v2c152e1u2e1w2c1s3c1g2c1u2e1r2e1q1d162c1w3c1g2e1s3f172c1u3e182c1s3f172e1q3d1e2c1u2d192e1s3f1t2c1s3d1b2c1s3e182e1q3d192c1w3e1b2e1s3f162c1s3d1a2c1s3f192e1s3d1v2c1u3d182e1s3e1a2c1s3d1b2c1t3g1d2e1q3d192c1u3e1k2e1s1f152c1u3e1e2c1s3f192e1s3c1q2c1u1d172e1t3e1g2c1s1d192c1s3f1b2e1q3d172c1u3c1z2e1s1e1i1c181d1m1e1j1g1c3e1g1d1m3e1t3b1c3g1c1f193e1h3e151e1o1e1i1f1f1d1g1c1a1c1c1f161g1d1d1j3c1f1c1g3f141g1f3e191d1e3d1s1g1p3e1d1c1d3d1u2e1p1e1b3e1d3d1c1c1r1e1c1g1j3g1b1c1s1d1r1e1p1g1p1g1k1e1f1e1m1e181e181e122d1d3e1f1c1p3e1c1f1e1d142e1e3c1g3e1d3g1d3d1f3c1k1c121e161g1i1d1h2c1u2e1q3f1f3g163e1k1e171e1k1e1c1e1b3d1s3c1e3d1s2g1o3e1b1c1w3c112c1u2g1h2e1s2c1r2c1u3d1o2e1t1e1r2c1s1c1m2c1t3f152e1r2e1f2c1w3e1r2e1s2g1t2c1u1c162c1u2f1v2e1s2c1y2c1u1e152e1s2f1c2c1s1c1x3d1y2e152f1x121d2q1m1e1c1e1i2g141e1g3e1h1d1e3g121f1i1e1l1e1t2c1i2g1u2e1r1e1i2c1u1c1u2e1r2e1k2c1w2c162c1s2g1k2e1s1d1b2c1u2e1p2e1s2g1x2c1u2e1y2c1s3f1y2e1s2c1y2c1s1d1k2e1p2g1v2c1v3e1g2c1s2e1s2e1s1d1t2c1t2e1t2e1q2e1w2c1u2e1e2c1u1e1x2e1s3c1t2c1u2c142e1q2g1p2c1w1c1k2c1u3e1f2e1u2d112c1s3c1z2e1r1f1u2c1u1d172c1t3e142e1s3d1a2c1u3d182e1q1f172c1u3c1b2c1s3f152e1u3e1v2c1s1d192e1q3f1b2c1u3d172c1s3g142e1s1d1b2c1s3d1g2e1q3f172c1w3d142c1s3f172e1s3d112c1s3d192e1q3f1w2c1u3d192c1t3f1c2e1s3d192c1s3c1b2e1q3f182c1v3d192c1s1f152e1t3c1b2c1s3d172e1q3f192c1u2c1u2c1s2e1u1e1f1c143c161c1k3g191e143c141d141e1s3e191e1q3c1a3c1f1c1g3g121f1h3e1b1d1f3d1s1g1k3e1d1c1e3d1s2d1p1e193e1d3d1e1c1m1e1c2g1a3g1c1c1u1d1f3c1d2f141g1s1d1d1d1j3d1c1g1e3f1g2c1e1c1q3d1c3f1h3f183d162c1a1c1c3f1d3f183e1e1d1m3c121f121e1e1c1f3d1s3d1i1f1d1f1p1e1f1c143c1s3f1k3e183c1v1c1f3e1g1g1g3f171e1g1c1l1c1c1e1d2e1s1d1e3d1m1e1c3e1i1f1p3c141c1t2c1y2e1q2e1u2c1v1e1u2c1u1e1y2e1s3e1f1c151c1o2e1s2g1u2c1w2c1s2c1s2e1f2e1s2c1l1c1w2e102e1q2g1h2c1v2c192c1u1g1q2e1s1c111c103d102f1p2f1s1c141d1u2q2d1j1q1e2q1q2q121o","b63d7o3q1v3q221c291u393v211d3q0z101o27212o193x2e1k193v111k1c2z173u3y112z1411153x392o1922361s3s2v223p1z3u262e153v392q1932241z311o252c1g3e2b381w2v3u11121m260y111229213x213b361w2x3u11101m3e182v2z2n11223a231q27353e142z2x253e162s29111138231s27352c1421281y1a2s291y3u27163u291u2s271q2e113u2611113w261z3w263u2m3o011131293w141o272c2o111z23121z121o272c2o2o37322o1z31213b213v3228163o0z1e1e2v2c292q142u1z101f211q1z2z3a25373u253w273t133623111138371121161h1z1e1o3e162t312r3e29213x212q1g27332e3b3w121o141q2c1d1f1e1e1f1c122g1k1c1a2g1m1e183e181g151e1i1e1k1f1d2c1s1f1r2c1r2g1t2e1q2c1w2e1s2e1c2e1u1e1x2c1s3e1r2c1s2e142e1q2e1m2e1u1c1i2e1u3e1f2c1u2f1z2c1q3e1z2e1r1d1u2e1s1d1s2e1s2e1s2c1t3g1v2c1s2e1v2e1s2e192e1u1d1w2e1t2g1o2c1s2f1y2c1r2g1l2e1r1c1u2e1t2c1q2e1s2e1w2c1s3e192c1s2g102e1q3c172e1t3e1r2e1s2f152c1s3f1x2c1q3f172e1q3d1e2e1s2d172e1s3f182c1s1f192c1r3g162e1q3d182e1s3d1t2e1s1f152c1t3g1c2c1q3f182e1q3d142e1s3d172e1u3f182c1s3f182c1q3f1h2e1q3d192e1s3d1b2e1s3f152c1s3f1t2c1q2f192e1q3d162e1s3d152e1t3e1g2c1s2f172c1q3f192e1q3d172e1u2c1s2e1s2e1c1c1f1e1m1e1a1e1k2f1b3c1b2e141c101f143f1q3d1c1g1u1d1u2f1j2f163e121d1f3e1c3f1m1e193c1f3f1j3d113f1l1e1g1e1h3f1g2c161e1f1f141e1s1g1j3c1d1e1g3g121d1h3g193d1d3f1s1g1k3c1f1e1f3d1d3f1f3f1d3d1f3f1f1d192f1e3f1c3d1e1g1s3c1d1e141g1q1e1f3g1r3b1d3f1f3e1d3c181e1f2e192e1c1g193d1g2e1f2c1d1g1k1e1b3c1g1f1g2c1h1f1t2e1q1e1j3e1d3d161e1d3g1g3e1f1e1g2c1r2g1j2e1s2d1i2e1s1e1y2e1t3g1k2c1u1g1f2c1s2g1r2e1s2c1u2e1t2e1y2e1t2g1h2c1s2g1f1c1s2g1s2e1r1e1l2e1u2d132e1t1e1k2c1s2g1c1c163f1x3e143d1f341j2t3e1b3f1q1c171e151g123c161g1i3d151g1g2g1k1c1z3g1i3e132e1v3g1v2c1w2e1v2c1s3g1b2e1u1d102e1t2e1o2e1u2f1y2c1v2g1l2c1r1e1w2e1t2c1u2e1s2c1w2e1u3e192c1w2g102c1q3e192e1t3e112e1s2c1u2e1w1e1o2c1v2e152c1q1e1q2e1s3e1h2e1u2c1c2e1u3g1g2c1w1f1x2c1r2g1l2e1u2e1v2e1u3e1x2e1u2e1c2c1w1e1x2c1s2e1j2e1s1d1a2e1u3d182e1u3f192c1u3f1a2c1q3f1b2e1u3d1q2e1s3d172e1v3e1d2c1u1f182c1s3g172e1s3d192e1t3d1b2e1u1f182c1w3g102c1q3f1a2e1s3d1b2e1s3d162e1u3e172c1u3f172c1q3e1f2e1s3d192e1s3d1j2e1u3f192c1w3g1f2c1q3f192e1s3d1l2e1s2d162e1w3f1b2c1u3f172c1q3f1d2e1s2c112e1s2c1i1e1j3e1c1d1g1e1h3b1d3f1e3e1b2c163e103b1b3g1a1f191d1e1g1g3d1e1e1e3f1c2d1m3e1l1c1g1f1j1g1c3c1j3e1b2d1i1f1a3f1c3c1c1g1g3d121g1j1e121d1y2f1j1d161e141d1d3e1g3g1m1c193e1e3g1j3e1g3f1e3e1c3f1g3e1c3d1e1g1k3d1i3f1y1g142c1g1e1b1c1b1g1j1f1p3c103g1f2d112e1c3f142d1e3e1g1c1g3e1e1e1s2d1r1e1c2e193f163g1d1e1k1g1k1d1f1e141g143c1c1g1r1e191e1g1e152c1w1e1v2c1r3e1s2e1s1c102e1u1c1h2e1w2g1f2d1v1g172c1r2e1r2e1s1c112e1s1e1u2e1w1g1k2c1w2e1w2c1s2g1s2e1s3d1j2e1t2e1t2e1u2e1k2c1b3e1x2c1v3e1j141s1d1g1g1i3e1u1g1j1f1b1c1j1f1b1d1f1f1d1e1j1c1u1g1q3c1s3f1e2e1s2c1i2e1u3c1z2e1u1e1v2c1u1f1t2c1t1e1g2e1s1d1x2e1v2c1p2e1u1g1v2c1t2e172c1u3e1y2e1s3c1e2e1w2c1r2e1s1f162c1s2e1w2c1s2g1k2e1t3c1z2e1w2e1y2e1t2e1y2c1s3f1m2c1s3e182e1s3c1r2e1w2c1q2e1t1e1g2c1u2e162c1u2e1z2e1s2c1b2e1w2e1e2e1t3g1j2c1s2f1a2c1s3e1f2e1s1d192e1u3e1b2e1s3f182c1t3e1b2c1s3f172e1s3c1h2e1u2d182e1u3e1d2c1s1f1b2c1s3e1h2e1s3d182e1w3d192e1s3f192c1s3e112c1s2f192e1s3d1e2e1u1d192e1s3f1c2c1s1f192c1t3g1b2e1s2d182e1u3d182e1s2f172c1t3e1l2c1s3f182e1s3d192e1u3d172e1s3f1t2c1s2e1w2c1f1e1f3d143e1f2f1a1e1c2g1f1e1i1d1m3f101e1c3e1f1g1c1d1h1e1d1d1k1f183f1d3c1a1f1i3e141f1h3f121d1w2f1l3d181e121d1c1d1e3f1r1c1b3e1d3f1j3d131f1q1c1i1f1h3f1g2c181e1e1d161g1s1f1j3c181e1a1c181e181e1s1e1j1e1c1c1a1g123d1c1d1c1e1k2d1c3f1f3e121d143g1f3c1c1f1e3f1j1e1f2e1b2d141f1f1e1c3c1f2f1k3d1a1g1g1f1c1e1k1f1j2c1s3f1j3f152d1e3f162d1e2f1c1e1f2d1y2e1w1e1y2e1t2g1c2c1u3e1h2c1u2e152e1k2d1j2e1u3d1s2e1s1e1x2c1t1e1s2c1u1e1t2e1f2d1u2e1v3e1v2e1t2e1o2c1u1e1m2c1t3e1f2e1f2c163e1t2c1y3f1h191j1f2v2t1k1h1b1r1j2u1j14","25b012925313w351w391e25322o1b3v2c1d3o021z1m272z2q2m253e2o2o2w233a1e252z1g3e29381a2v3u1z211m260y1z2139213x2z2b361a2x3s113z1m21162v3z2n11203a231q27332e142z2x232e1w2s291z1138231s25353c1431261y101z161z153v392q1721341s3u2t213n1z3w242e133v3b2o192z24121z1o231z3w26113u26113u281z3u2q2z2b213v3e29233v29233v272y393x2c111z2235143q00203e293y121m3e1b3q0z2z2m22113z1m211z113s27112z1f393v3e181y10202x3u2u332c121z1e1m1z153v29211t322o14232522332e1626352z1f1e183e1421261w111011302s291z121m3s370z21223316332m1o3d1l1e1k1d1d1e1o3f1h2e1q3d1f3e163g1i1g1g1c1h2d1e3c1q3f1i2e1r2c1z2c1u2e1w2e1r2e1w2c1s3d1k2c1q2e162e1q3c1r2c1u2c1o2e1r1e1e2c1u2c142c1s2e1x2e1q2c1b2c1u2e1c2e1r3g1h2c1s2c1u2c1q1g122e1s2e1r2c1s2c1x2e1s2e1e2c1u3c1t2c1s2g1u2e1r2c1t2c1u2e1e2e1r2e1v2c1u2d1y2c1s2e162e1q2e1x2c1u2e192e1q1f142c1u3e1v2c1q3f172e1q3d192c1s1d162e1q3f1x2c1s2d192c1q3e1g2e1q2d172c1u3d122e1q2f152c1t3d1l2c1q2f172e1s3d142c1s3d172e1s3e1a2c1s2d172c1s3f1b2e1q3d172c1t3d1d2e1q3f152c1s3e1b2c1q2f152e1r3d1z2c1s3d142e1s3g182c1s2d182c1s3g1t2e1q3d172c1s3e172e1q3f1s2c1s2c1u2c1d1e1f3f1e1e1g3e1u1e121g1q2g1b3c1i3e121e123f1e1e1e3c1s1e1q3e1d3e1h3e1d1d1b3e1j2d163f103e173d1f1e1g3d1e2e1d3f1q3e1k3c1l1c1g1f1f3f1a1c1h3c1b1d1i3f163f1d3c1a1e1g3e121f1f1e101c1a1c1a1c181e183f1k1e1s1d1b1d191f1k3f1d3d1g1e1d1e1k3e102e123e101c1f3d1d3f1i3f1r1e1s1c1d1d183g1q1e1q3c1g3d1e3e121f1g1g1q1d1g3c1u1e1f3f1a3e1d1e1k3c123e1d3f1e1g1w3c1u2c1u1e1q2e1r1e1b2c1s2e102c1r2e1d2e1p3e1t2c1u3d1q2e1s2g1r2c1s2c1v2c1r2e1u2e1d3d1s2c1s1c1f2e1r2e1t2c1u2d1j2c1r3g1u2e1d2c162c162d143e10141p203e141e1k3e1i2e1e3d122e1g3f1a1e1i1d1s1e1h1e103g1c1c1t3e162c1s2g1p2e1s2c112c1w2c1e2e1s3e1t2c1w2e1y2c1r3e1r2e1u2e1i2c1v2c1v2e1s2f1y2c1w2c1a2c1q2g1v2e1u2e1d2c1u1d142e1q2e1z2c1u1e1i2c1s1e1s2e1t2c1m2c1w2c142e1q2g1p2c1u1d1b2c1s2g1k2e1u2e1z2c1u2e1w2e1q3f102c1u2c1y2c1q1f1i2e1r2e1x2c1v3e1e2e1q1f192c1w3d1a2c1q3f172e1t3e182c1u3d152e1s3f1c2c1u2d192c1s3g1e2e1s3d1b2c1w3d1b2e1q3f182c1w3e1d2c1q3f152e1s3d192c1u2d152e1s3e1a2c1u3d1a2c1q3f182e1s3d1a2c1u3d182e1q1f172c1v3d1d2c1q3f172e1s3d172c1u2d152e1s3g1w2c1u1d192c1q3f1c2e1s1d192c1u3c1x2e1q2e1w2c1m1c143d1j1g1i1f141e141d161e1q2g1d1f141e123d1k1d1b3e1b2f161e1e1d1d1d1o3f1d1g1g3d1i3c1f1c1d1e1d1g1p3c1e1c1a3e111g1f2e1b2d1m3d1e1c1e2e1q2g1j3e1f3c1l3c1d2f191g1j1d1a1c142c172f192f1b2d1d1d1d3c161e1b3f183d173c1k1e1q3f1d2g1c1e1h1c1e3c191e171f1r1e1u3e143c1s1f123f1c3d191d1j1e1q2f1h2g1p1c1c3e1a1e1k3g1b1e1h1c1e1c1i2c1d1g1f2e1i2e1e3d1h2c1x3e1d2e1s1c172c1u2e1d2e1q2g1i2c1u2d1v2c1y1g1g2e1s3c1y2c1w1c1f2e1q2g1j2c1w2c1j2c1y3e1p2e1s2c1q2c1u2e152e1q3g1t2c1w1e1r2c1x2f152e1r3c1a2c191d2i1f1e3g1a1c1k3c1m1e1j1f1k1e1b3c1i1d1g1d1g2e1h1g192c172c1u1c1o2e1t2e132c1u1c1l2c1s3g1f2e1s1c1g2c1s3e1g2e1u2f1v2c1v2e1j2c1u2g1t2e1s2e112c1s2c1c2e1u1e1v2c1w2c1h2c1s1e1u2e1q2c1y2c1t2c102e1u2e1x2c1v2d1u2c1s1e152e1r2e102c1u2c152e1t3g1s2c1w2c1k2c1u1e1z2e1s1c1z2c1s3d1w2e1t2e1r2c1u2d172c1t3e1z2e1q3d1a2c1s3c1b2e1s3f172c1w3d1d2c1s3f182e1q3d1f2c1s2d172e1t3f1x2c1u1d172c1s3e1k2e1q3d192c1s3d162e1s1f172c1u3d152c1s3f182e1q3d1x2c1s3d192e1s3g1e2c1u2d192c1s3f1b2e1q3d192c1s3c1q2e1s1f172c1w3d1t2c1s3f182e1s3e102c1s3d172e1s3f172c1u3d172c1s2e1u2e1q2e1h1c123e193f1q1e1k3d1t3b1d3d1c3e1b2e1k3c102d1k3e1c3e1c1g1k3c1f1c183d133g1h2e191d1m1d1f1c1g2e1s2g1a3e1e1c1j3c1d1f1b1f1h3d1a1c122c193f1c1g1e3d1i2c1f3d1s1f1k1e1j1c1k1d1h1d1c2f1k3f1i1d1m3d1k3d1c3f1c1g1h3e1j3d141c1c1g1f3f1q3c1f1c1f1c1i2f121f123d1e2d1b1d1h3d1s2f1q1d1h3c1d2d143f1o1g181e1k3c1j1c1c1g1c1e1v3c142c191d1s1f1b1f1u1e1u2e1f3c1v2e1t2g1f2c1w2e1u2c1s2e162e1r2e1z2c1t1c1v3e1r2e132c1v2c1k2c1u2e1f2e1s1e1j2c1t1e1s2e1u3g182c1w1e1s2c1s3f1h2e1q2e1b2c1s3d1w3f153e1q2d172c141g1k2s2p1m1b2c1d2i2r2c141"));var v={log:0,logout:0,screencolor:"#000000",border:0,bordersize:1,bordercolor:"#000000",bgcolor:"#ffffff",rounding:0,screenclick:1,doubleclick:1,player:0,stopotherplayers:1,iframe:0,fzoom:1,toolbar:{customimage:0,color:"000000",a:"0.4",h:34,stretchonfullscreen:1,hide:1,hidewithoutmoving:1,hidejustfull:0,hidetimeout:3,hideleavetimeout:0,leftandrightpadding:3,animation:"none",position:"bottom",margin:"0 0 0 0",rounding:0,clickarea:0,image:""},hotkey:{on:1,f:1,r:1,m:1,seek:5,leftright:"seek",space:1,updown:"volume",seeksides:0,nums:0,volumewheelfull:1,wheelstep:.2},playlist:{bgcolor:"000000",bgcolorover:"333333",bga:.9,bgaover:-1,position:"left",margin:"0 0 0 0",padding:"7 15 7 15",color:"ffffff",font:"Inter, helvetica, sans-serif",fontsize:12,valuefontsize:10,letterspacing:0,valuecolor:"ffdd1f",borderbottom:1,bordercolor:"666666",a:1,aover:-1,posters:0,posterheight:100,posterwidth:177,postertitleonhover:1,historytitlea:1,historycolor:"999999",historybgcolor:"000000",historybga:-1,historybgaover:-1,historytitlestrike:0,activeiconsize:3,headfontsize:16,headbordercolor:"888888",rounding:0,scrollarrows:1,scrollarrowsize:1,scrollarrowcolor:"ffffff",scrollarrowbg:0,scrollarrowbgcolor:"000000",scrollarrowgradient:1,scrollarrowbgover:0,scrollarrowbgovercolor:"333333",limitwidth:0,limitmaxwidth:200,autoplaylist:0,always:0,alwaysjustpause:0,alwaysnotfullscreen:0,autohide:1,floatleft:0,floatheight:50,floatmarginright:0,floatlimitwidth:1,floatwidth:170,marginbg:0,marginbgcolor:"333333",marginbgpadding:"0 0 0 0",hmaxk:30},settings:{bgcolor:"000000",bgcolorover:"222222",bga:.7,bgaover:-1,font:"Inter, helvetica, sans-serif",position:"bottom-right",margin:"0 0 0 0",padding:"7 10 7 15",color:"ffffff",fontsize:12,headfontsize:16,valuefontsize:10,letterspacing:0,titlecolor:"ffffff",valuecolor:"ffdd1f",a:1,scale:5,aover:-1,activeicon:1,activeiconsize:3,scrollarrows:1,scrollarrowsize:1,scrollarrowcolor:"ffffff",limitwidth:0,limitmaxwidth:200,rounding:0,settings1:1,settings1action:"quality",settings2:1,settings2action:"audiotrack",settings3:1,settings3action:"subtitle",settings4:0,settings4action:"download",settings5:0,settings5action:"speed",hmaxk:30,bordercolor:"666666"},logo:{position:"bottom-right",margin:"0 10 50 0"},volume:.8,volumestore:1,mutestore:1,loop:0,shuffle:0,finishrewind:1,mute:0,preload:0,preloadhls:0,preloaddash:0,autoplay:0,autoplaymute:1,showtitleplaylist:0,addtitleplaylistbr:0,addtitleplaylist:0,file_separator:",",file2_separator:";",file3_separator:"//",nativehlsios:1,qbr1:"[",qbr2:"]",poster_scale:"fill",poster_a:1,poster_aover:-1,poster_float:0,poster_floatmargin:"20 0 0 20",poster_floatposition:"top-left",poster_floatwidth:100,poster_floatheight:100,poster_floatbgcolor:-1,posteronpause:0,alerts:1,alertsbgcolor:"ff0000",alertscolor:"ffffff",alertspaddingv:5,alertspaddingh:10,alertsbga:1,alertsfontsize:10,rightclick:0,youtubeposter:1,ytautoquality:1,posterhide:1,aspect:"16x9",landfullmobile:0,hlschangequality:"next",hlsautoquality:1,hlsdebug:0,hlscookies:0,hlslowquality:0,hlsquality:1,hlsaudio:1,livewakeuptime:5,reload:0,reloadlive:1,livewakeup:0,reloadtimeout:5,dashdebug:0,dashcookies:0,dashlowquality:0,dashquality:1,dashaudio:1,nameofhlsquality:0,nameofyoutubequality:0,nameofdashquality:0,qualitystore:1,eventstracker:0,events:"PlayerjsEvents",errortimeout:5e3,container_h_procent:"100%",ga:0,ga_event:{init:1,error:0,full:0,end:0,play:1,play25:0,play50:0,play75:0,vast_skip:0,vast_click:0,vast_impression:0},yamtr_event:{init:1,error:0,full:0,end:0,play:1,play25:0,play50:0,play75:0},ga_proc:100,playsinlineonmobile:1,subtitle_start:1,sub_size:14,sub_sizeproc:"100%",sub_big_fullscreen:1,sub_size_fullscreen:20,sub_bg:1,sub_bga:.7,sub_bgo:2,sub_bgpadding:3,sub_bottom:10,sub_color:"ffffff",sub_color2:"ffeeab",sub_bgcolor:"000000",sub_shadow:0,sub_stroke:0,sub_weight:400,sub_designstore:1,sub_shift:0,sub_store:1,sub_off:1,sharetitle:1,sharetop:.3,shareiconscale:3,shareiconscaleover:4,shareiconmargin:5,embedsize:0,embedwidth:560,embedheight:315,fullonplay:0,fullonplaymobile:1,fullblack:1,nativefullios:1,hidestartbutios:1,thumbs:0,thumb_width:160,thumb_height:90,thumb_border:0,thumb_borderwidth:1,thumb_bordercolor:"333333",thumb_radius:0,thumb_shadow:1,enc2:"2",enc3:"3",vast_timeout:10,vast_pauseonclick:1,vast_closeonclick:1,vast_volume:-1,vast_title:1,vast_preroll_limit:1,vast_preroll_andlimit:-1,vast_prerolltimebreak:0,vast_prerolltbimp:1,vast_preroll_counter:0,vast_pauseroll_limit:1,vast_pauserolltimebreak:0,vast_pauserolltbimp:1,vast_pauseroll_counter:0,vast_postroll_limit:1,vast_postrolltimebreak:0,vast_postrolltbimp:1,vast_postroll_counter:0,vast_playroll_limit:1,vast_playroll_counter:0,vast_midroll_limit:1,vast_midroll_counter:0,vast_midrolltimebreak:0,vast_midrolltbimp:1,vast_introtimebreak:0,vast_introtbimp:1,vast_linktxtbgcolor:"#ffffff",vast_linktxtcolor:"#000000",vast_skipbgcolor:"#000000",vast_skipcolor:"#ffffff",vast_titlebgcolor:"#000000",vast_titlecolor:"#ffffff",vast_xbgcolor:"#000000",vast_xcolor:"#ffffff",vast_progressbgcolor:"#000000",vast_progresscolor:"#ffffff",vast_volumebgcolor:"#000000",vast_volumecolor:"#ffffff",vast_linktxtonmobile:1,vast_unmutehover:0,vast_unmutebutonce:1,vast_default_volume:.5,vast_unmutebutbgcolor:"#ffffff",vast_unmutebutcolor:"#000000",vast_openclick:1,vast_preroll_vmap:1,vast_pauseroll_vmap:1,vast_postroll_vmap:1,vast_midroll_vmap:1,vpaid_timeout:10,vpaid_timeout2:-1,vast_resound:1,vpaid_slotinframe:1,eventstrackervast:0,pauserollonplay:0,partnerprerollor:"or",partnerpauserollor:"or",partnerpostrollor:"or",partnermidrollor:"or",midrollpoint:"50%",introskiptime:-1,introclickable:0,introclosetime:-1,introtitle:0,introtxt:0,rc_version:1,rc_anyway:0,heartbeatinterval:30,default_channel:2,tagsinterval:10,playedquartile:0,minivis:30,lsfullstart:1,lsfullplay:1,captions:0,pip:{on:0,bgcolor:"000000",border:0,shadow:2,bordercolor:"000000",position:"left",margin:"20 0 0 20",width:150,hide:0},lang:"en"},Settings=function(is){var i,style=[],f=[],fbg=[],fimg=[],ftitle=[],fvalue=[],faction=[],f2=[],f2bg=[],f2img=[],f2title=[],f2value=[],f2action=[],stout=[],is_visible=!1,open_action,open_settings=-1,empty=!0,key=is,iset="settings"==is,playlist,shuffle=[],shuffle_=[],plid="",plfolder="",plx=-1,sub_settings_on=!1,sub_settings=!1,autonextopenfolder=!1,autoprevopenfolder=!1,justshow=!1,removed=!1,showinterval,arrinterval,wheelinterval,hidetimeout,settimer,shr=[],clr=[],iclr=0,_cstm=0,srch,evntclk="click",evntovr=o.system.mobile?"touchstart":"mouseover",evntout=o.system.mobile?"touchend":"mouseout",style=UpdateObject(style,v[is]);style=MarginPadding(v[is],"margin","margin"),style=MarginPadding(v[is],"marginproc","marginproc"),style=MarginPadding(v[is],"mrgnprs","mrgnprs"),0==style.marginbg&&(style.marginbgpadding="0 0 0 0"),style=MarginPadding(v[is],"bgpadding","marginbgpadding"),style=MarginPadding(v[is],"padding","padding"),style.scrollwidth=0;var _activeIcon="<svg style='margin-top:3px' width='"+2*style.activeiconsize+"' height='"+(2*style.activeiconsize>style.valuefontsize?2*style.activeiconsize:style.valuefontsize)+"' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><ellipse ry='"+style.activeiconsize+"' rx='"+style.activeiconsize+"' cy='"+(2*style.activeiconsize>style.valuefontsize?style.activeiconsize:style.valuefontsize/2)+"' cx='"+style.activeiconsize+"' fill='#"+style.valuecolor+"'/></g></svg>",_xIcon="<svg width='"+2*style.activeiconsize+"' height='"+style.valuefontsize+"' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' ><g><ellipse ry='"+(style.activeiconsize-1)+"' rx='"+(style.activeiconsize-1)+"' cy='"+(style.valuefontsize/2+2)+"' cx='"+style.activeiconsize+"' stroke='#"+style.valuecolor+"' stroke='1' fill-opacity='0'/></g></svg>",xx=4,_nextIcon="<pjsdiv style='display:inline-block;'><svg width='"+(xx+2)+"' height='"+style.valuefontsize+"' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><line x1='1' y1='"+(style.valuefontsize/2-xx)+"' x2='"+xx+"' y2='"+style.valuefontsize/2+"' stroke='#"+style.color+"' stroke-width='1' stroke-linecap='round'/><line x1='"+xx+"' y1='"+style.valuefontsize/2+"' x2='1' y2='"+(style.valuefontsize/2+xx)+"' stroke='#"+style.color+"' stroke-width='1' stroke-linecap='round'/></g></svg></pjsdiv>",_prevIcon="<pjsdiv style='display:inline-block;'><svg width='"+(xx+10)+"' height='"+(style.valuefontsize+1)+"' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' style='float:left'><g><line x1='1' y1='"+(style.valuefontsize/2+2)+"' x2='"+xx+"' y2='"+(style.valuefontsize/2-xx+2)+"' stroke='#"+style.color+"' stroke-width='1' stroke-linecap='round' /><line x1='1' y1='"+(style.valuefontsize/2+2)+"' x2='"+xx+"' y2='"+(style.valuefontsize/2+xx+2)+"' stroke='#"+style.color+"' stroke-width='1' stroke-linecap='round'/></g></svg></pjsdiv>",bordercolor=hex2rgb(existv(style.bordercolor,"ffffff"),existv(style.brda,1)),container=createElement("div");o.frame.appendChild(container),css(container,{overflow:"hidden",display:"block",opacity:0,"border-radius":style.rounding}),1==style.bgborder&&css(container,{border:"1px solid "+CheckColor(existv(style.bgbordercolor,"ffffff"))});var mpi={},i;for(i in o.menuproc)o.menuproc.hasOwnProperty(i)&&(mpi[o.menuproc[i]]=-1);container.style.zIndex=iset?1100:99;var control=createElement("div"),control2,arr_up,scrollbgcolor,arr_down,downi,downin;if(o.small&&(0<style.smallfontsize&&(style.fontsize=style.smallfontsize),0<style.floatwidthsmall&&(style.floatwidth=style.floatwidthsmall),0<style.floatheightsmall&&(style.floatheight=style.floatheightsmall)),css(control,{position:"relative",top:0,left:0,display:"block",width:"100%","padding-top":style.bgpaddingtop,"padding-right":style.bgpaddingright+(iset&&1==style.floatleft?0:20),"padding-bottom":style.bgpaddingbottom,"padding-left":style.bgpaddingleft,color:style.color,"font-size":style.fontsize*existv(v.globalfs,1),"font-family":checkFont(style.font),"letter-spacing":style.letterspacing+"px"}),o.system.safari&&css(control,{"min-width":220}),"playlist"!==is&&css(control,{"overflow-y":iset&&1==style.floatleft?"hidden":"scroll"}),container.appendChild(control),1!=style.floatleft&&(control2=createElement("div"),css(control2,{display:"block",overflow:"hidden","border-radius":style.rounding}),1!=style.floatleft&&o.system.safari&&css(control2,{"min-width":220}),control.appendChild(control2)),attr(control,{id:v.id+"_"+is}),"playlist"==is&&(1==style.floatleft?(css(control,{width:"100%","padding-right":style.bgpaddingright,"padding-bottom":style.bgpaddingbottom+20,"overflow-x":"scroll","overflow-y":"hidden","white-space":"nowrap"}),css(container,{width:o.screen_w-style.marginright-style.marginleft,height:style.floatheight+style.bgpaddingtop+style.bgpaddingbottom})):(css(control,{"overflow-y":"scroll","overflow-x":"hidden"}),1==style.width100&&ResizePlaylist()),1==style.marginbg&&css(container,{"background-color":style.marginbgcolor}),1==v.playlist.droplist&&hide2(container)),1==style.scrollarrows&&(arr_up=createElement("div"),scrollbgcolor=hex2rgb(1==style.marginbg?style.marginbgcolor:style.bgcolor),1==style.floatleft?(StyleArrow(arr_up,"to right, rgba("+scrollbgcolor+","+(+style.bga+.3)+"), rgba("+scrollbgcolor+",0)","left",12,5,7,10,7,10,12,15),arr_up.addEventListener(evntclk,ScrollLeft)):(StyleArrow(arr_up,"to bottom, rgba("+scrollbgcolor+","+(+style.bga+.3)+"), rgba("+scrollbgcolor+",0)","top",5,12,10,7,10,7,15,12),arr_up.addEventListener(evntclk,ScrollUp)),arr_down=createElement("div"),1==style.floatleft?(StyleArrow(arr_down,"to left, rgba("+scrollbgcolor+","+(+style.bga+.3)+"), rgba("+scrollbgcolor+",0)","right",8,5,13,10,13,10,8,15),arr_down.addEventListener(evntclk,ScrollRight)):(StyleArrow(arr_down,"to bottom, rgba("+scrollbgcolor+",0), rgba("+scrollbgcolor+","+(+style.bga+.3)+")","bottom",5,8,10,13,10,13,15,8),arr_down.addEventListener(evntclk,ScrollDown)),arr_up.addEventListener("mouseover",ScrollOverOut),arr_up.addEventListener("mouseout",ScrollOverOut),arr_down.addEventListener("mouseover",ScrollOverOut),arr_down.addEventListener("mouseout",ScrollOverOut),control.addEventListener("wheel",Wheel),arr_up.addEventListener("mouseup",onMouseUp),arr_down.addEventListener("mouseup",onMouseUp),container.appendChild(arr_up),container.appendChild(arr_down),clearInterval(arrinterval),arrinterval=setInterval(ArrowsInterval,1e3)),control.addEventListener(evntovr,ControlOver),control.addEventListener(evntout,ControlOut),0<v.playlist.srch&&!srch&&"playlist"==is&&"undefined"!=typeof PluginPlSrch&&(srch=new PluginPlSrch),iset)for(var i=1;i<11;i++)exist(v["control_"+is][is+i])&&(v.settings[is+i]=v["control_"+is][is+i],exist(v["control_"+is][is+i+"title"])&&(v.settings[is+i+"title"]=v["control_"+is][is+i+"title"]),exist(v["control_"+is][is+i+"action"])&&(v.settings[is+i+"action"]=v["control_"+is][is+i+"action"])),exist(v.settings[is+i])&&1==v.settings[is+i]&&(CreateItem("f",i),StyleItem(f[i],fbg[i],ftitle[i],fvalue[i],i),exist(v.settings[is+i+"action"])||(v.settings[is+i+"action"]="speed"),ftitle[i].innerHTML=Lang(v.settings[is+i+"action"]),exist(v.settings[is+i+"title"])&&""!=v.settings[is+i+"title"]&&(ftitle[i].innerHTML=v.settings[is+i+"title"]),"share"==v.settings[is+i+"action"]&&(o.shareme=!0),faction[i]=v.settings[is+i+"action"],Value(i),"upload"==faction[i]&&(o.upldfl||(o.upldfl=new PluginUpload),exist(window.FileReader)&&(ftitle[i].innerHTML=o.upldfl.Input(),o.upldfl.Ch())),faction[i]in o.menuproc&&(mpi[faction[i]]=i),f[i].addEventListener(evntovr,onOver),f[i].addEventListener(evntout,onOut),f[i].addEventListener(evntclk,onClick),f[i].addEventListener("mouseup",onMouseUp),1==v.settings[is+i+"hide"]&&css(f[i],{height:0}));function Wheel(t){"playlist"==is&&1==style.floatleft&&t&&0==t.deltaX&&0!=t.deltaY&&(control.scrollLeft-=t.deltaY,t.preventDefault()),clearInterval(wheelinterval),wheelinterval=setInterval(ControlOut,3e3),Retimer()}function ControlOver(){o.mouseDown=!0}function ControlOut(){1==style.showovercontrol&&(clearTimeout(o.settingsovertimer),o.settingsovertimer=setTimeout((function(){o.mouseDown||o.setaction||HideControl()}),0<v.settings.showoverto?1e3*v.settings.showoverto:o.system.tv?2e3:1e3)),o.mouseDown=!1}function onOver(event){o.fullscreen&&o.volumewheel&&o.actions.volumewheel(!1);var i=event.target.getAttribute("fid"),x,opn,id;i?x="f":event.target.getAttribute("f2id")&&(i=event.target.getAttribute("f2id"),x="f2"),i&&(i=parseInt(i),opn=!1,exist(eval(x)[i])&&(-1<style.bgaover&&css(eval(x+"bg")[i],{opacity:style.bgaover}),exist2(style.bgbrovr)&&css(eval(x+"bg")[i],{filter:"brightness("+style.bgbrovr+")"}),-1<style.aover&&(css(eval(x+"title")[i],{opacity:style.aover}),css(eval(x+"value")[i],{opacity:style.aover})),"playlist"==is&&0==faction[i].indexOf("playlist")&&(id=faction[i].substr(8),plid==id||plfolder==id?(css(eval(x+"title")[i],{color:style.valuecolor}),css(eval(x+"value")[i],{color:style.valuecolor}),opn=!0):css(eval(x+"title")[i],{color:style.color})),1==style.playbgcolored&&exist(style.playbgcolor)&&opn||css(eval(x+"bg")[i],{backgroundColor:style.bgcolorover})))}function onOut(event){o.fullscreen&&o.volumewheel&&o.actions.volumewheel(!0);var i=event.target.getAttribute("fid"),x,opn=!1,id;clearInterval(downin),Retimer(),i?x="f":event.target.getAttribute("f2id")&&(i=event.target.getAttribute("f2id"),x="f2"),i&&exist(eval(x)[i])&&(-1<style.bgaover&&css(eval(x+"bg")[i],{opacity:style.bga}),exist2(style.bgbrovr)&&css(eval(x+"bg")[i],{filter:"brightness(1)"}),-1<style.aover&&(css(eval(x+"title")[i],{opacity:style.a}),css(eval(x+"value")[i],{opacity:style.a})),"playlist"==is&&0==faction[i].indexOf("playlist")&&(id=faction[i].substr(8),plid==id||plfolder==id?(css(eval(x+"title")[i],{color:style.valuecolor}),css(eval(x+"value")[i],{color:style.valuecolor}),opn=!0):exist(o.plhistory[id])?HistoryPlaylist(i):css(eval(x+"title")[i],{color:style.color})),1==style.playbgcolored&&exist(style.playbgcolor)&&opn||css(eval(x+"bg")[i],{backgroundColor:o.plhistory[id]?style.historybgcolor:style.bgcolor}))}function onClick(t){var e;justshow||(e=new Date,o.clicktime=e.getTime(),(t=t.target.getAttribute("fid"))&&exist(f[t])&&exist(faction[t])&&("playlist"==is&&(o.seekto=void 0),Action(t,0)),JsClk())}function onMouseDown(t){justshow||(t=t.target.getAttribute("f2id"))&&exist(f2action[t])&&open_action in o.menuproc&&(downi=t,downin=setInterval(DownIn,200))}function DownIn(){Action2(downi)}function onMouseUp(t){clearInterval(downin),t.cancelBubble=!0,Retimer()}function onClick2(t){var e;clearInterval(downin),justshow||(e=new Date,o.clicktime=e.getTime(),(t=t.target.getAttribute("f2id"))&&(0==t?"color"==f2action[0]?(Remove2(),Action(iclr)):Home():exist(f2action[t])&&Action2(t)))}function onClickSubtitle(t){(t=t.target.getAttribute("setupx"))&&ActionOptions(t)}function onClickSubtitle2(t){Retimer();var e,i=t.target.getAttribute("f2id");exist(f2action[i])&&0<f2i("=",i)&&(e=f2action[i].substr(0,f2i("=",i)),t=f2action[i].substr(f2i("=",i)+1),v[i=open_action+"_reset"]||(v[i]=[]),exist(v[i][e])||(v[i][e]=v[e]+""),StyleSubtitle(e,t))}function StyleSubtitle(t,e){v[t]=e,o.storage&&1==v.sub_designstore&&"sub_shift"!=t&&localStorage.setItem("pljs"+t,e),o.casting&&o.chromecast&&o.chromecast.Sub(),o.actions.RenewSubtitle(),ActionOptions(t)}function onClickTimer2(t){var e=t.target.getAttribute("f2id");t=f2action[e];exist(t)&&0<t.indexOf("=")&&(e=t.substr(0,t.indexOf("=")),t=t.substr(t.indexOf("=")+1),v[e]=t,SubtitleTimerMenu(),Value(o[open_action+"_i"]),"offsettimer"==open_action&&SettingsTimers("offsetwrite"))}function Value(t){if(exist(faction[t])){var e=!1,i=!1,s="";if(iset){if("quality"==faction[t]&&(s=o.media.getQuality()),"audiotrack"==faction[t]&&(s=o.media.getAudioTrack()),"share"==faction[t]&&(s=" ",i=!0),"channel"==faction[t]&&o.channels&&(s=o.files_channel[o.current_channel]),"audiotrack"!=faction[t]&&"channel"!=faction[t]&&"quality"!=faction[t]||(0!=o["files_"+faction[t]].length&&(1!=o["files_"+faction[t]].length||1==style.show1value&&1!=o["files_"+faction[t]][0])?i=!0:e=!0),"airplay"==faction[t]&&(o.airplay?i=!0:e=!0),"download"==faction[t]&&("native"==o.file_type||v.download?i=!0:e=!0),"subtitle"==faction[t])if(exist(o.subs)){i=!0,o.subtitle_on||1==v.sub_off?o.sbt&&(s=o.files_subtitle[o.subtitle_on?o.current_subtitle:o.sbt.ioff()]):s="";for(var r=0,n=0;n<o.subs.length;n++)""!=o.subs[n]&&r++;1==r&&1==o.subload&&(r=0),1==v.sub_upload&&1==v.sub_upload0||0==r&&(i=!(e=!0))}else e=!0;if("speed"==faction[t]&&(1==(s=o.files_speed[o.current_speed])&&1!=style.speed1&&(s=Lang("normal")),i=!0,("vimeo"==o.file_type||o.media.isLive()&&1!=style.speed4live)&&(i=!(e=!0))),faction[t]in o.menuproc&&(s=FltrVal(faction[t]),i=!0),0<faction[t].indexOf("timer")){for(var a=" ",l=["hour","minute","second"],c=0;c<l.length;c++)exist(v[faction[t]+l[c]])&&" "!==v[faction[t]+l[c]]&&(a+=(" "!==a?":":"")+v[faction[t]+l[c]]);s=" 0:0"!=a&&-1<a.indexOf(":")?a:" ",o[faction[t]+"val"]=s,i=!0}}fvalue[t].innerHTML=s+(""!=s&&1!=style.hidearrow?' &nbsp;<svg width="5px" height="7px" viewBox="-1 -1 5 8" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polyline stroke="#'+style.valuecolor+'" stroke-width="1" fill="none" points="0 0 3 3 0 6"></polyline></svg>':"");var u=iset&&-1!=open_settings;e&&(hide(f[t]),iset&&(stout[t]&&clearTimeout(stout[t]),o.controls?o.controls.SettingsN(t,!1,s):stout[t]=setTimeout((function(){o.controls.SettingsN(t,!1,s)}),200)),css(f[t],{position:"absolute",right:0,top:-100})),i&&(u||(1==style.floatleft?css(f[t],{display:"inline-block"}):show(f[t])),iset&&(stout[t]&&clearTimeout(stout[t]),o.controls?o.controls.SettingsN(t,!0,s):stout[t]=setTimeout((function(){o.controls.SettingsN(t,!0,s)}),500)),css(f[t],{position:"relative",right:0,top:0})),Resize()}for(var d,h=1;h<f.length;h++)f[h]&&isVisible(f[h])&&(d=!!empty,empty=!1,d&&o.controls&&o.controls.refresh())}var stvs=0;function Action(t,e,i){if(i&&(faction[t]=i),exist(faction[t])&&(o.setaction=!0,Retimer(),i=VisibleItems(),iset&&(-1==open_settings?stvs=i[0]:i[0]=stvs),open_action!=faction[t])){if("quality"==(open_action=faction[t])||"audiotrack"==open_action||"subtitle"==open_action||"speed"==open_action||"channel"==open_action||open_action in o.menuproc||0<open_action.indexOf("timer")||"share"==open_action||"color"==open_action){open_settings=t;var s=copyObject(o["files_"+open_action]);if("sleeptimer"==open_action&&(s=1==style.sleep2?SettingsTimers("sleep2options"):SettingsTimers("sleepoptions")),"offsettimer"==open_action&&(s=SettingsTimers("offsetoptions")),"share"==open_action&&o.share){s=[];for(var r=1;r<=16;r++)exist(v["share"+r])&&(s.push(Lang(v["share"+r])),shr[s.length]=v["share"+r])}if("color"==open_action&&o.tagvideo)for(s=[],iclr=t,r=0;r<o.clr_options.length;r++){var n=o.clr_options[r].substr(4);s.push(Lang(n)),clr[s.length]=n}var a=o["current_"+open_action],l=o["pressed_"+open_action];for(r=1;r<f.length;r++)f[r]&&(f[r].style.display="none");f2=[],CreateItem("f2",0),StyleItem(f2[0],f2bg[0],f2title[0],f2value[0],0),css(f2[0],{"border-bottom":"1px solid "+(1==style.bordercolored?bordercolor:"rgba(100,100,100,0.7)")}),_cstm=e;var c,u=!1;if(f2title[0].innerHTML=(i[0]<2||1==_cstm||1==style.noprevicon?"":_prevIcon)+(v.settings[is+t+"title"]&&""!=v.settings[is+t+"title"]?v.settings[is+t+"title"]:Lang(v.settings[is+t+"action"]))+(o[faction[t]+"val"]?o[faction[t]+"val"]:""),"subtitle"!=open_action||o.dash_subs||((c=createElement("div")).innerHTML=Lang("options"),css(c,{color:style.color,pointerEvents:"auto",cursor:"pointer"}),f2value[0].appendChild(c),c.addEventListener(evntclk,SubtitleSettings),u=!0),"subtitle"==open_action&&1==v.sub_upload&&!o.system.tv&&exist(window.FileReader)&&(c=createElement("div"),o.sbt||(o.sbt=new PluginSub),c.innerHTML="<input type='file' id='"+v.id+"_subfile' accept='.vtt,.ass,.srt' style='display:none'/>"+Lang("upload"),css(c,{color:style.color,pointerEvents:"auto",cursor:"pointer","margin-left":u?"10px":0}),f2value[0].appendChild(c),o.subupld=document.getElementById(v.id+"_subfile"),o.subupld.onchange=o.sbt.SubUpload,c.addEventListener(evntclk,o.sbt.SubUpload)),u&&sub_settings_on)for(2==_cstm&&(s=[],hide2(f2[0])),r=0;r<o.sub_options.length;r++)0==v.sub_all&&"sub_color2"==o.sub_options[r]||s.push("pjslng_"+o.sub_options[r]);if(css(f2title[0],{"font-size":style.headfontsize*existv(v.globalfs,1)}),f2action[0]="home",open_action in o.menuproc&&(Menuproc(open_action),0<iclr&&-1<o.clr_options.indexOf("clr_"+open_action)&&(f2title[0].innerHTML=_prevIcon+Lang(open_action),f2action[0]="color",f2value[0].innerHTML=FltrVal(open_action)),css(f2value[0],{width:2.5*style.valuefontsize,"text-align":"right"})),1!=_cstm&&1<i[0]?(f2[0].addEventListener(evntovr,onOver),f2[0].addEventListener(evntout,onOut),f2[0].addEventListener(evntclk,onClick2),f2[0].addEventListener("mouseup",onMouseUp)):css(f2[0],{cursor:"default"}),1==style.nohead&&hide2(f2[0]),exist(s)){var d="";for(r=0;r<s.length;r++){var h,p=r+1,g=0,m=!1;if(s[r]&&""!=trim(s[r])){if("quality"==open_action&&(s[r]==Lang("auto")&&(g=1),"hls"==o.file_type&&1==v.hlsqhsort&&((h=int(s[r]))&&h<d&&(g=2),d=int(s[r]))),CreateItem("f2",p,g),StyleItem(f2[p],f2bg[p],f2title[p],f2value[p],faction[t],t),"speed"==open_action&&1==s[r]&&1!=style.speed1&&(s[r]=Lang("normal")),"string"==typeof s[r]?(0==s[r].indexOf("<<<")&&(s[r]=s[r].replace("<<<",""),m=!0),0<s[r].indexOf("timer")&&(o[open_action+"_i"]=t),0==s[r].indexOf("pjslng")?(0<(g=s[r]).indexOf("timer")?f2title[p].innerHTML=Lang(s[r].substr(g.indexOf("timer")+5)):f2title[p].innerHTML=Lang(s[r].substr(7)),"pjslng_sub_sizeproc"==s[r]&&css(f2[p],{"border-top":"1px solid "+(1==style.bordercolored?bordercolor:"rgba(100,100,100,0.7)")})):f2title[p].innerHTML=s[r]):f2title[p].innerHTML=s[r],f2action[p]=open_action+r,a!=r&&l!=r||(f2value[p].innerHTML=a==r?_activeIcon:_xIcon,a==r&&StyleActive(p)),"string"==typeof s[r]&&(0==s[r].indexOf("pjslng")&&(0<(T=s[r].substr(7)).indexOf("color")?f2value[p].innerHTML="<div style='"+("000000"==v[T]?"border:1px solid #999;height:8px;width:8px;":"height:10px;width:10px;")+";background-color:"+(-1==v[T].indexOf("#")?"#":"")+v[T]+";border-radius:10px;'></div>":exist(v[s[r].substr(7)])&&(f2value[p].innerHTML=v[s[r].substr(7)])),"share"==open_action&&exist(shr[p])&&o.share&&(f2value[p].innerHTML=o.share.icon(shr[p],.7,CheckColor(style.valuecolor))),"color"==open_action&&exist(clr[p])&&o.tagvideo&&(f2value[p].innerHTML=FltrVal(clr[p])),"quality"==open_action&&(s[r]==Lang("auto")&&o.media.autoQuality()&&StyleActive(p),exist2(v.forbidden_quality))))for(var y=v.forbidden_quality.split(","),b=0;b<y.length;b++)-1<s[r].indexOf(y[b])&&hide2(f2[p]);var T="";"string"==typeof s[r]&&0==s[r].indexOf("pjslng")&&(attr(f2[p],{f2parent:t,setupx:s[r].substr(7)}),T="onClickSubtitle"),m?css(f2[p],{cursor:"default"}):(f2[p].addEventListener(evntovr,onOver),f2[p].addEventListener(evntout,onOut),"onClickSubtitle"==T?f2[p].addEventListener(evntclk,onClickSubtitle):f2[p].addEventListener(evntclk,onClick2),f2[p].addEventListener("mouseup",onMouseUp),f2[p].addEventListener("mousedown",onMouseDown))}}}Resize()}if("download"==faction[t]&&(o.actions.Download(),open_action=-1),"upload"==faction[t]&&exist(o.upldfl)&&(o.upldfl.open(),open_action=-1),-1<faction[t].indexOf("playlist")){if(u=faction[t].substr(8),exist(o.playlist_dic[u]))if(i=o.playlist_dic[u].file,exist(i)){if(0==i.indexOf("seek:"))return 0!=u.indexOf("x"+plfolder)?(o.seekto=i.substr(5),void playById(u.substr(0,u.lastIndexOf("-"))+"-0")):(o.start||(o.seekto=i.substr(5)),o.play||o.actions.Play(),apiProcessor("seek",i.substr(5)),void HideControl());ActionPlaylist(t),UpdateStart(u),SettingsTimers("offset"),exist(o.playlist_dic[u].redirect)&&1==v.redirect&&1==v.redirectplaylist?redirect(o.playlist_dic[u].redirect):(UpdateVars0(u),o.actions.NewFile(i,1==v.playlist.dontplay?1:void 0),0==v.playlist.always&&1==v.playlist.autohide&&setTimeout(HideControl,200),autoprevopenfolder=autonextopenfolder=!1,UpdateVars(u),js("usernew"))}else exist(o.playlist_dic[u].folder)&&(UpdatePlaylist(u),autonextopenfolder?-1==plx&&Action(0,0):autoprevopenfolder&&-1==plx&&Action(parseInt(f.length)-2,0));o.droplist&&o.droplist.Update()}"airplay"==faction[t]&&o.media.Airplay()}}function ActionOptions(t){if("sub_reset"!=t){Retimer();for(var e=0;e<f2.length;e++)f2[e]&&(f2[e].style.display="none");f2=[],CreateItem("f2",0),StyleItem(f2[0],f2bg[0],f2title[0],f2value[0],0),css(f2[0],{"border-bottom":"1px solid "+(1==style.bordercolored?bordercolor:"rgba(100,100,100,0.7)")}),0<t.indexOf("timer")?(f2[0].addEventListener(evntclk,SubtitleTimerMenu),f2title[0].innerHTML=Lang(t.substr(t.indexOf("timer")+5))):(f2[0].addEventListener(evntclk,SubtitleSettingsMenu),f2title[0].innerHTML=(1!=style.noprevicon?_prevIcon:"")+Lang(t)),css(f2title[0],{"font-size":style.headfontsize*existv(v.globalfs,1)}),f2[0].addEventListener(evntovr,onOver),f2[0].addEventListener(evntout,onOut),f2[0].addEventListener("mouseup",onMouseUp);var i,s=[],o=!1;if(0<t.indexOf("size")&&(s=["50%","75%","100%","125%","150%","175%","200%","250%","300%","400%"]),0<t.indexOf("bga")&&(s=["0","0.2","0.3","0.4","0.5","0.6","0.7","0.8","0.9","1"]),0<t.indexOf("shift"))for(e=-5;e<5.5;e+=.5)s.push(Math.round(100*e)/100);if(0<t.indexOf("weight")&&(s=[200,400,600]),0<t.indexOf("bottom"))for(e=0;e<21;e++)s[e]=10*e;if(0<t.indexOf("hour"))for(e=0;e<24;e++)s[e]=e;if(0<t.indexOf("minute")||0<t.indexOf("second"))for(e=0;e<60;e++)s[e]=e;for(0<t.indexOf("shadow")&&(o=!0,s=[0,1]),0<t.indexOf("stroke")&&(o=!0,s=[0,1]),0<t.indexOf("color")&&(s=["ffffff","ffeeab","72ccf8","62de50","faed54","feba54","e8bbff","ffc7d1","aaaaaa","d9bb8c","b3fee8","4bd9ac","ffff00","D90000","073DA0","409829","644082","000000"],i=v[t].replace("#",""),-1==s.indexOf(i)&&(s[8]=i)),n=1;n<=s.length;n++)CreateItem("f2",n,0),StyleItem(f2[n],f2bg[n],f2title[n],f2value[n],n),css(f2value[n],{"padding-left":0}),0<t.indexOf("color")||0<t.indexOf("bottom")||0<t.indexOf("timer")||0<t.indexOf("shift")?(n%3!=0&&css(f2[n],{float:"left"}),css(f2[n],{width:"33.3%"}),0<t.indexOf("color")?(s[n-1]=existv(v["subclr"+(n-1)],s[n-1]),f2title[n].innerHTML="<div style='"+("000000"==s[n-1]?"border:1px solid #999;height:18px;width:18px;":"height:20px;width:20px;")+";background-color:"+CheckColor(s[n-1])+";border-radius:20px;'></div>",css(f2[n],{"line-height":1})):f2title[n].innerHTML=s[n-1]):0<t.indexOf("weight")?f2title[n].innerHTML=s[n-1]:(n%2!=0&&css(f2[n],{float:"left"}),css(f2[n],{width:"50%"}),f2title[n].innerHTML=o?Lang(s[n-1]+"val"):s[n-1]),f2action[n]=t+"="+s[n-1],(s[n-1]==v[t]&&" "!=String(v[t])||v[t]=="#"+s[n-1])&&(f2value[n].innerHTML=_activeIcon,StyleActive(n)),f2[n].addEventListener(evntovr,onOver),f2[n].addEventListener(evntout,onOut),0<t.indexOf("timer")?f2[n].addEventListener(evntclk,onClickTimer2):f2[n].addEventListener(evntclk,onClickSubtitle2),f2[n].addEventListener("mouseup",onMouseUp);Resize()}else{var r=open_action+"_reset";if(v[r]){for(var n in v[r])v[r].hasOwnProperty(n)&&StyleSubtitle(n,v[r][n]);SubtitleSettingsMenu()}}}function StyleActive(t){f2[t].classList.add("pjs-"+v.id+"-active-menu"),css(f2title[t],{color:style.valuecolor}),BgBrAct(f2bg[t])}function UpdateVars0(t){exist(o.playlist_dic[t].poster)&&(v.poster=o.playlist_dic[t].poster,exist(v.poster)&&o.media.Poster(v.poster)),exist(o.playlist_dic[t].title)&&(o.titlestore=o.playlist_dic[t].title),MediaSess()}function UpdateVars(t){var e=o.playlist_dic[t].title;exist(e)&&1==v.showtitleplaylist&&(o.actions.TitleTemplate(o.playlist_dic[t])||(v.title=(1==v.addtitleplaylist&&exist(o.maintitle)?o.maintitle+(1==v.addtitleplaylistbr?"<br>":" "):"")+e),o.actions.Title("title")),1==v.pointed&&(exist(o.playlist_dic[t].points)?v.points=o.playlist_dic[t].points:v.points=[],o.controls.RenewPoints());for(var i=["remove","thumbnails","download","skip","url","url2","url3","vars","embed","end","delete","heartbeat","outside","label","title2","customtext","autonext"],s=0;s<i.length;s++){var r=o.playlist_dic[t][i[s]];exist(r)?(v[i[s]]=r,16==s&&(v.playlist.autoplaylist=r)):s<4&&(v[i[s]]=void 0)}UpdateStart(t),e=o.playlist_dic[t],exist(e.sub)&&(e.subtitle=e.sub),exist(e.subtitle)&&o.actions.Subtitle(e.subtitle),exist(e.customtext)&&o.controls.customTextPl(),o.actions.Ctxt(o.playlist_dic[t]),o.ctxtnk&&o.controls.upText(o.ctxtnk),exist(e.design)&&apiProcessor("design",e.design),exist(e.volume)&&o.actions.Volume(e.volume)}function UpdateStart(t){var e=o.playlist_dic[t].start;exist(e)?"continue"==e?(options.subtitle&&!o.playlist_dic[t].subtitle&&(o.playlist_dic[t].subtitle=options.subtitle),0<o.media.time()?v.start=o.seekto=o.media.time():options.start&&!o.seekto?o.seekto=options.start:v.start=0):v.start=o.seekto=e:v.start=0}function ActionPlaylist(t){var e;0!=plx||o.start?(o.plopenid=t,-1<plx&&HistoryPlaylist(plx),""!=plid&&(!o.plhistory[plid]&&exist(o.playlist_dic[plid])&&(o.pldur2+=existv(o.playlist_dic[plid].duration,0)),o.plhistory[plid]=!0,shuffle=removebykey(shuffle,plid))):(css(ftitle[plx],{color:style.color}),css(fbg[plx],{backgroundColor:style.bgcolor}),fvalue[plx].innerHTML="",f[plx].classList.remove("pjs-"+v.id+"-active-pl")),faction[t]&&(e=faction[t].substr(8),fvalue[t].innerHTML=_activeIcon,f[t].classList.add("pjs-"+v.id+"-active-pl"),css(ftitle[t],{color:style.valuecolor,"text-decoration":"none",opacity:style.a}),BgBrAct(fbg[t]),1==style.playbgcolored&&exist(style.playbgcolor)&&css(fbg[t],{backgroundColor:style.playbgcolor}),plx=t,plid=e,o.plid=plid,v.plstart=plid,o.playlist_title=ftitle[t].innerHTML,o.plopenid=plid,plfolder=o.playlist_dic[e].pjs_parent,o.controls&&o.controls.PlaylistControls(),srch&&srch.clear())}function UpdatePlaylist(t){var e=0==t?o.playlist:o.playlist_dic[t];o.plopenid=t;for(var i,s,r=0;r<f.length;r++)f[r]&&((1==style.floatleft?control:control2).removeChild(f[r]),f[r]=null);f=[],plx=-1,exist(e.folder)&&(CreateItem("f",n=Object.keys(e.folder).length),faction[n]="playlistfolder",StyleItem(f[n],fbg[n],ftitle[n],fvalue[n],n),1==style.floatleft&&css(f[n],{width:1==style.floatlimitwidth?style.floatwidth:"auto",height:style.floatheight}),1==style.borderbottom&&(i="1px solid "+hex2rgb(style.headbordercolor,existv(style.brda,1)),1==style.floatleft?css(f[n],{borderRight:i}):css(f[n],{borderBottom:i})),i=e.title,1!=style.noprevicon&&(i=_prevIcon+i),ftitle[n].innerHTML=i,css(ftitle[n],{"font-size":style.headfontsize*existv(v.globalfs,1)}),s=e.pjs_parent,f[n].addEventListener(evntovr,onOver),f[n].addEventListener(evntout,onOut),f[n].addEventListener(evntclk,(function(){PlaylistBack(s)})),e=e.folder);var n=Object.keys(e).length;for(shuffle=[],shuffle_=[],srch&&1!=style.floatleft&&(srch.remove(control2),n>v.playlist.srch&&srch.add(style,control2)),r=0;r<n;r++)CreateItem("f",r),faction[r]="playlist"+e[r].id,exist(o.plhistory[e[r].id])||exist(e[r].folder)||(shuffle[e[r].id]=r,shuffle_[e[r].id]=r),StyleItem(f[r],fbg[r],ftitle[r],fvalue[r],r),1==style.floatleft&&(0==style.activeiconsize&&(css(ftitle[r],{width:style.floatwidth-style.paddingleft-style.paddingright}),hide2(fvalue[r])),css(f[r],{width:1==style.floatlimitwidth?style.floatwidth:"auto",height:style.floatheight})),ftitle[r].innerHTML=e[r].title||"&nbsp;",1==v.timestore&&1==v.playedstore&&e[r].id&&o.playedstored&&-1<o.playedstored.indexOf(e[r].id)&&(e[r].played=1),exist(e[r].played)&&1==e[r].played&&(o.plhistory[e[r].id]=!0,HistoryPlaylist(r)),exist(e[r].folder)&&(fvalue[r].innerHTML=_nextIcon,css(fvalue[r],{color:style.color})),f[r].addEventListener(evntovr,onOver),f[r].addEventListener(evntout,onOut),f[r].addEventListener(evntclk,onClick),f[r].addEventListener("mouseup",onMouseUp),exist(o.plhistory[e[r].id])&&HistoryPlaylist(r),plid==e[r].id&&ActionPlaylist(r),plfolder==e[r].id&&(css(ftitle[r],{color:style.valuecolor}),css(fvalue[r],{color:style.valuecolor}),BgBrAct(fbg[r]));Resize(),empty=!1,o.controls&&o.controls.refresh()}function BgBrAct(t){exist2(style.bgbract)&&t&&css(t,{"background-image":"linear-gradient(rgba(0, 0, 0, "+(1-+style.bgbract)+") 0 0)"})}function StyleArrow(t,e,i,s,r,n,a,l,c,u,d){var h=1==style.floatleft?"40px":"100%",f=1==style.floatleft?"100%":"40px";css(t,{position:"absolute",display:"inline-block",width:h,height:f,"text-align":"center"}),1==style.scrollarrowgradient&&css(t,{background:"linear-gradient("+e+")"}),1==style.floatleft||o.system.mobile?css(t,{cursor:"pointer"}):css(t,{"pointer-events":"none"}),1==style.limitwidth&&css(t,{"max-width":style.limitmaxwidth+"px!important"}),"top"==i&&css(t,{top:-1,left:0}),"bottom"==i&&css(t,{bottom:-1,left:0}),"left"==i&&css(t,{top:0,left:0}),"right"==i&&css(t,{top:0,right:0}),"right"!=i&&"left"!=i||css(t,{"text-align":"left","padding-top":container.offsetHeight/2-10}),t.innerHTML="<center><div "+(1==style.scrollarrowbgover?"onMouseOver='this.style.backgroundColor=\"#"+style.scrollarrowbgovercolor+"\"' onMouseOut='"+(1==style.scrollarrowbg?'this.style.backgroundColor="#'+style.scrollarrowbgcolor:'this.style.background="none')+"\"'":"")+" style='pointer-events:auto;cursor:pointer;width:20px;height:20px;border-radius:20px;"+(1==style.scrollarrowbg?"background-color:#"+style.scrollarrowbgcolor+";":"")+("top"==i?"margin-top:10px;":"")+("bottom"==i?"margin-top:10px;":"")+("right"==i?"margin-left:0px;":"")+("left"==i?"margin-right:0px;":"")+"'><svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><line x1='"+s+"' y1='"+r+"' x2='"+n+"' y2='"+a+"' stroke='#"+style.scrollarrowcolor+"' stroke-width='"+style.scrollarrowsize+"' stroke-linecap='round'/><line x1='"+l+"' y1='"+c+"' x2='"+u+"' y2='"+d+"' stroke='#"+style.scrollarrowcolor+"' stroke-width='"+style.scrollarrowsize+"' stroke-linecap='round'/></g></svg></div></center>"}function ArrowsInterval(){is_visible&&Arrows()}function Arrows(t){var e,i,s;1!=style.scrollarrows||removed||(s=1==style.floatleft?(e=control.scrollWidth,i=container.offsetWidth+style.bgpaddingleft+style.bgpaddingright+20,control.scrollLeft):(e=control.scrollHeight,i=container.offsetHeight,control.scrollTop),i<e?(0<s?isVisible(arr_up)||(show(arr_up),new Motion({mc:arr_up,type:"alpha_div",to:1,time:.3,me:"arr_up"})):(isVisible(arr_up)&&new Motion({mc:arr_up,type:"alpha_div",to:0,time:.3,me:"arr_up",hide:!0}),t&&t.deltaY<0&&t.preventDefault()),s<e-i-10?isVisible(arr_down)||(show(arr_down),new Motion({mc:arr_down,type:"alpha_div",to:1,time:.3,me:"arr_down"})):(isVisible(arr_down)&&new Motion({mc:arr_down,type:"alpha_div",to:0,time:.3,me:"arr_down",hide:!0}),t&&0<t.deltaY&&t.preventDefault())):(hide(arr_up),hide(arr_down)))}function ScrollDown(){var t=control.scrollTop+container.offsetHeight-60;new Motion({mc:control,type:"scroll",to:t,time:.3,me:"scroll_down",ease:"cubic"}),setTimeout(Arrows,1e3)}function ScrollUp(){var t=control.scrollTop-container.offsetHeight+60;new Motion({mc:control,type:"scroll",to:t,time:.3,me:"scroll_up",ease:"cubic"}),setTimeout(Arrows,1e3)}function ScrollOverOut(t){clearTimeout(o.settingsovertimer),t.stopPropagation()}function ScrollRight(){var t=control.scrollLeft+(container.offsetWidth+style.bgpaddingleft+style.bgpaddingright)-60;new Motion({mc:control,type:"scrollleft",to:t,time:.3,me:"scroll_right",ease:"cubic"}),setTimeout(Arrows,1e3)}function ScrollLeft(){var t=control.scrollLeft-(container.offsetWidth+style.bgpaddingleft+style.bgpaddingright)+60;new Motion({mc:control,type:"scrollleft",to:t,time:.3,me:"scroll_left",ease:"cubic"}),setTimeout(Arrows,1e3)}function PlaylistBack(t){""==t?UpdatePlaylist(0):exist(o.playlist_dic[t])&&UpdatePlaylist(t),open_action=""}function HistoryPlaylist(t){fvalue[t].innerHTML="",css(ftitle[t],{color:style.historycolor}),1==style.historytitlestrike&&css(ftitle[t],{"text-decoration":"line-through"}),-1<style.historytitlea&&css(ftitle[t],{opacity:style.historytitlea}),f[t].classList.remove("pjs-"+v.id+"-active-pl"),css(fbg[t],{backgroundColor:style.historybgcolor}),-1<style.historybga&&css(fbg[t],{opacity:style.historybga})}function Action2(t){if(exist(f2action[t])){for(var e in Retimer(),0==f2i("quality",t)&&o.actions.SetQuality(f2action[t].substr(7)),0==f2i("audiotrack",t)&&o.actions.SetAudioTrack(f2action[t].substr(10)),0==f2i("subtitle",t)&&(o.sbt||(o.sbt=new PluginSub),o.sbt.SetSubtitle(f2action[t].substr(8))),0==f2i("channel",t)&&1==v.channels&&o.channels.SetChannel(f2action[t].substr(7)),0==f2i("share",t)&&(o.share&&o.share.api(shr[t]),HideControl()),0==f2i("color",t)&&(Remove2(),Action(0,0,clr[t])),o.menuproc)o.menuproc.hasOwnProperty(e)&&0==f2i(e,t)&&o.media.menufltr(e,t);0<f2i("timer",t)&&(f2title[t].innerHTML==Lang("off")?(SettingsTimers(open_action+"0"),Value(open_settings),"offsettimer"==open_action&&SettingsTimers("offsetwrite"),Home()):"sleeptimer"==open_action&&1==style.sleep2&&(SettingsTimers("sleep2",t),Value(open_settings),Home())),0==f2i("speed",t)&&(o.actions.SetSpeed(f2action[t].substr(5)),UpdateSpeed(),setTimeout(HideControl,200))}}function UpdateSpeed(){for(var t=0;t<faction.length;t++)"speed"==faction[t]&&(Value(t),"speed"==open_action&&(Remove2(),Action(t,0)))}function CreateItem(x,i,toend){var bgtmp;exist(eval(x))&&(eval(x)[i]=createElement("div"),i<2||"f"==x||"quality"!=open_action||1==toend?(1==style.floatleft?control:control2).appendChild(eval(x)[i]):1==style.floatleft?control.insertBefore(eval(x)[i],eval(x)[i-1]):control2.insertBefore(eval(x)[i],eval(x)[2==toend?i-2:i-1]),"f"==x&&attr(eval(x)[i],{fid:i}),"f2"==x&&attr(eval(x)[i],{f2id:i}),eval(x+"bg")[i]=createElement("div"),bgtmp=createElement("div"),eval(x)[i].appendChild(bgtmp),bgtmp.appendChild(eval(x+"bg")[i]),Pnt0(bgtmp),eval(x+"img")[i]=createElement("div"),eval(x)[i].appendChild(eval(x+"img")[i]),Pos0(eval(x+"img")[i]),Pnt0(eval(x+"img")[i]),eval(x+"title")[i]=createElement("div"),eval(x)[i].appendChild(eval(x+"title")[i]),eval(x+"value")[i]=createElement("div"),eval(x)[i].appendChild(eval(x+"value")[i]),0<i&&"f2"==x&&iset&&0==style.activeicon&&hide2(eval(x+"value")[i]))}function StyleItem(t,e,i,s,o,r){css(t,{position:"relative",right:0,top:0,cursor:"pointer",height:"auto",width:"100%",overflow:"hidden",display:"block","line-height":"1.5em"}),iset&&1==style.floatleft&&css(t,{width:"auto"}),style.floatmarginright&&1==style.floatleft&&css(t,{marginRight:style.floatmarginright}),1==style.floatleft&&(!iset||0<r||1==style.nohead)&&css(t,{display:"inline-block","vertical-align":"top","white-space":"normal"}),css(e,{background:1==style.bggr?"linear-gradient(to left,"+CheckColor(style.bggrclr)+", "+CheckColor(style.bgcolor)+")":CheckColor(style.bgcolor),opacity:style.bga,pointerEvents:"none",transition:"opacity 0.2s ease-out,background .2s ease-out,filter .2s ease-out"}),Pos0(e),Pos0(e.parentNode),1==style.blur&&css(e.parentNode,{"backdrop-filter":"blur(8px)"}),1==style.brdl&&(t.style[1==style.floatleft?"border-right":"border-bottom"]="1px solid "+hex2rgb(existv(style.brdlc,"ffffff"),existv(style.brdla,.2))),css(i,{position:"relative",right:0,top:0,float:style.align||"left",color:style.color,"padding-top":style.paddingtop,"padding-right":style.paddingright,"padding-bottom":style.paddingbottom,"padding-left":style.paddingleft,pointerEvents:"none",opacity:style.a,transition:"opacity 0.2s linear,color 0.2s linear"}),css(s,{position:"relative",right:0,top:0,float:style.valuealign||"right","padding-top":style.paddingtop,"padding-right":style.paddingright,"padding-left":style.paddingleft,pointerEvents:"none","font-size":style.valuefontsize*existv(v.globalfs,1),opacity:style.a,color:style.valuecolor,transition:"opacity 0.2s linear,color 0.2s linear"}),1==style.limitwidth?(css(t,{"max-width":style.limitmaxwidth+"px!important"}),css(i,{"max-width":style.limitmaxwidth-70+"px!important"})):1==style.floatleft?1==style.floatlimitwidth&&(css(t,{width:style.floatwidth}),css(i,{width:style.floatwidth-70})):(css(i,{"white-space":"nowrap"}),css(s,{"white-space":"nowrap"}))}function Home(){for(var t=1;t<f.length;t++)exist(f[t])&&(1==style.floatleft?f[t].style.display="inline-block":f[t].style.display="block");Retimer(),Remove2(),Resize(),open_action="",open_settings=-1}function Remove2(){for(var t=0;t<f2.length;t++)f2[t]&&((1==style.floatleft?control:control2).removeChild(f2[t]),f2[t]=null);f2=[],open_action=""}function Width(){return control.offsetWidth}function ResizePlaylist(){var t;"playlist"==is&&(1!=style.floatleft&&1!=style.width100||(t=o.screen_w-style.marginright-style.marginleft,css(container,{width:t}),css(control,{width:t}),control2&&css(control2,{width:t})),o.droplist&&o.droplist.Resize())}function Resize(){var t;removed||(iset&&(o.controls&&o.controls.resizeSettings(),t=1==style.nohead&&1<f.length?f[1]:f[0]),"playlist"==is&&(ResizePlaylist(),o.controls&&o.controls.resizePlaylist(),t=f[0],1==v.change2playlist&&MainUpdateSize()),1<f.length&&!t&&f[1]&&(t=f[1]),2<f.length&&!t&&f[2]&&(t=f[2]),t&&0==t.offsetWidth&&0<f2.length&&(t=f2[0]),0<control.offsetWidth-control.clientWidth&&t&&1!=style.floatleft?(exist(arr_up)&&css(arr_up,{width:control2.offsetWidth}),exist(arr_down)&&css(arr_down,{width:control2.offsetWidth}),style.scrollwidth=control.offsetWidth-t.offsetWidth-(control.clientWidth-t.clientWidth)):style.scrollwidth=0)}function VisibleItems(){for(var t=0,e=0,i="",s=1;s<f.length;s++)exist(f[s])&&"hidden"!=f[s].style.visibility&&"none"!=f[s].style.display&&(t++,i=faction[e=s]);return[t,e,i]}function SubtitleSettings(t){sub_settings_on=!sub_settings_on,SubtitleSettingsMenu(t)}function SubtitleSettingsMenu(){Home();for(var t=0;t<faction.length;t++)"subtitle"==faction[t]&&Action(t,_cstm)}function Retimer(){clearTimeout(settimer),settimer=setTimeout((function(){o.setaction=!1}),2e3)}function SubtitleTimerMenu(){var t=open_action;Home();for(var e=0;e<faction.length;e++)faction[e]==t&&Action(e,0)}function HideControl(t){if(!(!iset&&1==v.playlist.always2||iset&&1==v.settings.always&&2!=t)){if("playlist"==is&&1==v.playlist.droplist&&1!=v.playlist.dropnohide){if(1==v.playlist.always&&1==t)return;o.droplist&&o.droplist.Hide(),is_visible=!1}else 1==t&&(1!=style.hidesmoothly||1!=style.always)||o.system.tv?(css(container,{visibility:"hidden",opacity:0,top:-2e3}),is_visible=!1):(new Motion({mc:container,type:"alpha_div",to:0,time:.1,me:is,ease:"elastic"}),hidetimeout=setTimeout((function(){css(container,{visibility:"hidden",opacity:0,top:-2e3}),is_visible=!1}),200));"playlist"==is&&1==v.playlist.hidecontrol&&o.controls&&o.controls.toggleControl("action","playlist",!0),clearInterval(wheelinterval)}}function ShowTimeout(){clearInterval(showinterval),justshow=!1}function playById(t){exist(o.playlist_dic[t])&&(FindPlStart(o.playlist_dic[t]),Action(o.playlist_dic[t].pjs_i,0),ScrollTo(o.playlist_dic[t].pjs_i))}function showById(t){exist(o.playlist_dic[t])&&(plfolder="",UpdatePlaylist(0),FindPlStart(o.playlist_dic[t]),UpdateVars0(t),Action(o.playlist_dic[t].pjs_i,0),UpdateVars(t))}function ScrollTo(t){var e;f[t]&&!removed&&(1==style.floatleft?(e=f[t].offsetLeft-20,new Motion({mc:control,type:"scrollleft",to:e,time:.3,me:"scroll_left",ease:"cubic"})):(e=f[t].offsetTop-container.offsetHeight/2+20,new Motion({mc:control,type:"scroll",to:e,time:.3,me:"scroll_down",ease:"cubic"})),setTimeout(Arrows,1e3))}function Shuffle(t){for(var e,i=Object.keys(t),s=0;s<i.length&&!(e=t[i[i.length*Math.random()<<0]]);s++);return e}function Menuproc(t){-1<mpi[t]&&Value(mpi[t]),f2value[0]&&(f2value[0].innerHTML="scale"==open_action?Math.round(100*o.mediascale.x)+"%":FltrVal(open_action))}function FltrVal(t){return"scale"==t?Math.round(100*o.mediascale.x)+"%":Math.round(100*existv(o.fltrs[t],o.menuproc[t]))+"%"}function NxtExt(){if(1==v.shuffle)return 0<Object.keys(shuffle).length;var t=!1;return o.playlist_dic&&(t=okpd().indexOf(plid)<okpd().length-1),t}function f2i(t,e){return f2action[e].indexOf(t)}function FindPlStart(t){-1!=t.pjs_parent_i?(FindPlStart(o.playlist_dic[t.pjs_parent]),UpdatePlaylist(t.pjs_parent)):UpdatePlaylist(0)}function okpd(){return Object.keys(o.playlist_dic)}this.UpdateTimer=function(t){Value(o[t+"_i"])},this.Arrows=function(){1==style.scrollarrows&&Arrows()},this.UpdateSpeed=function(){UpdateSpeed()},this.Exist=function(t){for(var e=0;e<faction.length;e++)if(faction[e]==t)return!0;return!1},this.resizePlaylist=function(){ResizePlaylist()},this.SubOpt=function(){sub_settings_on=!0,this.show(),_cstm=2,SubtitleSettingsMenu()},this.tb=function(){return 1==v.settings.always&&1==v.settings.toolbar},this.c=function(){return container},this.co=function(){if(container.contains(control))return control},this.s=function(t){if("marginleft"==t||"marginright"==t){var e=t.replace("margin","marginproc"),i=t.replace("margin","mrgnprs");if(exist2(style[i])&&o.small)return o.screen_w*style[i]/100;if(exist2(style[e]))return o.screen_w*style[e]/100}return style[t]},this.ss=function(t){return style},this.show=function(){var t;Home(),clearTimeout(hidetimeout),is_visible=!0,"playlist"==is&&1==v.playlist.droplist?o.droplist&&o.droplist.Show():(css(container,{visibility:"visible",opacity:1,transition:"opacity 0.2s linear"}),1==(t=VisibleItems())[0]&&("quality"==t[2]||"audiotrack"==t[2]||"subtitle"==t[2]||"speed"==t[2]||t[2]in o.menuproc||0<t[2].indexOf("timer"))&&Action(t[1],0)),o.controls&&("settings"==is&&o.controls.resizeSettings(),"playlist"==is&&(o.controls.resizePlaylist(),1==v.playlist.hidecontrol&&o.controls.toggleControl("action","playlist",!1))),o.system.safari&&(css(control,{"min-width":"auto"}),1!=style.floatleft&&css(control2,{"min-width":"auto"})),justshow=!0,clearInterval(showinterval),showinterval=setInterval(ShowTimeout,100)},this.open=function(t){Action(t,1)},this.hide=function(t){HideControl(t)},this.plclose=function(){o.droplist&&o.droplist.Close()},this.SetQuality=function(){for(var t=0;t<faction.length;t++)"quality"==faction[t]&&(Value(t),1<o.files_quality.length&&show(f[t]),"quality"==open_action&&(Remove2(),Action(t,_cstm)))},this.Airplay=function(){for(var t=0;t<faction.length;t++)"airplay"==faction[t]&&Value(t)},this.SetSetting=function(t){for(var e=0;e<faction.length;e++)faction[e]==t&&(Value(e),o["files_"+t]&&1<o["files_"+t].length&&show(f[e]),open_action==t&&(Remove2(),Action(e,_cstm)))},this.SetSubtitle=function(){for(var t=0;t<faction.length;t++)if("subtitle"==faction[t]){if(Value(t),o.files_subtitle&&0<o.files_subtitle.length){var e=!1;if(o.subs){for(var i=0;i<o.subs.length;i++)if(""!=o.subs[i]){e=!0;break}}else e=!0;e&&show(f[t])}"subtitle"==open_action&&(Remove2(),Action(t,0))}},this.updatePlaylist=function(t){if(o.playlist=t,UpdatePlaylist(0),exist(v.plstart)){if(0!=v.plstart.indexOf("x-"))for(var e in o.playlist_dic)o.playlist_dic.hasOwnProperty(e)&&o.playlist_dic[e].pjs_id==v.plstart&&(v.plstart=e);exist(o.playlist_dic[v.plstart])?(FindPlStart(o.playlist_dic[v.plstart]),ActionPlaylist(e=o.playlist_dic[v.plstart].pjs_i),1==v.playlist.openplaylistroot&&1!=style.droplist?(UpdatePlaylist(0),setTimeout((function(){Resize()}),500)):setTimeout((function(){ScrollTo(e),Resize()}),500),v.plstart=void 0):ActionPlaylist(0)}else ActionPlaylist(0);1==style.droplist&&(exist(o.droplist)||(o.droplist=new PluginDroplist))},this.playById=function(t){playById(t)},this.openById=function(t){exist(o.playlist_dic[t])&&(FindPlStart(o.playlist_dic[t]),o.playlist_dic[t].file?(o.seekto=void 0,ActionPlaylist(o.playlist_dic[t].pjs_i),UpdateVars0(t),o.actions.NewFile(o.playlist_dic[t].file,1),UpdateVars(t),ScrollTo(o.playlist_dic[t].pjs_i),o.droplist&&o.droplist.Update()):o.playlist_dic[t].folder&&UpdatePlaylist(t))},this.PlaylistNext=function(){autonextopenfolder=!0;var t,e,i=parseInt(plx)+1;if(""!=plid&&(o.plhistory[plid]=!0,shuffle=removebykey(shuffle,plid)),1==v.shuffle){if(null==(i=Shuffle(shuffle)))if(1==v.shuffle8||1==v.playlist.autoplaylist){for(var i in shuffle_.sort((function(t,e){return Math.random()-.5})),shuffle_)shuffle_.hasOwnProperty(i)&&(shuffle[i]=shuffle_[i]);i=Shuffle(shuffle)}else o.actions.ShuffleEnd()}else"playlistfolder"!=faction[i]&&-1!=plx||""==plid||(t=okpd().indexOf(plid))<okpd().length&&(e=o.playlist_dic[okpd()[t+1]])&&(exist(e.folder)&&(e=o.playlist_dic[okpd()[t+2]]),this.openById(e.id),i=-1,o.actions.Play());-1<i&&(o.seekto=void 0,Action(i,0),ScrollTo(i))},this.menuproc=function(t){Menuproc(t)},this.PlaylistNextExist=function(){return NxtExt()},this.PlaylistRewind=function(){exist(o.pl_first_id)&&showById(o.pl_first_id)},this.PlaylistPrevExist=function(){var t,e=0<plx;return o.playlist_dic&&(e=0<(t=okpd().indexOf(plid)),1==t&&exist(o.playlist_dic[okpd()[0]].folder)&&(e=!1)),e},this.PlaylistExist=function(){return exist(o.playlist_dic)},this.PlaylistPrev=function(){var t,e,i;autoprevopenfolder=!0,this.PlaylistPrevExist()&&((t=parseInt(plx)-1)<0?0<(e=okpd().indexOf(plid))&&(i=o.playlist_dic[okpd()[e-1]])&&(exist(i.folder)&&(i=o.playlist_dic[okpd()[e-2]]),i&&(this.openById(i.id),o.actions.Play())):(o.seekto=void 0,Action(t,0),ScrollTo(t)))},this.PlaylistHere=function(){0<plx&&ScrollTo(plx)},this.g=function(t){switch(t){case"width":return Width();case"height":return container.offsetHeight;case"top":return style.margintop;case"scroll_height":return control.scrollHeight;case"margin_bottom":return style.marginbottom;case"x":return int(container.style.left);case"y":return int(container.style.top);case"opacity":return container.style.opacity;case"show":return is_visible;case"open":return open_settings;case"key":return key;case"motion_id":return key+motion_id;case"empty":return empty;case"playlist":return"playlist"==is;case"played":return o.plhistory[plid];case"activeicon":return _activeIcon;case"butplstart":return o.playlist_dic[o.butplstart]?o.playlist_dic[o.butplstart].title:"";case"title2":return v.title2||"";case"nxtttl":return NxtExt()?o.playlist_dic[okpd()[okpd().indexOf(plid)+1]].title:""}},this.prenewpl=function(){plid="",v.plstart=""},this.empty=function(){if(iset){for(var t=0,e=1;e<11;e++){if("quality"==faction[e]){var i=o.files_quality.length;if(exist(v.forbidden_quality))for(var s=v.forbidden_quality.split(","),r=0;r<s.length;r++)-1<o.files_quality.indexOf(s[r])&&i--;0<i&&(1<i||1==i&&1!=o.files_quality&&1==style.show1value)&&t++}if("airplay"==faction[e]&&o.airplay&&t++,"download"==faction[e]&&("native"!=o.file_type&&!v.download||t++),"audiotrack"==faction[e]&&1<o.files_audiotrack.length&&t++,"channel"==faction[e]&&1==v.channels&&0<o.files_channel.length&&t++,"subtitle"==faction[e]){if(exist(o.subs))for(var n=0;n<o.subs.length;n++)if(""!=o.subs[n]){t++;break}1==t&&1==o.subload&&(t=0),1==v.sub_upload&&1==v.sub_upload0&&t++}"speed"==faction[e]&&"vimeo"!=o.file_type&&t++,(faction[e]in o.menuproc||"share"==faction[e]||"color"==faction[e])&&t++,faction[e]&&0<faction[e].indexOf("timer")&&t++,1==v.settings[is+e+"hide"]&&t--}return t<=0}return"playlist"==is?0==f.length:empty},this.Remove=function(){container.parentNode==o.frame&&(container.removeChild(control),o.frame.removeChild(container),o.droplist&&o.droplist.Remove(),removed=!(control=container=null))}},MediaYoutube=function(t,e){var i=!1;0==t.indexOf("intro")&&(i=!0,t=t.substr(5));var s,r,n,a=YoutubeID(t),l=!1,c=!1,u=!1,d=!1,h=!0,f=[],p=1,g=!1,m=0,y=0,b=!1,T="pljs_yt_"+v.id+(i?"intro":"");pushCSS("#pljs_yt_"+v.id+"{width:100%!important;height:100%!important;max-width:none!important;max-height:none!important}");var S,w,x,E=createElement("div"),_=0;function k(){show2(S)}function P(){1!=v.ytcl&&hide2(S)}function R(){1==v.preload||i?l||I():o.actions.MediaReady()}function I(){var t;"YT"in window&&exist(YT.Player)&&!l?(log("Youtube Init"),t=0,1==v.youtubecontrols&&(t=1),0<o.seekto&&(m=parseInt(o.seekto)),r=new YT.Player(T,{height:o.container_h,width:o.container_w,videoId:a,playerVars:{enablejsapi:1,playerapiid:T,html5:1,disablekb:1,autohide:1,playsinline:(0==v.playsinlineonmobile||1!=v.playsinlineonmobileiphone&&o.system.iphone)&&o.system.mobile?0:1,iv_load_policy:3,controls:t,showinfo:0,modestbranding:1,rel:0,autoplay:i||1==v.autoplay?1:0,loop:0},events:{onReady:A,onStateChange:C,onError:M,onPlaybackQualityChange:O}}),0<o.seekto&&(o.seekto=void 0),U(),l=!0):setTimeout(I,500)}function A(){if(o.media)if(log("Youtube Ready"),c=!0,clearTimeout(n),o.actions.StopWaiting(),i)o.system.mutedautoplay&&o.actions.Mute(),r.playVideo(),o.vast.ytReady();else if(1==v.autoplay&&o.system.mutedautoplay&&!o.acted&&(o.actions.Mute(),o.system.mobile&&(clearInterval(x),x=setInterval(L,300))),0==v.preload?r.playVideo():o.actions.MediaReady(),_=r.getDuration(),o.media.onDuration(),1!=p&&H(p),o.media.onMeta(),o.actions.LoadedData(),U(),1==v.yttitle)try{r.getVideoData()&&exist(r.getVideoData().title)&&(v.title=r.getVideoData().title,o.actions.Title("title"))}catch(t){}}function L(){var t=r.getPlayerState();2!=t&&-1!=t||(o.controls.Pause(),o.controls.StopWaiting(),clearInterval(x)),1==t&&clearInterval(x)}function C(t){if(1==v.ytlog&&log("YT",t.data),i)t.data==YT.PlayerState.ENDED&&o.vast.ytEnded(),t.data,YT.PlayerState.PLAYING;else{if(t.data==YT.PlayerState.PLAYING){if(1==y&&(y=0,A()),o.play||o.actions.Play(),0<m&&(r.seekTo(m,!0),m=0,o.seekto=void 0),k(),c=u=!0,d?r.pauseVideo():(o.media.onPlay(),o.media.onTimeupdate()),function(){if(!b){var t=r.getAvailableQualityLevels()+"";if(""!=t&&null!=t){o.files_quality=t.split(","),o.files_quality=o.files_quality.reverse(),0!=v.ytautoquality||-1<(t=o.files_quality.indexOf("auto"))&&o.files_quality.splice(t,1);for(var e=0;e<o.files_quality.length;e++)o.files_quality[e]=z(o.files_quality[e]);b=!0,F(r.getPlaybackQuality())}}}(),exist(v.default_quality)){for(var e=0;e<o.files_quality.length;e++)v.default_quality==o.files_quality[e]&&V(e);v.default_quality=null}else if(exist(o.default_quality)){for(e=0;e<o.files_quality.length;e++)o.default_quality==o.files_quality[e]&&V(e);o.default_quality=null}g=!1}-1==t.data&&g&&o.play&&(o.actions.StopWaiting(),g=!1,!o.nopause&&o.play&&o.actions.Pause()),t.data,YT.PlayerState.PAUSED,t.data==YT.PlayerState.ENDED&&(0<v.start&&(m=v.start),o.media.onEnded(),o.media.onDuration()),t.data==YT.PlayerState.BUFFERING&&(o.play,o.play&&(g=!0,D())),t.data,YT.PlayerState.CUED}}function M(t){i?o.vast.ytError():(2==t.data&&(s="wrong youtube id"),5==t.data&&(s="network empty"),101!=t.data&&150!=t.data&&100!=t.data||(s="this video is unavailable"),1==v.customyterrors&&exist(v.customyterror)&&(s=v.customyterror),1!=v.yterrors?o.media.onError():hide(o.poster))}function D(){o.media?o.media.onWaiting():n=setTimeout(D,100)}function O(t){F(t.data)}function F(t){o.current_quality=o.files_quality.indexOf(z(t+"")),o.controls.QualityChanged(o.current_quality)}function N(){var t=-1;c&&(t=r.getPlayerState());var e=1!=t&&3!=t?-1==t?"paused":"":"playing";return 2==t&&(e="paused",o.play&&o.actions.Pause()),5==t&&(e="paused"),0==t&&(e="ended"),e}function U(){try{exist(r)&&r.setSize(o.screen_w,o.screen_h)}catch(t){log(t)}}function z(t){var e="hd1080"==t?"1080p":"hd720"==t?"720p":"large"==t?"480p":"medium"==t?"360p":"small"==t?"240p":"tiny"==t?"160p":t;return 1==v.nameofyoutubequality&&(e=Lang(e)),"auto"==t&&(e=Lang("auto")),f[e]=t,e}function W(){var t=c?r.getCurrentTime():0;return 0<t&&0<v.seekwindow&&(v.delete=t-v.seekwindow,v.seekwindow=-1),t}function H(t){r&&r.setPlaybackRate(t),p=t}function V(t){c&&exist(o.files_quality[t])&&(t=f[o.files_quality[t]],h="auto"==t,W(),r.setPlaybackQuality(t))}function B(e){t=e,r&&(y=1,r.loadVideoById(e,0))}E.setAttribute("id",T),e.appendChild(E),o.airplay=!1,i||o.actions.AirplayChanged(),o.system.mobile&&(v.preload=1),1!=v.youtubecontrols&&(S=createElement("div"),e.appendChild(S),css(S,{position:"absolute",top:0,left:0,"background-color":"#ff0000",height:"100%",width:"100%",opacity:0}),S.addEventListener("dblclick",(function(t){t.cancelBubble=!0})),o.system.mobile?(S.addEventListener("touchstart",(function(t){t.cancelBubble=!0})),S.addEventListener("click",(function(t){t.cancelBubble=!0})),S.addEventListener("touchend",(function(t){t.cancelBubble=!0,ScreenClick(t),1==v.screenclick&&(setTimeout(P,100),setTimeout(k,1e3))}))):S.addEventListener("mousemove",(function(t){var e=!0;1==v.vast&&(exist(v.preroll)&&!u&&(e=!1),exist(v.playroll)&&"paused"==N()&&0<W()&&(e=!1)),e&&1==v.screenclick&&1!=v.ytcl&&(hide2(this),setTimeout(k,2e3))})),1==v.screenclick&&1!=v.ytcl1&&hide2(S)),1==v.preload&&0==v.autoplay&&D(),window.YT?R():(window.onYouTubeIframeAPIReady=function(){R();for(var t=0;t<pljssglobal.length;t++)pljssglobal[t]&&pljssglobal[t].api("id")!=v.id&&pljssglobal[t].api("isyoutube")&&pljssglobal[t].api("youtubeready")},(w=Script("youtube.com/iframe_api","youtube.com/iframe_api","youtube_iframe_api"))&&(w.onerror=function(t){o.actions.MediaReady(),1!=v.yterrors&&(s="YouTube API Error",o.media.onError())})),this.size=function(){return{width:0,height:0}},this.src=function(t){a=YoutubeID(t),0<o.seekto&&(m=parseInt(o.seekto)),B(a)},this.YoutubeReady=function(){R()},this.Play=function(){c?r.playVideo():l||I()},this.Pause=function(){c&&r.pauseVideo()},this.Toggle=function(){c&&("playing"==N()?r.pauseVideo():r.playVideo())},this.Seek=function(t){c&&(r.seekTo(t,!0),js("seek",t))},this.tag=function(){return!1},this.Mute=function(){c&&r.mute()},this.Unmute=function(){c&&r.unMute()},this.Volume=function(t){c&&r.setVolume(100*t)},this.isPlaying=function(){return"playing"==N()},this.isLive=function(){return!1},this.setQuality=function(t){V(t)},this.setSpeed=function(t){H(t)},this.ready=function(){return c},this.status=N,this.time=W,this.duration=function(){var t=c?r.getDuration():0;return t!=_&&(_=t,o.media.onDuration()),exist(v.end)&&(indOf([v.end],"-")?t+=+v.end:t=v.end),t},this.loaded=function(){var t=0;return c&&(t=r.getVideoLoadedFraction()*r.getDuration()),t},this.resize=function(){U()},this.errorMessage=function(){return s},this.auto=function(){return 1==v.ytautoquality&&h},this.playId=function(t){B(t)},this.BeforeVast=function(){o.system.mobile&&o.system.android?(this.Play(),d=!0):"playing"==N()&&this.Pause()},this.AfterVast=function(){d=!1},this.nativeControls=function(){return!0},this.Remove=function(){c&&r.destroy(),b=c=!1;try{E&&e.removeChild(E),e.removeChild(S)}catch(t){}}},PluginSub=function(){var t,e,i,s,r=[],n=[],a=!0,l=-1,c=[],u=[];function d(e){if("11"!=(e=e||"")){var s=0,r=!0,n="";o.subs=e.split(","),o.files_subtitle=[],o.current_subtitle=-1,StorageSupport()&&1==v.sub_store?null!=localStorage.getItem("pljssubtitle")&&(n=localStorage.getItem("pljssubtitle")):o.remember_sub&&(n=o.remember_sub);for(var a=0;a<o.subs.length;a++)0==o.subs[a].indexOf("#0")&&(o.subs[a]=fd0(o.subs[a])),0==o.subs[a].indexOf("#"+v.enc2)&&(o.subs[a]=o[o.fd[0]](o.subs[a])),0==o.subs[a].indexOf("#"+v.enc3)&&0<o.subs[a].indexOf(v.file3_separator)&&(o.subs[a]=o[o.fd[1]](o.subs[a])),0==o.subs[a].indexOf("[")&&1<o.subs[a].indexOf("]")?(o.files_subtitle[a]=o.subs[a].substr(o.subs[a].indexOf("[")+1,o.subs[a].indexOf("]")-1),o.subs[a]=o.subs[a].substr(o.subs[a].indexOf("]")+1),r=!1):(o.files_subtitle[a]=o.subs[a].substr(o.subs[a].lastIndexOf("/")+1),o.files_subtitle[a]=o.files_subtitle[a].substr(0,o.files_subtitle[a].lastIndexOf("."))),0==o.subs[a].indexOf("#0")&&(o.subs[a]=fd0(o.subs[a])),0==o.subs[a].indexOf("#"+v.enc2)&&(o.subs[a]=o[o.fd[0]](o.subs[a])),0==o.subs[a].indexOf("#"+v.enc3)&&0<o.subs[a].indexOf(v.file3_separator)&&(o.subs[a]=o[o.fd[1]](o.subs[a]));for(1<o.files_subtitle.length&&1==v.sub_all&&(o.files_subtitle.push(StringVar("sub_all_title",Lang("together"))),o.subs.push("all")),0<o.files_subtitle.length&&1==v.sub_off&&(1==v.sub_off0?(t=0,s++,o.files_subtitle.unshift(StringVar("sub_off_title",Lang("off"))),o.subs.unshift("")):(o.files_subtitle.push(StringVar("sub_off_title",Lang("off"))),o.subs.push(""),t=o.files_subtitle.length-1)),a=0;a<o.subs.length;a++)exist(v.default_subtitle)&&v.default_subtitle==o.files_subtitle[a]&&(s=a,o.current_subtitle=a,v.subtitle_start=1),""!=n&&n==o.files_subtitle[a]&&(s=a,o.current_subtitle=a);1==v.sub_off&&0==v.subtitle_start&&(o.current_subtitle=t),exist(o.controls)&&o.controls.SubtitleChanged(),1==v.subtitle_start?(o.current_subtitle=s,o.start?(1==v.sub_all&&"all"==o.subs[s]?f:h)(o.current_subtitle):(i=e,o.subtitle_on="off"!=o.subs[s],setTimeout(y,500))):(r&&o.subs.length<3&&h(0==t?1:0),1!=v.sub_off&&(o.current_subtitle=-1))}else k()}function h(t){exist(o.subs[t])&&(-1<o.subs[t].indexOf(".")?(o.subsor=o.subs[t].split(" or "),o.sub_or=0,p(t)):(0==o.subs[t].indexOf("upld")&&n[o.subs[t].substr(4)]&&m(o.files_subtitle[t],n[o.subs[t].substr(4)]),0==o.subs[t].indexOf("hls")&&(o.media.hlsDashSub(t,"hls2"),o.subtitle_on=!0,o.current_subtitle=t,o.controls.SubtitleChanged())))}function f(){o.subtitle_on=!0,y()}function p(t,e){var i="hls"==e?t:trim(o.subsor[o.sub_or]),s=i;c[i]?"all"!=o.subs[t]&&(o.subtitle_on=!0,y()):(0<i.indexOf("id_")&&i.indexOf("id_")<4&&(i.substr(0,i.indexOf("id_")),s=i.substr(i.indexOf("id_")+3)),s=XHR(s),l=t,o.subload=1,s.onload=function(){o.subload=0,4==this.readyState&&200==this.status?(o.subtitle_on=!0,m(i,this.responseText,t,e)):o.sub_or+1<o.subsor.length?(o.sub_or++,p(l)):g("loading_error")},s.onerror=function(t){o.subload=0,o.sub_or+1<o.subsor.length?(o.sub_or++,p(l)):g("loading_error")},s.send())}function g(t){log("subtitle not found or access denied"),o.files_subtitle[o.current_subtitle]&&-1==o.files_subtitle[o.current_subtitle].indexOf(Lang("loading_error"))&&(o.files_subtitle[o.current_subtitle]=o.files_subtitle[o.current_subtitle]+" ("+Lang(t)+")"),1==v.subtitle_errdel&&-1<l&&(o.subs[l]="",o.files_subtitle[l]=""),o.current_subtitle=-1,o.subtitle_on=!1,o.constrols?(o.controls.SubtitleChanged(),o.controls.refresh()):setTimeout((function(){o.controls&&(o.controls.SubtitleChanged(),o.controls.refresh())}),100),exist(o.subtitle)&&(o.frame.removeChild(o.subtitle),o.subtitle=null)}function m(t,e,i,s){var n;if(0==e.indexOf("#"+v.enc2)&&(e=o[o.fd[0]](e)),0==e.indexOf("#"+v.enc3)&&0<e.indexOf(v.file3_separator)&&(e=o[o.fd[1]](e)),0<t.indexOf("id_")&&t.indexOf("id_")<4&&(n=t.substr(0,t.indexOf("id_"))),-1<t.indexOf(".srt")||-1<t.indexOf(".ass")||-1<t.indexOf(".ssa")||-1<t.indexOf(".vtt")){var a=n||o.current_subtitle;"all"==o.subs[a]&&(a=i),"hls"==s&&r[a]||(r[a]=Object(),r[a][0]=[],r[a][1]=[]);var l=Array(),h=(l=e.split(/\r|\n/),1),f=0,p=0,m=exist(v.subshift)?v.subshift:0;0<t.indexOf("shift=")&&(m=+t.substr(t.indexOf("shift=")+6));for(var T=0;T<l.length;T++){if(-1<t.indexOf(".srt")||-1<t.indexOf(".vtt"))if(-1<l[T].indexOf("--\x3e")&&-1<l[T].indexOf(":")){if("hls"==s){if(-1<u.indexOf(l[T]))break;u.push(l[T])}0==(f=+b(l[T].substr(0,l[T].indexOf("--\x3e")))+m)&&(f=1),p=+b(l[T].substr(l[T].indexOf("--\x3e")+4,12))+m,exist(r[a][0][f])||(r[a][0][f]="");for(var S=f;S<p;S++)r[a][1][S]=f;h++}else l[T]=trim(l[T]),""!=l[T]&&0<l[T].length&&l[T]!=h&&"WEBVTT"!=l[T]&&(exist2(r[a][0][f])?r[a][0][f]=r[a][0][f]+"<br>"+l[T]:r[a][0][f]=l[T]);if((-1<t.indexOf(".ass")||-1<t.indexOf(".ssa"))&&-1<l[T].indexOf("Dialogue:")){f=+b(l[T].substr(-1<t.indexOf(".ssa")?l[T].indexOf("=0")+3:12,12))+m,p=+b(l[T].substr(-1<t.indexOf(".ssa")?l[T].indexOf("=0")+14:23,10))+m;var w="";if(0<l[T].indexOf("0,,")?w=l[T].substr(l[T].indexOf("0,,")+3):(0<l[T].indexOf("ffect,")&&(w=l[T].substr(l[T].indexOf("ffect,")+6)),0<l[T].indexOf(")}")&&(w=l[T].substr(l[T].indexOf(")}")+2))),""!=w)for(null!=r[a][0][f]?r[a][0][f]+="<br>"+w:r[a][0][f]=w,r[a][0][f]=r[a][0][f].replace(/{.*?}/,""),r[a][0][f]=r[a][0][f].replace(/\\\\N/,"<br>"),r[a][0][f]=r[a][0][f].replace(/\\N/,"<br>"),S=f;S<p;S++)r[a][1][S]=f}}c[t]=!0,"all"!=o.subs[i]&&"hls"!=s&&y()}else""!=e?0==e.indexOf("[")?d(e):g("error"):(k(),o.controls.refresh())}function y(){o.controls.SubtitleChanged(),o.actions.RenewSubtitle(),o.controls.refresh()}function b(t){var e=t.split(":");t=0;return 2==e.length&&e.unshift("00"),"00"!=e[0]&&(t+=3600*e[0]),"00"!=e[1]&&(t+=60*e[1]),10*(t+=+e[2].substr(0,2))+ +e[2].substr(3,1)}function T(e){exist(o.current_subtitle)&&(o.current_subtitle!=e?(u=[],-1==e||1==v.sub_off&&e==t?x():(v.sub_shift=0,o.current_subtitle=e,o.subtitle_on=!0,v.subtitle_start=1,w(e),js("subtitle",o.files_subtitle[e]),o.controls.SubtitleChanged())):1!=v.sub_off&&x())}function S(){exist(o.files_subtitle[o.current_subtitle])&&(o.storage&&1==v.sub_store?localStorage.setItem("pljssubtitle",o.files_subtitle[o.current_subtitle]):o.remember_sub=o.files_subtitle[o.current_subtitle])}function w(t){exist(o.subs[t])&&(log("Subtitle",t),o.current_subtitle=t,S(),"hls"==o.file_type&&1==o.hls_subs?o.media.hlsDashSub(t,"hls"):"dash"==o.file_type&&1==o.dash_subs?o.media.hlsDashSub(t,"dash"):("all"==o.subs[t]?f:h)(o.current_subtitle))}function x(){js("subtitle","off"),o.current_subtitle=1==v.sub_off?t:-1,v.subtitle_start=0,o.subtitle_on=!1,o.controls.SubtitleChanged(),S(),o.dash_subs&&w(o.current_subtitle),exist(o.subtitle)&&o.frame.removeChild(o.subtitle),o.subtitle=null}function E(){a||(o.subtitle&&(o.subtitle.innerHTML=""),a=!0,hide2(o.subtitle))}function _(){o.subtitle&&(css(o.subtitle,{position:"absolute",width:"100%","padding-left":"10%","padding-right":"10%",left:0,color:v.sub_color,"text-align":"center","box-sizing":"border-box"}),1==v.sub_fonted&&exist(v.sub_font)&&""!=v.sub_font&&css(o.subtitle,{"font-family":v.sub_font}),1==v.sub_stroke?css(o.subtitle,{"text-shadow":"-1px -1px 0 #000,1px -1px 0 #000,-1px  1px 0 #000,1px  1px 0 #000"}):1==v.sub_shadow?css(o.subtitle,{"text-shadow":"1px 1px 2px black"}):css(o.subtitle,{"text-shadow":"none"}),1==v.sub_drag?PluginMovable(o.subtitle,"o.subdrag"):1!=v.sub_split2words&&Pnt0(o.subtitle))}function k(){o.current_subtitle=-1,o.subtitle_on=!1,o.thumbs_on=!1,v.subtitle=null,v.thumbnails=null,o.sub=null,o.subs=null,s=!1,c=[],r=[],exist(o.controls)&&o.controls.SubtitleChanged(),o.files_subtitle=null,exist(o.subtitle)&&(o.frame.removeChild(o.subtitle),o.subtitle=null),o.current_subtitle=null,o.subtitle_on=!1}this.start=function(t){!t&&i?(d(i),i=void 0):t&&d(t)},this.check=function(t){d(t)},this.reHls=function(){u=[]},this.hlsSub=function(t){p(t,"hls")},this.SubUpload=function(){var e,i;o.subupld&&((e=o.subupld.files)[0]?((i=new FileReader).onload=function(i){i=i.target.result,n.push(i),o.current_subtitle=-1,40<(i=e[0].name).length&&(i=e[0].name.substr(0,15)+"..."+e[0].name.substr(-15)),1==v.sub_off&&1==v.sub_off0?(o.subs.push("upld"+(n.length-1)),o.files_subtitle.push(i+""),T(o.subs.length-1)):(o.subs.unshift("upld"+(n.length-1)),o.files_subtitle.unshift(i+""),1==v.sub_off&&t++,T(0)),o.subupld.value=""},i.readAsText(e[0])):o.subupld.click())},this.SetSubtitle=function(t){T(t)},this.ioff=function(){return t},this.setioff=function(e){t=e},this.show=function(t){!function(t){if(!o.nativecontrols){var i=parseInt(10*t);if(v.sub_shift&&(t-=+v.sub_shift),o.subtitle_on&&exist(o.subs)&&r){var n=o.current_subtitle;i=parseInt(10*t);if(1!=v.subpausehide||o.play){if("all"==o.subs[n])if(s){if(!r[n][1][i]){for(l=0;l<o.subs.length;l++)r[l]&&exist(r[l][1])&&exist(r[l][1][i])&&(r[n][0][i]||(r[n][0][i]=""),r[n][0][i]+=(""!=r[n][0][i]?"<br>[sub2]":"")+r[l][0][r[l][1][i]]+(""!=r[n][0][i]?"[/sub2]":""));exist(r[n][0])&&exist(r[n][0][i])&&(r[n][1][i]=i)}}else{for(var l=0;l<o.subs.length;l++)setTimeout(h,500*l,l);r[n]||(r[n]=Object(),r[n][0]=Array(),r[n][1]=Array()),s=!0}exist(r[n])?exist(r[n][1])&&(exist(r[n][1][i])?(t="",t=r[n][0][r[n][1][i]],exist(o.subtitle)||(o.subtitle=createElement("div"),attr(o.subtitle,{id:"pjs_"+v.id+"_subtitle"}),o.frame.appendChild(o.subtitle),_(),js("subtitles",o.files_subtitle[n])),a&&show2(o.subtitle),o.subdrag||(o.controls.ToolbarHidden()||v.sub_bottom>v.toolbar.h?css(o.subtitle,{position:"absolute",top:"auto",left:0,bottom:+v.sub_bottom}):css(o.subtitle,{position:"absolute",top:"auto",left:0,bottom:+v.sub_bottom+ +v.toolbar.h})),1==v.sub_split2words&&(t=PluginSubword(t)),1==v.sub_all&&(t=(t=t.replace(/\[sub2\]/gm,'<span style="color:'+CheckColor(v.sub_color2)+'">')).replace(/\[\/sub2\]/gm,"</span>")),-1<t.indexOf("<c.")&&(t=(t=t.replace(/\<c./gm,"<span style=color:")).replace(/\<\/c\>/gm,"</span>")),v.apiprm&&1==v.apiprm.sub&&e!=t&&(js("sub",t),e=t),o.subtitle.innerHTML='<span style="'+(1==v.sub_bg?"background-color:"+hex2rgb(v.sub_bgcolor,v.sub_bga)+";":"")+"-webkit-box-decoration-break: clone;color:"+CheckColor(v.sub_color)+";padding:"+v.sub_bgpadding+"px "+2*v.sub_bgpadding+"px;border-radius:"+v.sub_bgo+"px;margin:0 0;line-height:"+(v.sub_lineheight||1.8)+";font-weight:"+v.sub_weight+'">'+trim(t)+"</span>",css(o.subtitle,{"font-size":parseInt(v.sub_size)+(parseInt(v.sub_sizeproc)-100)*parseInt(v.sub_size)/100+"px"}),1==v.sub_big_fullscreen&&o.fullscreen&&css(o.subtitle,{"font-size":v.sub_size_fullscreen+(parseInt(v.sub_sizeproc)-100)*v.sub_size_fullscreen/100+"px"}),a=!1):!a&&exist(o.subtitle)&&E()):E()}}}}(t)},this.style=function(){_()},this.remove=function(){k()},this.off=function(){x()}},PluginHdIcon=function(t,e,i){var s,r=createElement("div");t.appendChild(r),css(r,{position:"absolute",top:-e.offsetHeight/2-1,"background-color":CheckColor(existv(i.hdiconclr,"#f00")),"border-radius_":1,display:"none",pointerEvents:"none"}),1==i.hdicon2&&i.hdiconlist?(s=i.hdiconlist.split(","),css(r,{"font-size":8,color:"#fff",padding:"2px 2px 0 2px","line-height":"1"})):(i.hdicon2=0,css(r,{height:9,width:13,"background-image":"url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTAwJSIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgMTMgOSIgd2lkdGg9IjEwMCUiPjxwYXRoIGQ9Ik01LDcgTDYsNyBMNiw4IEw1LDggTDUsNyBaIE0xMCwzIEwxMCw0IEw4LDQgTDgsMyBMMTAsMyBaIE0zLDYgTDMsNSBMNSw1IEw1LDYgTDMsNiBaIE0yLDcgTDMsNyBMMyw4IEwyLDggTDIsNyBaIE03LDcgTDEwLDcgTDEwLDggTDcsOCBMNyw3IFogTTEwLDYgTDExLDYgTDExLDcgTDEwLDcgTDEwLDYgWiIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIwLjY0NzEiIGZpbGwtcnVsZT0iZXZlbm9kZCIgLz48cGF0aCBkPSJNNSw3IEw1LDYgTDUsNSBMMyw1IEwzLDYgTDMsNyBMMiw3IEwyLDIgTDMsMiBMMyw0IEw1LDQgTDUsMiBMNiwyIEw2LDcgTDUsNyBaIE0xMSw2IEwxMCw2IEwxMCw3IEw3LDcgTDcsMiBMMTAsMiBMMTAsMyBMMTEsMyBMMTEsNiBaIE0xMCw0IEwxMCwzIEw4LDMgTDgsNCBMOCw2IEwxMCw2IEwxMCw0IFoiIGZpbGw9IiNmZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgLz48L3N2Zz4=)"})),this.toggle=function(){var t=0,n=o.media.getQuality();(n=n.replace(Lang("auto")+" ",""))&&(1!=i.hdicon2&&("HD"==n||0<n.indexOf(" HD")||0==n.indexOf("hd")||0==n.indexOf("Hd"))&&(n="720"),0<n.indexOf(" ")&&(n=n.substr(0,n.indexOf(" "))),t=parseInt(n));var a,l="-1";if(1==i.hdicon2){l="";for(var c=0;c<s.length;c++){var u=s[c].split(":");2==u.length&&trim(u[0])==t&&(l=trim(u[1]))}""==l?700<t&&(a=!0,r.innerHTML="HD"):(a=!0,r.innerHTML=l)}else 700<t&&(a=!0);a?(show2(r),0<e.offsetWidth-r.offsetWidth&&css(r,{left:(e.offsetWidth-r.offsetWidth)/2-2})):hide2(r)}},Motion=function(t){var e,i,s,r,n,a,l,c=0,u=!1;if(null!=t.me&&null!=t.mc&&null!=t.type&&null!=t.to){null==t.time&&(-1<t.type.indexOf("alpha")&&0==t.to?t.time=.5:t.time=.2),e=function(t){switch(t){case"elastic":return[0,.432,.857,1.275,1.372,1.296,1.102,.957,.883,.87,.914,.992,1.029,1.041,1.036,1.019,.996,.984,.981,.988,1.001,1.006,1.007,1.006,1.003,.999,.998,.998,.998,.998,1];case"cubic":return[0,.096,.185,.267,.344,.416,.483,.547,.606,.659,.705,.747,.785,.818,.848,.874,.897,.918,.935,.95,.962,.971,.979,.985,.99,.994,.997,.999,1];default:return[0,.175,.32,.44,.52,.6,.67,.73,.775,.82,.85,.885,.915,.935,.95,.97,.983,.993,1]}}(t.ease),-1==t.type.indexOf("scale")&&(exist(o.motions[t.me])&&o.motions[t.me].TheEnd(),o.motions[t.me]=this),1==t.show&&t.mc.set("display",!0),i=t.type.split("|"),r=String(t.to).split("|"),s=new Array;for(var d=0;d<i.length;d++)r[d]||(r[d]=r[0]),"alpha"==i[d]&&(s[d]=t.mc.g("opacity")),"alpha_div"==i[d]&&(s[d]=t.mc.style.opacity),"y"==i[d]&&(s[d]=t.mc.g("y")),"x"==i[d]&&(s[d]=t.mc.g("x")),"left"==i[d]&&(s[d]=parseInt(t.mc.style.left)),"top"==i[d]&&(s[d]=parseInt(t.mc.style.top)),"scale"==i[d]&&(s[d]=t.mc.g("scaleX")),"scroll"==i[d]&&(s[d]=t.mc.scrollTop),"scrollleft"==i[d]&&(s[d]=t.mc.scrollLeft),"scaleY"==i[d]&&(s[d]=t.mc.g("scaleY")),"scaleX"==i[d]&&(s[d]=t.mc.g("scaleX")),"width"==i[d]&&(s[d]=t.mc.g("width")),"width_div"==i[d]&&(s[d]=t.mc.offsetWidth,r[d]=Math.floor(r[d]),"line_play"==t.me&&log("width",t.me,s[d],r[d],t.mc.offsetWidth)),"height"==i[d]&&(s[d]=t.mc.g("height")),"height_div"==i[d]&&(s[d]=t.mc.offsetHeight),r[d]=Number(r[d]),s[d]=Number(s[d]);a=1e3*t.time/e.length,n=e.length,1==i.length&&s[0]==r[0]?f():setTimeout(h,Math.round(a))}function h(){for(var o=0;o<i.length;o++){var d=s[o]+(r[o]-s[o])*(e[c]||0);p(i[o],d),"y"==i[o]&&t.mc.set("top",d),"x"==i[o]&&t.mc.set("left",d),"left"==i[o]&&(t.mc.style.left=d+"px"),"top"==i[o]&&(t.mc.style.top=d+"px"),"scale"==i[o]&&t.mc.set("scale",d),"scaleY"==i[o]&&t.mc.set("scaleY",d),"scaleX"==i[o]&&t.mc.set("scaleX",d),"scroll"==i[o]&&(t.mc.scrollTop=d),"scrollleft"==i[o]&&(t.mc.scrollLeft=d),"width"==i[o]&&t.mc.set("width",d),"width_div"==i[o]&&css(t.mc,{width:d}),"height"==i[o]&&t.mc.set("height",d),"height_div"==i[o]&&css(t.mc,{height:d})}c++,u||(c==n?f():l=setTimeout(h,Math.round(a)))}function f(){u=!0,t.hide&&("alpha_div"==i[0]||"left"==i[0]?hide(t.mc):t.mc.set("display",!1)),-1==t.type.indexOf("scale")&&(o.motions[t.me]=null,delete o.motions[t.me]);for(var e=0;e<i.length;e++)p(i[e],r[e]);clearTimeout(l)}function p(e,i){"alpha"==e&&t.mc.set("opacity",i),"alpha_div"==e&&(t.mc.style.opacity=i)}this.TheEnd=function(){f()},this.TheEnd2=function(){c=n-1,h(),f()},this.XY=function(t,e,s,o){for(var r=!1,n=0;n<i.length;n++)"x"==i[n]&&t!=e&&(r=!0),"y"==i[n]&&s!=o&&(r=!0);r&&f()}},System=function(){var t=navigator.appName,e=navigator.userAgent,i=e.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);(i=e.match(/(opera|chrome|safari|firefox|msie|trident|edge)\/?\s*(\.?\d+(\.\d+)*)/i))&&null!=(s=e.match(/version\/([\.\d]+)/i))&&(i[2]=s[1]);var s=navigator.maxTouchPoints;this.browser=i?i[1]:t,this.version=i?i[2]:navigator.appVersion,this.touch=1<navigator.maxTouchPoints,this.opera="Opera"==this.browser,this.ie9="MSIE 9.0"==this.browser,this.ie="MSIE"==this.browser||"Trident"==this.browser||"Edge"==this.browser,this.edge=-1<e.search(/(edge)\/?\s*/i),this.ff="Firefox"==this.browser,this.safari="Safari"==this.browser,this.chrome=window.chrome,this.win=-1<e.search("Windows NT"),this.ios=-1<e.search(/(iphone|ipad|ipod)\/?\s*/i)||"MacIntel"===navigator.platform&&1<s,this.tv=1!=v.notv&&-1<e.search(/(TV|tvOS|webOS|armv|BRAVIA|Roku|Tizen|Philips)\/?\s*/i),this.lg=1!=v.notv&&-1<e.search(/(LG)\/?\s*/i),this.iphone=-1<e.search(/(iphone)\/?\s*/i),this.ipad=this.ios&&!this.iphone,this.webkit="WebkitAppearance"in document.documentElement.style,-1<e.search(/(android)\/?\s*/i)&&(0<s?this.android=!0:this.tv=!0,matchMedia("(pointer:fine)").matches&&(this.tv=!0)),this.mobile=(this.ios||this.android||-1<e.search(/(blackberry|iemobile|opera mini)\/?\s*/i))&&!this.tv,this.mutedautoplay=this.safari||this.chrome,this.fullscreen=!1,this.ios&&(this.iosv=parseFloat(e.substr(e.indexOf("OS ")+3,4).replace("_",".")),this.ipad&&(!1 in window||s<2)&&(this.mobile=this.ios=!1,this.tv=!0)),this.desktop=!this.mobile,this.mobiletv=this.mobile||this.tv,this.wkdt=this.webkit&&this.desktop,(o.frame.requestFullScreen||o.frame.requestFullscreen||o.frame.mozRequestFullScreen||o.frame.webkitRequestFullScreen||o.frame.msRequestFullscreen)&&(this.fullscreen=!0)};function UpdateObject(t,e){for(var i in e)if("object"==typeof e[i])if("events"==i||"file"==i)t[i]=e[i];else for(var s in e[i])if("object"!=typeof t[i]&&(t[i]={}),"object"==typeof e[i][s])for(var o in e[i][s])if("object"!=typeof t[i][s]&&(t[i][s]={}),"object"==typeof e[i][s][o])for(var r in e[i][s][o])"object"!=typeof t[i][s][o]&&(t[i][s][o]={}),t[i][s][o][r]=e[i][s][o][r],"padding"!=o&&"margin"!=o||(t[i][s][o][r]=parseInt(t[i][s][o][r]));else t[i][s][o]=e[i][s][o],"padding"!=s&&"margin"!=s||(t[i][s][o]=parseInt(t[i][s][o]));else t[i][s]=e[i][s],"padding"!=i&&"margin"!=i||(t[i][s]=parseInt(t[i][s]));else 0<i.indexOf("roll")&&""===trim(e[i])||(t[i]=SettingsParser(i,e[i]));return t}var SettingsParser=function(t,e){return"string"==typeof e&&(e=trim(e),-1<t.indexOf("color")&&-1!=e&&(e=CheckColor(e))),e};function StorageSupport(){try{var t=window.localStorage,e="__storage_test__";return t.setItem(e,e),t.removeItem(e),!0}catch(t){return!1}}function killMotion(t){t&&exist(o.motions[t])&&o.motions[t].TheEnd()}var Lang=function(t){var e=t;e&&-1<(e=t.charAt(0).toUpperCase()+t.slice(1)).indexOf("_")&&(e=e.replace(/_/gi," "));var i={of:"of",kbps:"kbps",castdevice:"Playback on device",casterror:"Playback error on device",together:"All at once",pass:"Password","0val":"No",sleeptimer:"Sleep",offsettimer:"Skip","1val":"Yes",sub_bottom:"Bottom margin",sub_weight:"Font weight",sub_shadow:"Shadow",sub_bga:"Background opacity",sub_bgcolor:"Background color",sub_sizeproc:"Text size",sub_color:"Text color",sub_color2:"Text color 2",sub_shift:"Time shift",sub_reset:"Reset",prev:"Previous",copied:"Copied to clipboard","160p":"Tiny","240p":"Small","360p":"Medium","480p":"High","540p":"High","720p":"HD","1080p":"Full HD","1296p":"Super HD","1440p":"Quad HD","2160p":"Ultra HD 4K",ads:"Ad",adsinvitation:"Go to the advertiser's website",audiotrack:"Audio",live:"LIVE",fullscreen:"Enter fullscreen",normalscreen:"Exit fullscreen"};return exist(i[t])&&(e=i[t]),exist(o["lang_"+v.lang])&&exist(o["lang_"+v.lang][t])&&(e=o["lang_"+v.lang][t]),v.rename&&v.rename[t]&&(e=v.rename[t]),e},gaTracker=function(t,e,i){if(!exist(o.gatracked[e])&&1!=v.playerjscom){var s,r=o.titlestore||v.title||"";if(exist(v.label)&&(r=v.label),1==v.yamtr_event[t]&&1==v.yamtr&&exist(v.yamtrid)&&("init"==t&&setInterval(yaHit,3e5),exist(window["yaCounter"+v.yamtrid])?(window["yaCounter"+v.yamtrid].reachGoal("playerjs_"+t,{title:r}),log("Yandex","playerjs_"+t)):log("Yandex Metric error")),1==v.ga_event[t]&&1==v.ga)if(1==v.ga4){if(window.gtag){if(s={label:r},v.galabels&&"object"==typeof v.galabels)for(var n in v.galabels)v.galabels.hasOwnProperty(n)&&(s[n]=v.galabels[n]);gtag("event","playerjs_"+t,s)}}else window.ga&&(s={eventCategory:"Player",eventAction:e},""!=r&&(s.eventLabel=r),1!=v.gainact||o.clicktime||(s.nonInteraction=1),ga("user.send","event",s))}i&&(o.gatracked[e]=!0)};function yaHit(){exist(window["yaCounter"+v.yamtrid])&&window["yaCounter"+v.yamtrid].reachGoal("playerjs_hit")}var YoutubeID=function(t){var e,i,s="";return(t=t.replace("v=","{="))&&(-1<t.indexOf("youtu.be/")?(s=t.substr(t.indexOf(".be/")+4)).replace("/",""):s=t.split(/(youtu.be\/|v\/|embed\/|watch\?|youtube.capiom\/user\/[^#]*#([^\/]*?\/)*)\??{?=?([^#\&\?]*)/)[3],""!=s&&0<s.indexOf("?t=")&&(v.start=s.substr(s.indexOf("?t=")+3),(t=i=e=0)<v.start.indexOf("h")&&(e=v.start.substr(0,v.start.indexOf("h")),v.start=v.start.substr(v.start.indexOf("h")+1)),0<v.start.indexOf("m")&&(i=v.start.substr(0,v.start.indexOf("m")),v.start=v.start.substr(v.start.indexOf("m")+1)),0<v.start.indexOf("s")&&(t=v.start.substr(0,v.start.indexOf("s")),v.start=v.start.substr(v.start.indexOf("s")+1)),(0<e||0<i||0<t)&&(v.start=3600*e+60*i+ +t),s=s.substr(0,s.indexOf("?")))),s},js=function(x,y,li,ev){if("init"==x&&(o.init=!0),1==ev)for(var yi in y)y.hasOwnProperty(yi)&&"object"==typeof y[yi]&&(y[yi]="");if(1==v.eventstracker&&o.init)if(1==v.eventlisteners||1==li)JsEvent(x,y);else{if(null!=y)if("object"==typeof y)try{y=JSON.stringify(y)}catch(t){}else"string"==typeof y&&(y=y.replace(/'/gi,""));if("string"==typeof v.events&&0==v.events.indexOf("{"))try{v.events=v.events.replace(/\'/gi,'"'),v.events=JSON.parse(v.events)}catch(t){console.log(t)}if("object"==typeof v.events){if(exist(v.events[x])||exist(v.events.other)){var z=x;!exist(v.events[x])&&exist(v.events.other)&&(z="other"),0==x.indexOf("vast_")&&exist(v.events.vast)&&(z="vast");try{void 0!==y?eval(v.events[z]+"('"+x+"','"+v.id+"','"+y+"')"):eval(v.events[z]+"('"+x+"','"+v.id+"')")}catch(t){log("events",t,x)}}}else{""==v.events&&(v.events="PlayerjsEvents");try{void 0!==y?eval(v.events+"('"+x+"','"+v.id+"','"+y+"')"):eval(v.events+"('"+x+"','"+v.id+"')")}catch(t){log("events",t,x,y)}}}if(o.init&&1==v.pjsframe&&o.pjsfrm)try{o.pjsfrm.contentWindow.postMessage({event:x,info:y},"*")}catch(t){}var zv,z;1==v.postmessage&&1!==li&&(zv={event:x,time:o.media?"seek"==x?o.seeked_time:o.media.time():0},null!=y&&(zv.data=y),"duration"!=x&&"time"!=x||(zv.duration=o.media.duration()),"volume"!=x&&"unmute"!=x||(zv.volume=v.volume),"new"==x&&(zv.id=apiProcessor("playlist_id")),window.parent.postMessage(zv,"*"),z="vast_Impression"==x?"adShown":"seek"==x?"rewound":"unmute"==x?"unmuted":"mute"==x?"muted":"pause"==x?"paused":"play"==x?"resumed":"init"!=x&&"start"!=x&&"end"!=x?x:x+"ed",zv.event=z,""!=z&&z!=x&&(zv=JSON.parse(JSON.stringify(zv)),window.parent.postMessage(zv,"*")))},JsEvent=function(t,e){var i=document.createEvent("Events");void 0!==e&&(i.info=e),i.initEvent(t,!0,!0),o.container.dispatchEvent(i)};function apiProcessor(t,e,i){if(!exist(o.actions)||"string"!=typeof t)return!1;if(1!=o.destroyed){if(i&&"string"==typeof i&&0==i.indexOf("id:")&&(i=o.controls.butByS(i.substr(3),"dom"))&&"button"==t&&"toogle"==e&&i.Click(),"play"==t||"file"==t)if(exist(e)){var s=!1;if("string"==typeof e){var r=-1;if(-1<(e=e.replace(/(\r\n|\n|\r)/gm,"")).indexOf("[seek:")&&e.lastIndexOf("]")==e.length-1){if(r="time"==(r=(r=e.substr(e.indexOf("[seek:")+6,e.length-1)).substr(0,r.length-1))?o.media.time():parseInt(r),""==(e=e.substr(0,e.indexOf("[seek:"))))return o.actions.Seek(r),void o.actions.Play();o.seekto=r}if(-1<e.indexOf("[skipads]")&&(s=!0,e=e.replace("[skipads]","")),0==e.indexOf("#"+v.enc2)&&(e=o[o.fd[0]](e)),0==e.indexOf("#"+v.enc3)&&0<e.indexOf(v.file3_separator)&&(e=o[o.fd[1]](e)),0==e.indexOf("#0")&&(e=fd0(e)),1==v.fplace&&(e=fplace(e)),e.indexOf(".txt")==e.length-4)return(f=XHR(e)).onload=function(){if(4==this.readyState&&200==this.status)try{apiProcessor("play",JSON.parse(this.responseText))}catch(t){}},void f.send();if(0==e.indexOf("id:")&&exist(o.playlist_dic)){var n=FindIdPl(e);return!!exist(o.playlist_dic[n])&&(o.controls.PlaylistPlayId(n),-1<r&&(o.seekto=r),!0)}if(0==e.indexOf("youtubeid:")){if(n=e.substr(10),"youtube"==o.file_type)return o.media.playByYoutubeId(n),!0;e="//youtu.be/"+n}}"play"==t&&(o.controls.PreNewPl(),o.actions.NewFile(e,void 0,void 0,s?1:0)),"file"==t&&(o.newfile=!0,v.autoplay=0,o.actions.NewFile(e,1,void 0,s?1:0),o.controls.Duration(0,0),o.start=!1)}else"play"==t&&o.actions.Play(),"file"==t&&"function"==typeof Papi41&&Papi41();if("file2"==t&&e&&o.media.pipSrc(e),"preload"==t&&(exist(e)?(o.newfile=!0,o.actions.NewFile(e,1,1)):o.media.Preload()),"pause"==t&&o.play&&(o.actions.Pause(),o.actions.RenewSubtitle()),"channel"==t&&exist(e)&&o.start&&o.channels&&o.channels.SetChannel(e),0==t.indexOf("vpaid_")&&o.vast&&o.vast.VpaidSet(t.substr(6),e),"alert"==t&&(o.alert.close(),o.alert=new Alert,exist(e)?o.alert.txt(e):(1==v.alert404?o.alert.txt(v.alert404text):o.alert.txt("Test message"),1==v.alert404v&&exist(v.alert404video)&&(o.err404v=new PluginErrorVideo))),"waiting"==t&&(o.start||o.controls.startcss(),o.controls.Waiting(),o.controls.HideElement("control_start")),"toggle"==t&&(o.play?o.actions.Pause():o.actions.Play()),"stop"==t&&(v.preload=0,v.autoplay=0,o.media.Recover(),o.actions.Stop()),"reload"==t&&(o.time=o.media.time(),o.actions.Reload()),"download"==t&&v.apiprm&&1==v.apiprm.on&&1==v.apiprm.dwn&&o.actions.Download(),"effect"==t&&exist(e)&&o.effects&&o.effects.api(e),"share"==t&&o.controls.showShare(),"startvast"==t&&exist(e)&&1==v.vast)if(0==e.indexOf("js:"))v.midroll=e,v.midrolls=!0,o.actions.advertising("midroll");else if(""!=o.p){var a=JSON.parse(decode(o.p));for(l in a)a.hasOwnProperty(l)&&exist(a[l].id)&&e==a[l].id&&(v.midroll="prt"+(exist(a[l].cpm)?"cpm"+a[l].cpm:"")+e+"_"+a[l].preroll,v.midrolls=!0,o.actions.advertising("midroll"))}if("vastbreak"==t&&"function"==typeof VastBreak&&VastBreak(e),"cuid"==t&&e&&(v.cuid=e,o.continue&&o.continue.updateCuid()),"mute"==t&&o.actions.Mute(),"speed"==t){if(!exist(e))return o.files_speed[o.current_speed];o.actions.SetSpeed(e)}if("played"==t&&v.apiprm&&o.pld&&1==v.apiprm.pld)return Math.round((o.pld.filter(Boolean).length-1)/Math.round(o.media.duration())*100);if("speeds"==t)return o.files_speed;if("unmute"==t&&o.actions.Unmute(),"thumbnails"==t&&exist(e)&&(v[t]=e,o.actions.Thumbs()),"qualities"==t)return o.files_quality;if("adblock"==t)return!!o.ab;if("live"==t)return!!o.media&&o.media.isLive();if("subtitles"==t)return 1==v.sub_off?o.files_subtitle.slice(0,-1):o.files_subtitle;if("native"==t)return o.nativecontrols;if(0==t.indexOf("subtitle:")&&e&&(v[t.replace("title:","_")]=e,o.actions.RenewSubtitle()),"plduration"==t)return o.pldur;if("audiotracks"==t)return o.files_audiotrack;if("volume"==t||"setVolume"==t)return exist(e)&&("string"==typeof e&&(0==e.indexOf("+")?e=v.volume+parseFloat(e.substr(1)):0==e.indexOf("-")&&(e=v.volume-parseFloat(e.substr(1)))),0<=e&&e<=1&&o.actions.Volume(e)),o.muted?0:v.volume;if("muted"==t)return!!exist(o.muted)&&o.muted;if("moveplaylist"==t&&o.controls&&o.controls.PlaylistMove(e),"design"==t&&(e<2&&(e=""),exist2(o["u"+e]))){var l,c=JSON.parse(decode(o["u"+e])),u=[];for(l in v)v.hasOwnProperty(l)&&0==l.indexOf("control_")&&(v[l]=null);if("object"==typeof c)for(var d in c)c.hasOwnProperty(d)&&(0==d.indexOf("control_")&&(v[d]=c[d]),"toolbar"==d&&(u[d]=c[d]));v=UpdateObject(v,u),s=!1,o.controls.SettingsVisible()&&(o.controls.Settings(),s=!0);var h=!1;o.controls.PlaylistVisible()&&(o.controls.Playlist(),h=!0),o.controls.Remove(),o.controls=null,o.controls=new Controls,"playing"==o.media.status()&&o.controls.Play(),o.controls.Volume(v.volume),exist(v.title)&&Title(v.title),s&&o.controls.Settings(),h&&o.controls.Playlist(),o.fullscreen&&o.controls.Fullscreen(),"control_duration"!=key&&o.controls.Duration(o.media.time(),o.media.duration()),MainResize()}if("vars"==t)return v.vars;var f;if("resize"==t&&o.controls.resize(!0),"mainresize"==t&&o.controls.resizeSettings(),"resize2"==t&&MainResize(),"seek"==t&&exist(e)&&("string"==typeof e&&(-1<e.indexOf("%")?(e=parseInt(e.substr(0,e.indexOf("%"))),e=o.media.duration()*e/100):(h=o.media.time(),o.continue&&!o.start&&(o.continue.seeked||(m=o.continue.flag()).t&&m.d&&(h=m.t,o.continue.seeked=!0)),0==e.indexOf("+")?e=h+parseFloat(e.substr(1)):0==e.indexOf("-")&&(e=h-parseFloat(e.substr(1))))),(e=+e)<0&&(e=0),0<o.media.duration()&&e>o.media.duration()&&(e=0),!exist(o.vast)&&!exist(o.vastloader)&&0<o.media.duration()?(o.seekto=void 0,o.actions.Seek(e,!0),o.actions.Playing()):o.seekto=e),"fullscreen"==t&&(o.fullscreen||o.actions.Fullscreen()),"exitfullscreen"==t&&o.fullscreen&&o.actions.Normalscreen(),"isfullscreen"==t)return o.fullscreen;if("size"==t)return o.screen_w+"/"+o.screen_h;if("fix"==t&&exist(o.minify)&&o.minify.Do(),"unfixing"!=t&&"unfix"!=t||exist(o.minify)&&o.minify.Un(),"time"==t||"time2"==t){var p=o.media?o.media.time():0;return o.continue&&1==v.timestore&&!o.start&&0==p&&(m=o.continue.flag()).t&&(p=m.t),"time2"==t?timeFormat(p):p}if("timeplay"==t&&(o.butplstart&&apiProcessor("play","id:"+o.butplstart),o.butseekto&&(apiProcessor("seek",o.butseekto),apiProcessor("play"))),"duration"==t)return o.media?o.media.duration():0;if("buffered"==t)return o.media?o.media.loaded():0;if("points"==t&&e&&(v.points=e,o.controls.RenewPoints()),"quality"==t){if(!exist(e))return o.media?NoSpan(o.media.getQuality()):0;i?(v.hd=Switcher(v.hd,e,i),2==o.files_quality.length&&o.actions.SetQuality(v.hd)):o.actions.SetQuality(e)}if("audiotrack"==t){if(!exist(e))return o.media?o.media.getAudioTrack():0;i?(v.ahd=Switcher(v.ahd,e,i),2==o.files_audiotrack.length&&o.actions.SetAudioTrack(v.ahd)):o.actions.SetAudioTrack(e)}if("isyoutube"==t)return"youtube"==o.file_type;if("restart"==t&&(0<o.current_audiotrack&&(o.restart_audio=o.current_audiotrack),o.actions.NewFile(o.files[o.current_file])),"playing"==t)return o.play;if("started"==t)return o.start;if("system"==t)return o.system[e];if("youtubeready"==t&&1!=o.destroyed&&o.media.onYoutubeReady(),"id"==t)return v.id;if("log"==t&&(v.log=e),"eventstracker"==t&&(v.eventstracker=e),"pip"==t&&o.media.PipToggle(),"switchpip"==t&&(o.media.PipSwitch(),i&&(o.piped=Switcher(o.piped,e,i))),"airplay"==t&&o.media.Airplay(),"pipwebkit"==t&&o.media.PipWebkit(),"options"==t&&1!=v.playerjscom&&console.log(options),"castinit"==t&&o.chromecast&&o.chromecast.init(),"subtitle"==t){if(!exist(e))return o.files_subtitle?o.files_subtitle[o.current_subtitle]:"";"0/1"==e&&(e=o.subtitle_on?(o.submm=o.current_subtitle,-1):o.submm||0),(v.subtitle=e).toString().length<3&&o.sbt?o.sbt.SetSubtitle(+e):o.actions.Subtitle(e)}if("+subtitle"==t&&v.subtitle&&exist(e)&&(v.subtitle+=","+e,o.actions.Subtitle(v.subtitle)),"quiz"==t&&exist(o.quiz)){if(!exist(e))return o.quiz.Active();o.quiz.api(e)}if("geo"==t)return o.geobj||!1;if("ratio"==t)return o.media.ratio();if("box"==t&&((b=createElement("div")).id=e,b.style.zIndex=1e4,o.frame.appendChild(b)),"screenshot"==t){if(o.tagvideo){var g=createElement("canvas"),m=o.media.size();g.width=0<m.width?m.width:o.normal_w,g.height=0<m.height?m.height:o.normal_h,css(g,{position:"absolute",top:-g.height,left:-g.width,display:"none"}),document.body.appendChild(g),(p=g.getContext("2d")).drawImage(o.media.tag(),0,0,g.width,g.height);var y,b=document.createElement("canvas");b.width=2*g.width,b.height=2*g.height,(m=b.getContext("2d")).drawImage(o.media.tag(),0,0,2*g.width,2*g.height),1==v.sscopyright&&exist(v.sstext)&&(exist(v.ssfontsize)||(v.ssfontsize=20),exist(v.ssfontcolor)||(v.ssfontcolor="ffffff"),m.font=v.ssfontsize+"px Inter, Arial",m.fillStyle=CheckColor(v.ssfontcolor),m.fillText("domain"==v.sstext?o.domain:v.sstext,v.ssfontsize,2*g.height-v.ssfontsize-5)),p.drawImage(b,0,0,g.width,g.height);try{y=g.toDataURL("image/jpeg")}catch(t){return console.log(t.message),!1}return y}return!1}if("dash"==t)return o.file_type==t?o.media.getDASH():void 0;if("hls"==t)return o.file_type==t?o.media.getHLS():void 0;if("poster"==t)return!(o.play&&0!==v.posterhide||(o.media.Poster(e),0));if("stretch"==t){if(!exist(e))return existv(v.covervideo,0);"1/0"==e&&(e=1-existv(v.covervideo,0)),v.covervideo=e,o.media.normalscale()}if("scale"==t){if(!exist(e))return[o.mediascale.x,o.mediascale.y,o.mediacontainer.style.left,o.mediacontainer.style.top];0==e?o.media.normalscale():o.media.scale(e)}if("title"==t)return exist(e)?(exist(e)&&(v.title=e),o.actions.Title("title"),!0):v.title;if("invert"==t&&o.actions.InvertPlaylist(),"push"==t&&e&&(o.playlist_source||(o.playlist_source=[]),"object"==typeof e&&(e=o.playlist_source.concat(e),t="playlist")),"playlist"==t&&e)if("object"==typeof e)try{return o.actions.UpdatePlaylist(e),!0}catch(t){return!1}else{if(e.indexOf(".txt")==e.length-4||0<e.indexOf(".txt?"))return(f=XHR(e)).onload=function(){if(4==this.readyState&&200==this.status)try{apiProcessor("playlist",JSON.parse(this.responseText))}catch(t){}},f.send(),!0;if(""==e)o.actions.UpdatePlaylist([]);else if("played"==e&&0<o.pldur)return(S=Math.round((o.pldur2+(o.controls.PlaylistG("played")?0:o.media.time()))/o.pldur*100))<o.pldur3||100<S?o.pldur3:o.pldur3=S}if("next"==t&&o.controls&&o.controls.PlaylistNext(),"prev"==t&&o.controls&&o.controls.PlaylistPrev(),"cut"==t&&o.controls&&o.controls.Cut(e),"cut?"==t)return o.cutted?[o.cut1,o.cut2]:0;if("flip"==t&&o.media&&o.media.flip(),"find"==t&&exist(e)&&exist(o.playlist_dic)){for(var T in o.play||(v.autoplay=0),o.playlist_dic)o.playlist_dic.hasOwnProperty(T)&&o.playlist_dic[T].pjs_id==e&&(e=T);return!!exist(o.playlist_dic[e])&&(o.controls.PlaylistOpenId(e),!0)}if("playlist_folders"==t){var S=[];if(exist(o.playlist_dic))for(var T in o.playlist_dic)o.playlist_dic[T].folder&&-1==o.playlist_dic[T].pjs_parent_i&&S.push({title:o.playlist_dic[T].title,id:o.playlist_dic[T].id});return S}if("playlist_id"==t&&o.plid)return o.playlist_dic[o.plid].pjs_id||o.plid;if("playlist_length"==t)return o.playlist_dic?Object.keys(o.playlist_dic).length:-1;if("playlist_title"==t&&exist(o.playlist_title))return o.playlist_title;if("showplaylist"==t&&o.controls.PlaylistShow(e),"showvlt"==t&&o.media.VstLdTxt(),"toolbar"==t&&("on"==e?v.toolbar.hide=0:"off"==e?(v.toolbar.hide=1,o.controls.HideForce()):o.controls.ShowForce()),"menu"==t&&o.controls.Settings(),"focus"==t&&(o[t]=!0),"vastnow"==t)return!!o.vast;if("vastinfo"==t)return!!o.vast&&VastInfo();if("vastpause"==t)return!!o.vast&&o.vast.pause();if("vastresume"==t)return!!o.vast&&o.vast.resume();if("vaststart"==t){if(!o.vast)return!1;o.vast.startAd()}if("vastmute"==t){if(!o.vast)return!1;o.vast.mute()}if("captions"==t){if(!i)return v.captions;v.captions=Switcher(v.captions,e,i),o.media.captions()}if("loop"==t)if(exist(i))v.loop=Switcher(v.loop,e,i);else{if(!exist(e))return v.loop;"0/1"==e&&(e=1-v.loop),v.loop=e}if("shuffle"==t)if(exist(i))v.shuffle=Switcher(v.shuffle,e,i);else{if(!exist(e))return v.shuffle;v.shuffle=e}if("autonext"==t||"playlistloop"==t)return n="playlistloop"==t?"playlistrewind":"autoplaylist",exist(i)?v.playlist[n]=Switcher(v.playlist[n],e,i):exist(e)&&("0/1"==e&&(e=1-v.playlist[n]),v.playlist[n]=e),v.playlist[n];if("hd"==t&&2==o.files_quality.length&&(v.hd=o.files_quality[o.current_quality],v.hd=Switcher(v.hd,e,i),o.files_quality[0]==v.hd?o.actions.SetQuality(0):o.actions.SetQuality(1)),"v"==t&&e)return 0==e.indexOf("file")||0==e.indexOf("bk")?void 0:v[e];if(0==t.indexOf("update:")){var w=t.substr(7);if("object"==typeof e&&"object"==typeof v[w])for(var x in e)e.hasOwnProperty(x)&&(v[w][x]=e[x]);else-1==t.indexOf("rc_")&&(v[w]=e);return!0}if(0==t.indexOf("text:")&&o.controls.customText(t.substr(5),e),1==v.clrs&&0==t.indexOf("color")&&e&&pushCSS("pjsdiv, pjsdiv > *{--pjs"+t+":"+CheckColor(e)+"}"),"currentfile"==t)return o.media?o.media.currentFile():"";if("vrsn"==t)return o.version+" "+o.playerid;if("playerid"==t)return o.playerid;if("hlserror"==t)return o.hlserror;if("dasherror"==t)return o.dasherror;if("visibility"==t)return o.visibility;if("vastids"==t)return o.vast?o.vast_adid:void 0;if("destroy"==t){if(o.actions.StopMedia(),v.hotkey.on=0,1==v.stopotherplayers)for(var E=0;E<pljssglobal.length;E++)pljssglobal[E]&&pljssglobal[E].api("id")==v.id&&(pljssglobal[E]=null);for(var _ in window)window[_]==o.this&&(window[_]=null);pljssglobalid==v.id&&(pljssglobalid=""),o.destroyed=1,o.container.innerHTML="",o.this=null}}}function Switcher(t,e,i){var s=trim(e)+"";return e&&0<e.indexOf("/")&&2==(e=e.split("/")).length&&(t==trim(e[0])?(s=trim(e[1]),i&&i.CustomSwitch(1)):(s=trim(e[0]),i&&i.CustomSwitch(0))),s}function XHR(t){var e=new XMLHttpRequest;return e.open("GET",t,!0),e}function FindIdPl(t){var e=t.substr(3);if(o.playlist_dic)for(var i in o.playlist_dic)o.playlist_dic.hasOwnProperty(i)&&o.playlist_dic[i].pjs_id==e&&(e=i);return e}function VastInfo(){if(o.vast&&o.vast.active()&&(t=o.vast),!t&&o.vastloader&&(t=o.vastloader),t){var t={is:o.vasttype,system:t.info("adsystem"),version:t.info("version"),vpaid:t.info("isVpaid"),url:o.current_vast_url+(t.info("wrapper")?t.info("wrapper0")+t.info("wrapper"):""),type:t.info("filetype"),duration:t.info("dur"),file:t.info("file"),time:o.media?o.media.time():"",volume:t.getVolume(),id:o.vast_adid};return"midroll"==o.vasttype&&(t.midroll_time=o.midrollcrtm),t}}function MediaSess(){"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:notag(existv(o.titlestore,v.title)),artwork:[{src:existv(v.poster,"")}]}),o.mss||(navigator.mediaSession.setActionHandler("play",(function(){apiProcessor("play")})),navigator.mediaSession.setActionHandler("pause",(function(){apiProcessor("pause")})),o.controls.PlaylistExist()&&(navigator.mediaSession.setActionHandler("previoustrack",(function(){apiProcessor("prev")})),navigator.mediaSession.setActionHandler("nexttrack",(function(){apiProcessor("next")}))),o.mss=!0))}this.event=function(t,e){o.events[t]=e},this.api=function(t,e,i){return 1==v.logapi&&log("api",t,e),apiProcessor(t,e,i)};var createElement=function(t){var e=t;return"div"!=t&&"div2"!=t||(e="pjsdiv"),e=document.createElement(e),"div2"==t&&css(e,{cursor:"pointer",display:"block"}),e},log=function(t,e,i,s,o,r,n){1!=v.log&&1!=v.logout||(n=t+(null!=e?" "+e:"")+(null!=i?" "+i:"")+(null!=s?" "+s:"")+(null!=o?" "+o:"")+(null!=r?" "+r:"")+(null!=n?" "+n:""),console.log("Playerjs"+(1==v.pjsframed?"2":"")+": "+n),1==v.logout&&exist(document.getElementById("pjslog"))&&(document.getElementById("pjslog").innerHTML+=n+"<br/>"))},CustomFonts=function(){var t;1==v.fonts&&exist(v.fontnames)&&""!=v.fontnames&&((t=document.createElement("link")).rel="stylesheet",t.href="https://fonts.googleapis.com/css?family="+v.fontnames.replace(/,/gi,"|").replace(/ /gi,"+"),document.head.appendChild(t))},SvgColor=function(t,e){for(var i=["path","polygon","polyline","rect","ellipse","circle"],s=0;s<i.length;s++){var o=t.querySelectorAll("svg "+i[s]);if(0<o.length)for(var r=0;r<o.length;r++)o[r].style.fill=e}},JsClk=function(){v.apiprm&&1==v.apiprm.clk&&js("click")},Time=function(t){t<0&&(t=0);var e=600<=o.media.duration,i=3600<=o.media.duration,s=Math.floor(t/60),r=Math.floor(t-60*s),n=Math.floor(s/60),a=Math.floor(n/24);if(s-=60*n,0<a&&(n-=24*a),1==v.dvrtime&&o.media.isLive()){var l=new Date;return String(new Date(l.getTime()+1e3*t).toLocaleTimeString())}return String((0<a?a+":":"")+(0<n||i?n+":":"")+((0<n||e)&&s<10?"0":"")+s+":"+(r<10?"0":"")+r)},timeFormat=function(t){var e=Math.floor(t),i=Math.floor(e/60),s=Math.floor(i/60);i=Math.floor(i%60);return 0<s&&i<10&&(i="0"+i),i=(0<s?s+":":"")+(0<=i?i:"0")+":"+(e=0<=(e=Math.floor(e%60))?10<=e?e:"0"+e:"00"),1==v.dvrtime&&o.media.isLive()?(e=new Date,String(new Date(e.getTime()+1e3*t).toLocaleTimeString())):i},Href=function(){return encodeURIComponent(window.location!=window.parent.location?document.referrer:document.location.href)},NoSpan=function(t){var e;return!t||-1<(e=(t=t.toString()).indexOf(" <span style='opacity"))&&(t=t.substr(0,e)),t},Script=function(t,e,i){var s;return!Scripted(t)&&e&&("same"==e&&(e=t),(s=document.createElement("script")).src=-1==e.indexOf("//")?"https://"+e:e,s.async=1,i&&(s.name=i),(i=document.getElementsByTagName("script")[0]).parentNode.insertBefore(s,i)),s},notag=function(t){return t&&t.replace(/<[^>]*>?/gm,"")},Scripted=function(t){for(var e=!1,i=document.getElementsByTagName("script"),s=0;s<i.length;s++)-1<i[s].src.indexOf(t)&&(e=!0);return e},hex2rgb=function(t,e){if(t){if(-1<t.indexOf("color")||-1<t.indexOf("var"))return CheckColor(t);t=t.replace("#","");var i=parseInt(3==t.length?t.slice(0,1).repeat(2):t.slice(0,2),16),s=parseInt(3==t.length?t.slice(1,2).repeat(2):t.slice(2,4),16);t=parseInt(3==t.length?t.slice(2,3).repeat(2):t.slice(4,6),16);return exist(e)?"rgba("+i+", "+s+", "+t+", "+e+")":"rgb("+i+", "+s+", "+t+")"}},css=function(t,e){if(exist(t))for(var i in e)e.hasOwnProperty(i)&&"NaNpx"!=e[i]&&null!=e[i]&&("number"==typeof e[i]&&"opacity"!=i&&"zIndex"!=i&&(e[i]+="px"),-1<i.indexOf("olor")&&-1==i.indexOf("scheme")&&(e[i]=CheckColor(e[i])),("transform"==i||-1<i.indexOf("backdrop"))&&(t.style["-ms-"+i]=e[i],t.style["-moz-"+i]=e[i],t.style["-webkit-"+i]=e[i],t.style["-o-"+i]=e[i]),"fontFamily"==i&&-1<e[i].indexOf(" ")&&(e[i]='"'+e[i]+'"'),"box-sizing"==i?t.style.setProperty(i,e[i],"important"):t.style[i]=e[i])},Bglines=function(t,e,i,s){e=CheckColor(e),i=+existv(i,1),s=+existv(s,1),css(t,{background:"repeating-linear-gradient(-45deg,"+e+","+e+" "+i+"px,rgba(0,0,0,0),"+i+"px,rgba(0,0,0,0) "+(i+s)+"px)"})},CheckColor=function(t){return t?(0==t.indexOf("color")&&(t="var(--pjs"+t+")"),"#"!=t.substr(0,1)&&-1==t.indexOf("var")&&-1==t.indexOf("rgb")?t="#"+t:t):"#fff"},controlCSS=function(t,e,i){e=CheckColor(e=e||"#fff");var s=random(1e5,1e6);s=(t=(t=(t=t.replace(/\(rand\)/g,s)).replace(/\(color\)/g,e)).replace(/\(scl\)/g,1+(v.control_buffer.scale-1)/2)).substr(0,t.indexOf("|||")),e=t.substr(t.indexOf("|||")+3),t="";o.system.webkit&&(t=(t=(t=(t=e.replace(/animation:/g,"-webkit-animation:")).replace(/animation-/g,"-webkit-animation-")).replace(/@keyframes/g,"@-webkit-keyframes")).replace(/transform/g,"-webkit-transform")),i&&(i.innerHTML=s),pushCSS(t+e)},indOf=function(t,e,i){var s=!1;if(t)for(var o=0;o<t.length;o++)if(t[o])if(i){if(parseFloat(e)==parseFloat(t[o])){s=o;break}}else-1<String(t[o]).indexOf(e)&&(s=!0);return s},pushCSS=function(t){o.css&&(o.css.styleSheet?o.css.styleSheet.cssText=t:o.css.appendChild(document.createTextNode(t)))},Pos0=function(t){css(t,{position:"absolute",top:0,left:0,width:"100%",height:"100%"})},Pnt0=function(t){css(t,{pointerEvents:"none"})},xhr=function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.onload=e,i.send()},FindPjsDiv=function(t){if(t)for(var e=0;e<5&&"PJSDIV"!=t.nodeName;e++)t.parentElement&&(t=t.parentElement);return t},gif=function(t){var e=document.createElement("img");-1<o.gifed.indexOf(t)?(o.gifed.push(t),t=0<t.indexOf("?")?t+"&"+Math.random():t+"?"+Math.random()):o.gifed.push(t),e.setAttribute("src",t),e.setAttribute("height","1px"),e.setAttribute("width","1px")},attr=function(t,e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])},destroy=function(t){if(t)try{t.parentNode.removeChild(t),t=null}catch(t){}},random=function(t,e){return Math.floor(1<arguments.length?(e-t+1)*Math.random()+t:(t+1)*Math.random())},randomstr=function(){return Math.random().toString(36).substring(2,12)},removebykey=function(t,e){return t=Object.keys(t).reduce((function(i,s){return s!=e&&(i[s]=t[s]),i}),{})},trim=function(t){return"string"==typeof t?t.replace(/^\s+|\s+$/gm,""):t},cut=function(t,e,i){var s=!1;return t&&-1<t.indexOf(e)&&(s=t.substr(t.indexOf(e)+e.length),i&&-1<s.indexOf(i)&&(s=s.substr(0,s.indexOf(i)))),s},encode=function(t,e){return 0==e?"#0"+salt.e(t):-1==e?salt.e(t):1==e?"#1"+pepper(salt.e(t),1):void 0},str2obj=function(x){if(""!=v[x])if("string"!=typeof v[x])o[x+"o"]=v[x];else if(0==v[x].indexOf("[{"))try{v[x]=v[x].replace(/pjs'qt/gi,'"'),o[x+"o"]=eval(v[x])}catch(t){}},dechar=function(t){return String.fromCharCode(t)},decode=function(t){return"#1"==t.substr(0,2)?salt.d(pepper(t.substr(2),-1)):"#0"==t.substr(0,2)?salt.d(t.substr(2)):t},checkBase64=function(t){return t&&-1==t.indexOf("http")&&-1==t.indexOf(".")&&100<t.length&&-1==t.indexOf("data:")&&(t="data:image/png;base64,"+t),t},hide=function(t){t&&(t.style.visibility="hidden")},show=function(t){t&&(t.style.visibility="visible")},hide2=function(t){t&&(t.style.display="none")},show2=function(t){t&&(t.style.display="block")},isVisible=function(t){return!!t&&"hidden"!=t.style.visibility&&"none"!=t.style.display},int=function(t){return"string"==typeof t&&0<t.indexOf("px")&&(t=t.substr(0,t.indexOf("px"))),parseInt(t)},hidden=function(t){return"none"==t.style.display},MarginPadding=function(t,e,i){return t[e+"top"]=0,t[e+"right"]=0,t[e+"bottom"]=0,t[e+"left"]=0,!exist(t[i])||4==(i=t[i].split(" ")).length&&(t[e+"top"]=i[0]?parseFloat(i[0]):0,t[e+"right"]=i[1]?parseFloat(i[1]):0,t[e+"bottom"]=i[2]?parseFloat(i[2]):0,t[e+"left"]=i[3]?parseFloat(i[3]):0),t},MarPad=function(t){return(t=t&&t.replace(/ /gi,"px "))+"px"},StringVar=function(t,e){return v[t]&&""!=v[t]?v[t]:e},abc=String.fromCharCode(65,66,67,68,69,70,71,72,73,74,75,76,77,97,98,99,100,101,102,103,104,105,106,107,108,109,78,79,80,81,82,83,84,85,86,87,88,89,90,110,111,112,113,114,115,116,117,118,119,120,121,122),salt={_keyStr:abc+"0123456789+/=",e:function(t){var e,i,s,o,r,n,a="",l=0;for(t=salt._ue(t);l<t.length;)s=(n=t.charCodeAt(l++))>>2,o=(3&n)<<4|(e=t.charCodeAt(l++))>>4,r=(15&e)<<2|(i=t.charCodeAt(l++))>>6,n=63&i,isNaN(e)?r=n=64:isNaN(i)&&(n=64),a=a+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(r)+this._keyStr.charAt(n);return a},d:function(t){var e,i,s,o,r,n,a="",l=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<t.length;)s=this._keyStr.indexOf(t.charAt(l++)),e=(15&(o=this._keyStr.indexOf(t.charAt(l++))))<<4|(r=this._keyStr.indexOf(t.charAt(l++)))>>2,i=(3&r)<<6|(n=this._keyStr.indexOf(t.charAt(l++))),a+=dechar(s<<2|o>>4),64!=r&&(a+=dechar(e)),64!=n&&(a+=dechar(i));return salt._ud(a)},_ue:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?e+=dechar(s):(127<s&&s<2048?e+=dechar(s>>6|192):(e+=dechar(s>>12|224),e+=dechar(s>>6&63|128)),e+=dechar(63&s|128))}return e},_ud:function(t){for(var e,i="",s=0,o=0;s<t.length;)(e=t.charCodeAt(s))<128?(i+=dechar(e),s++):191<e&&e<224?(o=t.charCodeAt(s+1),i+=dechar((31&e)<<6|63&o),s+=2):(o=t.charCodeAt(s+1),c3=t.charCodeAt(s+2),i+=dechar((15&e)<<12|(63&o)<<6|63&c3),s+=3);return i}},pepper=function(t,e){t=(t=t.replace(/\+/g,"#")).replace(/#/g,"+");var i=sugar(o.y)*e;e<0&&(i+=abc.length/2);var s=abc.substr(2*i)+abc.substr(0,2*i);return t.replace(/[A-Za-z]/g,(function(t){return s.charAt(abc.indexOf(t))}))},sugar=function(t){t=t.split(dechar(61));var e,i,s="",o=dechar(120);for(i in t)if(t.hasOwnProperty(i)){var r,n="";for(r in t[i])t[i].hasOwnProperty(r)&&(n+=t[i][r]==o?dechar(49):dechar(48));e=parseInt(n,2),s+=dechar(e.toString(10))}return s.substr(0,s.length-1)},exist=function(t){return null!=t&&void 0!==t&&"undefined"!=t},existv=function(t,e){return exist(t)?t:e},exist2=function(t){return exist(t)&&-1!=t&&""!=t},exist2v=function(t,e){return exist2(t)?t:e},copyObject=function(t){return"object"==typeof t&&(t=JSON.parse(JSON.stringify(t))),t},findLeft=function(t){return t.getBoundingClientRect().left+(window.scrollX||window.pageXOffset)},checkFont=function(t){return 1==v.globalfont&&exist2(v.globalfontname)&&v.globalfontname,"Inter"},findTop=function(t){return t.getBoundingClientRect().top+window.scrollY},redirect=function(t,e){""!=t&&(1==v.redirectblank?window.open(t):1==v.redirectparent?window.parent.location.href=t:window.location.href=t,t="")},reRightMenu=function(){1==v.rightmenu&&(o.rightmenu&&o.frame.removeChild(o.rightmenu),o.rightmenu=null)},Actions=function(){var _fullscreen_end=!1,volumewheelin;function Prefile(t){return exist(v.prefile)&&-1==t.indexOf("//")&&(t=v.prefile+t),t}function Ctxt(t){for(var e,i=1;i<6;i++){var s="text"+i;exist(t[s])&&(v[s]=t[s],e=!0)}e&&o.controls&&o.controls.upTexts()}function Thumbs(){1==v.thumbs&&"undefined"!=typeof PluginThumbs&&(o.th=new PluginThumbs)}function onPlay(t){o.onplay=!0,o.controls&&o.controls.SettingsVisible()&&o.controls.Settings(),o.droplist&&o.droplist.Close(),t||o.media.Play(),o.checknative||setTimeout((function(){o.media.NativeControls()}),500),o.play||o.controls.Play(),1==v.effects&&o.effects.api("play"),1==v.vast&&o.actions.VastRecover("pauseroll"),o.system.mobile&&o.controls.HideInterval(),exist(o.share)&&o.share.isOpen()&&o.share.Hide(),1==v.heartbeats&&exist(v.heartbeat)&&o.dt&&(""==v.heartbeat||exist(o.heartbeatInterval)||(o.heartbeatInterval=setInterval(Heartbeat,1e3*v.heartbeatinterval),Heartbeat()))}function StartTimeout(){o.starttimeout=!1,o.controls.refresh()}function Quartile(t){o.quartile[t]=!0,1==v.timestore&&1==v.playedstore&&v.playedquartile==t&&o.storage&&o.plid&&o.continue&&o.continue.writePl(o.plid)}function gaTrackPlay(t,e,i,s){exist(o.gatracked[e])||s<i&&gaTracker(t,e,1)}function NativeEnterFs(){var t=o.media.tag();t&&(o.nativefull=!0,o.media.nativeSubtitle(),t.webkitEnterFullScreen(),t.addEventListener("webkitendfullscreen",iosExitFullscreen))}function NativeExitFs(){var t=o.media.tag();t&&t.webkitExitFullscreen()}function PostFullscreen(){1!=o.fs_error&&(o.ispipkit&&o.media.PipWebkit(),1==v.hotkey.volumewheelfull&&(VolumeWheelX(!0),o.volumewheel=!0),1==v.effects&&o.effects.api("full"),js("fullscreen"),gaTracker("full","Fullscreen",1))}o.system.tv&&log("tv"),this.Title=function(t){o.controls&&o.controls.title(t)},this.File=function(t){if(!t)return t;if("string"==typeof t&&0==(t=t.replace(/(\r\n|\n|\r)/gm,"")).indexOf("[{"))try{t=t.replace(/pjs'qt/gi,'"'),t=JSON.parse(t)}catch(e){t="incorrect JSON"}if("object"==typeof t&&(o.playlist_dic=[],o.playlist_source=copyObject(t),o.playlist=IndexPlaylist(t),0<o.playlist.length)){var e;1!=v.playlist.openlast||v.plstart||(e=Object.keys(o.playlist_dic).slice(-1)[0])&&(v.plstart=e);var i=FindFileInPlaylist();if(i){t=i.file,o.titlestore=i.title,o.controls&&o.controls.titlepl(i.title),exist(i.poster)&&(o.media?o.media.Poster(i.poster):v.poster=i.poster),exist(i.sub)&&(i.subtitle=i.sub),exist(i.start)&&("continue"==i.start&&!o.start||(v.start=o.seekto=i.start)),SettingsTimers("offset"),exist(i.id)&&(o.plid=i.id);var s=["subtitle","vars","embed","url","url2","url3","heartbeat","thumbnails","label","download","points","remove","end","delete","outside","title2","skip","customtext","volume"];exist(v.control_title)&&1==v.control_title.showfrom1file&&1==v.control_title.showtitleplaylist&&(s.push("title"),s.push("t1"),s.push("t2"),s.push("t3"),s.push("t4"),s.push("t5"));for(var r=0;r<s.length;r++)exist(i[s[r]])&&(v[s[r]]=i[s[r]]);Ctxt(i),0<s.indexOf("title")&&(1==v.control_title.templated&&(o.title_template=v.control_title.template,o.actions.TitleTemplate(i)),o.actions.Title("title")),exist(i.volume)&&setTimeout((function(){o.actions.Volume(i.volume)}),200),o.controls&&(o.controls.UpdatePlaylist(o.playlist),v.customtext&&o.controls.customTextPl()),o.droplist&&o.droplist.Update()}}if("string"==typeof t){var n;if((t=fjs(t))&&(0==t.indexOf("#"+v.enc2)&&(t=o[o.fd[0]](t)),t&&(0==t.indexOf("#"+v.enc3)&&0<t.indexOf(v.file3_separator)&&(t=o[o.fd[1]](t)),0==t.indexOf("#0")&&(t=fd0(t)),t=fjs(t))),1==v.fplace&&(t=fplace(t)),""==t&&(log("empty file"),o.media_error=!0,js("error","empty")),o.files_quality=[],o.files_quality_ag=[],o.files_audiotrack=[],o.current_file=0,o.current_quality=0,o.current_audiotrack=0,o.ncrtat=0,""==v.file_separator&&(v.file_separator=","),-1<t.indexOf(v.qbr1)&&-1<t.indexOf(v.qbr2)||exist(v.qualities)?o.files=t.split(v.file_separator):o.files=[t],o.audiotracks=[],exist(v.qualities)&&(n=v.qualities.split(v.file_separator)),0<o.files.length){var a,l=-1;for(r=0;r<o.files.length;r++)o.files[r]=trim(o.files[r]),""!=o.files[r]&&(0==o.files[r].indexOf(v.qbr1)&&1<o.files[r].indexOf(v.qbr2)?(o.files_quality[r]=o.files[r].substr(o.files[r].indexOf(v.qbr1)+v.qbr1.length,o.files[r].indexOf(v.qbr2)-v.qbr2.length),o.files[r]=o.files[r].substr(o.files[r].indexOf(v.qbr2)+v.qbr2.length)):exist(v.qualities)?o.files_quality[r]=exist(n[r])?n[r]:"":o.files_quality[r]=r+1,a=0,exist(v.default_quality)&&-1==l&&(0==String(v.default_quality).indexOf("num:")&&+v.default_quality.substr(4)==r&&(a=1),v.default_quality==o.files_quality[r]&&(a=1),"max"==v.default_quality&&r==o.files.length-1&&(a=1)),exist(o.default_quality)&&o.default_quality==o.files_quality[r]&&(a=1,l=r),1==a&&(o.current_file=r,o.current_quality=r),o.files[r]=Prefile(o.files[r]))}else o.files[0]=Prefile(o.files[0]);return o.files[o.current_file]}},this.InvertPlaylist=function(){if(o.playlist){for(var t=o.playlist.reverse(),e=0;e<t.length;e++)t[e].pjs_i=e;o.playlist=t,o.controls.UpdatePlaylist(o.playlist)}},this.Ctxt=function(t){Ctxt(t)},this.UpdatePlaylist=function(t){"object"==typeof t&&(o.playlist_dic=[],o.playlist_source=copyObject(t),o.playlist=IndexPlaylist(t),o.controls&&o.controls.UpdatePlaylist(o.playlist))},this.NewFile=function(t,e,i,s){exist(e)||(o.autoplay=!0),exist(i)||(v.preload=0),v.duration=void 0,v.end=void 0,options.delete||(v.delete=void 0),2!=o.media_error&&(o.media_error=!1),o.metadata=!1,o.pipwebkit=!1,o.reloadTimer=0,o.gatracked=[],o.checknative=!1,o.gained=!1,o.dvr=!1,o.bitrate=void 0,o.quartile=[!1,!1,!1],o.sess=randomstr(),o.sesstime=0,o.or0=0,o.pld&&(o.pld=[]),"pjs"!=o.file_type&&o.sbt&&o.sbt.remove(),o.trcka&&(o.trcka=[]),o.err404v&&o.err404v.remove(),"playing"==o.media.status()&&this.Stop(),o.cut&&o.cutted&&o.controls.Cut(),exist(o.share)&&o.share.Remove(),exist(o.reloadto)&&clearTimeout(o.reloadto),js("new"),1==v.vast&&1!=s&&(o.actions.VastRecover(),o.actions.VastRecover("midroll")),t=this.File(t),1==e&&(o.file_type=""),o.media.File(t),!o.system.mobile&&!o.system.safari||exist(e)||o.actions.Play(),exist(o.custom_aspect)&&(o.mediascale={x:1,y:1,x0:1,y0:1},o.media.normalscale()),gaTracker("play","Play"),o.media.NativeControls(),o.controls.QualityChangedNoHand(),o.controls.AudioTrackChangedNoHand(),o.controls.refresh(),o.mediatags&&o.mediatags.read()},this.TitleTemplate=function(t){var e=!1;if(t&&o.title_template){v.title=o.title_template;for(var i=1;i<6;i++)exist(t["t"+i])&&(v.title=v.title.replace("{"+i+"}",t["t"+i]),e=!0)}return e},this.MediaReady=function(){(1==v.autoplay&&!v.autoplayed||o.autoplay)&&(1==v.observer?setTimeout((function(){o.actions.Play()}),500):this.Play(),v.autoplayed=1,o.autoplay=!1),Thumbs()},this.Thumbs=function(){Thumbs()},this.NativeControls=function(){var t=!1;return o.system.mobile&&(t=!0,1==v.nativenotiphone&&o.system.iphone&&(t=!1),1==v.nativenotipad&&o.system.ipad&&(t=!1),1==v.nativenotios&&o.system.ios&&(t=!1),1==v.nativenotandroid&&o.system.android&&(t=!1)),1==v.nativeontv&&o.system.tv&&(t=!0),t},this.Metadata=function(){o.media.Volume(v.volume),o.muted&&o.media.Mute(),o.metadata=!0,o.controls&&o.controls.refresh(),o.play||o.start||1==v.effects&&o.effects.api("pause"),o.casting&&o.tagvideo&&(o.chromecast.Exit(),o.chromecast.Go()),1==v.vast&&1!=v.nomidroll&&1==v.midrolls&&(exist(o.vast)||MidrollOverlay("midroll","metadata"))},this.onPlayTag=function(){o.onplay||onPlay(!0)},this.Play=function(t){if(!o.play&&o.media){o.actplay=!0,o.vstpause=!1,o.ended=!1,clearTimeout(o.plapto);var e=!1;if("youtube"==o.file_type&&(o.media.YoutubeReady()||1==v.autoplay||1!=v.preload||(e=!0,window.YT&&(v.autoplay=1,o.autoplay=!0,o.media.onYoutubeReady()))),1==v.pass&&0==v.passontime&&(o.actions.Password(),e=!0),o.media_error||e)o.media_error&&Advertising("preroll")&&datetime(2);else{if(o.newfile=!1,StopOtherPlayer(!o.start),o.alert.close(),o.start)gaTracker("resume","Resume");else{js("start"),o.start=!0,1==v.toolbar.hideuntilstarted&&setTimeout((function(){o.controls.resizetext()}),100),0<v.toolbar.hideleavetimeout&&1==v.autoplay&&(o.starttimeout=!0,setTimeout(StartTimeout,1e3*v.toolbar.hideleavetimeout)),1==v.water&&v.wid&&PluginWater();for(var i=0;i<o.vsts.length;i++)1==v["vast_nofirst"+o.vsts[i]]&&localStorage.setItem("pljsfirst"+o.vsts[i],Date.now());1==v.pjsstat&&v.pjsstatid&&PluginStat("start"),o.sbt&&o.sbt.start(),js("new"),o.ctxtnk&&o.controls.upText(o.ctxtnk),o.controls.startcss(),o.controls.refresh(),gaTracker("play","Play"),o.system.mobile&&MediaSess(),o.ab&&gaTracker("adblock","AdBlock",1)}1!=v.fullonplay||o.fullscreen||(new Date).getTime()-o.clicktime<300&&(o.system.ios||1==v.fullonplaymobile&&!o.system.mobile||this.Fullscreen()),o.subtitle_on&&1==v.subpausehide&&show2(o.subtitle),o.err404v&&o.err404v.remove(),1!=t&&Advertising("preroll")||Advertising("intro")?datetime(2):(1==v.redirect&&exist(v.redirectonplay)&&!exist(options.redirect)&&(redirect(v.redirectonplay),e=!0),e||(log("Play"),0<o.media.duration()&&o.controls.Duration(o.media.time(),o.media.duration()),o.start2||(o.start2=!0,0<v.toolbar.hideleavetimeout&&1==v.autoplay&&(o.starttimeout=!0,setTimeout(StartTimeout,1e3*v.toolbar.hideleavetimeout))),e=!1,1<o.media.time()&&1==v.pauserollonplay&&1!=t&&!isVastBgLoad()&&!exist(o.vast)&&!exist(o.vastloader)&&(e=Advertising("pauseroll")),e&&!isVastBgLoad()||onPlay(!1)))}}else o.media&&o.media.Play()},this.Pause=function(){o.play&&(o.actplay=!1,log("Pause"),o.media.Pause(),o.controls.Pause(),js("pause"),1==v.posteronpause&&ShowPoster(),1==v.posterhidepause&&HidePoster2(),1==v.effects&&o.effects.api("pause"),o.subtitle_on&&1==v.subpausehide&&hide2(o.subtitle),exist(o.vast)||exist(o.vastloader)||0!=v.pauserollonplay||Advertising("pauseroll"),isVastBgLoad()&&(o.vstpause=!0),o.onplay=!1)},this.Mute=function(){o.media.Mute(),o.controls.Mute(),o.muted=!0,js("mute")},this.Unmute=function(){o.media.Unmute(),o.muted=!1,o.controls.Unmute(),o.media.Volume(v.volume),js("unmute")},this.Volume=function(t,e){o.controls&&(t<.01&&(t=0),1<t&&(t=1),t<=0?(this.Mute(),t=v.volume=0):(o.muted&&this.Unmute(),v.volume=t),js("volume",t),o.controls.Volume(t,e),o.media.Volume(t))},this.Waiting=function(){o.controls.Waiting()},this.StopWaiting=function(){o.controls&&o.controls.StopWaiting()},this.Progress=function(){this.StopWaiting()},this.Seeked=function(){o.actions.UpdatePlay(),this.StopWaiting()},this.Duration=function(t,e){var i;!o.continue||o.start||(i=o.continue.flag()).t&&i.d&&(t=i.t),o.controls&&o.controls.Duration(t,e)},this.LoadedData=function(t,e){0<o.seekto&&"youtube"!=o.file_type&&!o.media.isLive()&&(o.actions.Seek(o.seekto,!1),o.seekto=void 0)},this.ScreenClick=function(){var t=new Date;o.clicktime=t.getTime(),t=!1,o.controls.SettingsVisible()&&1!=v.settings.always&&(o.controls.SettingsClose(),t=!0),o.droplist&&o.droplist.Visible()&&(o.droplist.Close(),t=!0),0==v.playlist.always&&o.controls.PlaylistVisible()&&1==v.playlist.autohide&&(o.controls.Playlist(),t=!0),1==v.redirect&&exist(v.redirectonclick)&&!exist(options.redirect)&&(redirect(v.redirectonclick),t=!0),o.muted&&1==v.unmuteonclick&&(o.actions.Unmute(),t=!(v.unmuteonclick=0)),t||(1==v.hotkey.on&&1==v.hotkey.icons&&1==v.hotkey.playiconbut&&PluginHotIcon("play",o.play?0:1),this.Toggle())},this.ControlsBgClick=function(){o.controls.SettingsVisible()&&o.controls.Settings()},this.Toggle=function(){"playing"==o.media.status()?(js("userpause"),1==v.scrnstp?this.StopMedia():this.Pause()):(js("userplay"),this.Play()),Sub()},this.Seek=function(t,e){t<o.media.duration()&&(1==v.control_line.dontseekforward&&t>o.media.time()||(0<v.delete&&t<v.delete&&(t=v.delete),log("Seek"),o.seeked_time=t,o.media.Seek(t),e&&o.controls.Seek(t,o.media.duration()),o.seeking=!0,o.seeking_time=o.media.time(),Sub(o.seeking_time)))},this.Open=function(t,e,i){"playing"==o.media.status()&&"audio"!=o.mode&&(Pause(),o.fullscreen&&i&&o.actions.Normalscreen()),window.open(t,e)},this.Download=function(){var t;1!=v.vast||o.start||!Advertising("preroll")?(t=o.media.currentFile(),exist(v.download)&&(t=v.download),""!=t&&(js("download"),window.open(t,1==v.downself?"_self":"_blank").focus())):o.vstdwn=!0},this.UpdatePlay=function(t){var e=o.media.time(),i=o.media.duration();!o.start&&0<o.seekto&&(e=o.seekto),o.controls.Played(e,i,t)},this.Playing=function(){var t=o.media.time(),e=o.media.duration(),i=0<e?t/e:0;o.seeking?t!=o.seeking_time&&-9!=o.seeking_time&&(o.seeking=!1):o.controls&&o.controls.Played(0<o.seekto?o.seekto:t,e),(1==v.ga||1==v.yamtr)&&0<e&&(gaTrackPlay("play25","Play 25%",i,.25),gaTrackPlay("play50","Play 50%",i,.5),gaTrackPlay("play75","Play 75%",i,.75));for(var s,r,n,a=0;a<3;a++)o.quartile[a]||.25*a+.25<=i&&Quartile(a);if(1==v.reloadlog&&log(1,t,e),(1==v.reload||0<v.fileorto)&&o.play&&(n=s=!1,1==v.reloadlive&&1==v.reload&&(o.media.isLive()||(s=!0)),0<t?(t!=o.time||s?o.reloadTimer=0:n=!0,o.time=t):1==v.reloadstart&&(r=o.media.loaded(),1==v.reloadlog&&log(2,r,o.timeld),s||(r==o.timeld?n=!0:o.reloadTimer=0),o.timeld=r),n&&(o.reloadTimer++,1==v.reload?(1==v.reloadlog&&log(3,o.reloadTimer),o.reloadTimer==v.reloadtimeout*(1e3/o.timerTime)&&o.actions.Reload()):0<v.fileorto&&1<o.media.urlsl()&&o.reloadTimer==v.fileorto*(1e3/o.timerTime)&&o.media.onError("OR timeout"))),v.apiprm&&1==v.apiprm.pld&&0<e&&(o.pld||(o.pld=[]),o.pld[Math.round(t)]=1),1==v.vast&&(1!=v.nomidroll&&1==v.midrolls&&(exist(o.vast)||MidrollOverlay("midroll",t,e)),1!=v.nooverlay&&1==v.overlays&&(exist(o.vast)||MidrollOverlay("overlay",t,e))),1==v.intros&&0<v.introstart&&t>=v.introstart&&(exist(o.vast)||(Advertising("intro")&&(o.media.Pause(),o.controls.Pause()),v.introstart=0)),SettingsTimers("play"),1==v.pass&&-1<v.passontime&&PasswordTime(t,e),o.subtitle_on&&Sub(t),o.storage&&1==v.timestore&&o.continue&&(o.seekto||o.continue.write(t,e)),o.cutted&&o.cut&&o.cut.play(t),exist(v.end)&&(n=v.end,indOf([v.end],"-")&&(n=e),0<n&&n<t&&("youtube"==o.file_type?(o.media.Pause(),o.media.Seek(0<v.start?v.start:0)):(o.media.Recover(),o.actions.Stop()),0<v.start&&(o.seekto=v.start),o.actions.Ended())),exist(v.remove)){var l=v.remove.split(",");for(a=0;a<l.length;a++){var c=l[a].split("-");2==c.length&&t>c[0]&&t<c[1]&&o.media.Seek(+c[1]+(o.system.safari?1:0))}}1==v.tracking&&"undefined"!=typeof PluginTrack&&PluginTrack(t,i)},this.Reload=function(){var t;o.reloadTimer=0,exist(o.reloadto)&&clearTimeout(o.reloadto),1==v.reloadjustevent?js("reload"):(0<o.seekto||o.media.isLive()||(o.seekto=o.media.time()+(0<v.reloadplus?1:0)),t=o.controls.PlaylistVisible(),js("reload"),o.media.reload(),t&&1==v.playlist.autohide&&o.controls.PlaylistShow())},this.Stopped=function(){o.controls.Played(0,0),o.controls.Loaded(0,0),o.actions.Duration(0,0),o.controls.StopWaiting()},this.Loading=function(){var t,e;o.media&&(t=o.media.loaded(),1==v.pjsiframed&&js("loaded",t),e=o.media.duration(),o.controls&&o.controls.Loaded(t,e))},this.Ended=function(){js("fileend"),o.ended=!0,1==v.loop?("youtube"==o.file_type&&this.Stop(),1==v.vast&&o.actions.VastRecover("preroll"),0<v.start&&o.actions.Seek(v.start),this.Play()):(o.media.isLive()||"youtube"==o.file_type?this.Stop():1==v.finishrewind&&(o.actions.Seek(0<v.start?v.start:0,!0),o.system.ie&&o.media.Pause()),o.controls.onEnded(),1==v.intros&&(v.outros=1),Advertising("postroll")||Advertising("outro")||End())},this.Fullscreen=function(){var t,e=!1,i=!1;for(t in o.fs_error=!1,o.fullscreen_process=!0,setTimeout((function(){o.fullscreen_process=!1}),3e3),o.motions)if(o.motions.hasOwnProperty(t)&&exist(o.motions[t]))try{o.motions[t].TheEnd2()}catch(t){}try{if(o.fullscreen_start=!0,(o.system.ios&&1==v.nativefullios||o.system.android&&1==v.nativefulldroid)&&o.tagvideo&&!o.nativecontrols&&(t=o.media.tag())&&t.webkitSupportsFullscreen&&(NativeEnterFs(),e=!0),!e){var s,r=o.frame;if(("dm"==o.file_type||"vimeo"==o.file_type)&&o.system.iphone&&1==v.nativefullios)return void o.media.iosfull();r.requestFullscreen?(o.realfullscreen=!0,void 0!==(s=r.requestFullscreen({navigationUI:"hide"}))&&s.then((function(){})).catch((function(t){}))):r.requestFullScreen?(r.requestFullScreen({navigationUI:"hide"}),o.realfullscreen=!0):o.frame.mozRequestFullScreen?(r.mozRequestFullScreen({navigationUI:"hide"}),o.realfullscreen=!0):r.webkitRequestFullScreen?(r.webkitRequestFullScreen({navigationUI:"hide"}),o.realfullscreen=!0):r.msRequestFullscreen&&(r.msRequestFullscreen(),o.realfullscreen=!0)}}catch(t){i=!0,log(t)}o.realfullscreen||e||(o.system.webkit&&o.iniframe?NativeEnterFs():this.FullscreenUI()),i||setTimeout(PostFullscreen,200)},this.NativeEnterFs=function(){NativeEnterFs()},this.NativeExitFs=function(){NativeExitFs()};var lastwheel={x:0,y:0},vast_and,vast_or,vast_type,vasturl;function VolumeWheel(t){var e;o.droplist&&o.droplist.OpenScroll()||0!=t.wheelDelta&&(0!=t.deltaX?lastwheel.x++:lastwheel.x--,0!=t.deltaY?lastwheel.y++:lastwheel.y--,(1==v.hotkey.whlskfll||1==v.hotkey.scrollwheelfull)&&o.fullscreen&&lastwheel.y>lastwheel.x?(clearInterval(volumewheelin),volumewheelin=setInterval((function(){lastwheel={x:0,y:0},clearInterval(volumewheelin)}),1e3)):(o.hidden_volume_over=!0,clearInterval(volumewheelin),volumewheelin=setInterval((function(){o.hidden_volume_over=!1,o.controls.resize(),lastwheel={x:0,y:0},clearInterval(volumewheelin)}),2e3),o.controls.resize()),lastwheel.x>lastwheel.y?0<t.deltaX?o.actions.Volume(parseFloat(v.volume)-v.hotkey.wheelstep/10,"no"):o.actions.Volume(parseFloat(v.volume)+v.hotkey.wheelstep/10,"no"):(e=o.system.win?-v.hotkey.wheelstep/10:v.hotkey.wheelstep/10,1==v.hotkey.scrollwheelfull&&o.fullscreen?o.media.scale(0<t.deltaY?e:-e):1==v.hotkey.whlskfll&&o.fullscreen?apiProcessor("seek",0<t.deltaY?"+"+10*e:"-"+10*e):(o.actions.Volume(parseFloat(v.volume)+(0<t.deltaY?e:-e),"no"),o.controls.volumescroll())))}function iosExitFullscreen(){o.system.ios&&(o.media.removeNativeSubtitle(),js("exitfullscreen")),o.nativefull=!1}function NewAspect(t,e){if(exist(o.vast)&&!e)o.resizeonplay=t;else{var i=!1,s=o.container_w/t,r=(e=0,{height:s});if(1==v.chngwd&&s>o.container_h&&(s=o.container_h,e=o.container_w/t,o.container_w=r.width=e),exist(o.parentIframe)&&1!=v.notframe)try{css(o.parentIframe,r)}catch(t){i=!0,log("iframe crossdomain issue")}i||(o.aspect=t,o.container_h=s,0<o.aspect&&css(o.container,r),0<e&&js("width",e),js("height",s)),o.vast&&!o.fullscreen&&(o.screen_h=s,0<e&&(o.screen_w=e),o.vast.Resize())}}function VolumeWheelX(t){lastwheel={x:0,y:0},t?window.addEventListener("wheel",VolumeWheel):(clearInterval(volumewheelin),window.removeEventListener("wheel",VolumeWheel))}function Sub(t){o.sbt&&o.sbt.show(exist(t)?t:o.media.time())}function Advertising(t){if(0<v["vast_"+t+"timebreak"]&&o.storage){var e=localStorage.getItem("pljs"+t+"_"+o.d);if(e){var i=new Date;if(o.clicktime=i.getTime(),(i.getTime()-e)/36e5<v["vast_"+t+"timebreak"])return!1}}if(0<v["vast_"+t+"timelimit"]&&0<o.media.duration()&&o.media.duration()<60*v["vast_"+t+"timelimit"]){if(!(0<v["vast_"+t+"timelimited"]))return!1;v["vast_"+t+"_andlimit"]=v["vast_"+t+"timelimited"]}if(-1==o.compilations.indexOf("VAST")||1!=v.vast||o.noads||1!=v[t+"s"])return!1;if("undefined"==typeof VastVideo)return!1;if(("intro"==t||"outro"==t)&&"undefined"!=typeof PluginIntro)return vasturl=[],PluginIntro(t);if(exist(o.vast)||exist(o.vastloader))return!isVisible(o.vastcontainer)||isVastBgLoad(o.vasttype)?(log("ad bg"),!1):(log("ad now"),!0);if(exist(v[t])){if(-1<v[t].toString().indexOf(".")||-1<v[t].toString().indexOf(":")||-1<v[t].toString().indexOf("[yandex]")){js("vast_init",t),isVastBgLoad(t)||"overlay"==t||(setTimeout((function(){o.play||null==o.vastloader&&null==o.vast||o.actions.Waiting()}),10),Curtain()),vast_or=vast_and=0,vasturl=v[vast_type=t].split(" and "),o.vast_loaders=[],o.adsinchain=vasturl.length,VastAndLimit(),o.adscounter=1,o.adsfirst=!0;for(var s=0;s<vasturl.length;s++)vasturl[s]=vasturl[s].split(" or ");for(v[t.concat("_","recover")]=v[t],v[t]=null,"overlay"!=(o.vasttype=t)&&(o.vast=new VastVideo),o.vastloader=new VastLoader,s=0;s<vasturl.length;s++)for(var r,n=0;n<vasturl[s].length;n++)0<(l=trim(vasturl[s][n])).indexOf("[50%]")&&(r=random(1,2),vasturl[s][n]=vasturl[s][n].replace("[50%]",""),2==r&&(vasturl[s][n]=""));if(1==v.vast_preload)for(s=0;s<vasturl.length;s++){var a=0==s?1:0;if(vasturl[s].length>a)for(n=a;n<vasturl[s].length;n++){var l=trim(vasturl[s][n]);o.system.ie9?VastAddPreload(l):setTimeout(VastAddPreload,100*s,l)}}return""==vasturl[0][0]?VastNext():o.vastloader.Load(trim(vasturl[0][0]),t),!0}return!1}return!1}function MidrollOverlay(t,e,i){if(exist(o[t+"o"])&&1==v[t+"s"])for(var s in o[t+"o"])if(o[t+"o"].hasOwnProperty(s)&&!exist(o[t+"o"][s].worked)&&exist(o[t+"o"][s].time)&&exist(o[t+"o"][s].vast)){var r=o[t+"o"][s].time.toString(),n=!1;if(r&&("metadata"==e?r==e&&(n=!0):(r=0<r.indexOf("%")?0<i?parseInt(r.substr(0,r.indexOf("%")))*i/100:-1:parseInt(r))<=e&&(0<v["vast_"+t+"rest"]&&-1<r&&e-r>=v["vast_"+t+"rest"]&&(r=-1),-1<r&&(n=!0)),o[t+"o"][s].minduration&&0<o.media.duration()&&o.media.duration()<+o[t+"o"][s].minduration&&(n=!(o[t+"o"][s].worked=!0)),n&&(o[t+"o"][s].vast,v[t]=o[t+"o"][s].vast,o[t+"crtm"]=o[t+"o"][s].time,o[t+"skipimprsd"]=o[t+"o"][s].skipimpessed,Advertising(t)))){o[t+"o"][s].worked=!0;break}}}function VastBgLoad(){isVastBgLoad()&&(0!=o.vast_impressions&&1!=v["vast_"+o.vasttype+"bgload2"]||(css(o.vastcontainer,{opacity:0,visibility:"hidden",top:2e3}),log(o.vasttype+" hide"),"midroll"==o.vasttype&&o.media.Play()))}function isVastBgLoad(t){for(var e=!1,i=["midroll","pauseroll"],s=0;s<i.length;s++)o.vasttype!=i[s]&&t!=i[s]||1==v["vast_"+i[s]+"bgload"]&&(e=!0);return e}function VastVisible(){isVastBgLoad()&&(o.play&&(o.media.Pause(),o.controls.Pause()),log(o.vasttype+" show"),css(o.vastcontainer,{opacity:1,visibility:"visible",top:0}),o.vastfrombg=1),o.nativefull&&!o.realfullscreen?NativeExitFs():1==v["vast_"+o.vasttype+"normal"]&&o.fullscreen&&o.actions.Normalscreen()}function VastGo(t){o.vast.Go(t)}function VastLongTimeout(){exist(o.vast)&&o.vast.active()&&0==o.vast_impressions&&(o.vast.RemoveForNextAd(),log("VAST timeout "+v.vast_longtimeout),vasturl=[],VastRemoveAndPlay())}function VastCheckNext(){var t=VastAndLimit();log("VAST next "+!t),(t?VastRemoveAndPlay:VastNext)()}function VastAndLimit(){var t,e,i=!1;return o.vasttype&&(t=v["vast_"+o.vasttype+"_andlimit"],((e=v["vast_"+o.vasttype+"_and2limit"])||t)&&(0<e&&0<o.vast_starts?(o.adsinchain=e,o.vast_impressions>=e&&(i=!0)):0<t&&(o.adsinchain=t,o.vast_impressions>=t&&(i=!0)))),i}function VastNext(){var t,e;0<vasturl.length&&vasturl[vast_and]&&vast_or<vasturl[vast_and].length-1?(log("VAST Next"),o.vast&&o.vast.RemoveForNextAd(),VastBgLoad(),vast_or++,"skip"==(e=VastPreloaded(t=trim(vasturl[vast_and][vast_or])))&&(o.vastloader=new VastLoader,o.vastloader.Load(t,o.vasttype)),"error"==e&&VastNext()):VastRemoveAndPlay()}function VastPreloaded(t){var e="skip";if(1==v.vast_preload&&o.vast_loaders)for(var i,s=!1,r=0,n=0;n<o.vast_loaders.length;n++)if(0==o.vast_loaders[n].done&&(o.vast_loaders[n].ldr.preloaded(t)&&(o.vast_loaders[n].done=1,"ready"==(i=o.vast_loaders[n].ldr.Status())?(o.vastloader=o.vast_loaders[n].ldr,log("VAST preloaded"),o.vast_loaders[n].ldr.Ready(),e=i):(""==i&&(e="ok",log("VAST preloading"),o.vastloader=o.vast_loaders[n].ldr,o.vast_loaders[n].ldr.disablePreload()),"error"==i&&(e="error")),s=!0),s&&0==o.vast_loaders[n].load)){if(!(++r<6))break;VastPreloadLoad(o.vast_loaders[n])}return e}function VastAddPreload(t){if(1==v.vast_preload&&o.vast_loaders){var e=0;for(e=0;e<vasturl.length;e++)if(vasturl[e]==t&&e<=vast_and)return;if(!(1==vasturl.length&&1<vasturl[0].length)){var i=0;for(e=0;e<o.vast_loaders.length;e++)0==o.vast_loaders[e].done&&i++;o.vast_loaders.push({load:0,done:0,x:trim(t),t:o.vasttype,ldr:new VastLoader(!0)}),i<5&&VastPreloadLoad(o.vast_loaders[o.vast_loaders.length-1])}}}function VastPreloadLoad(t){t&&(t.load=1,t.ldr.Load(t.x,t.t))}function VastRemoveAndPlay(t){var e,i=VastAndLimit();if(log("VAST remove ("+o.vast_impressions+")"),0<vasturl.length&&vast_and==vasturl.length-1&&0==vasturl[0][0].indexOf("js:")&&(vast_and=-1,vasturl=[[vasturl[0][0]]]),2==o.vast_stop&&(i=!0),vasturl.length>vast_and+1&&!i){o.vast.RemoveForNextAd(),VastBgLoad(),vast_and++,o.adscounter++,vast_or=0;var s=trim(vasturl[vast_and][0]);"skip"==(i=VastPreloaded(s))&&(o.vastloader=new VastLoader,o.vastloader.Load(s,vast_type)),"error"==i&&VastRemoveAndPlay(t)}else{if(RemoveCurtain(),o.controls.StopWaiting(),exist(o.vast)&&(o.vast.Remove(),o.vast=null),o.vastloader=null,vasturl=[],vast_or=0,vast_and=0,o.vastfrombg=0,1!=o.shwvstfnsh&&js("vast_finish",o.vasttype),o.shwvstfnsh=0,1==v.vast_ima&&o.ima){try{o.ima.Destroy()}catch(t){log(o.ima,t)}o.ima=void 0}vast_type="",o.vast_impressions=0,o.vpaid_starts=0,clearTimeout(o.vast_longtimeout),clearInterval(o.vldcntrInterval),o.vast_longtomsg&&o.vast_longtomsg.remove(),o.vast_loadtxt&&o.vast_loadtxt.hide(),o.vast_starts++,("preroll"==o.vasttype||"pauseroll"==o.vasttype&&1==v.pauserollonplay&&o.actplay||"midroll"==o.vasttype)&&"?"!=v.file&&(o.media.AfterVast(),o.vstdwn&&(o.actions.Download(),e=!(o.vstdwn=!1)),"youtube"==o.file_type&&!o.vastclick&&o.system.ios&&(e=!0,"preroll"==o.vasttype&&o.media.reYT()),e||"dontplay"==t||1==v.vast_dontplay||o.vstpause?o.vstpause=!1:o.actions.Play(1)),0<o.resizeonplay&&(NewAspect(o.resizeonplay),o.resizeonplay=0),"postroll"==o.vasttype&&End(),o.vastclick=!1,o.vasttype=null}}function Curtain(){o.curtain||(o.curtain=createElement("div"),o.frame.appendChild(o.curtain),Pos0(o.curtain),css(o.curtain,{background:"#000000",opacity:.1}),o.curtain.style.zIndex=1001)}function RemoveCurtain(){o.curtain&&(o.frame.removeChild(o.curtain),o.curtain=null)}function ShowPoster(){var t;exist(o.poster)&&((t=o.fullscreen?existv(v.posterfull,v.poster):v.poster)!=o.currentposter&&Poster(t,o.poster,v.poster_scale),show(o.poster),css(o.poster,{opacity:v.poster_a}),o.controls.refresh(),o.pstrv&&o.pstrv.play())}function HidePoster2(){clearTimeout(o.pstr_to),1==v.posteronpause&&!o.play||(css(o.poster,{opacity:0}),setTimeout(HidePoster3,500))}function HidePoster3(){!o.play&&1==v.posterhide||(hide(o.poster),o.pstrv&&o.pstrv.pause(),o.controls.refresh())}function StopOtherPlayer(t){if(1==v.stopotherplayers)for(var e=0;e<pljssglobal.length;e++)pljssglobal[e]&&pljssglobal[e].api("id")!=v.id&&pljssglobal[e].api("pause");pljssglobalid=v.id}function IndexPlaylist(t){var e=Object.keys(t).length;return(o.pldur=0)<e&&(t=IndexPlaylistProcessor(t,e,"",-1)),t}function IndexPlaylistProcessor(t,e,i,s){var r,n=[];exist(t.playlist)&&(e=(t=t.playlist).length);for(var a=0,l=0;l<e;l++){if(r=!1,exist(t[l].id)&&(t[l].pjs_id=t[l].id),t[l].id="x"+i+"-"+l+(exist(t[l].id)?"-"+t[l].id:""),-1!=s||0!=l||exist(t[l].folder)||(o.pl_first_id=t[l].id),exist(o.pl_first_id)||0!=s||exist(t[l].folder)||(o.pl_first_id=t[l].id),t[l].pjs_parent=i,t[l].pjs_parent_i=s,t[l].pjs_i=a,exist(t[l].duration)&&(o.pldur+=t[l].duration),exist(t[l].comment)){t[l].title=t[l].comment;var c=t[l].file?t[l].file.indexOf("["):0,u=t[l].file?t[l].file.indexOf("]"):0;if(0<c&&0<u){for(var d=t[l].file.substr(c+1,u-c-1),h=d.split(","),f="",p=0;p<h.length;p++)f+="["+h[p]+"]"+t[l].file.replace("["+d+"]",h[p])+(p<h.length-1?",":"");t[l].file=f}}exist(t[l].playlist)&&(t[l].folder=t[l].playlist),exist(t[l].folder)||exist(t[l].file)&&(""!=t[l].file||exist(t[l].redirect))||(r=!0),r||(o.playlist_dic[t[l].id]=t[l],a+=1),!exist(t[l].folder)||0<(c=Object.keys(t[l].folder).length)&&(t[l].folder=IndexPlaylistProcessor(t[l].folder,c,t[l].id,l)),r||n.push(t[l])}return n}function FindFileInPlaylist(){var t=[];if(exist(v.plstart)){if(0!=v.plstart.indexOf("x-"))for(var e in o.playlist_dic)o.playlist_dic.hasOwnProperty(e)&&o.playlist_dic[e].pjs_id==v.plstart&&(v.plstart=e);exist(o.playlist_dic[v.plstart])?(1==v.playlist.norootplstart&&(v.playlist.openplaylistroot=0),t=o.playlist_dic[v.plstart]):(t=o.playlist[0],v.plstart==o.plcontinue&&(o.seekto=void 0))}else t=o.playlist[0];if(t){for(var i=0;i<10&&exist(t.folder);i++)t=t.folder[0];v.plstart=t.id,v.plstart==o.plcontinue&&"continue"!=t.start&&(t.start=void 0)}return t}function plNxtExst(){var t=!1;return o.controls&&o.controls.PlaylistExist()&&(1!=v.playlist.autoplaylist&&1!=v.autonext||!o.controls.PlaylistNextExist()||(t=!0)),t}function End(){gaTracker("end","End",1),o.actions.VastRecover(),o.storage&&1==v.timestore&&o.continue.write(0,o.media.duration()),o.controls.PlaylistExist()?plNxtExst()?exist(v.playlist.apto)?o.plapto=setTimeout((function(){o.controls.PlaylistNext()}),1e3*v.playlist.apto):o.controls.PlaylistNext():End2():(1==v.finishnormal&&o.fullscreen&&o.actions.Normalscreen(),End3())}function End2(){1!=v.playlist.playlistrewind||o.controls.PlaylistNextExist()?(1==v.playlist.openplaylistafter&&(o.controls.PlaylistVisible()||o.controls.Playlist()),End3()):o.controls.PlaylistRewind()}function End3(){ShowPoster(),js("finish"),1==v.redirect&&1==v.redirectafter&&exist2(v.after)&&redirect(v.after),v.suggestions&&"undefined"!=typeof PluginSug&&(o.sug||(o.sug=new PluginSug))}function fjs(x){if(0==x.indexOf("js:"))try{x=eval(x.substr(3))}catch(t){console.log(t.message)}return x||""}function Heartbeat(){var t=Math.floor(Date.now()/1e3),e=(exist(v.livets)?v.livets:0)+parseInt(o.media.time()),i=0;o.system.desktop&&(i=1),o.system.ios&&(i=2),o.system.android&&(i=3),o.system.winmob&&(i=4),o.system.tv&&(i=5),t=(t=(t=v.heartbeat.replace("[vts]",t)).replace("[fts]",e)).replace("[dvtp]",i),(i=document.createElement("img")).setAttribute("src",t),i.setAttribute("height","1px"),i.setAttribute("width","1px"),o.frame.appendChild(i)}this.FullscreenUI=function(){if(o.fullscreen_start){if(o.fullscreen=!0,o.controls.Fullscreen(),!o.realfullscreen){if(exist(o.parentIframe))try{css(o.parentIframe,{width:"100%",height:"100%",position:"fixed",left:0,top:0,zIndex:"100000"})}catch(t){}css(o.frame,{width:"100%",height:"100%",position:"fixed",left:0,top:0,zIndex:"100000"}),o.screen_w=o.frame.offsetWidth,o.screen_h=o.frame.offsetHeight;try{document.body.style.overflow="hidden",exist(o.playlist)||(document.ontouchmove=function(t){t.preventDefault()})}catch(t){}}if(1==v.fullblack&&css(o.frame,{backgroundColor:"#000000"}),1==v.fzoom&&1==o.system.webkit&&!o.system.ff){for(var t=window.screen.width,e=1,i=1;i<6;i++)1e3*i<t&&(e=existv(v["fzoom"+1e3*i],i));1<e&&(o.frame.style.zoom=e,o.fzoom=e,MainResize())}o.droplist&&o.droplist.Close(),Sub(),o.fullscreen_start=!1}},this.Normalscreen=function(){_fullscreen_end=!0,document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen?document.exitFullscreen():document.cancelFullscreen?document.cancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),o.realfullscreen||this.NormalscreenUI(!1)},this.changeAspect=function(t,e){NewAspect(t,e)},this.NormalscreenUI=function(t){if(_fullscreen_end||t){if(o.fullscreen=!1,o.nativefull=!1,!o.realfullscreen){if(exist(o.parentIframe))try{css(o.parentIframe,{position:"static",left:0,top:0,zIndex:"unset"}),css(o.parentIframe,o.parentIframe_style),css(o.parentIframe,{width:o.normal_w,height:o.normal_h})}catch(t){}css(o.frame,{width:o.normal_w,height:o.normal_h,position:"absolute",left:0,top:0,zIndex:"unset"});try{document.body.style.overflow="auto",document.ontouchmove=function(t){return!0}}catch(t){}}o.controls.Normalscreen(),1==v.fullblack&&(css(o.frame,{backgroundColor:v.screencolor}),1==v.transparent?o.frame.style.backgroundColor="transparent":css(o.frame,{backgroundColor:v.screencolor})),1<o.fzoom&&(o.frame.style.zoom=1,o.fzoom=1,MainResize()),1==v.hotkey.volumewheelfull&&(VolumeWheelX(!1),o.volumewheel=!1),o.droplist&&o.droplist.Close(),Sub(),o.subdrag&&(o.subdrag=!1),o.controls.PlaylistHere(),_fullscreen_end=!1,js("exitfullscreen"),o.realfullscreen=!1,o.fullscreen_process=!1}},this.volumewheel=function(t){0!=v.hotkey.vlscrl&&VolumeWheelX(t)},this.Stop=function(t){v.preload=0,1!=t&&(o.controls.Pause(),o.actions.Stopped()),o.media.Volume(v.volume),o.controls.SettingsVisible()&&o.controls.Settings(),o.muted&&this.Mute(),exist(o.heartbeatInterval)&&(clearInterval(o.heartbeatInterval),o.heartbeatInterval=null),Sub(0),log("stop"),js("stop")},this.StopMedia=function(){v.preload=0,v.autoplay=0,o.media.Recover(),o.actions.Stop()},this.SetQuality=function(t){exist(o.current_quality)&&o.current_quality!=t&&(o.current_quality=t,1==v.qualitystore&&(o.default_quality=o.files_quality[t],o.storage&&localStorage.setItem("pljsquality",o.default_quality)),o.media.SetQuality(t),js("quality",o.files_quality[t]),o.controls.QualityChanged(t))},this.AirplayChanged=function(){o.controls&&o.controls.AirplayChanged()},this.SetAudioTrack=function(t){exist(o.current_audiotrack)&&o.current_audiotrack!=t&&(o.current_audiotrack=t,1==v.trackstore&&(o.default_audio=v.default_audio=o.files_audiotrack[t],o.storage&&localStorage.setItem("pljstrack",o.default_audio)),o.media.SetAudioTrack(t),js("audiotrack",t),o.controls.SettingChanged("audiotrack"))},this.SetSpeed=function(t,e){"0.0"==t&&(t=.1);var i=t;if(0<String(i).indexOf(".")&&(e=1),i=+i,e||(i=t==o.speed1?1:o.files_speed[t],o.current_speed=t),i=parseFloat(i),o.line_speed||e){o.custom_speed=i;for(var s=0;s<o.files_speed.length;s++)if(i<=+o.files_speed[s]){o.current_speed=s;break}}o.storage&&1==v.speedstore&&localStorage.setItem("pljsspeed",i),js("speed",i),o.media.SetSpeed(i),o.controls.SettingChanged("speed")},this.RenewSubtitle=function(){o.sbt&&(Sub(),o.sbt.style())},this.Subtitle=function(t){"function"==typeof PluginSub&&(o.sbt||(o.sbt=new PluginSub),o.sbt.check(t))},this.advertising=function(t){Advertising(t)},this.isVastBgLoad=function(t){return isVastBgLoad(t)},this.VastImpression=function(t){t||VastVisible(),"midroll"==o.vasttype&&o.midrollimprsd.push(o.current_vast_url)},this.VpaidStarted=function(){VastVisible()},this.VastShow=function(){VastVisible()},this.VastReady=function(t){var e;o.vastloader=null,o.vastfrombg=0,log("VAST ready",o.vasttype),js("vast_ready",o.vasttype),"overlay"==t.type?(e=new VastOverlay(t),o.overlays.push(e)):exist(o.vast)?(0==v.preload&&1==v.vastbgpreload&&0==o.media.time()&&0==o.media.duration()&&(v.preload=1,o.media.Preload()),(!o.vast.tagLive()||t.isVpaid)&&0<o.vastgo&&(log("VAST renew"),o.vast.Remove(),o.vast=null,o.vast=new VastVideo),isVastBgLoad()?VastBgLoad():o.play&&(o.media.Pause(),o.controls.Pause()),o.vastgo++,o.adsfirst&&0<v.vast_longtimeout&&(clearTimeout(o.vast_longtimeout),o.vast_longtimeout=setTimeout(VastLongTimeout,1e3*v.vast_longtimeout*60),exist(v.vast_longtimemsg)&&""!=v.vast_longtimemsg&&(o.vast_longtomsg&&o.vast_longtomsg.remove(),o.vast_longtomsg=new PluginVastTimeMsg)),o.adsfirst=!1,0<v.vast_prestarttimeout?(log("VAST startdelay"),js("vast_startdelay"),setTimeout(VastGo,1e3*v.vast_prestarttimeout,t)):VastGo(t)):log("VAST alarm")},this.VastError=function(){js("vast_error",o.vasttype),log("VAST error"),VastCheckNext()},this.VastNext=function(){VastCheckNext()},this.VastRemoveUrl=function(t){if(v[o.vasttype+"_recover"])for(var e=0;e<3;e++)v[o.vasttype+"_recover"]=v[o.vasttype+"_recover"].replace(t+(0==e?" and ":1==e?" or ":""),"")},this.VastInsertAnd=function(t,e){if(""!=t){var i,s=vast_and,r=!1;if(e)for(var n=0;n<vasturl.length;n++)vasturl[n]==e&&(s=n);if(1==vasturl.length&&1<vasturl[0].length&&vast_or<vasturl[0].length-1&&vasturl[vast_or]&&(i=vasturl[vast_or].slice(1,99),vasturl[0].splice(vast_or+1,99),r=!0),"object"==typeof t)for(var a=0;a<t.length;a++)vasturl.splice(s+a+1,0,[t[a]]),o.system.ie9?VastAddPreload(t[a]):setTimeout(VastAddPreload,100*a,t[a]);else"string"==typeof t&&(vasturl.push([t]),VastAddPreload(t));r&&(vasturl[vasturl.length-1]=vasturl[vasturl.length-1].concat(i))}},this.VastInsertOr=function(t,e){if(""!=t){var i=vast_and;if(e)for(var s=0;s<vasturl.length;s++)vasturl[s]==e&&(i=s);if(vasturl[i])if("object"==typeof t)for(var o=0;o<t.length;o++)vasturl[i].push(t[o]);else"string"==typeof t&&vasturl[i].push(t)}},this.VastRemoveAndPlay=function(t){VastRemoveAndPlay(t)},this.EmptyVastUrl=function(){vasturl=[[""]]},this.VastRecover=function(t){for(var e,i=["preroll","pauseroll","postroll","intro","outro"],s=0;s<i.length;s++)e=!1,t&&t!=i[s]&&(e=!0),!e&&exist(v[i[s].concat("_","recover")])&&(v["vast_"+i[s].concat("_","limit")]--,0<v["vast_"+i[s].concat("_","limit")]&&(v[i[s]]=v[i[s].concat("_","recover")],v[i[s].concat("_","recover")]=null));if(("preroll"==t||"midroll"==t)&&1<v.vast_midroll_limit&&exist(o.midrollo)&&1==v.midrolls){for(var s in o.midrollo)o.midrollo[s].worked=void 0;v.vast_midroll_limit--}},this.Password=function(){Curtain(),exist(o.pass)&&(o.pass.Remove(),o.pass=null),o.pass=new Pass},this.RemovePassword=function(){RemoveCurtain(),o.pass.Remove(),o.pass=null},this.Curtain=function(){Curtain()},this.RemoveCurtain=function(){RemoveCurtain()},this.HidePoster=function(){exist(o.poster)&&isVisible(o.poster)&&(clearInterval(o.pstrsin),0==o.media.time()&&1==v.posterhidestart||(0<v.posterhidetime?(clearTimeout(o.pstr_to),o.pstr_to=setTimeout(HidePoster2,1e3*v.posterhidetime)):HidePoster2()))},this.ShowPoster=function(){ShowPoster()},this.plNxtExst=function(){return plNxtExst()},this.ShuffleEnd=function(){End2()}},Media=function(t){var e,i,s,r,n,a,l,c,u="",d=0,h=!1,f=!1;o.mediascale={x:1,y:1,x0:1,y0:1};var p,g=0,m=0;if("string"==typeof t){if(0==(t=trim(t)).indexOf("[{"))try{t=t.replace(/pjs'qt/gi,'"'),t=JSON.parse(t),l&&(t=o.actions.File(t))}catch(r){console.log(r),t="incorrect JSON"}0==t.indexOf("#"+v.enc2)&&(t=o[o.fd[0]](t)),t&&0==t.indexOf("#"+v.enc3)&&0<t.indexOf(v.file3_separator)&&(t=o[o.fd[1]](t)),t&&0==t.indexOf("#0")&&(t=0<t.indexOf(o.pltxt)?fd0(t.replace(o.pltxt,""))+o.pltxt:fd0(t)),1==v.fplace&&(t=fplace(t)),"string"==typeof t&&(t.indexOf(".m3u")==t.length-4||0<t.indexOf(".txt"))&&(c=t.split(" or "),y())}function y(){0<(t=c[g]).indexOf(o.pltxt)&&(t=t.replace(o.pltxt,""),v.file=t);var e=XHR(t);e.onload=function(){4==this.readyState&&200==this.status?(function(e){if(e.responseText){var i=e.responseText;if(0==i.indexOf("#"+v.enc2)&&(i=o[o.fd[0]](i)),0==i.indexOf("#"+v.enc3)&&0<i.indexOf(v.file3_separator)&&(i=o[o.fd[1]](i)),t.indexOf(".m3u")==t.length-4){var s=i.split(/(\r\n\t|\n|\r\t)/gm);t=[];for(var r,n=1,a="",l=0;l<s.length;l++)-1<s[l].indexOf("#EXTINF")&&-1<s[l].indexOf(" - ")&&(a=(r=s[l].split(" - "))[r.length-1]),-1<s[l].indexOf("http")&&(t.push({title:""+(""!=a?a:n),file:s[l]}),n++,a="")}else{i=i.replace(/(\r\n\t|\n|\r\t)/gm,"");try{t=JSON.parse(i)}catch(e){b(2)}}o.controls&&1==v.playlist.openplaylistbefore&&o.controls.PlaylistShow(2),T(),MainResize(),setTimeout((function(){js("playlist")}),1)}}(this),o.controls.NewPl()):b(1)},e.onerror=function(t){b(1)},e.send(),l=!0}function b(t){g+1<c.length&&(g++,y(),t=0),1==t&&S("playlist not found or access denied"),2==t&&S("playlists JSON")}function T(){(t=o.actions.File(t))&&"?"!=t&&O(t)}function S(t,i){var r=!0,a=!0;js("loaderror",t),1==i||1!=v.reload||1!=v.reloadfirst?(e&&(o.play||o.actplay||1==v.autoplay&&!o.start?0<e.length&&((r=++s>e.length-1)&&1<e.length&&0<v.or0&&(o.or0<v.or0&&(s=0,r=!1),o.or0++),r&&1==v.tryotherquality&&1<o.files.length&&(-1==o.files_quality[o.current_quality].indexOf(Lang("loading_error"))&&(o.files_quality[o.current_quality]=o.files_quality[o.current_quality]+" ("+Lang("loading_error")+")"),0<o.current_quality?(a=!1,o.actions.SetQuality(o.current_quality-1),z()):-1==o.files_quality[o.current_quality+1].indexOf(Lang("loading_error"))&&(a=!1,o.actions.SetQuality(o.current_quality+1),z())),r?1==v.reload&&a&&1!=v.reloadfirst&&(r=!1,E()):(0<o.seekto||!o.start||n.isLive()||(o.seekto=k()),o.file_type==N(e[s])&&"native"==o.file_type||o.play&&o.actions.Stop(1),0<v.filerorto?(clearTimeout(o.errorto),o.errorto=setTimeout(w,1e3*v.filerorto)):w())):r=!1),r&&a&&t&&x(t,!0)):E()}function w(){o.play||o.actplay||1==v.autoplay&&!o.start?(log("Alternative source",o.seekto),O("or"),o.start&&!o.vast&&n.Play(),z()):(clearTimeout(o.errorto),o.errorto=setTimeout(w,1e3*(0<v.filerorto?v.filerorto:5)))}function x(t,e){gaTracker("error","Error",!0),1!=v.alerts||o.media_error||(1==v.alert404?o.alert.txt(v.alert404text):o.alert.txt(t),1==v.alert404v&&exist(v.alert404video)&&(o.err404v=new PluginErrorVideo,o.actions.HidePoster())),e&&(o.media_error=!0),o.play&&(o.actions.StopWaiting(),o.controls.Pause()),exist(o.poster)&&!exist(o.err404v)&&o.actions.ShowPoster(),js("error",t)}function E(){log("Error Reload Timeout "+ ++m),o.play&&(o.rldplay=1),exist(o.reloadto)&&clearTimeout(o.reloadto),o.reloadto=setTimeout(_,1e3*v.reloadtimeout)}function _(){var t=existv(v.reloadtimes,10);!o.play&&1!=o.rldplay||(o.rldplay=0,m<t?o.actions.Reload():1==v.reloadfirst?S(n.errorMessage(),1):x("Reload Error "+n.errorMessage()))}function k(){return n.time()}function P(){return n.duration()}function R(){h||(o.actions.Pause(),o.media.onEnded())}function I(){if(o.tagvideo&&o.subs&&!o.nativesub){n.removeTracks();for(var t=0;t<o.subs.length;t++)"all"!=o.subs[t]&&n.addTrack(o.subs[t],o.files_subtitle[t],t==o.current_subtitle);o.nativesub=!0}}function A(){var t=!1;return n&&("youtube"==o.file_type&&(t=n.auto()),"hls"==o.file_type&&1==v.hlsquality&&1<L()&&1==v.hlsautoquality&&(t=n.auto()),"dash"==o.file_type&&1==v.dashquality&&1<C()&&(t=n.auto())),t}function L(){return"hls"==o.file_type?n.HlsLevelsLength():0}function C(){return"dash"==o.file_type?n.DashLevelsLength():0}function M(){"playing"!=(u=n?n.status():"")&&!o.casting||o.actions.Playing(),""!=u&&o.actions.Loading()}function D(){o.poster&&o.frame.removeChild(o.poster),o.poster=createElement("div"),css(o.poster,{"pointer-events":"none",opacity:v.poster_a,transition:"opacity 0.5s"}),1==v.poster_float?PluginFloatPoster():css(o.poster,{position:"absolute",left:0,top:0,width:"100%",height:"100%"}),o.frame.appendChild(o.poster)}function O(r,a,l){if(clearTimeout(p),""==v.file2_separator&&(v.file2_separator=";"),-1<r.indexOf("{")&&-1<r.indexOf("}")&&-1<r.indexOf(v.file2_separator)){var c=r.split(v.file2_separator);o.audiotracks=[];for(var u=0;u<c.length;u++)o.files_audiotrack[u]=c[u].substr(c[u].indexOf("{")+1,c[u].indexOf("}")-1),o.audiotracks[u]=c[u].substr(c[u].indexOf("}")+1),exist(v.default_audio)&&v.default_audio==o.files_audiotrack[u]&&(o.current_audiotrack=u);r=o.audiotracks[o.current_audiotrack]}exist(e)||(e=[]),o.fileTimeout&&clearTimeout(o.fileTimeout),r&&"or"!=r&&"x"!=r&&function(){e=r.split(" or ");for(var t=0;t<e.length;t++)-1<e[t].indexOf(" and ")&&(i=e[t].split(" and "),e[t]=i[random(0,i.length-1)]),exist(v.prefile)&&-1==e[t].indexOf("//")&&(e[t]=v.prefile+e[t]);s=0}();var d=o.file_type;0<e.length&&(o.file_type=N(e[s]),l=!!l,t=(t=e[s])?t.replace(/\(random\)/g,Math.random()):e[0],!l&&"x"!=r&&n&&o.file_type==d&&("native"==d||"vimeo"==d&&!o.system.mobile||"youtube"==d&&o.start&&!f||"dm"==d||"hls"==d||"dash"==d)?(n.src(t),log("src")):(log("New"),U(),function(t){o.file_type=N(t),o.tagvideo&&(n=new MediaVideo(t,o.mediacontainer,!1)),"youtube"==o.file_type&&(n=new MediaYoutube(t,o.mediacontainer)),1==v.vimeo&&"vimeo"==o.file_type&&(n=new MediaVimeo(t,o.mediacontainer)),"pjs"==o.file_type&&(n=new MediaPjs(t)),"dm"==o.file_type&&(n=new MediaDaily(t,o.mediacontainer)),o.controls&&o.controls.UpdateSettings();var e=0;exist(v.duration)&&(o.continue&&1==v.timestore&&!o.start&&(e=o.continue.flag().t),setTimeout((function(){o.actions.Duration(e,v.duration)}),100))}(t)),F()),a||(clearInterval(o.timerInterval),o.timerInterval=setInterval(M,o.timerTime),exist(v.subtitle)||1!=v.sub_upload||1!=v.sub_upload0||(v.subtitle=""),exist(v.subtitle)&&o.actions.Subtitle(v.subtitle),1==v.hidevideo&&(1==v.nativecontrolsmobile&&o.system.mobile||("youtube"==o.file_type?css(o.mediacontainer,{top:-3e3,left:-3e3}):hide2(o.mediacontainer),v.toolbar.hide=0)))}function F(t){(o.speed1||t)&&(o.line_speed?n.setSpeed(o.custom_speed):o.current_speed!=o.speed1&&n.setSpeed(o.files_speed[o.current_speed]))}function N(t){var e,i,s,r,n="native";return t&&(0<t.indexOf(".m3u8")?n="hls":0<t.indexOf(".mpd")?n="dash":0==t.indexOf("w")&&1==t.indexOf("s")?n=o.ws:-1<t.indexOf("youtube.com/")||-1<t.indexOf("youtu.be/")?"function"==typeof MediaYoutube?(n="youtube",1==v.youtubeposter&&(i=(e="https://img.youtube.com/vi/"+YoutubeID(t)+"/")+"maxresdefault.jpg",s=function(t){v.poster=100<t?e+"maxresdefault.jpg":e+"hqdefault.jpg",o.playlist_dic&&(o.playlist_dic[o.plid].poster=v.poster),1==v.autoplay||o.start||Poster(v.poster,o.poster,v.poster_scale)},(r=new Image).onload=function(){s(this.height)},r.src=i)):log("No YouTube"):1==v.vimeo&&-1<t.indexOf("vimeo.com/")?n="vimeo":1==v.dm&&-1<t.indexOf("dailymotion.com")?n="dm":1==v.pjsframe&&"function"==typeof PjsFramed&&PjsFramed(t)&&(n="pjs")),o.tagvideo="native"==n||"hls"==n||"dash"==n||n==o.ws,n}function U(){n&&(n.Remove(),n=null,u="ended"),a&&(a.Remove(),a=null,a=void 0,o.mediapip.remove(),o.media2=null,o.mediapip=null)}function z(){0<v.fileto&&1<e.length&&(0!=P()&&1!=v.filetod||(clearTimeout(o.fileTimeout),o.fileTimeout=setTimeout(W,1e3*v.fileto)))}function W(){!o.play||0!=P()&&1!=v.filetod||0!=k()||o.errorto||n&&0==n.loaded()&&s!=e.length-1&&S("File Timeout")}function H(t){1==v.vast_loadtxtd&&exist2(v.vast_loadtxt)&&(exist(o.vast_loadtxt)?o.vast_loadtxt.show(t):"function"==typeof PlgnVstLdtx&&(o.vast_loadtxt=new PlgnVstLdtx))}function V(t){var e,i,s;0<String(t).indexOf(":")?(i=t.split(":"),s=o.screen_w/o.screen_h,0<(e=o.media.size()).width&&(s=e.width/e.height),s!=(s=i[0]/i[1])&&(o.tagvideo&&n.ObjectFit(),i=o.screen_h*s/o.screen_w,s=o.screen_w/s/o.screen_h,i<1?(o.mediascale.x0=o.mediascale.x=parseFloat(i),o.mediascale.y=1):(o.mediascale.x=1,o.mediascale.y0=o.mediascale.y=parseFloat(s)),css(o.mediacontainer,{transform:"scaleX("+o.mediascale.x+") scaleY("+o.mediascale.y+")"}),o.custom_aspect=t)):(o.mediascale.x+=parseFloat(t),o.mediascale.y+=parseFloat(t),css(o.mediacontainer,{transform:"scaleX("+o.mediascale.x+") scaleY("+o.mediascale.y+")"})),1==v.hotkey.scaledrag&&(o.mediadrag||(0<o.mediascale.x||1<o.mediascale.y)&&(PluginMovable(o.mediacontainer,"o.dragging"),o.mediadrag=!0),B()),o.controls.MenuProc("scale")}function B(){o.mediadrag&&1!=v.hotkey.scaledrag0&&1==o.mediascale.x&&1==o.mediascale.y&&css(o.mediacontainer,{top:0,left:0})}function j(){var t=XHR(v.tagsurl+"?url="+e[s]);t.onload=function(){4==this.readyState&&200==this.status&&this.responseText&&(v.title=this.responseText,o.actions.Title("title"))},t.send()}o.mediacontainer=createElement("div"),Pos0(o.mediacontainer),css(o.mediacontainer,{transition:"transform 0.2s linear","text-align":"center"}),o.frame.appendChild(o.mediacontainer),1==v.hotkey.swiping&&(o.mdswp||(PluginMovable(o.mediacontainer,"o.swiping",1!=v.hotkey.swipev,1==v.hotkey.swipev,(function(){var t,e=o.mediacontainer.offsetLeft,i=o.screen_w;1==v.hotkey.swipev&&(e=o.mediacontainer.offsetTop,i=o.screen_h),e>i*existv(v.hotkey.swipep,.5)?o.controls.PlaylistPrevExist()&&(t=!0,o.controls.PlaylistPrev()):e<-i*existv(v.hotkey.swipep,.5)&&o.controls.PlaylistNextExist()&&(t=!0,o.controls.PlaylistNext()),t?1==v.hotkey.swipev?css(o.mediacontainer,{top:0}):css(o.mediacontainer,{left:0}):new Motion({mc:o.mediacontainer,type:1==v.hotkey.swipev?"top":"left",to:0,time:.1,ease:"back",me:"mdswp"})})),o.mdswp=!0)),l||T(),this.onError=function(t){S(t||n.errorMessage())},this.onEnded=function(t){log("Ended"),h=!0,clearTimeout(p);var e=!1;!(0<P())||o.casting||t||(t=o.current_time)+10<P()&&(log("Break (recovery)"),js("recovery"),n.Play(),n.Seek(t),e=!0),e||(o.actions.Ended(),js("end"))},this.onPlay=function(){1==v.posterhidepause&&exist(o.poster)&&o.actions.ShowPoster(),1==v.posterhide&&o.actions.HidePoster(),o.controls.Play(),o.actions.onPlayTag(),1==v.tags&&exist(v.tagsurl)&&5<v.tagsurl.length&&(j(),clearInterval(r),r=setInterval(j,1e3*v.tagsinterval)),js("play")},this.NativeControls=function(){1==v.nativecontrolsmobile&&o.tagvideo&&o.actions.NativeControls()&&(o.nativecontrols=n.nativeControls(),o.controls.refresh(),I()),o.checknative=!0},this.onPause=function(){0<k()&&k()==P()&&o.actions.plNxtExst()||o.actions.Pause()},this.onSeeking=function(){log("Seeking")},this.onSeeked=function(){log("Seeked"),o.actions.Seeked(),exist(o.seeking_time)&&js("seek",o.seeking_time)},this.onMeta=function(){log("Metadata"),m=0,o.actions.Metadata(),"hls"==o.file_type&&F(1)},this.onDuration=function(){n&&(log("Duration",P()),o.actions.Duration(k(),P()),js("duration",P()),m=0,clearTimeout(o.reloadto),exist(o.restart_audio)&&(o.actions.SetAudioTrack(o.restart_audio),o.restart_audio=null))},this.onVolume=function(){},this.onWaiting=function(){log("Waiting"),o.actions.Waiting(),js("waiting")},this.onTimeupdate=function(){d!=k()&&(o.curtain||(o.actions.StopWaiting(),0==d&&1==v.posterhide&&1==v.posterhidestart&&o.actions.HidePoster())),d=k();var t=P();js("time",d),1==v.pip.on&&"function"==typeof PluginPip&&(!v.file2&&v.pip.file2&&(v.file2=v.pip.file2),!a&&1!=v.pip.custom&&v.file2&&""!=v.file2&&0<d&&(o.mediapip=new PluginPip,a=o.mediapip.create())),"hls"==o.file_type&&o.system.safari&&0<t&&o.play&&t-1<d&&(clearTimeout(p),p=setTimeout(R,2e3))},this.onYoutubeReady=function(){"youtube"==o.file_type&&n&&n.YoutubeReady()},this.playByYoutubeId=function(t){o.actions.Stop(),n.playId(t)},this.pipVol=function(t){exist(t)&&(a&&a.Volume(t),v.pip.volume=t)},this.pipSrc=function(t){exist(t)&&a&&(a.src(t),a.Play())},this.YoutubeReady=function(){return"youtube"!=o.file_type||!n||n.ready()},this.getHLS=function(){return"hls"==o.file_type?n.getHLS():void 0},this.getDASH=function(){return n.getDASH()},this.SetQuality=function(t){var e;log("Quality",t),("native"==o.file_type||o.file_type==o.ws||"hls"==o.file_type&&(0==v.hlsquality||L()<2)||"dash"==o.file_type&&(0==v.dashquality||C()<2))&&exist(o.files[t])&&(e=this.time(),0<o.seekto||(o.seekto=e),o.actions.Seek(e,!1),O(o.files[t],!0),e=!0,v.settings&&((1!=v.settings.qualitypause||o.play)&&o.start||(e=!1)),0<o.ncrtat&&n.nativeAudioTrack(o.ncrtat),e&&o.actions.Play()),"hls"==o.file_type&&1==v.hlsquality&&1<L()?n.setHlsQuality(t):"dash"==o.file_type&&1==v.dashquality&&1<C()?n.setDashQuality(t):"youtube"!=o.file_type&&"dm"!=o.file_type||n.setQuality(t)},this.renameQualities=function(t,e){var i=t.height+"p";return t.height<200?i="160p":200<=t.height&&t.height<=300?i="240p":300<t.height&&t.height<=400?i="360p":400<t.height&&t.height<=500?i="480p":500<t.height&&t.height<=600?i="540p":600<t.height&&t.height<=900?i="720p":900<t.height&&t.height<=1200?i="1080p":1200<t.height&&t.height<=1800?i="1440p":1800<t.height&&(i="2160p"),426==t.width&&t.height<=240?i="240p":640==t.width&&t.height<=360?i="360p":854==t.width&&t.height<=480?i="480p":1280==t.width&&t.height<=720?i="720p":1920==t.width&&t.height<=1080?i="1080p":2560==t.width&&t.height<=1440?i="1440p":3840==t.width&&t.height<=2160&&(i="2160p"),1==v.settings.customqualities&&exist(v.settings["name"+i])?i=v.settings["name"+i]:(1==e&&(i=Lang(i)),2==e&&exist(t.bitrate)&&(i=parseInt(t.bitrate/1e3)+" "+Lang("kbps"))),i},this.renameTracks=function(t,e){var i=t.toLowerCase();return"eng"==i||"en"==i?t="English":"rus"!=i&&"ru"!=i||(t=" "),"object"==typeof v.rename_audio&&(t=exist(v.rename_audio[t])?v.rename_audio[t]:existv(v.rename_audio[e.toString()],t)),t},this.SetSpeed=function(t){log("Speed",t),t=parseFloat(t),n&&n.setSpeed(t),1==v.pip.on&&a&&a.setSpeed(t)},this.nativeSubtitle=function(){I()},this.removeNativeSubtitle=function(){n.removeTracks()},this.SetAudioTrack=function(t){var e;log("Audiotrack",t),0<o.audiotracks.length?o.audiotracks[t]&&(e=this.time(),0<o.seekto||(o.seekto=e),o.actions.Seek(e,!1),O(o.audiotracks[t],!0),o.actions.Play()):"hls"==o.file_type&&1==v.hlsaudio?n.setHlsAudioTrack(t):"dash"==o.file_type&&1==v.dashaudio?n.setDashAudioTrack(t):o.tagvideo&&n.nativeAudioTrack(t)},this.getQuality=function(){var t=o.files_quality[o.current_quality];return null==t&&(t=""),(A()&&1==v.hlsautoquality&&1==v.hlsquality&&t!=Lang("auto")?Lang("auto")+" ":"")+t},this.getAudioTrack=function(){var t=o.files_audiotrack[o.current_audiotrack];return null==t&&(t=""),t},this.autoQuality=A,this.ratio=function(){return o.tagvideo?n.ratio():o.aspect},this.resize=function(t){n&&("youtube"==o.file_type||"vimeo"==o.file_type||exist(v.ratio))&&n.resize(),0<v.screenmarginbottom&&css(o.mediacontainer,{height:o.fullscreen?"100%":o.normal_h-v.screenmarginbottom}),o.media2&&1==v.pip.movable&&o.mediapip.resize(),1==v.poster_float&&FloatPosterScale(),o.v360&&o.v360.resize()},this.size=function(){return n?n.size():{}},this.iosfull=function(){n.iosfull()},this.reload=function(){log("reload"),o.reloadTimer=0,o.start&&(v.autoplay=1),o.actions.Waiting(),t&&1!=v.rldnornd&&-1==t.indexOf("(random)")&&(t=t+(-1==t.indexOf("?")?"?":"&")+"rand=(random)"),t&&(o.tagvideo?(n.src(t),this.Play()):O(t))},exist(o.poster)||D(),exist(v.poster)&&(""!=v.poster?(Poster(v.poster,o.poster,v.poster_scale),1!=v.posterhidepause||o.start||hide(o.poster)):v.poster=null),this.Remove=function(){U()},this.RemoveAll=function(){e=[],U()},this.File=function(t,e,i){O(t,e,i)},this.Poster=function(t){Poster(t,o.poster,v.poster_scale)},this.Play=function(){n?(f=h=!1,o.casting?o.chromecast.Play():(n.Play(),1==v.posterhide&&o.actions.HidePoster()),exist(a)&&a.Play(),o.channels&&(o.tagvideo?0<o.clicktime&&!o.channels.Created()&&o.channels.Update():(o.files_channel=[],o.controls.SettingChanged("channel"))),o.tagvideo&&-1<v.volumegain&&!o.gained&&!o.system.ios&&0<o.clicktime&&n.Gain(),z()):setTimeout(this.Play,500)},this.PipSwitch=function(t){o.media2&&(1==v.pip.movable&&2<o.moving[o.media2]||(t&&(t.stopPropagation(),window.event&&(window.event.cancelBubble=!0)),(t=n).ChangePip(!0,o.media2),a.ChangePip(!1,o.mediacontainer),n=a,a=t,n.Play(),a.Play(),js("pip")))},this.reYT=function(){n.src(t)},this.ToolbarHide=function(){1==v.effects&&o.effects.api("hide"),o.toolbarhidden=!0},this.ToolbarShow=function(){v.toolbar.resizeme&&(v.toolbar.resizeme=!1,o.controls&&(o.controls.resizeFromText(1),o.controls.resizetext())),o.toolbarhidden=!1},this.PipToggle=function(){o.media2&&o.mediapip&&o.mediapip.toggle()},this.Airplay=function(){o.tagvideo&&o.airplay&&(o.airplayed=!0,n.airplay())},this.PipWebkit=function(){o.tagvideo&&o.pipwebkit&&n.pipwebkit()},this.BeforeVast=function(){1==v.vast_poster&&exist(v.vast_posterurl)&&(exist(o.vast_poster)?o.vast_poster.show():"function"==typeof PlgnVstPstr&&(o.vast_poster=new PlgnVstPstr)),H(),n&&(datetime(0),n.BeforeVast())},this.AfterVast=function(){o.vast_poster&&o.vast_poster.hide(),n&&n.AfterVast()},this.VstLdTxt=function(t){H(t)},this.Pause=function(){o.casting?o.chromecast.Pause():n?n.Pause():log("nomedia"),exist(o.media2)&&a.Pause()},this.Recover=function(){f=!0,o.actions.Seek(0,!1),exist(o.poster)&&o.actions.ShowPoster(),O("x")},this.Toggle=function(){n&&n.Toggle()},this.Seek=function(t){n&&(o.casting?o.chromecast.Seek(t):(n.Seek(t),1==v.pip.on&&a&&a.Seek(t)))},this.Mute=function(){n&&(n.Mute(),o.casting&&o.chromecast.Mute(),log("mute")),1==v.pip.on&&1==v.pip.nomute&&a&&a.Mute()},this.Unmute=function(){n&&(n.Unmute(),o.casting&&o.chromecast.Unmute(),log("unmute")),1==v.pip.on&&1==v.pip.nomute&&a&&a.Unmute()},this.Volume=function(t){n&&n.Volume(t),1==v.pip.on&&1==v.pip.nomute&&a&&!o.line_volume2&&a.Volume(t),o.casting&&o.chromecast.Volume(t)},this.isPlaying=function(){return!!n&&n.isPlaying()},this.isLive=function(){return!!n&&n.isLive()},this.status=function(){return u},this.ended=function(){return h},this.time=function(){var t=0;if(n){var e;t=k();return o.casting?(e=o.chromecast.Time())&&(t=e):0<P()&&t!=P()&&(o.current_time=t+1e-4),t}return 0},this.duration=function(){var t,e=0;return n&&(0==(e=P())&&exist(v.duration)&&(e=+v.duration),!o.casting||(t=o.chromecast.Duration())&&(e=t)),e},this.loaded=function(){return n?n.loaded():0},this.flip=function(){o.mediascale.flip=!o.mediascale.flip,css(o.mediacontainer,{transform:o.mediascale.flip?"scaleX(-1)":"scaleX(1)"})},this.createposter=function(){D()},this.Preload=function(){o.tagvideo&&n.preload()},this.menufltr=function(t,e){if("scale"==t)1==e&&V(v.settings.scale/100),2==e&&V(-v.settings.scale/100),3==e&&o.media.normalscale();else if(o.tagvideo){o.fltrs[t]||(o.fltrs[t]="sepia"==t?0:1),1==e&&(o.fltrs[t]+=v.settings[t]/100),2==e&&(o.fltrs[t]-=v.settings[t]/100),3==e&&(o.fltrs[t]="sepia"==t?0:1),o.cftlr||(o.cftlr=[]),o.cftlr[t]=t+"("+parseInt(100*o.fltrs[t])+"%) ";var i,s="";for(i in o.cftlr)s+=o.cftlr[i];css(n.tag(),{filter:s}),o.controls.MenuProc(t)}},this.scale=function(t){V(t)},this.normalscale=function(){o.tagvideo&&n.ObjectFit(),o.mediascale.x=o.mediascale.x0,o.mediascale.y=o.mediascale.y0,css(o.mediacontainer,{transform:"scaleX("+o.mediascale.x+") scaleY("+o.mediascale.y+")"}),o.controls.MenuProc("scale"),o.custom_aspect=null,B()},this.hlsDashSub=function(t,e){n.hlsDashSub(t,e)},this.currentFile=function(){return e&&0<e.length&&e[s]||""},this.urlsl=function(){return e.length},this.tag=function(){return!!n&&n.tag()},this.captions=function(){o.tagvideo&&n.captions()},this.onDash=function(){n.onDash()}},MediaVideo=function(url,container,pip){var pjstg=createElement(1==v.hidevideo?"audio":"video"),hls_config,pipto=0,hls,is_hls=!1,is_hls2=!1,hls_started=!1,hls_created=!1,hls_force=-1,dash,dash_created=!1,ws,ws_created=!1,is_dash=!1;o.live=!1;var is_sleep=0,is_ws=!1,error,error_time,unmuteplease=!1,pip_quality=-1,pause_before_vast=-1,sleep_timeout,_hlssubtracks,hls_subs,_seekaftervast,urlmse,mimeCodec='video/mp4; codecs="avc1.42E01E, mp4a.40.2"',nops=!1,tagframe,framei;css(pjstg,{position:"static",width:"100%",height:"100%","object-fit":"contain",transition:"filter 0.2s linear","min-height":"auto","max-height":"none","min-width":"auto","max-width":"none"}),ObjectFit(),o.system.iphone&&1==v.autoplay&&1==v.autoplaymute?!o.start&&v.preroll?attr(pjstg,{playsinline:1}):(o.muted=!0,o.controls&&o.controls.Mute(),attr(pjstg,{muted:1,playsinline:1,autoplay:1})):(o.system.mobile&&attr(pjstg,{playsinline:1}),o.system.tv||attr(pjstg,{preload:1==v.preload&&0==v.autoplay?"metadata":"none"})),1==v.tagcors&&attr(pjstg,{crossorigin:"anonymous",crossOrigin:"anonymous"}),attr(pjstg,{src:url,"x-webkit-airplay":"allow",disableRemotePlayback:"true"}),1!=v.drunchr&&attr(pjstg,{disableRemotePlayback:"true"}),1==v.ynxnopip&&attr(pjstg,{pip:"false"}),pip&&(pjstg.autoplay=!0,1!=v.pip.nomute||1==v.autoplay?pjstg.muted=!0:pjstg.volume=(exist2(v.pip.volume)?v.pip:v).volume),1==v.nativenodownload&&attr(pjstg,{controlsList:"nodownload"}),tagSrc(),1==v.taginframe?(tagframe=createElement("iframe"),attr(tagframe,{scrolling:"no",allowfullscreen:"true",allowtransparency:"true",src:""}),css(tagframe,{position:"absolute",width:"100%",height:"100%",border:0}),container.appendChild(tagframe),framei=window.setInterval((function(){"complete"===tagframe.contentWindow.document.readyState&&(window.clearInterval(framei),css(tagframe.contentDocument.body,{padding:0,margin:0}),tagframe.contentDocument.body.appendChild(pjstg))}),100)):container.appendChild(pjstg),exist(url)||(url="");var nohls=!1;if(o.system.tv&&0<url.indexOf("nativehlstv")&&(nohls=!0),0<url.indexOf(".mpd"))is_dash=!0,o.dash||"undefined"!=typeof PluginDash&&(o.dash=new PluginDash),exist(o.dash)&&(exist(window.dashjs)?CheckDash():o.dash.script());else if(!(1==options.hls&&1!=v.playerjscom||0<url.indexOf(".m3u8"))||nohls||-1==o.compilation.indexOf("HLS")&&!exist(window.Hls))0==url.indexOf("w")&&1==url.indexOf("s")&&1==v.flussonic&&(is_ws=!0,CreateWS());else{is_hls=!0,is_hls2=!0;try{exist(window.Hls)?!Hls.isSupported()||o.system.safari&&1==v.nativehlsinsafari&&!o.system.ios||o.system.safari&&o.system.ios&&1==v.nativehlsios||o.system.edge&&1==v.nativehlsinedge?(log("HLS support ",Hls.isSupported()),is_hls=!1):1!=v.preload&&1!=v.autoplay&&1!=v.preloadhls&&!pip||CreateHLS(!1):is_hls=!1}catch(error){is_hls=!1}}function CheckDash(){is_dash=!0,MseIsSupported()?1!=v.preload&&1!=v.autoplay&&1!=v.preloaddash||CreateDASH(!1):(is_dash=!1,log("DASH not supported"))}function CreateDASH(t){o.dash&&!dash_created&&(o.dash.create(t,pjstg,url,pip),exist(window.dashjs)&&(dash_created=!0))}function CreateHLS(x){log("HLS"),1<o.files.length?(v.hlsquality=0,v.hlsquality_off=!0):v.hlsquality_off&&(v.hlsquality=1),1<o.audiotracks.length?(v.hlsaudio=0,v.hlsaudio_off=!0):v.hlsaudio_off&&(v.hlsaudio=1),o.hls_subs=!1,hls_force=-1,hls_subs=[],o.sbt&&o.sbt.reHls();var dontload=!1;if(v.preroll&&1==v.hlsvastwait&&(dontload=!0,v.hlsvastwait=0),hls_config={debug:1==v.hlsdebug&&!pip,autoStartLoad:(1==v.preload||1==v.autoplay||pip||x)&&!dontload,maxBufferLength:60,maxMaxBufferLength:60,manifestLoadingTimeOut:0<v.hlsmto?1e3*v.hlsmto:4e4,fragLoadingTimeOut:0<v.hlsfto?1e3*v.hlsfto:4e4,enableWorker:!1},1==v.hlscltps&&(hls_config.capLevelToPlayerSize=!0),1==v.hlsdrm){for(var ks=["fp","wv","pr","ck"],ksu=["com.apple.fps","com.widevine.alpha","com.microsoft.playready","org.w3.clearkey"],dj={},i=0;i<ks.length;i++)1==v["hlsdrm"+ks[i]]&&(dj[ksu[i]]={},exist2(v["hlsdrm"+ks[i]+"l"])&&(dj[ksu[i]].licenseUrl=v["hlsdrm"+ks[i]+"l"]),exist2(v["hlsdrm"+ks[i]+"s"])&&(dj[ksu[i]].serverCertificateUrl=v["hlsdrm"+ks[i]+"s"]));hls_config.emeEnabled=!0,hls_config.drmSystems=dj}if(1==v.hlscookies&&(hls_config.xhrSetup=function(t,e){t.withCredentials=!0}),exist(v.hlsconfig)&&(exist(v.hlsconfig.maxBufferLength)&&(600<v.hlsconfig.maxBufferLength&&(v.hlsconfig.maxBufferLength=600),v.hlsconfig.maxMaxBufferLength=v.hlsconfig.maxBufferLength),exist(v.hlsconfig.customBuffer)&&(v.hlsconfig.maxMaxBufferLength=v.hlsconfig.maxBufferLength=v.hlsconfig.customBuffer),"object"==typeof v.hlsconfig))for(var key in v.hlsconfig)0==v.hlsconfig[key].toString().indexOf("eval:")&&(v.hlsconfig[key]=eval(v.hlsconfig[key].substr(5))),hls_config[key]=v.hlsconfig[key];hls=new Hls(hls_config),js("hls",hls,1),hls.loadSource(url),hls.attachMedia(pjstg),hls.on(Hls.Events.MEDIA_ATTACHED,(function(){log("HLS attached")})),hls.on(Hls.Events.MANIFEST_LOADED,(function(t,e){pip||o.actions.MediaReady()})),hls.on(Hls.Events.MANIFEST_PARSED,(function(t,e){!pip&&1==v.hlsquality&&1<HlsLevelsLength()&&(HlsQualityLevels(),HlsLevel(),o.controls&&o.controls.QualityChangedNoHand(o.current_quality))})),hls.on(Hls.Events.LEVEL_SWITCH,(function(t,e){HlsLevel()})),hls.on(Hls.Events.LEVEL_SWITCHED,(function(t,e){HlsLevel()})),hls.on(Hls.Events.LEVEL_LOADED,(function(t,e){pip||(e.details.live!=o.live&&(o.live=e.details.live,o.controls.refresh()),o.live=e.details.live,o.live&&(log("Live"),o.dvr=-1<url.indexOf("?DVR"),0<pjstg.duration&&0<pjstg.currentTime&&pjstg.duration-pjstg.currentTime<10&&(0<o.hls_stuck_time?o.hls_stuck_time==pjstg.currentTime&&o.hls_stuck_duration==pjstg.duration?(o.stuck++,2<o.stuck&&(o.stuck=0,o.hls_stuck_time=-1,hls.destroy(),CreateHLS(!0),onEnded())):o.hls_stuck_time=-1:(o.hls_stuck_time=pjstg.currentTime,o.hls_stuck_duration=pjstg.duration)))),1==v.hlsquality&&(o.current_quality=hls.loadLevel,o.controls&&o.controls.QualityChangedNoHand(o.current_quality)),HlsUpdateAudio()})),hls.on(Hls.Events.FRAG_CHANGED,(function(t,e){exist(e.frag)&&(pip||js("fragment",e.frag.relurl),1==v.hlsfdt&&"undefined"!=typeof PlgHlsFdt&&PlgHlsFdt(e.frag)),-1<hls_force&&(hls.nextAutoLevel=hls_force,hls_force=-1),hls_started=!0,hlsTextTracks()})),hls.on(Hls.Events.FRAG_PARSING_METADATA,(function(t,e){js("fragdata",e,1)})),hls.on(Hls.Events.AUDIO_TRACKS_UPDATED,(function(t,e){pip||1!=v.hlsaudio||setTimeout(HlsAudioTracks,500)})),hls.on(Hls.Events.AUDIO_TRACK_SWITCHING,(function(t,e){pip||1!=v.hlsaudio||HlsAudioTrack()})),hls.subtitleDisplay=!1,1==v.hlssubtracks&&(hls.on(Hls.Events.FRAG_LOADED,(function(t,e){var i;"object"==typeof e&&("subtitle"!=e.frag.type||(i=e.frag.url)&&(e=hls.subtitleTrack,o.subtitle_on?o.sbt.hlsSub(e+"id_"+i):(hls_subs[e]||(hls_subs[e]=[]),hls_subs[e].push(i))))})),hls.on(Hls.Events.SUBTITLE_TRACKS_UPDATED,(function(t,e){for(var i=hls.subtitleTracks,s="",r=0;r<i.length;r++)s+=(""!=s?",":"")+"["+i[r].name+"]hls"+r,i[r].default&&(o.remember_sub=i[r].name);apiProcessor("subtitle",s)}))),hls.on(Hls.Events.ERROR,(function(t,e){if(1==v.log&&console.log(e),js(e.type+"Hls",e,0,!0),(o.hlserror=e).fatal)switch(e.type){case Hls.ErrorTypes.NETWORK_ERROR:log("HLS fatal network error"),1==v.livewakeup?HlsSleep0():(error=e.details+" ("+e.type+")",0<o.seekto||pip||1==v.live||is_ws||(o.seekto=Time()),hls.destroy(),pip||o.media.onError());break;case Hls.ErrorTypes.MEDIA_ERROR:log("HLS fatal media error, recover"),hls.recoverMediaError();break;default:error="HLS fatal error, destroy",hls.destroy(),pip||o.media.onError()}else log("HLS ",e.type,e.details,e.response?e.response.code:""),js("hls_error",e.response?e.response.code:""),0<is_sleep&&(is_sleep=2,HlsSleep())})),hls_created=!0}function HlsLevel(){if(!pip&&1==v.hlsquality&&1<HlsLevelsLength()&&(o.current_quality!=hls.loadLevel&&(o.current_quality=hls.loadLevel,o.controls&&o.controls.QualityChangedNoHand(o.current_quality),log("HLS Level "+o.current_quality)),exist2(v.forbidden_quality)&&0<o.current_quality))for(var t=v.forbidden_quality.split(","),e=0;e<t.length;e++)if(-1<o.files_quality[o.current_quality].indexOf(t[e])){log("regress quality"),hls.currentLevel=o.current_quality-1,o.current_quality--;break}}function CreateWS(){exist(window.FlussonicMsePlayer)&&(MseIsSupported()?(exist(o.ws)||(o.ws=new PluginWS),ws=new FlussonicMsePlayer(pjstg,url,existv(v.wsconfig,{debug:!0})),ws_created=!0):(is_ws=!1,log("not supported")))}function hlsTextTracks(){Captions()}function Captions(){v.hlscaptions&&o.controls&&(0<pjstg.textTracks.length?(1==v.captions?pjstg.textTracks[pjstg.textTracks.length-1].mode="showing":pjstg.textTracks[pjstg.textTracks.length-1].mode="hidden",o.captions||(o.captions=!0,o.controls.refresh())):o.captions&&(o.captions=!1,o.controls.refresh()))}function HlsSleep0(){log("sleep"),!pip&&o.play&&o.actions.Pause(),o.actions.ShowPoster(),is_sleep=1,HlsSleep(o.play)}function HlsSleep(t){0<is_sleep&&(clearTimeout(sleep_timeout),sleep_timeout=setTimeout(HlsLiveWaiting,1e3*v.livewakeuptime))}function HlsLiveWaiting(){0<is_sleep&&(log("watching"),is_hls?(1==is_sleep&&hls.loadSource(url),2==is_sleep&&(hls.destroy(),CreateHLS(!0),pjstg.play())):attr(pjstg,{src:url}))}function onLoadStart(){is_hls||is_dash||pip||o.actions.MediaReady()}function iosfull(){pjstg.webkitDisplayingFullscreen&&o.actions.NativeEnterFs()}function onTagError(){var t;is_hls||is_dash||(pjstg.error&&(log(pjstg.error,pjstg.error.code,pjstg.error.message),t=pjstg.error.code,""==(error=pjstg.error.message)&&(1==t&&(error="aborted"),2==t&&(error="network"),3==t&&(error="decode"),4==t&&(error="not found")),log("Video Error: ",error)),is_hls2&&1==v.livewakeup&&(error=void 0,HlsSleep0()),null==error&&!o.system.ios||onError())}function onError(){pip||o.media.onError()}function onEnded(){pip?1==v.pip.loop&&(pjstg.currentTime=0,pjstg.play()):o.media.onEnded()}function onPlay(){if(!o.start&&v.preroll)return log("wrong play"),pause(),void o.actions.Play();var t,e;is_hls&&0<is_sleep||pip||!(t=o.actions.isVastBgLoad()&&1!=o.vastfrombg)&&-1!=pause_before_vast||(e=!1,is_hls&&(exist(o.vast)||exist(o.vastloader))&&(t||(log("pause onplay"),pause(),e=!0)),e||o.media.onPlay())}function onPause(){nops||(log("onpause"),o.play&&o.actplay&&!pjstg.ended&&1==v.unpause&&!o.nativecontrols?(log("unpause"),TagPlay()):pip||o.nopause||!pjstg.paused||o.media.onPause())}function onTimeupdate(){pip||o.media.onTimeupdate(),-1<pause_before_vast&&Time()>pause_before_vast&&(pause(),pause_before_vast=-1)}function onSeeking(){pip||o.media.onSeeking()}function onSeeked(){pip||o.media.onSeeked()}function onMeta(){pip?PipSize():(o.media.onMeta(),PlayerSize(),is_hls&&0<is_sleep&&(is_sleep=0,log("wake up"),hls.startLoad(),TagPlay(),o.controls.Play()),exist(v.ratio)&&Resize(),setTimeout(MetaAudio,500))}function MetaAudio(){if(pjstg.audioTracks&&0==o.files_audiotrack.length&&0!=v.nativeaudio){var t=pjstg.audioTracks;for(i=0;i<t.length;i++){var e=o.media.renameTracks((t[i].label?t[i].label+" (":"")+t[i].language+(t[i].label?")":""),i);e==v.default_audio&&(o.current_audiotrack=o.ncrtat=i),o.files_audiotrack[i]=e}o.controls.AudioTrackChangedNoHand(o.ncrtat)}0<o.ncrtat&&nativeAudioTrack(o.ncrtat,1)}function PipSize(){0<pjstg.videoHeight?css(container,{height:container.offsetWidth/(pjstg.videoWidth/pjstg.videoHeight)-parseInt(v.pip.border)}):pipto<20&&(setTimeout(PipSize,100),pipto++)}function PlayerSize(){1==v.changeheight&&(clearInterval(o.heightInterval),o.heightInterval=setInterval(WaitSize,100),WaitSize())}function WaitSize(){pjstg&&0<pjstg.videoHeight&&(o.actions.changeAspect(pjstg.videoWidth/pjstg.videoHeight),clearInterval(o.heightInterval))}function onDuration(){pip||is_ws||o.media.onDuration()}function onVolume(){pip||o.media.onVolume()}function onWaiting(){is_hls&&0<is_sleep||pip||o.media.onWaiting()}function onLoadedData(){o.actions.LoadedData()}function MseIsSupported(){var t=window.MediaSource=window.MediaSource||window.WebKitMediaSource,e=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer;t=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported(mimeCodec),e=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return t&&e}!o.system.tv||1!=v.autoplay||is_hls||is_dash||is_ws||setTimeout((function(){o.actions.MediaReady()}),100),1==v.channels&&(exist(o.channels)&&o.channels.Close(),o.channels=new PlugMediaChannels),this.onDash=function(){CheckDash()},this.captions=function(){Captions()},pjstg.addEventListener("loadstart",onLoadStart),pjstg.addEventListener("error",onTagError),pjstg.addEventListener("ended",onEnded),pjstg.addEventListener("play",onPlay),pjstg.addEventListener("pause",onPause),pjstg.addEventListener("timeupdate",onTimeupdate),pjstg.addEventListener("seeking",onSeeking),pjstg.addEventListener("seeked",onSeeked),pjstg.addEventListener("loadedmetadata",onMeta),pjstg.addEventListener("volumechange",onVolume),pjstg.addEventListener("waiting",onWaiting),pjstg.addEventListener("durationchange",onDuration),pjstg.addEventListener("loadeddata",onLoadedData),pjstg.addEventListener("enterpictureinpicture",onPipEnter),pjstg.addEventListener("leavepictureinpicture",onPipLeave),o.system.iphone&&pjstg.addEventListener("webkitfullscreenchange",iosfull),this.ratio=function(){return pjstg.videoWidth/pjstg.videoHeight};var span05="<span style='opacity:0.5'>",playtry;function HlsQualityLevels(){if(!pip&&1==v.hlsquality){var t=hls.levels,e=-1;if(o.files_quality=[],1<t.length){for(var i,s,r=0;r<t.length;r++)exist(t[r].height)?(i=o.media.renameQualities(t[r],v.nameofhlsquality),-1<o.files_quality.indexOf(i)||1==v.hlsaddbitrate?exist(t[r].bitrate)&&(-1<(s=o.files_quality.indexOf(i))&&(o.files_quality[s]+=" "+span05+" &nbsp;"+parseInt(t[s].bitrate/1e3)+" "+Lang("kbps")+"</span>"),o.files_quality[r]=i+" "+span05+" &nbsp;"+parseInt(t[r].bitrate/1e3)+" "+Lang("kbps")+"</span>"):o.files_quality[r]=i,exist(t[r].audioGroupIds)&&(o.files_quality_ag[r]=t[r].audioGroupIds[0])):exist(t[r].name)?o.files_quality[r]=t[r].name:o.files_quality[r]=r,exist(v.default_quality)&&-1==e&&v.default_quality==o.files_quality[r]&&(e=r),exist(o.default_quality)&&o.default_quality==o.files_quality[r]&&(e=r);1==v.hlsautoquality?o.files_quality[t.length]=Lang("auto"):(hls.autoLevelEnabled=0,hls.autoLevelCapping=0),1==v.hlslowquality||-1<e?(hls.autoLevelCapping=0,"next"==v.hlschangequality||!o.start&&0==v.preload?hls.nextLevel=e:"current"==v.hlschangequality&&(hls.currentLevel=e),o.current_quality=e):1==v.hlsautoquality?o.current_quality=hls.levels.length-1:o.current_quality=hls.firstLevel,0<v.hlsmaxlvl&&(hls.autoLevelCapping=t.length-+v.hlsmaxlvl-1),HlsUpdateAudio()}o.bitrate=existv(hls.levels[o.current_quality].bitrate,0),o.controls&&o.controls.refresh()}}function HlsUpdateAudio(){0<o.files_quality_ag.length&&1==v.hlsaudio&&(HlsAudioTracks(),HlsAudioTrack())}function HlsAudioTracks(){if(!pip&&1==v.hlsaudio){var t,e=hls.audioTracks;o.files_audiotrack=[];var i=-1;if(1<e.length)for(var s=0;s<e.length;s++){if(t=!1,exist(e[s].groupId)&&0<o.files_quality_ag.length&&e[s].groupId!=o.files_quality_ag[o.current_quality])for(var r=0;r<o.files_quality_ag.length;r++)o.files_quality_ag[r]==e[s].groupId&&(t=!0);t||(o.files_audiotrack[s]=exist(e[s].name)?o.media.renameTracks(e[s].name,s):s,exist(v.default_audio)&&v.default_audio==o.files_audiotrack[s]&&(i=s))}}-1<i&&(o.current_audiotrack=i,hls.audioTrack=i)}function HlsAudioTrack(){if(!pip){var t=hls.audioTracks,e=hls.audioTrack;if(-1<e){if(exist(t[e].groupId)&&0<o.files_quality_ag.length&&o.files_quality_ag[o.current_quality]!=t[e].groupId)for(var i=0;i<t.length;i++)if(t[i].name==t[e].name&&t[i].groupId==o.files_quality_ag[o.current_quality]){e=hls.audioTrack=i;break}o.current_audiotrack=e,log("HLS AudioTrack",o.current_audiotrack),o.controls.AudioTrackChangedNoHand(o.current_audiotrack)}}}function nativeAudioTrack(t,e){1<pjstg.audioTracks.length&&(pjstg.audioTracks[t].enabled=!0,pjstg.audioTracks[1==e?0:o.ncrtat].enabled=!1,o.ncrtat=t,1!=e&&(pjstg.currentTime=o.media.time()))}function Time(){return is_dash?dash_created?o.dash.time():0:pjstg.currentTime}function Duration(){var t=pjstg.duration;return t==1/0&&(v.live=1,t=Time()+10,o.dur&&t<o.dur&&(t=o.dur),o.dur=t),is_dash&&dash_created&&(t=o.dash.duration()),exist(v.end)&&(indOf([v.end],"-")?t+=+v.end:t=v.end),isNaN(t)?0:t}function TagPlay(){var t;"none"==url||void 0!==(t=pjstg.play())&&t.then((function(){})).catch((function(t){log("playError",t.message),-1==t.message.indexOf("source")&&-1==t.message.indexOf("interrupted by")&&(1==v.autoplaymute?(log("automute"),o.actions.Mute(),pjstg.volume=0,(t=pjstg.play())&&t.then((function(){})).catch((function(t){log("playError2",t.message),o.system.tv&&(is_hls||is_dash)||(o.controls.Pause(),o.actions.ShowPoster(),js("autoplay_denied"))}))):(o.controls.Pause(),o.actions.ShowPoster()))}))}function pause(){(is_ws?ws:pjstg).pause()}function isAuto(){var t=!1;return is_hls?hls_created&&(t=hls.autoLevelEnabled):is_dash&&dash_created&&(t=o.dash.auto()),t}function tagSrc(){if(o.system.safari){var t=pjstg.textTracks;if(t)for(var e=0;e<t.length;e++)t[e].mode="disabled";if(t=pjstg.audioTracks)for(e=0;e<t.length;e++)t[e].enabled=0==e?1:0;window.WebKitPlaybackTargetAvailabilityEvent&&(pjstg.addEventListener("webkitplaybacktargetavailabilitychanged",(function(t){o.airplay="available"==t.availability,pip||o.actions.AirplayChanged()})),pjstg.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",(function(t){})))}CheckPip(),1==v.v360&&"undefined"!=typeof PjsCheck360&&PjsCheck360(url,pjstg,container)}function CheckPip(){o.system.webkit&&(exist(pjstg.webkitSupportsPresentationMode)&&!o.system.iphone&&(o.pipwebkit=!0),document.pictureInPictureEnabled&&!pjstg.disablePictureInPicture&&(o.pipwebkit=!0))}function PipWebkit(){o.system.safari?"picture-in-picture"===pjstg.webkitPresentationMode?(pjstg.webkitSetPresentationMode("inline"),o.ispipkit=!1):(pjstg.webkitSetPresentationMode("picture-in-picture"),o.ispipkit=!0):document.pictureInPictureElement?eval("document.exitPictureInPicture().then(ok =>{o.ispipkit = false;}).catch(error => {});"):eval("pjstg.requestPictureInPicture().then(p => {o.ispipkit = true;}).catch(error => {o.ispipkit = false;});")}function onPipEnter(){o.ispipkit=!0}function onPipLeave(){o.ispipkit=!1}function HlsLevelsLength(){var t=0;return hls_created&&hls.levels&&(t=hls.levels.length),t}function ObjectFit(){pjstg&&(1==v.covervideo||1==v.fill?1==v.fillvideo||1==v.fill?css(pjstg,{"object-fit":"fill"}):css(pjstg,{"object-fit":"cover"}):css(pjstg,{"object-fit":"contain"}))}function Resize(){v.ratio&&apiProcessor("scale",String(v.ratio).replace("/",":"))}function DashLevelsLength(){var t=0;return dash_created&&(t=o.dash.levels()),t}function iOSTrackLoaded(t){if(t.target.label&&o.sbt)for(var e=0;e<o.files_subtitle.length;e++)o.files_subtitle[e]==t.target.label&&o.sbt.SetSubtitle(e)}this.nativeAudioTrack=function(t,e){nativeAudioTrack(t,e)},this.Play=function(){var t=!0;is_hls&&!hls_started&&(hls_created||CreateHLS(!0),hls.startLoad()),is_dash&&!dash_created&&(CreateDASH(!0),t=!1),is_ws&&(ws_created||CreateWS(),ws.play(),t=!1),"-2000px"==pjstg.style.top&&this.AfterVast(),t&&TagPlay()},this.BeforeVast=function(){(o.vastloader||o.vast)&&(o.ispipkit&&PipWebkit(),!o.airplayed&&o.system.mobile&&o.system.webkit&&(pjstg.muted||(pjstg.muted=!0,unmuteplease=!0),css(pjstg,{position:"absolute",left:-2e3,top:-2e3}),pause_before_vast=Time(),is_ws||pjstg.play(),0==pause_before_vast&&0<o.seekto&&(_seekaftervast=o.seekto)))},this.AfterVast=function(){o.airplayed||!o.system.mobile&&!o.system.webkit||(css(pjstg,{position:"static",left:0,top:0}),exist(v.ratio)&&Resize(),unmuteplease&&(o.muted||(pjstg.muted=!1),unmuteplease=!1),0<_seekaftervast&&(o.seekto=_seekaftervast,_seekaftervast=0),pause_before_vast=-1)},this.Pause=function(){log("paused"),pause()},this.Toggle=function(){(pjstg.paused?TagPlay:Pause)()},this.Seek=function(t){is_dash&&dash_created?o.dash.seek(t):(is_hls&&1==v.hlsforce&&0<t&&isAuto()&&(hls_force=hls.currentLevel,hls.nextAutoLevel=0),pjstg.currentTime=t)},this.Mute=function(){pjstg.muted=!0},this.Unmute=function(){pjstg.muted=!1,"hls"==o.file_type&&o.system.ios&&1==v.vast&&(exist(o.um1)||(nops=!0,pjstg.pause(),setTimeout((function(){pjstg.play(),nops=!1}),10),o.um1=!0))},this.Volume=function(t){pjstg.volume=t},this.Gain=function(){if(o.gainedsource!=pjstg){var t,e,i;if(o.audiosrc[pjstg])t=o.audiosrc[pjstg],e=o.audioctx[pjstg];else if(window.AudioContext=window.AudioContext||window.webkitAudioContext,exist(window.AudioContext))try{t=(e=new AudioContext).createMediaElementSource(pjstg),o.audiosrc[pjstg]=t,o.audioctx[pjstg]=e}catch(t){log(t)}e&&((i=e.createGain()).gain.value=v.volumegain,t.connect(i),i.connect(e.destination),o.gained=!0,o.gainedsource=pjstg)}},this.isPlaying=function(){return!pjstg.paused},this.isLive=function(){return!(1!=v.live&&!is_ws)||o.live},this.tag=function(){return pjstg},this.nativeControls=function(){return attr(pjstg,{controls:"1"}),!0},this.preload=function(){attr(pjstg,{preload:"metadata"}),is_hls&&!hls_created&&CreateHLS(!1),is_dash&&!dash_created&&CreateDASH(!1)},this.status=function(){var t="playing";return pjstg.paused&&(t="paused"),pjstg.ended&&(t="ended"),t},this.ChangePip=function(t,e){pip=t,e.appendChild(pjstg),container=e,t?(1!=v.pip.nomute?pjstg.muted=!0:o.muted||(pjstg.muted=!1),PipSize(),0<o.files_quality.length&&is_hls&&(pip_quality=o.current_quality,hls.autoLevelCapping=0,hls.currentLevel=0)):(o.muted||1==v.pip.nomute||(pjstg.muted=!1),pjstg.volume=(exist2(v.pip.volume)?v.pip:v).volume,PlayerSize(),0<o.files_quality.length&&is_hls&&(hls.autoLevelCapping=-1)<pip_quality&&pip_quality<hls.levels.length&&(hls.nextLevel=pip_quality))},this.time=function(){return Time()},this.duration=function(){return Duration()},this.loaded=function(){var t,e=0;if(pjstg.buffered&&0<pjstg.buffered.length){for(var i=Time(),s=0;s<pjstg.buffered.length;s++)(i>=pjstg.buffered.start(s)||i>=pjstg.buffered.start(s)-100)&&i<=pjstg.buffered.end(s)&&(e=pjstg.buffered.end(s));0==e&&(e=pjstg.buffered.end(pjstg.buffered.length-1))}return exist(v.end)&&(t=v.end,indOf([t],"-")&&(t=Duration()),t<e&&(e=t)),e},this.auto=function(){return isAuto()},this.size=function(){return{width:pjstg.videoWidth,height:pjstg.videoHeight}},this.src=function(t){t&&(t=t.replace(/\(random\)/g,Math.random()),url=t,2!=o.media_error&&(o.media_error=!1),is_dash?dash_created&&o.dash.source(t):is_hls?(is_hls&&hls&&hls.destroy(),CreateHLS(!0),CheckPip()):(attr(pjstg,{src:t,autoplay:0}),tagSrc(),pause()))},this.airplay=function(){pjstg.webkitShowPlaybackTargetPicker()},this.pipwebkit=function(){PipWebkit()},this.setDashQuality=function(t){dash_created&&o.dash.setQuality(t)},this.setDashAudioTrack=function(t){dash_created&&0<pjstg.buffered.length&&o.dash.setAudio(t)},this.setWsQuality=function(t){o.ws&&o.ws.setTracks(ws,t,-1)},this.setWsAudioTrack=function(t){o.ws&&o.ws.setTracks(ws,-1,t)},this.setHlsQuality=function(t){var e;hls_created&&(e=parseInt(t),t==hls.levels.length&&(e=-1,hls.autoLevelCapping=-1),"current"==v.hlschangequality&&(setTimeout(onWaiting,500),hls.currentLevel=e),"next"==v.hlschangequality&&(log("HLS next level "+e),hls.nextLevel=e),-1==e&&(o.current_quality=hls.loadLevel),HlsUpdateAudio())},this.getHLS=function(){return hls},this.getDASH=function(){return!!dash_created&&o.dash.getDash()},this.HlsLevelsLength=function(){return HlsLevelsLength()},this.DashLevelsLength=function(){return DashLevelsLength()},this.ObjectFit=function(){ObjectFit()},this.resize=function(){Resize()},this.setHlsAudioTrack=function(t){hls_created&&(hls.audioTrack=parseInt(t))},this.hlsDashSub=function(t,e){if("hls"==e&&hls_created&&_hlssubtracks&&_hlssubtracks.HlsSubTrack(t),"hls2"==e&&hls_created){if(hls_subs[t]&&o.sbt)for(var i=0;i<hls_subs[t].length;i++)o.sbt.hlsSub(hls_subs[t][i]);setTimeout((function(){hls.subtitleTrack=t}),500)}"dash"==e&&dash_created&&o.dash.subtrack(t)},this.setSpeed=function(t){t&&(pjstg.playbackRate=t)},this.removeTracks=function(){for(var t=pjstg.childNodes,e=[],i=0;i<t.length;i++)"track"==t[i].tagName.toLowerCase()&&(t[i].removeEventListener("load",iOSTrackLoaded),e.push(t[i]));for(i=0;i<e.length;i++)pjstg.removeChild(e[i]);o.nativesub=!1},this.addTrack=function(t,e,i){var s;""!=t&&(0<t.indexOf(" or ")&&(t=t.split(" or ")[0]),(s=document.createElement("track")).setAttribute("src",t),s.setAttribute("label",e),s.setAttribute("kind","subtitles"),s.setAttribute("mode","showing"),i&&s.setAttribute("default",""),pjstg.appendChild(s),s.addEventListener("load",iOSTrackLoaded))},this.errorMessage=function(){return error||""},this.Remove=function(){clearInterval(o.dashInterval),is_hls&&hls&&hls.destroy(),is_dash&&dash_created&&o.dash.reset(),is_ws&&ws&&ws.stop(),pjstg.removeEventListener("error",onTagError),pjstg.removeEventListener("ended",onEnded),pjstg.removeEventListener("play",onPlay),pjstg.removeEventListener("pause",onPause),pjstg.removeEventListener("timeupdate",onTimeupdate),pjstg.removeEventListener("seeking",onSeeking),pjstg.removeEventListener("seeked",onSeeked),pjstg.removeEventListener("loadedmetadata",onMeta),pjstg.removeEventListener("volumechange",onVolume),pjstg.removeEventListener("waiting",onWaiting),pjstg.removeEventListener("durationchange",onDuration),pjstg.removeEventListener("enterpictureinpicture",onPipEnter),pjstg.removeEventListener("leavepictureinpicture",onPipLeave),pjstg.src="",("IFRAME"==container.tagName?container.contentDocument.body:container).removeChild(pjstg),pjstg=null}},Controls=function(){var b=[],butNames=[],butPosition=[],waiting=!1,wait_to,toolbarHidden=!1,settings,playlist,_lastactbut,i;for(i in o.settings2&&(o.settings2.hide(),o.settings2=null),o.files_speed=[.25,.5,.75,1,1.25,1.5,2],1==v.settings.customspeeds&&exist(v.settings.speeds)&&(v.settings.speeds=v.settings.speeds.replace(/\n/gi,""),o.files_speed=v.settings.speeds.split(",")),o.speed1=indOf(o.files_speed,1,!0),3==o.current_speed&&(o.current_speed=o.speed1),o.menuproc)o.menuproc.hasOwnProperty(i)&&(exist(v.settings[i])||(v.settings[i]=5),o["files_"+i]=["+ "+v.settings[i]+"%","&ndash; "+v.settings[i]+"%",100*o.menuproc[i]+"%"]);1==v.toolbar.hidejustfull&&o.system.ios&&1==v.nativefullios&&(v.toolbar.hide=0);var resizeonwidth=!1,stretch_width=0,stretch_width_last=0,stretch_with_volume=!1,firstly=!0,uijs,bg=new ControlsBg,settings,order=[],_rights=!1,_move_rights=!1,_max_order=0,_rb=[],y;for(y in"controls-right"==v.control_line.position&&(v.control_line.position="controls"),v)v.hasOwnProperty(y)&&0==y.indexOf("control_")&&v[y]&&(exist(v[y].order0)?v[y].order=v[y].order0:v[y].order0=v[y].order,order[v[y].order]&&(v[y].order+=v[y].order),order[v[y].order]=y,"controls"!=v.control_line.position&&("controls-right"==v[y].position?(_rb.push([y,v[y].order]),_rights=!0):"controls"!=v[y].position&&null!=v[y].position||_rights&&(_move_rights=!0)),_max_order<v[y].order&&(_max_order=v[y].order));if(_move_rights){_rb.sort((function(t,e){return t[1]-e[1]}));for(var i=0;i<_rb.length;i++)order[v[_rb[i][0]].order]=null,v[_rb[i][0]].order=_max_order+1,_max_order++,order[v[_rb[i][0]].order]=_rb[i][0]}1==v.toolbar.hide&&1==v.toolbar.hidedown&&(o.toolbar=createElement("div"),o.frame.appendChild(o.toolbar),css(o.toolbar,{position:"absolute",left:0,top:0,width:"100%",height:"100%",transition:"top 0.3s ease-out","pointer-events":"none"}));var bg2=createElement("div");(1==v.toolbar.hide&&1==v.toolbar.hidedown?o.toolbar:o.frame).appendChild(bg2),css(bg2,{position:"absolute",left:0,bottom:0,width:"100%",height:v.toolbar.h}),bg2.onclick=function(){o.system.mobile||o.actions.ControlsBgClick()},1==v.nocontrols&&(hide2(bg.c()),hide2(bg2));for(var i=1,y,action,hdn,lu,z;i<order.length;i++)order[i]&&(y=order[i],y&&(action=v[y].action,hdn=v[y].hide,o.system.mobile&&("volume"==action&&"speed"==v[y].customline||("volume"==action&&1==v.showvolmobile&&o.system.mobile?v[y].hideoutmute=0:("volume"==action||"fullscreen"==action&&v.nativemobile)&&(v[y].on=0))),1==v[y].hide&&(1==v[y].hideonvar&&exist(v[y].hidevar)&&options[v[y].hidevar]&&(v[y].on=0),1==v[y].hidewovar&&exist(v[y].hidevar2)&&(options[v[y].hidevar2]||(v[y].on=0))),1==v.nocontrols&&(v[y].on=0),1==v[y].on&&("line"==action||"volume"==action?(b[y]=new ControlLine(y,action),b[y].Resize(b[y].s("w"))):b[y]=new Control(y),butNames.push(y),"title"==b[y].g("action")&&""==b[y].s("text")&&(""!=b[y].s("var")&&exist(v[b[y].s("var")])||b[y].set("display",!1)),"custom"==b[y].g("action")&&(lu=b[y].s("linkurl"),lu&&(0==lu.indexOf("api:")&&0<lu.indexOf(",0/1")&&(z=lu.split(","),0==apiProcessor(z[0].substr(4))&&b[y].CustomSwitch(0)),indOf([lu],"share")&&(o.shareme=!0))),b[y].set("scale",b[y].s("scale")))));function ControlX(t){var e,i=0;if(t)if("line"==t.g("action"))i=butPosition.left+t.s("marginleft")+t.g("width")/2,null!=butPosition.rightbs||(butPosition.rightbs=[]);else if(null!=butPosition.rightbs){var s=t.g("width")+t.s("marginright")+t.s("marginleft");HideProof(t)&&(s=0),1!=t.s("hidden")||t.g("show")||(s=0),0<t.s("vertical")&&(s=0),i=bg.g("w")-+v.toolbar.lrpd-s+t.g("width")/2+t.s("marginleft");var r=0;for(butPosition.right-=s,r=0;r<butPosition.rightbs.length;r++){var n=b[butPosition.rightbs[r]];0<n.s("vertical")?css(n.c(),{left:n.g("x0")-s}):css(n.c(),{left:n.g("x")-s}),n.set("x0",n.g("x"))}butPosition.rightbs.push(t.g("key")),t.set("rightside",1)}else 1!=t.s("hidden")||t.g("show")||t.g("cul")?0<t.s("vertical")?i=butPosition.left+t.s("marginleft")+t.s("marginright"):(e=!1,"volume"==t.g("action")&&(1!=t.s("hide")||1!=t.s("hideoutmute")||t.g("cul")||(o.hidden_volume_over_process||o.hidden_volume_over?stretch_with_volume||(stretch_width-=t.g("width")+t.s("marginleft")+t.s("marginright"),stretch_with_volume=!0):stretch_with_volume=!(e=!0))),HideProof(t)&&(e=!0),e?i=butPosition.left:(butPosition.left+=t.g("width")/2+t.s("marginleft"),i=butPosition.left,butPosition.left+=t.g("width")/2+t.s("marginright"))):"volume"==t.g("action")&&1==t.s("hide")&&1==t.s("hideoutmute")&&stretch_with_volume&&(stretch_width+=t.g("width")+t.s("marginleft")+t.s("marginright"),stretch_with_volume=!1);return i}function CreateShare(){o.shareme&&"function"==typeof PluginShare&&(o.share=new PluginShare)}function ControlCoordinate(t){var e=o.fullscreen&&0==v.toolbar.stretchonfullscreen?o.normal_w:o.screen_w,i=o.screen_h,s=0;t!=bg&&(s=e/2+t.s("marginleft")-t.s("marginright"));var r=i/2,n=t.g("width"),a=t.g("height");return-1<(e=t.s("position")).indexOf("center")&&(s=o.screen_w/2+t.s("marginleft")-t.s("marginright")),0==e.indexOf("top")&&(r=a/2+t.s("marginproctop")*o.screen_h/100),0==e.indexOf("bottom")&&(r=o.screen_h-(t==bg?a:a/2)-t.s("marginprocbottom")*o.screen_h/100),-1<e.indexOf("right")&&(s=o.screen_w-n/2+t.s("marginleft")-t.s("marginright")-t.s("marginprocright")*o.screen_w/100),-1<e.indexOf("left")&&(s=n/2+t.s("marginleft")-t.s("marginright")+t.s("marginprocleft")*o.screen_w/100),"timeline"==e&&(s=-o.timeline_w/2+t.s("marginprocleft")*o.timeline_w/100+t.s("marginleft")-t.s("marginright"),r=-o.timeline_h/2-t.s("marginprocbottom")*o.timeline_h/100+t.s("marginproctop")*o.timeline_h/100),-1<e.indexOf("controls")&&(n=ControlX(t),s=(bg&&bg.c()?int(bg.c().offsetLeft):0)+n,"controls-right"==e&&(s+=stretch_width),r="top"==v.toolbar.position?v.toolbar.h/2-(v.toolbar_margintop<0?v.toolbar_margintop:0):i-v.toolbar.h/2),{x:s,y:r+t.s("margintop")-t.s("marginbottom")}}function Resize(t){var e=o.fullscreen&&0==v.toolbar.stretchonfullscreen?o.normal_w:o.screen_w;o.screen_h,1==v.toolbar.lrpp?(v.toolbar.lrppp=exist2(v.toolbar.lrpps)&&o.small?v.toolbar.lrpps:v.toolbar.leftandrightpadding,v.toolbar.lrpd=o.screen_w*v.toolbar.lrppp/100):v.toolbar.lrpd=v.toolbar.leftandrightpadding,css(bg.c(),{top:("top"==v.toolbar.position?0:o.screen_h-v.toolbar.h)-v.toolbar_margintop}),bg.set("y0",o.screen_h-v.toolbar.h-v.toolbar_margintop),0==v.toolbar.stretchonfullscreen&&bg&&(css(bg.c(),{width:e,left:0,"margin-left":0}),bg.set("w",e),o.fullscreen&&css(bg.c(),{left:"50%","margin-left":-e/2}));var i;e=!(butPosition={left:+v.toolbar.lrpd,right:bg.g("w")-+v.toolbar.lrpd});bg.g("show")||(bg.set("display",!0),e=!0);for(var s,r,n,a=0;a<butNames.length;a++)if(i=butNames[a],b[i]){var l=ControlCoordinate(b[i]);if(l){if("position"==b[i].s("animation")&&exist(o.motions[i])){if(b[i].g("x0")==l.x&&b[i].g("y0")==l.y)continue;o.motions[i].XY(b[i].g("x0"),l.x,b[i].g("y0"),l.y)}b[i].set("x0",l.x),b[i].set("y0",l.y),1!=b[i].s("hidden")||b[i].g("show")||t?css(b[i].c(),{position:"absolute",left:b[i].g("x0"),top:b[i].g("y0")}):HidePositionControl(b[i])}}for(i in e&&bg.set("display",!1),stretch_width=0,b)b.hasOwnProperty(i)&&("controls-right"==b[i].s("position")&&"line"!=b[i].g("action")&&-1<stretch_width&&(stretch_width=butPosition.right-butPosition.left),"line"==b[i].g("action")&&bg&&(r=b[i].s("marginleft")+b[i].s("marginprocleft")*o.screen_w/100,n=b[i].s("marginright")+b[i].s("marginprocright")*o.screen_w/100,1==b[i].s("customwidth")?s=1==b[i].s("wproc")?o.screen_w*b[i].s("w")/100-r-n:b[i].s("w"):-1<b[i].s("position").indexOf("controls")?(s=butPosition.right-butPosition.left-r-n,css(b[i].c(),{left:int(bg.c().offsetLeft)+butPosition.left+r+s/2}),stretch_width=-1):(s=bg.g("w")-r-n,css(b[i].c(),{left:int(bg.c().offsetLeft)+r+s/2})),b[i].set("x0",b[i].g("x")),b[i].Resize(s)));settings&&ResizeSettings(settings),playlist&&ResizeSettings(playlist),(resizeonwidth||o.fullscreen||stretch_width_last!=stretch_width)&&ShowOrHide()}function HidePositionControl(t){var e=0,i=0;-1<t.s("position").indexOf("right")&&-1==t.s("position").indexOf("controls")&&(e=o.screen_w+t.g("width")+10),-1<t.s("position").indexOf("left")&&(e=-t.g("width")-10),-1<t.s("position").indexOf("top")&&(i=2*-t.g("height")),(-1<t.s("position").indexOf("bottom")||-1<t.s("position").indexOf("controls"))&&(i=o.screen_h+t.g("height")+t.g("width")+10),0<e&&css(t.c(),{left:e}),0<i&&css(t.c(),{top:i})}function ResizeSettings(t){var e=-2e3;t.resizePlaylist();var i,s=o.screen_h-v.toolbar.h*(-1<t.s("position").indexOf("top")?1:2);t==playlist&&1==v.change2playlist&&(s=o.screen_h),(s=s-(o.fullscreen&&!o.system.mobile?+t.s("hmaxk")+100:t.s("hmaxk"))-(t==playlist&&0==+t.s("hmaxk")?t.s("margintop"):0))<100&&(s=100),css(t.c(),{"max-height":s}),t.co()&&css(t.co(),{"max-height":s}),t.g("show")&&(e=o.screen_h/2-t.g("height")/2+t.s("margintop")-t.s("marginbottom"),-1<t.s("position").indexOf("top")&&(e=t.s("margintop")-t.s("marginbottom")),-1<t.s("position").indexOf("bottom")&&(e=o.screen_h-("top"!=v.toolbar.position?v.toolbar.h:0)-t.g("height")+t.s("margintop")-t.s("marginbottom")),e<0&&(e=0)),"settings"==t.g("key")&&o.sttx?(i=o.screen_w-t.g("width")-t.s("marginright"),o.sttx>i?css(t.c(),{position:"absolute",right:t.s("marginright"),left:"auto",top:e}):css(t.c(),{position:"absolute",left:o.sttx,right:"auto",top:o.stty<e?o.stty:e})):-1<t.s("position").indexOf("right")?css(t.c(),{position:"absolute",right:t.s("marginright")-t.s("scrollwidth"),left:"auto",top:e}):-1<t.s("position").indexOf("left")?css(t.c(),{position:"absolute",left:t.s("marginleft"),right:"auto",top:e}):"playlist"==t.g("key")&&1==t.s("floatleft")?css(t.c(),{position:"absolute",left:o.screen_w/2-t.g("width")/2+t.s("marginleft")/2-t.s("marginright")/2,top:e}):(i=o.screen_w/2-t.g("width")/2+t.s("marginleft")-t.s("marginright"),css(t.c(),{position:"absolute",left:0<i?i:0,top:e})),t.Arrows()}function Action(but,type){o.acted=!0,_lastactbut=but;var a=but.g("action"),x;if("play"==a?(o.actions.Play(),o.muted&&1==v.unmuteonplay&&(o.actions.Unmute(),v.unmuteonplay=0),1==v.hotkey.on&&1==v.hotkey.icons&&1==v.hotkey.playiconbut&&PluginHotIcon("play",1),js("userplay")):("pause"==a&&(o.rldplay=0,o.actions.Pause(),1==v.hotkey.on&&1==v.hotkey.icons&&1==v.hotkey.playiconbut&&PluginHotIcon("play",0),js("userpause")),"stop"==a&&o.actions.StopMedia()),"back"==a&&o.actions.Seek(0,!1),"fullscreen"==a?o.casting||o.actions.Fullscreen():"normalscreen"==a&&o.actions.Normalscreen(),"line"==a){var ld=o.media.duration(),lt=but.g("click")*ld;if(0<v.delete&&(ld-=+v.delete,lt=but.g("click")*ld+ +v.delete),0<v.seekwindow&&v.seekwindow/ld<=1-but.g("click"))return;js(a,lt),o.actions.Seek(lt,!0),o.continue&&(o.continue.write(lt,ld),0<o.seekto&&(o.seekto=void 0)),js("userseek",lt)}if("volume"==a&&(x=but.g("click"),x<.02&&(x=0),1<x&&(x=1),"speed"==but.s("customline")?(x=parseFloat(x*o.files_speed.slice(-1)[0]).toFixed(1),o.actions.SetSpeed(x,1)):"volume2"==but.s("customline")?o.media.pipVol(x):(o.storage&&1==v.volumestore&&(localStorage.setItem("pljsvolume",x),0<but.g("click")||o.system.iphone||0==v.mutestore?localStorage.removeItem("pljsmute"):localStorage.setItem("pljsmute",1)),o.actions.Volume(x))),"mute"==a?(o.storage&&!o.system.iphone&&1==v.mutestore&&localStorage.setItem("pljsmute",1),o.actions.Mute(),1==v.hotkey.icons&&1==v.hotkey.muteiconbut&&PluginHotIcon("mute",0)):"unmute"==a&&(o.storage&&localStorage.removeItem("pljsmute"),o.actions.Unmute(),1==v.hotkey.icons&&1==v.hotkey.muteiconbut&&PluginHotIcon("mute",1)),0==a.indexOf("time")&&(but.isOn()?but.Off():but.On()),"rotate"==a&&o.media.Rotate(),"scale+"==a&&o.media.Scale(.1),"scale-"==a&&o.media.Scale(-.1),"scale"==a&&o.media.Scale(0),"live"==a&&(apiProcessor("restart"),but.set("iconopacity",1),but.set("saturate",1)),"share"==a&&(js("share"),ShowShare()),"settings"==a&&(o.sttx=void 0,settings&&(settings.g("show")?settings.hide():settings.show())),"playlist"==a){if(o.overopentimeout==a)return;o.controls.PlaylistShow()}if("next"==a&&o.controls.PlaylistNext(),"prev"==a&&o.controls.PlaylistPrev(),"custom"==a&&1==but.s("link")&&""!=but.s("linkurl")){var x=trim(but.s("linkurl"));if(o.overopentimeout!=a+x){-1<x.indexOf("{time}")&&(x=x.replace("{time}",exist(o.continue)?o.continue.flag().t:o.media.time())),-1<x.indexOf("{file}")&&(x=x.replace("{file}",o.media.currentFile())),-1<x.indexOf("{title}")&&(x=x.replace("{title}",v.title.replace(/,/gi," "))),"airplay"==x&&o.media.Airplay(),0==x.indexOf("skip")&&0<but.s("skip")&&o.actions.Seek(o.skpbt?o.skpbt.tskp():but.s("skip")),0==x.indexOf("cancelskip")&&o.skpbt&&o.skpbt.cancel(),"seektome"==x&&(o.actions.Seek(but.s("marginprocleft")*o.media.duration()/100),o.play||o.actions.Play()),1==but.s("linkpause")&&o.actions.Pause();var y=x.split(","),bl;if(0==x.indexOf("api:"))for(var z=x.substr(4).split(";"),i=0;i<z.length;i++){var ss,img,a,y=z[i].split(",");1<y.length?("seek"==y[0]&&1==v.hotkey.icons&&1==v.hotkey.seekiconbut&&PluginHotIcon("seek",0<y[1]?1:0),apiProcessor(y[0],y[1],but),js("userseek",y[1]),"0/1"!=y[1]&&"1/0"!=y[1]||reRightMenu()):"screenshot"==y[0]?(ss=apiProcessor(y[0]),ss?-1<ss.indexOf("data")&&(1==v.ssfly&&(img=document.createElement("img"),img.setAttribute("src",ss),css(img,{position:"fixed",right:exist(v.ssflyp)?v.ssflyp:20,bottom:exist(v.ssflyp)?v.ssflyp:20,width:0,transition:"width 0.5s cubic-bezier(.75,-0.5,0,1.75)"}),img.style.zIndex=1001,document.body.appendChild(img),setTimeout((function(){css(img,{width:exist(v.ssflyw)?v.ssflyw:200})}),1),img.onclick=function(){this.parentNode.removeChild(this)}),1==v.ssdown&&(a=createElement("a"),a.href=ss,a.download=y[0]+".jpg",a.click())):log(y[0]+" error")):apiProcessor(y[0])}else 0==x.indexOf("js:")&&(0<x.indexOf("(")&&0<x.indexOf(")")?eval(x.substr(3)):eval(y[0].substr(3)+"("+(exist(y[1])?'"'+y[1]+'"':"")+(exist(y[2])?',"'+y[2]+'"':"")+")")),0==x.indexOf("event:")&&JsEvent(x.substr(6),o.media.time()),0==x.indexOf("share:")&&o.share&&o.share.api(x.substr(6)),0==x.indexOf("effect:")&&o.effects&&apiProcessor("effect",x.substr(7)),0!=x.indexOf("http")&&0!=x.indexOf("/")&&0!=x.indexOf("?")&&0!=x.indexOf("url:")||(0==x.indexOf("url:")&&(x=x.substr(4)),window.open(x,but.s("linktarget"))),0==x.indexOf("download")&&o.actions.Download(),"api:pipwebkit"==x&&o.media.PipWebkit();if(-1<x.indexOf("settings#")&&settings){var si=x.substr(9).split(",");if(settings.g("show")&&settings.g("open")==si[0])o.sttx=void 0,o.stty=void 0,settings.hide();else{o.sttx=but.g("x")-but.g("width")/2,o.stty=but.g("y")+but.g("h");for(var i=0;i<si.length;i++)0==i&&settings.show(),settings.open(si[i]);playlist&&playlist.plclose()}}-1<x.indexOf("settings:")&&1==v.settings.combined&&(o.settings2||(o.settings2=new PluginSettings2),1==v.settings.showovercontrol?"over"==type?o.settings2.show(x):o.settings2.toggle(x):type||o.settings2.toggle(x)),"unblock"==x&&(o.actions.RemoveCurtain(),o.stopkeys=0,but.set("hide2"),bl=FindBut("linkurl","block"),bl&&bl.set("hide2")),"block"==x&&(but.UpdateText("OK"),but.s("linkurl2")&&(window.location.href=trim(but.s("linkurl2"))))}}}function TitlePl(){for(var t in b)b.hasOwnProperty(t)&&"custom"==b[t].g("action")&&"text"==b[t].s("type")&&b[t].RenewFromTitle(!0)}function ShowShare(){exist(o.share)&&o.share.Show()}function CustomTextButs(){if(v.customtext&&"object"==typeof v.customtext)for(var t in v.customtext)v.customtext.hasOwnProperty(t)&&CustomText(t,v.customtext[t])}function CustomText(t,e){if(t)for(var i in b)b.hasOwnProperty(i)&&b[i].g("ctxt")&&b[i].s("dom")==t&&(b[i].g("show")&&1!=b[i].s("hidden")||HideProof(b[i])||(b[i].set("unhidden"),b[i].set("display",!0)),b[i].CustomText(e))}function CloseSttx(){o.sttx&&(o.sttx=void 0,o.stty=void 0,settings.hide())}function ClosePl(){playlist&&playlist.g("show")&&1==v.playlist.autohide&&o.controls.Playlist()}function ShowOrHide(){for(var t in b)b.hasOwnProperty(t)&&"buffer"!=b[t].g("action")&&ShowOrHideProcessor(b[t]);ShowOrHideProcessor(bg),stretch_width_last!=stretch_width&&(stretch_width_last=stretch_width,Resize()),1==v.toolbar.hide&&1==v.toolbar.hidedown&&ToolbarDown(!o.starttimeout&&!o.mouseHere&&!o.fullscreen&&o.play&&1!=v.toolbar.hidejustfull&&!o.casting)}function ShowForce(){var t=toolbarHidden&&1==v.toolbar.hidewithoutmoving;if(o.play||1!=v.toolbar.hide||1!=v.toolbar.hideonpause||(t=!1),t){for(var e in b)b.hasOwnProperty(e)&&"buffer"!=b[e].g("action")&&ShowOrHideProcessor(b[e],!1);css(o.frame,{cursor:"default"}),o.fcdef=!0,ShowOrHideProcessor(bg,!1),bg.g("show")&&ToolbarShow(),ToolbarDown(!1)}}function HideForce(){var t=o.play&&1==v.toolbar.hidewithoutmoving&&!o.mouseDown;if(o.controlover&&1==v.toolbar.showovr&&(t=!1),o.play||1!=v.toolbar.hide||1!=v.toolbar.hideonpause||(t=!0),settings&&settings.g("show")&&o.setaction&&(t=!1),o.casting&&(t=!1),t){for(var e in b)b.hasOwnProperty(e)&&"buffer"!=b[e].g("action")&&ShowOrHideProcessor(b[e],!0);ShowOrHideProcessor(bg,!0),bg.g("show")||(toolbarHidden=!0,o.media.ToolbarHide(),o.play&&(css(o.frame,{cursor:"none"}),o.fcdef=!1)),ToolbarDown(!0)}}function HideInterval(){1==v.toolbar.hidewithoutmoving&&(1!=v.toolbar.hidejustfull||o.fullscreen||o.fullscreen_process)&&(clearInterval(o.toolbarInterval),o.toolbarInterval=setInterval(HideForce,1e3*(0<v.toolbar.hideleavetimeout?v.toolbar.hideleavetimeout:v.toolbar.hidetimeout)))}function ShowOrHideProcessor(t,e){var i=!1,s=!1,r=!1;1==v.toolbar.hide?(!o.starttimeout&&!o.mouseHere&&!o.fullscreen&&o.play&&1!=v.toolbar.hidejustfull&&!o.casting||o.fullscreen&&toolbarHidden&&!o.fcdef||o.actions.plNxtExst()&&o.ended&&!o.mouseHere?r=!(s=!(i=!0)):s=!(i=!1),exist(e)&&!o.casting&&(s=!(i=e)),1!=v.toolbar.hide||1!=v.toolbar.hidedown||0!=t.s("position").indexOf("controls")&&"line"!=t.s("action")||(s=!(i=!1)),1!=v.toolbar.hideonpause||o.play||(r=s=!(i=!0)),1==v.toolbar.showuntilmeta&&!o.metadata&&o.play&&(s=!(i=!1))):1!=t.s("hide")&&(s=!0),s&&!o.fcdef&&(css(o.frame,{cursor:"default"}),o.fcdef=!0);var n=t.g("action");"custom"==n&&-1==t.s("position").indexOf("controls")&&(s=!(i=!1)),o.casting&&"line"==n&&-1==o.media.duration()&&(s=!(i=!0));var a=!1,l=HideProof(t);1==t.s("hide")&&(1==t.s("hideonleaveandplay")&&(r||e||o.play&&!o.mouseHere)&&(r||e)&&(l=!0),1==t.s("hideonbar")&&(r||e||(l=!0)),1==t.s("hidelap")&&o.play&&!o.mouseHere&&(l=!0),1!=t.s("hideonwidth")&&1!=t.s("hideoverwidth")&&1!=t.s("hideonfullscreen")||(resizeonwidth=!0)),l?s=!(i=!0):i||(s=!0),"volume"==t.s("action")&&(1!=t.s("hide")||1!=t.s("hideoutmute")||t.g("cul")||(s=!(i=!0),r||!o.hidden_volume_over&&!o.hidden_volume_over_process||e||1==t.s("hiddenwidth")?a=!0:s=!(i=!1))),(o.nativecontrols||!o.start&&1==v.toolbar.hide&&1==v.toolbar.hideuntilstarted||!o.metadata&&1==v.toolbar.hide&&1==v.toolbar.hideuntilmeta)&&((-1<t.s("position").indexOf("controls")||-1<t.s("position").indexOf("bottom"))&&(s=!(i=!0)),1!=v.toolbar.hidejustfull||o.fullscreen||(s=!(i=!1))),settings&&settings.g("show")&&1!=v.settings.always&&(e=r=!1),playlist&&o.droplist&&1==v.playlist.dropopen&&o.droplist.Visible()||("share"==n&&exist(o.share)&&o.share.empty()&&(s=!(i=!0),t.set("animation","none")),"playlist"!=n&&"next"!=n&&"prev"!=n&&1!=t.s("hidewithoutplaylist")||(playlist?playlist.empty()&&0!=t.s("hidewithoutplaylist")&&(s=!(i=!0),t.set("animation","none")):s=!(i=!0)),1==o.hideall&&(s=!(i=!0)),!a||(a=ControlCoordinate(t))&&(0<a.y&&t.set("y0",a.y),css(t.c(),{position:"absolute",top:t.g("y0")})),i&&HideControl(t,!!firstly),s&&ShowControl(t),t==bg&&(!i&&s&&(ToolbarShow(),show2(bg2),toolbarHidden=!1,0==uijs&&js("ui",1),uijs=1,o.cut&&o.cutted&&o.cut.show()),!i||s||o.casting||(o.media.ToolbarHide(),SettingsClose(),hide2(bg2),toolbarHidden=!0,1==uijs&&js("ui",0),uijs=0,o.cut&&o.cutted&&o.cut.hide()),settings&&settings.tb()&&(settings.g("show")?!s&&i&&settings.hide(2):s&&!i&&settings.show()),playlist&&(1!=v.playlist.always||playlist.empty()||(s||o.nativecontrols?1==v.playlist.alwaysnotfullscreen&&o.fullscreen||playlist.g("show")||1==v.playlist.alwaysjustpause&&o.play||playlist.show():i&&playlist.g("show")&&playlist.hide()))))}function HideProof(t){var e,i,s,r=!1,n=t.g("action");return 1==t.s("hide")&&(1==t.s("hideonplay")&&o.play&&(r=!0),1==t.s("hideonpause")&&(o.play||(r=!0)),1==t.s("hdnn")?r=!0:(1==t.s("hideondesktop")&&o.system.desktop&&(t.set("hdnn",1),r=!0),1==t.s("hideonmobile")&&o.system.mobile&&(t.set("hdnn",1),r=!0)),1==t.s("hideoverwidth")&&(o.screen_w>t.s("hideoverwidthlimit")?(t.set("hiddenwidth",1),r=!0):t.set("hiddenwidth",0)),1!=t.s("hideunwait")||waiting||(r=!0,o.wtcntrl=1),1==t.s("hidewait")&&waiting&&(r=!0,o.wtcntrl=1),1==t.s("hideonwidth")&&(o.screen_w<=t.s("hideonwidthlimit")?(t.set("hiddenwidth",1),r=!0):t.set("hiddenwidth",0)),1==t.s("hideafterstart")&&o.start&&(r=!0),e=o.media.time(),i=o.media.duration(),1==t.s("hideafter")&&0<t.s("hideaftersec")&&e>=t.s("hideaftersec")&&(r=!0),1==t.s("hidebefore")&&0<t.s("hidebeforesec")&&e<t.s("hidebeforesec")&&(r=!0),1==t.s("hidebefore2")&&0<t.s("hidebeforesec2")&&(e<i-t.s("hidebeforesec2")||0==i)&&(r=!0),1==t.s("hidelastpl")&&playlist&&(playlist.PlaylistNextExist()||(r=!0)),1==t.s("hide0timestore")&&(!o.start&&o.continue&&!o.media.isLive()||(r=!0),o.continue&&0==o.continue.flag().t&&(r=!0)),1==t.s("hideuntilstarted")&&(o.start||(r=!0)),0<t.s("hideuntilto")&&(r=!0),1==t.s("hideonvar")&&exist(t.s("hidevar"))&&options[t.s("hidevar")]&&(r=!0),1==t.s("hideuntiltext")&&(exist(t.s("customtext"))||(r=!0)),1==t.s("hidewovar")&&exist(t.s("hidevar2"))&&(options[t.s("hidevar2")]||(r=!0)),1==t.s("hideuntilstartedios")&&o.system.ios&&(o.start&&!o.newfile||(r=!0)),1==t.s("hideuntilended")&&(o.media.ended()||(r=!0)),1==t.s("hideonvod")&&(o.media.isLive()||(r=!0)),1==t.s("hideonleave")&&(o.mouseHere||(r=!0)),1==t.s("hidenormscreen")&&(o.fullscreen||(r=!0)),1==t.s("hideonfullscreen")&&o.fullscreen&&(r=!0),1==t.s("hideonunmute")&&(o.muted||(r=!0)),1==t.s("hideonlive")&&o.media.isLive()&&-1==o.media.currentFile().indexOf("?DVR")&&(r=!0),1==t.s("hidewithposter")&&isVisible(o.poster)&&(r=!0),1==t.s("hideuntilmeta")&&(o.metadata||(r=!0)),1==t.s("hideonmeta")&&o.metadata&&(r=!0),1==t.s("hidemini")&&o.mini&&(r=!0),1==t.s("hidenomini")&&(o.mini||(r=!0)),1==t.s("hideafterclick")&&t.g("clicked")&&(r=!0),1==t.s("hidenoab")&&(o.ab||(r=!0)),1==t.s("hideab")&&o.ab&&(r=!0),1==t.s("hideonyoutube")&&1==v.preload&&1==v.screenclick&&("youtube"!=o.file_type||exist(v.poster)||0!=v.youtubeposter||o.start&&"ended"!=o.media.status()||""==v.poster||(r=!0))),"custom"!=n||(i=t.s("linkurl"))&&("api:airplay"!=i&&"airplay"!=i||o.airplay||o.airplayed||(r=!0),"api:pipwebkit"==i&&(o.pipwebkit&&(o.start||0!=v.preload)||(r=!0)),"api:unfixing"==i&&(o.mini||(r=!0)),-1<i.indexOf("captions")&&(o.captions||(r=!0)),indOf([i],"skip")&&!indOf([i],"js:")&&1!=t.s("hdnn")&&(s=!1,exist(v.skip)&&(o.skpbt||"function"==typeof PluginSkip&&(o.skpbt=new PluginSkip),o.skpbt&&(s=o.skpbt.check(t))),s||(r=!0))),"playlist"!=n&&"next"!=n&&"prev"!=n||playlist&&!playlist.empty()||(r=!0),"settings"==n&&(settings?settings.empty()&&(r=!0,"hls"!=o.file_type&&t.set("animation","none")):r=!0),"text"==t.g("type")&&0==t.g("length")&&(r=!0),t.g("settings#")&&(t.g("set#visible")||(r=!0)),1==t.s("chromecast")&&(s=document.getElementById("pjs_cast_button_"+v.id),(0!=o.media.duration()||0!=o.media.time())&&o.tagvideo&&isVisible(s)&&o.cast_available||(r=!0)),1==t.s("hidetime")&&(r||t.set("hidetime",1)),"duration"==n&&o.media.isLive()&&(r=!0),"control_start"==t.g("key")&&o.system.mobile&&o.nativecontrols&&o.system.android&&(r=!0),r}function HideControl(t,e){t.g("show")&&(o.fullscreen_process||"none"==t.s("animation")||e?t.set("display",!1):HideAnimate(t),t.set("show",!1))}function ShowControl(t){t.g("show")||("none"==t.s("animation")||o.fullscreen_process?(t.set("display",!0),o.fullscreen_process&&t.set("opacity",1),"volume"==t.g("action")&&o.hidden_volume&&HidePositionControl(t)):ShowAnimate(t),"volume"==t.s("action")&&o.controls.Volume(o.muted?0:v.volume),"line"==t.s("action")&&o.actions.Loading(),t.set("show",!0))}function HideAnimate(t){killMotion(t.g("key"));var e="alpha|",i="0|",s=t.s("animation");1==t.s("apdra")&&(i=e="");var r=t.s("position"),n=t.g("scaleX");exist2(t.s("apdr"))&&(r=t.s("apdr")),"scale"==s&&(e+="scale|",i+="0|"),"position"==s&&(-1<r.indexOf("right")&&-1==r.indexOf("controls")&&(e+="x|",i+=int(o.screen_w+t.g("width")/2*n)+"|"),-1<r.indexOf("left")&&(e+="x|",i+=int(-t.g("width")/2)*n+"|"),-1<r.indexOf("top")&&(e+="y|",i+=-t.g("height")/2*n+"|"),(-1<r.indexOf("bottom")||-1<r.indexOf("controls")||"timeline"==r)&&(e+="y|","line"==t.g("action")||"volume"==t.g("action")?i+=int(o.screen_h+t.s("h")+(t.s("h")<20?20-t.s("h"):0))+"|":i+=int(o.screen_h+t.g("height")/2)+"|"),"center"==r&&(e+="scale|",i+="0|")),new Motion({mc:t,me:t.g("key"),type:e.substr(0,e.length-1),to:i.substr(0,i.length-1),hide:1})}function ShowAnimate(t){killMotion(t.g("key"));var e="",i="",s=t.s("animation"),o=t.s("position");exist2(t.s("apdr"))&&(o=t.s("apdr")),1!=t.g("opacity")&&1!=t.s("apdra")&&(e="alpha|",i=("bg"==t.g("key")?v.toolbar.a:"1")+"|"),"scale"==s&&t.g("scaleX")!=t.s("scale")&&(e+="scale|",i+=t.s("scale")+"|"),"position"==s&&("center"==o?t.g("scaleX")!=t.s("scale")&&(e+="scale|",i+=t.s("scale")+"|"):-1<o.indexOf("controls")?t.g("y")!=t.g("y0")&&(e+="y|",i+=t.g("y0")+"|"):(e+="x|y|",i+=t.g("x0")+"|"+t.g("y0")+"|")),""!=e&&""!=i?new Motion({mc:t,me:t.g("key"),type:e.substr(0,e.length-1),to:i.substr(0,i.length-1),show:1}):t.set("display",!0)}function ToolbarDown(t){1==v.toolbar.hide&&(t&&SettingsClose(),1==v.toolbar.hidedown&&(o.play||1!=v.toolbar.hideonpause||(t=!0),t&&!o.toolbarisdown&&css(o.toolbar,{top:bg.h()}),!t&&o.toolbarisdown&&css(o.toolbar,{top:0}),o.toolbarisdown=t))}function ToolbarShow(){toolbarHidden=!1,o.media.ToolbarShow(),o.resizeonmouse&&(o.resizeonmouse=!1,Resize(),setTimeout(Resize,300))}function UpdateTime(t,e,i){0<v.delete&&(e-=+v.delete,i-=+v.delete);var s=Time(e);"1"==t.s("inversetime")&&(s=Time(i-e)),"1"==t.s("showduration")&&("1"==t.s("showboth")?s+=0<i?" "+Lang(t.s("separator"))+" "+Time(i):"":0==e&&(s=Time(i))),t.UpdateText(s)}function Waiting(){var t;waiting||(js("buffering"),waiting=!0,(t=FindBut("action","buffer"))&&(t.Buffer(),1==v.posteronwait&&o.play&&(clearTimeout(o.wtpstr_to),o.wtpstr_to=setTimeout(WaitPoster,1e3*(0<v.pstrwt?v.pstrwt:1)))),o.wtcntrl&&ShowOrHide())}function WaitPoster(){o.play&&waiting&&o.actions.ShowPoster()}function Volumescrolled(){var t=FindBut("linkurl","volume scroll");t&&(t.UpdateText(""),t.set("hide2"),clearTimeout(o.volumescroll))}function SettingsClose(t){settings&&settings.g("show")&&settings.hide(t),o.settings2&&o.settings2.hide()}function PlaylistControls(){for(var t in b)b.hasOwnProperty(t)&&("next"==b[t].g("action")&&css(b[t].c(),{opacity:playlist.PlaylistNextExist()?1:.5}),"prev"==b[t].g("action")&&css(b[t].c(),{opacity:playlist.PlaylistPrevExist()?1:.5}))}function SpeedChanged(){if(o.line_speed){var t,e=parseFloat(o.custom_speed/o.files_speed.slice(-1)[0],1).toFixed(2);for(t in b)b.hasOwnProperty(t)&&("speed"==b[t].s("customline")&&o.custom_speed&&b[t].UpdatePlay(e,1),"api:speed,1.0"==b[t].s("linkurl")&&b[t].UpdateVolume(e))}}function FindBut(t,e){for(var i in b)if(b.hasOwnProperty(i)&&b[i].s(t)==e)return b[i]}function KeyPlusUp(t){var e;"next"==t&&(o.playlist?o.controls.PlaylistNext():t="seek"),"seek"==t&&0<o.media.duration()&&(e=o.media.time()+parseFloat(v.hotkey.seek))<o.media.duration()&&(o.actions.Seek(e,!0),js("userseek",e)),"volume"==t&&(o.actions.Volume(parseFloat(v.volume)+parseFloat(v.hotkey.vol)),event.preventDefault()),"scale"==t&&(o.media.scale(v.hotkey.scale/100),event.preventDefault()),1==v.hotkey.icons&&PluginHotIcon(t,1)}function KeyPlusDown(t){var e;"next"==t&&(o.playlist?o.controls.PlaylistPrev():t="seek"),"seek"==t&&0<o.media.duration()&&o.start&&(e=0<=o.media.time()-v.hotkey.seek?o.media.time()-v.hotkey.seek:0,o.actions.Seek(e,!0),js("userseek",e)),"volume"==t&&(o.actions.Volume(parseFloat(v.volume)-parseFloat(v.hotkey.vol)),event.preventDefault()),"scale"==t&&(o.media.scale(-v.hotkey.scale/100),event.preventDefault()),1==v.hotkey.icons&&PluginHotIcon(t,0)}exist(v.settings)&&("function"==typeof Settings?(settings=new Settings("settings"),1==v.settings.always?settings.show():settings.hide()):o.noset=!0),exist(v.playlist)&&"function"==typeof Settings&&(playlist=new Settings("playlist"),exist(o.playlist)?(playlist.updatePlaylist(o.playlist),0!=v.playlist.openplaylistbefore&&exist(v.playlist.openplaylistbefore)?playlist.show():0==v.playlist.always&&playlist.hide(),1==v.playlist.always2&&playlist.show()):playlist.hide(1),PlaylistControls()),CreateShare(),CustomTextButs(),Resize(!0),ShowOrHide(),SpeedChanged(),firstly=!1,this.NewPl=function(){CreateShare(),playlist&&v.playlist.always&&!o.start&&playlist.show()},this.CrShr=function(){CreateShare()},this.ControlClick=function(t){var e=b[t],i=e.g("action");i&&(t=new Date,o.clicktime=t.getTime(),i&&""!=i&&(Action(e),"pause"==i&&(o.actpause=1),"play"==i&&(o.actpause=0))),JsClk()},this.toggleControl=function(t,e,i){for(var s in b)b.hasOwnProperty(s)&&b[s].s(t)==e&&b[s].set(i?"show2":"hide2")},this.butByS=function(t,e){return FindBut(e,t)},this.title=function(t){var e,i=!1;for(e in b)b.hasOwnProperty(e)&&"title"==b[e].g("action")&&(b[e].s("var")!=t&&"title"!=t||(1==b[e].s("hide")&&1==b[e].s("hideonplay")&&o.play&&(i=!0),""==v[t]||i?b[e].set("display",!1):b[e].set("display",!0),b[e].UpdateText(v[t])));TitlePl()},this.titlepl=function(){TitlePl()},this.resizetext=function(){for(var t in b)b.hasOwnProperty(t)&&"custom"==b[t].g("action")&&"text"==b[t].s("type")&&b[t].ResizeText()},this.showShare=function(){ShowShare()},this.updateTitle=function(){if(""!=v.title)for(var t in b){var e;b.hasOwnProperty(t)&&"title"==b[t].g("action")&&(e=!1,b[t].g("show")||(e=!0,b[t].set("display",!0)),b[t].UpdateText(v.title),e&&b[t].set("display",!1))}},this.customTextPl=function(){CustomTextButs()},this.customText=function(t,e){CustomText(t,e)},this.upText=function(t){b[t]&&b[t].UpText()},this.upTexts=function(){for(var t in b)b.hasOwnProperty(t)&&b[t].g("ctxt")&&b[t].UpText()},this.resize=function(){Resize()},this.resize2=function(){Resize(!0)},this.resizeSettings=function(){ResizeSettings(settings)},this.resizePlaylist=function(){ResizeSettings(playlist)},this.Play=function(){for(var t in b)b.hasOwnProperty(t)&&"play"==b[t].g("action")&&b[t].On();o.vast_loadtxt&&o.vast_loadtxt.hide(),ClosePl(),o.play=!0,ShowOrHide()},this.Pause=function(){for(var t in b)b.hasOwnProperty(t)&&("pause"!=b[t].g("action")&&"stop"!=b[t].g("action")||b[t].Off());playlist&&(1!=v.playlist.openplaylistpause||playlist.empty()||playlist.show()),o.play=!1,this.StopWaiting(),ShowOrHide(),1==v.toolbar.hide&&1==v.toolbar.hideonpause&&HideForce(!0)},this.Mute=function(){for(var t in b)b.hasOwnProperty(t)&&("mute"==b[t].g("action")&&b[t].On(),this.Volume(0));ShowOrHide()},this.Unmute=function(){for(var t in b)b.hasOwnProperty(t)&&"unmute"==b[t].g("action")&&b[t].Off();v.volume<.1?(v.volume=.5,o.actions.Volume(v.volume)):this.Volume(v.volume),ShowOrHide()},this.Volume=function(t,e){for(var i in b)b.hasOwnProperty(i)&&("volume"==b[i].g("action")&&(b[i].s("customline")&&"volume"!=b[i].s("customline")||b[i].UpdatePlay(t,1,"no"!=e||e)),"mute"==b[i].g("action")&&b[i].UpdateVolume(t));ShowOrHide()},this.Fullscreen=function(){var t=FindBut("action","fullscreen");t&&(t.On(),t.set("scale",t.s("scale"))),ShowOrHide(),resizeonwidth&&setTimeout(ShowOrHide,500),HideInterval(),CloseSttx()},this.Normalscreen=function(){var t=FindBut("action","fullscreen");t&&t.Off(),Resize(),clearInterval(o.toolbarInterval),ShowOrHide(),CloseSttx()},this.onEnded=function(){for(var t in b)b.hasOwnProperty(t)&&"play"==b[t].g("action")&&b[t].ReplayIcon()},this.Review=function(){ShowOrHide()},this.closePl=function(){ClosePl()},this.Mouse=function(t,e,i){var s=!1,r=b[t],n=r.g("action"),a=r.s("linkurl");"over"==e&&(o.hidden_volume&&("volume"!=n&&"mute"!=n&&"unmute"!=n||r.g("cul")||(o.hidden_volume_over=!0,s=o.hidden_volume_over_process=!0,ShowOrHide(),1!=v.control_line.hideonvolume||(t=FindBut("action","line"))&&hide2(t.c()))),!settings||1!=v.settings.showovercontrol||"settings"!=n&&0!=a.indexOf("setting")&&0!=a.indexOf("settings:")||(clearTimeout(o.settingsovertimer),settings.g("show")&&_lastactbut==r||(Action(r,e),o.overopentimeout=n+a,setTimeout((function(){o.overopentimeout=null}),500))),playlist&&1==v.playlist.showovercontrol&&"playlist"==n&&(clearTimeout(o.playlistovertimer),playlist.g("show")&&_lastactbut==r||(Action(r,e),o.overopentimeout=n,setTimeout((function(){o.overopentimeout=null}),500)))),"out"==e&&(o.hidden_volume&&("volume"!=n&&"mute"!=n&&"unmute"!=n||(o.hidden_volume_over=!1,o.hidden_volume_over_process=!0,setTimeout((function(){if(!o.hidden_volume_over)for(var t in o.hidden_volume_over_process=!1,b)b.hasOwnProperty(t)&&(toolbarHidden||"volume"!=b[t].g("action")||b[t].g("cul")||(HideControl(b[t]),Resize()),"line"==b[t].g("action")&&1==v.control_line.hideonvolume&&show2(b[t].c()))}),500))),"line"==n&&o.actions.UpdatePlay(1),1!=v.settings.showovercontrol||"settings"!=n&&0!=a.indexOf("setting")&&0!=a.indexOf("settings:")||(clearTimeout(o.settingsovertimer),o.settingsovertimer=setTimeout((function(){o.mouseDown||SettingsClose(1)}),0<v.settings.showoverto?1e3*v.settings.showoverto:1e3)),playlist&&1==v.playlist.showovercontrol&&"playlist"==n&&(clearTimeout(o.playlistovertimer),o.playlistovertimer=setTimeout((function(){o.mouseDown||playlist.g("show")&&playlist.hide(1)}),0<v.playlist.showoverto?1e3*v.playlist.showoverto:1e3))),s&&setTimeout(Resize,10)},this.StageLeave=function(){!o.volumewheel||o.fullscreen||o.fullscreen_process||(o.actions.volumewheel(!1),o.volumewheel=!1),o.poster&&-1<v.poster_aover&&isVisible(o.poster)&&css(o.poster,{opacity:v.poster_a}),o.play&&1==v.playonhover&&0!=v.pauseonhover&&o.actions.Pause(),0<v.toolbar.hideleavetimeout?(clearTimeout(o.leavetimeout),o.leavetimeout=setTimeout(ShowOrHide,1e3*v.toolbar.hideleavetimeout)):ShowOrHide()},this.StageOver=function(){o.poster&&-1<v.poster_aover&&isVisible(o.poster)&&css(o.poster,{opacity:v.poster_aover}),o.play||1!=v.playonhover||o.actions.Play(),ShowOrHide(),ToolbarDown(!1)},this.StageMove=function(t,e){var i,s;for(s in b)b.hasOwnProperty(s)&&("line"!=(i=b[s].g("action"))&&"volume"!=i||b[s].StageMove(t,e))},this.StageMove2=function(){1==v.toolbar.hide&&(1==v.toolbar.hidejustfull&&!o.fullscreen||(o.mouseHere&&!o.system.mobile||"playing"!=o.media.status()||(o.mouseHere=!0,ShowOrHide(),o.system.mobile&&setTimeout((function(){o.mouseHere=!1}),500)),1==v.toolbar.hidewithoutmoving&&(ShowForce(),HideInterval()),ToolbarDown(!1)))},this.StageMouseUp=function(t,e){for(var i in b)b.hasOwnProperty(i)&&("line"!=b[i].g("action")&&"volume"!=b[i].g("action")||b[i].StageMouseUp(t,e))},this.Played=function(t,e,i){for(var s in b)b.hasOwnProperty(s)&&("line"==b[s].g("action")&&b[s].UpdatePlay(t,e,i),"time"==b[s].g("action")&&UpdateTime(b[s],t,e),1==b[s].s("rotateplaying")&&b[s].Rotate(),1==b[s].s("svgtmln")&&b[s].Tmln(t,e),1==b[s].s("often")&&("bandwidth"!=b[s].s("linkurl")&&"bitrate"!=b[s].s("linkurl")||"function"==typeof PluginMbps&&PluginMbps(b[s]),1==b[s].s("often2")&&!b[s].g("show")&&toolbarHidden||b[s].g("show")==HideProof(b[s])&&(ShowOrHide(),Resize())))},this.Loaded=function(t,e){var i=FindBut("action","line");i&&i.UpdateLoad(t,e)},this.Cut=function(t){var e;0<o.media.duration()&&(e=FindBut("action","line"))&&e.Cut(t)},this.Waiting=function(){waiting||(1==v.hidevideo?(clearTimeout(wait_to),wait_to=setTimeout(Waiting,500)):Waiting())},this.HideElement=function(t){for(var e in b)e==t&&b[e].set("hide2")},this.StopWaiting=function(){var t;clearTimeout(wait_to),waiting&&(js("buffered"),(t=FindBut("action","buffer"))&&(t.BufferStop(),1==v.posteronwait&&o.play&&o.actions.HidePoster()),waiting=!1,o.wtcntrl&&ShowOrHide())},this.volumescroll=function(){var t=FindBut("linkurl","volume scroll");t&&(t.set("show2"),t.UpdateText(Lang("volume")+" "+(o.muted?0:Math.ceil(100*v.volume))+"%"),clearTimeout(o.volumescroll),o.volumescroll=setTimeout(Volumescrolled,1e3))},this.Seek=function(t,e){for(var i in 0<v.delete&&(t-=+v.delete,e-=+v.delete),b)b.hasOwnProperty(i)&&1==b[i].s("on")&&("line"==b[i].g("action")&&(0<e&&b[i].set("click",t/e),b[i].UpdatePlaySeek()),"time"==b[i].g("action")&&UpdateTime(b[i],t,e),"live"==b[i].g("action")&&(b[i].set("iconopacity",.5),b[i].set("saturate",0)))},this.Duration=function(t,e){for(var i in b)b.hasOwnProperty(i)&&("duration"==b[i].g("action")&&(0<v.delete&&(e-=+v.delete),b[i].UpdateText(Time(e))),"line"==b[i].g("action")&&(b[i].UpdatePlay(t,e),b[i].PlacePoints(e)),"time"==b[i].g("action")&&UpdateTime(b[i],t,e))},this.Settings=function(){o.settings2||(settings.g("show")?settings.hide():settings.show())},this.SettingsVisible=function(){return!!settings&&(o.settings2?o.settings2.isVisible()||settings.g("show"):!!settings.g("show"))},this.MenuProc=function(t){settings&&settings.menuproc(t)},this.SettingsClose=function(){SettingsClose()},this.SettingsTimer=function(t){settings&&settings.UpdateTimer(t)},this.SettingsSpeed=function(){settings&&settings.UpdateSpeed()},this.SettingsExist=function(t){if(settings)return settings.Exist(t)},this.Playlist=function(){playlist&&(playlist.g("show")?playlist.hide(1):playlist.show())},this.PlaylistShow=function(t){playlist&&(playlist.g("show")&&1!=t?2!=t&&playlist.hide():setTimeout((function(){playlist.show()}),100))},this.PlaylistVisible=function(){return!!playlist&&!!playlist.g("show")},this.PlaylistG=function(t){return playlist?playlist.g(t):""},this.UpdatePlaylist=function(t){playlist&&playlist.updatePlaylist(t)},this.PreNewPl=function(t){playlist&&playlist.prenewpl(t)},this.PlaylistNext=function(){playlist&&playlist.PlaylistNext()},this.PlaylistHere=function(){playlist&&playlist.PlaylistHere()},this.PlaylistControls=function(){PlaylistControls()},this.PlaylistNextExist=function(){return!!playlist&&playlist.PlaylistNextExist()},this.PlaylistPrevExist=function(){return!!playlist&&playlist.PlaylistPrevExist()},this.PlaylistExist=function(){return!!playlist&&playlist.PlaylistExist()},this.PlaylistRewind=function(){playlist&&playlist.PlaylistRewind()},this.PlaylistPrev=function(){playlist&&playlist.PlaylistPrev()},this.PlaylistPlayId=function(t){t&&playlist&&playlist.playById(t)},this.PlaylistOpenId=function(t){t&&playlist&&playlist.openById(t)},this.PlaylistMove=function(t){t&&playlist&&(css(playlist.co(),{maxHeight:"none","padding-right":playlist.s("bgpaddingright")}),document.getElementById(t).appendChild(playlist.co()),hide2(playlist.c()))},this.ShowSettingsBut=function(){},this.QualityChanged=function(t){settings&&(settings.SetQuality(),settings.g("show")&&setTimeout((function(){settings.hide()}),200))},this.QualityChangedNoHand=function(){settings&&settings.SetQuality(),o.settings2&&o.settings2.update()},this.AirplayChanged=function(t){settings&&settings.Airplay(),Resize(),ShowOrHide()},this.SettingChanged=function(t){settings&&(settings.SetSetting(t),settings.g("show")&&settings.hide()),o.settings2&&o.settings2.update(),"speed"==t&&SpeedChanged()},this.AudioTrackChangedNoHand=function(t){settings&&settings.SetSetting("audiotrack"),o.settings2&&o.settings2.update()},this.SubtitleChanged=function(){settings&&(settings.SetSubtitle(),settings.g("show")&&setTimeout((function(){settings.hide()}),200)),o.settings2&&o.settings2.update(),o.casting&&o.tagvideo&&o.chromecast.Sub()},this.SubOpt=function(){o.settings2&&o.settings2.hide(),settings&&settings.SubOpt()},this.SettingsN=function(t,e,i){for(var s in b)b.hasOwnProperty(s)&&("settings"==b[s].g("action")&&1==b[s].s("hdicon")&&b[s].HdIcon(),b[s].g("action_settings")=="settings#"+t&&(b[s].set("set#visible",e),"text"==b[s].g("type")?i&&b[s].UpdateText(NoSpan(i)):("subtitle"==v.settings["settings"+t+"action"]&&(i==Lang("off")?b[s].CustomSwitch(0):b[s].CustomSwitch(1)),Resize()),ShowOrHideProcessor(b[s])))},this.UpdateSettings=function(){settings&&(settings.SetQuality(),settings.SetSetting("audiotrack"),settings.SetSetting("download"))},this.RenewPoints=function(){var t=FindBut("action","line");t&&t.RenewPoints()},this.resize=function(){Resize(),toolbarHidden&&(o.resizeonmouse=!0)},this.resizeFromText=function(t){toolbarHidden&&1!=t?v.toolbar.resizeme=!0:(Resize(),ShowOrHide())},this.startcss=function(){var t=FindBut("type","css");t&&t.setcss()},this.refresh=function(){ShowOrHide(),Resize(),ShowOrHide(),o.nativecontrols?hide2(bg2):toolbarHidden||show2(bg2)},this.KeyDown=function(t){if(pljssglobalid==v.id&&1==v.hotkey.on){var e=t.which,i=!1;if(null==e&&(e=t.keyCode),exist(o.vast)||exist(o.pass)||1==o.stopkeys)return!1;if(o.play&&1==v.hotkey.onplay&&(i=!0),(1==v.hotkey.space&&32==e||1==v.hotkey.enter&&13==e)&&(o.focus||o.mouseHere||i))return 1==v.hotkey.icons&&PluginHotIcon("play",o.play?0:1),o.actions.Toggle(),t.preventDefault(),!1;if(v.hotkey.vol||(v.hotkey.vol=.2),v.hotkey.scale||(v.hotkey.scale=5),1==v.hotkey.nums&&(o.focus||i)&&0<o.media.duration())for(var s=48;s<58;s++)e==s&&o.actions.Seek(o.media.duration()*(e-48)*10/100,!0);39==e&&(o.focus||i)&&KeyPlusUp(v.hotkey.leftright),37==e&&(o.focus||i)&&KeyPlusDown(v.hotkey.leftright),38==e&&(o.focus||i)&&KeyPlusUp(v.hotkey.updown),40==e&&(o.focus||i)&&KeyPlusDown(v.hotkey.updown),187==e&&(o.focus||i)&&KeyPlusUp(v.hotkey.plusminus),189==e&&(o.focus||i)&&KeyPlusDown(v.hotkey.plusminus)}},this.KeyUp=function(t){if(pljssglobalid==v.id){var e=t.which;if(null==e&&(e=t.keyCode),57==e&&v.log,o.fullscreen&&27==e&&o.actions.Normalscreen(),exist(o.vast)||exist(o.pass))return!1;1==v.hotkey.f&&70==e&&1!=v.hidevideo&&(o.focus||o.mouseHere)&&(1==v.hotkey.icons&&PluginHotIcon("fullscreen",o.fullscreen?0:1),o.fullscreen?o.actions.Normalscreen():o.actions.Fullscreen()),1==v.hotkey.m&&77==e&&(o.focus||o.mouseHere)&&(1==v.hotkey.icons&&PluginHotIcon("mute",o.muted?1:0),o.muted?o.actions.Unmute():o.actions.Mute())}},this.Remove=function(){for(var t in clearInterval(o.toolbarInterval),o)0==t.indexOf("control")&&-1<t.indexOf("Interval")&&clearInterval(o[t]);for(var e=0;e<butNames.length;e++)key=butNames[e],b[key]&&b[key].Remove();settings&&settings.Remove(),playlist&&playlist.Remove(),bg.Remove(),bg2.parentNode==o.frame?o.frame.removeChild(bg2):o.toolbar&&o.toolbar.removeChild(bg2)},this.ShowForce=function(){ShowForce()},this.HideForce=function(){HideForce(),ShowOrHide()},this.HideInterval=function(){HideInterval()},this.ToolbarHidden=function(){return toolbarHidden}},Control=function(t){var e,i,s,r,n,a,l,c,u,d,h,f,p,g,m=0,y=0,b=!0,T=!1,S=1,w=1,x="",E=!1,_=!1,k=0,P=0,R=0,I=!1,A=!1,L=!1,C=!1,M=UpdateObject(M=[],default_style.but),D=[(M=UpdateObject(M,v[t])).action],O=D[0];exist(M.action2)&&(D[1]=M.action2),exist(M.opposite)&&(D[1]=M.opposite),exist(M.title)&&(M.text=M.title),exist2(M.scalesmall)&&o.small&&(M.scale=M.scalesmall),"share"==O&&(o.shareme=!0),exist(M.linkurl)&&("text"==M.type&&""!=M.linkurl&&exist(v[M.linkurl+"text"])&&(M.text=v[M.linkurl+"text"]),0==M.linkurl.indexOf("settings#")&&(x=M.linkurl,""==M.tiptext&&-1==x.indexOf(",")&&(M.tiptext=Lang(v.settings["settings"+x.substr(9)+"action"]))),-1<M.linkurl.indexOf("captions")&&(v.hlscaptions=!0),-1<M.linkurl.indexOf("share:")&&(o.shareme=!0),"countdown"==M.linkurl&&(M.counter=new PluginCountdown(M)));var F=M.tiptext?M.tiptext.split("///"):[];1==M.liketext&&(M.type="text",M.text=_t(0)+(1<D.length?"///"+_t(1):""),exist2(M.iconscolor)&&(M.color=M.iconscolor)),M.it=[],M.il=[];var N,U=0,z=new Array,W=new Array,H=new Array,V=(new Array,0);"text"==M.type?(M.dom&&exist(v[M.dom+"text"])&&(M.text=v[M.dom+"text"]),exist(M.text)&&(z[0]=trim(M.text),M.lngth=M.text.length,-1<(G=["/","|","-"]).indexOf(M.text.substr(-1))&&(M.postsmbl=M.text.substr(-1)),-1<G.indexOf(M.text.substr(0,1))&&(M.presmbl=M.text.substr(0,1)),"time"!=O&&"duration"!=O||(0==M.text.indexOf("0:")&&(M.timeshort=!0),3==M.text.split(":").length?M.with_hours=!0:-1<M.text.indexOf("00:00")&&(M.with_min=!0),1==M.dvrtime&&(v.dvrtime=1)),1==M.inversetime&&0==M.text.indexOf("-")&&(M.minus4back=!0),0<M.text.indexOf("///")&&("custom"==O||1==M.liketext)&&(M.texts=M.text.split("///"),M.text=z[0]=M.texts[0])),1==v.fonts&&(setTimeout(Et,100),setTimeout(Et,500),setTimeout(Et,1e3))):exist(M.icon)&&(z[0]=M.icon,0<z[0].indexOf("///")&&-1==z[0].indexOf("base64")&&(z=M.icon.split("///")),exist(M.icon2)&&(z[1]=M.icon2),1==M.iconsreplay&&exist2(M.icon3)&&(z.push(M.icon3),V=z.length-1)),"custom"==O&&1==M.link2&&exist(M.linkurl2)&&(M.linkurl0=M.linkurl);var B=createElement("div");"timeline"==M.position?o.timeline?o.timeline.appendChild(B):setTimeout((function(){o.timeline.appendChild(B)}),100):((indOf([M.position],"control")&&1==v.toolbar.hide&&1==v.toolbar.hidedown?o.toolbar:o.frame).appendChild(B),"buffer"==O&&1==M.ontop2&&(B.style.zIndex=2001)),1==M.svgtmln&&(M.tmln=new PlgnCntrlTmln(M,B));var j=createElement("div");B.appendChild(j);var G,Q,X,q,K,Y,Z=createElement("div");if(css(Z,{position:"absolute",left:0,top:0}),B.appendChild(Z),css(B,{position:"absolute",left:0,top:0,opacity:1,fontSize:"14px",lineHeight:"1em"}),exist2(M.dom)&&attr(B,{id:v.id+"_control_"+M.dom}),1!=M.rotateplaying&&1!=M.rotateonhover||css(Z,{transition:"transform 0.2s linear"}),0<z.length){for(et=0;et<z.length;et++){W[et]=createElement("div"),css(W[et],{position:"absolute",top:0,left:0,pointerEvents:"none",opacity:M.a,transition:"opacity 0.1s linear"}),M.scaleover>M.scale&&css(W[et],{transition:"opacity 0.1s linear,transform 0.1s linear"}),"pic"==M.type&&""!=M.src&&(exist2(M.dom)&&(attr(W[et],{id:v.id+"_control_"+M.dom+"_icon"}),v[M.dom+"src"]&&(M.src=v[M.dom+"src"])),(-1<M.src.indexOf(".png")||-1<M.src.indexOf(".jpg")||-1<M.src.indexOf(".gif")||-1<M.src.indexOf("base64"))&&(-1==M.src.indexOf("//")&&-1==M.src.indexOf("base64")&&(M.src="//"+M.src),$=createElement("img"),M.loading=1,$.addEventListener("load",mt),$.src=M.src,W[et].appendChild($),M.w=W[et].offsetWidth,M.h=W[et].offsetHeight,0<M.picheight&&css($,{height:M.picheight}))),"text"==M.type&&(css(W[et],{color:M.color,fontSize:M.fontsize*existv(v.globalfs,1),fontFamily:checkFont(M.font),"letter-spacing":M.letterspacing+"px",padding:"0 3px 0 3px","white-space":"nowrap"}),o.small&&exist2(M.fontsizesmall)&&css(W[et],{fontSize:M.fontsizesmall*existv(v.globalfs,1)}),1==M.click&&(-1<M.text.indexOf("<a ")||"control_title"==t)&&css(W[et],{pointerEvents:"auto"}),1==M.bold&&css(W[et],{"font-weight":"bold"}),M.lineh&&css(W[et],{lineHeight:M.lineh+"em"}),"live"==z[et]&&(z[et]=Lang("live")),W[et].innerHTML=Rt(z[et]),setTimeout(vt,100),M.w=W[et].offsetWidth,M.h=W[et].offsetHeight,exist2(M.dom)&&attr(W[et],{id:v.id+"_control_"+M.dom+"_text"})),"css"==M.type&&o.start&&setTimeout(Pt,200);var J=z[et].toString();0==J.indexOf("var:")&&(J=existv(window[J.substr(4)],""));var $=-1<J.indexOf("<svg")||-1<J.indexOf("<SVG");"svg"==M.type&&(-1<J.indexOf("<g>")||$)&&("mute"!=O&&"custom"!=O||(J=J.replace(/pjs_/g,"pjs_"+v.id+t)),-1<J.indexOf("pointer")&&ot(W[et]),W[et].innerHTML=($?"":"<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>")+J+($?"":"</svg>"),20<W[et].offsetWidth&&(M.w=W[et].offsetWidth),20<W[et].offsetHeight&&(M.h=W[et].offsetHeight),css(W[et],{width:M.w,height:M.h}),-1!=M.iconscolor&&It(W,M.iconscolor),exist2(M.dom)&&attr(W[et],{id:v.id+"_control_"+M.dom+"_icon"+et})),Z.appendChild(W[et]),0<et&&hide(W[et])}for(Q in at(),g&&mt(),"chromecast"==M.linkurl?(M.chromecast=1,M.hide=1,o.chromecast&&(W[0].innerHTML=o.chromecast.button(-1!=M.iconscolor?M.iconscolor:"#ffffff")),o.system.mobile?(W[0].ontouchstart=nt,W[0].ontouchend=ut,W[0].ontouchmove=rt):(W[0].onmouseover=ct,W[0].onmouseout=ut,W[0].onmousemove=yt)):(s.offsetWidth*M.scale<35||s.offsetHeight*M.scale<35)&&"text"!=M.type?(st(),ot(r)):ot(s),"custom"==O&&(tt="",1==M.link&&exist(M.linkurl)&&(0==(tt=M.linkurl).indexOf("api:")&&(2!=(it=tt.substr(4).split(",")).length||2==(G=it[1].split("/")).length&&("hd"==it[0]&&(it[0]="default_quality"),v[it[0]]==G[1]&&(M.a=1,css(W[0],{opacity:M.a})))),"unblock"!=tt&&"block"!=tt||(o.actions.Curtain(),B.style.zIndex=2001,o.stopkeys=1)),(1!=M.hide||1!=M.hideafter&&1!=M.hidebefore&&1!=M.hidebefore2)&&0!=tt.indexOf("skip")&&"bandwidth"!=tt&&"bitrate"!=tt||(M.often=1,indOf([M.position],"control")&&(M.often2=1))),M)exist2(M[Q+"_var"])&&exist2(options[M[Q+"_var"]])&&(M[Q]=options[M[Q+"_var"]]);"settings"==O&&1==M.hdicon&&(p=new PluginHdIcon(B,s,M)),0==M.click&&Pnt0(B),1==M.loading&&hide(s),1==M.tip&&(n=createElement("div"),css(n,{position:"absolute",left:0,top:0,height:"auto",opacity:0,transition:"opacity 0.1s linear"}),a=createElement("div"),M=MarginPadding(M,"tippadding","tippadding"),M=MarginPadding(M,"tipmargin","tipmargin"),css(a,{position:"absolute",left:0,top:0,width:"100%",height:30,"background-color":M.tipbgcolor,opacity:M.tipbga,"border-radius":M.tipbgrounding}),l=createElement("div"),css(l,{position:"absolute",left:M.tippaddingleft,top:M.tippaddingtop,color:M.tipcolor,"font-family":checkFont(M.tipfont),"font-size":M.tipfontsize*existv(v.globalfs,1),"letter-spacing":M.tipletterspacing+"px","line-height":"1"}),!M.tiptext||0==M.tiptext.indexOf("var:")&&(M.tipvar=!0),M.tipvar||css(l,{"white-space":"nowrap"}),1==M.tippointer&&((c=createElement("div")).innerHTML='<svg width="8px" height="6px" viewBox="0 0 8 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polygon id="Rectangle" stroke="none" fill="#'+M.tipbgcolor.replace("#","")+'" fill-rule="evenodd" points="0 0 8 0 4 6"></polygon></svg>'),1==M.tipalways?(css(n,{opacity:1}),ot(n)):Pnt0(n),B.appendChild(n),l.innerHTML=o.ni+(""==M.tiptext?Lang(O):F[0])+o.ni2,n.appendChild(a),n.appendChild(l),1==M.tippointer&&(n.appendChild(c),X=o.doctype?"-8px":"-6px",q=M.tippointeralign,exist(q)||(q=""),(K=-1<q.indexOf("top"))&&wt(c,"-180"),css(c,{position:"absolute",right:-1<q.indexOf("right")?10*M.scale:"auto",left:-1<q.indexOf("left")?10*M.scale:""==q||"top"==q?"50%":"auto","margin-left":""==q||"top"==q?"-4px":0,bottom:K?"auto":X,top:K?X:"auto",opacity:M.tipbga})),Tt()),-1<M.position.indexOf("right")&&(P=1),M.position.indexOf("top"),(-1<M.position.indexOf("bottom")||-1<M.position.indexOf("control"))&&(R=1),lt();var tt="";0!=M.rotation&&(tt+="rotate("+M.rotation+"deg)"),1==M.flipx&&(tt+=" scaleX(-1)"),1==M.flipy&&(tt+=" scaleY(-1)"),""!=tt&&css(Z,{transform:tt}),"buffer"==O&&kt();var et,it=[];if("playlist"==O)for(it=["autoplaylist","openplaylistafter","openplaylistbefore","openplaylistpause","openplaylistroot","playlistrewind"],et=0;et<it.length;et++)exist(M[it[et]])&&!exist(v.playlist[it[et]])&&(v.playlist[it[et]]=M[it[et]]);if("title"==O)for(it=["showtitleplaylist","addtitleplaylist","addtitleplaylistbr"],et=0;et<it.length;et++)exist(M[it[et]])&&!exist(options[it[et]])&&(v[it[et]]=M[it[et]]);1==M.tipalways&&Tt(),"custom"==O&&0==M.on&&hide2(B),1==M.hide&&0<M.hideuntilto&&setTimeout((function(){M.hideuntilto=-1,o.controls.refresh()}),1e3*M.hideuntilto)}function st(){r&&r.parentNode.removeChild(r),r=createElement("div"),css(r,{position:"absolute",top:0,left:0,width:"pic"==M.type?s.offsetWidth:(35<s.offsetWidth?s.offsetWidth:35)*M.clickscalex,height:"pic"==M.type?s.offsetHeight:(35<s.offsetHeight?s.offsetHeight:35)*M.clickscaley}),M=MarginPadding(M,"clickmargin","clickmargin"),B.appendChild(r)}function ot(t){0==O.indexOf("time")&&1==D.length&&(M.click=0),"custom"==O&&0==M.link&&(M.click=0),1==M.click?(1==M.hand&&css(t,{cursor:"pointer"}),css(t,{pointerEvents:"auto"}),o.system.mobile&&(t.addEventListener("touchmove",(function(t){rt(t)})),t.addEventListener("touchstart",(function(t){nt(t)})),t.addEventListener("touchend",(function(t){t.stopPropagation(),t.preventDefault(),1==M.mobileover&&ut(),_||ht(t),_=!1}))),1!=v.desktop&&o.system.mobile||(t.onclick=ht),1!=v.toolbar.clickarea&&1!=M.clickarea||css(t,{"background-color":"#ff0000",opacity:.5})):css(t,{cursor:"default"}),o.system.mobile||(t.onmouseover=ct,t.onmouseout=ut),1!=M.hidden&&1!=M.tip||(t.onmousemove=yt)}function rt(e){js("touch_"+t),e.stopPropagation(),_=!0}function nt(t){1==M.mobileover&&ct(),t.stopPropagation()}function at(){if(s&&s.parentNode.removeChild(s),s=createElement("div"),css(s,{position:"absolute",top:0,left:0}),exist2(M.dom)&&attr(s,{id:v.id+"_control_"+M.dom+"_bg"}),e=M.w,i=M.h,M.bgt=-1,M.bgl=-1,M=MarginPadding(M,"margin","margin"),(M=MarginPadding(M,"marginproc","marginproc")).mrgnprs&&o.small&&"0 0 0 0"!=M.mrgnprs&&(M=MarginPadding(M,"marginproc","mrgnprs")),"text"==M.type&&(e=W[U].offsetWidth,i=W[U].offsetHeight,0<M.minw&&e<M.minw&&(e=M.minw)),M=MarginPadding(M,"bgpadding","bgpadding"),M=MarginPadding(M,"iconmargin","iconmargin"),exist2(M.dom)&&exist(v.custom)&&"custom"==M.action&&"object"==typeof v.custom)for(var t,r=0;r<Object.keys(v.custom).length;r++)v.custom[r][M.dom]&&("off"==v.custom[r][M.dom]?M.on=0:"margin-left"==(t=v.custom[r][M.dom].split(":"))[0]&&(0<t[1].indexOf("%")?M.marginprocleft=parseInt(t[1]):M.marginleft=parseInt(t[1])));M.h=i,M.w=e,1==M.bg?(i=i+M.bgpaddingtop+M.bgpaddingbottom,e=e+M.bgpaddingleft+M.bgpaddingright,M.h=i,M.w=e,"text"==M.type&&(M.bgh=W[0].offsetHeight)):M.bga=0,css(s,{width:1==M.bgstretch?5e3:e,height:i,borderRadius:M.bgo*i/2,background:1==M.bggr?"linear-gradient("+(1==M.bggrl?"to right,":"")+hex2rgb(M.bgcolor,M.bga)+","+hex2rgb(M.bggrc,M.bga)+")":hex2rgb(M.bgcolor,M.bga),transition:"background .1s linear, transform .1s linear"+(exist2(M.bgbrovr)?", filter .1s linear":"")}),"pic"==M.type&&css(s,{width:e,height:i,borderRadius:M.bgo*i/M.scale/2}),1==M.bglines&&Bglines(s,M.bgcolor,M.bgline1,M.bgline2),1==M.bgborder&&css(s,{border:"1px solid "+M.bgbordercolor}),1==M.blur&&css(s,{"backdrop-filter":"blur(8px)"}),j.appendChild(s)}function lt(){var t=-s.offsetHeight/2,e=-s.offsetWidth/2;t==M.bgt&&e==M.bgl||(css(s,{top:-s.offsetHeight/2,left:-s.offsetWidth/2}),M.bgt=t,M.bgl=e),r&&(t="pic"==M.type||35<s.offsetWidth?s.offsetWidth:35,e="pic"==M.type||35<s.offsetHeight?s.offsetHeight:35,css(r,{top:-e/2+M.clickmargintop-M.clickmarginbottom,left:-t/2+M.clickmarginleft-M.clickmarginright}));for(var i=0;i<z.length;i++){var o="svg"==M.type?Math.round(parseInt(W[i].style.height))/2:Math.round(W[i].offsetHeight)/2,n="svg"==M.type?parseInt(W[i].style.width)/2:W[i].offsetWidth/2;o==M.it[i]&&n==M.il[i]||(css(W[i],{top:-o,left:-n}),s&&css(W[i],{top:int(W[i].style.top)+M.bgpaddingtop/2-M.bgpaddingbottom/2+M.iconmargintop/2+M.iconmarginbottom/2,left:int(W[i].style.left)+M.bgpaddingleft/2-M.bgpaddingright/2+M.iconmarginleft/2+M.iconmarginright/2}),M.it[i]=o,M.il[i]=n)}}function ct(){var e,i;if(E=!0,1==M.iconsover&&(e=h&&exist(M.icon2)?1:0,N&&2<H.length&&(e=2),H[e]&&(gt(),show(W[H[e]]))),1==M.bg&&(css(s,{background:hex2rgb(exist2v(M.bgcolorover,M.bgcolor),exist2v(M.bgaover,M.bga))}),exist2(M.bgbrovr)&&css(s,{filter:"brightness("+M.bgbrovr+")"})),-1<M.aover&&!T)for(e=0;e<z.length;e++)"hidden"!=W[e].style.visibility&&css(W[e],{opacity:M.aover});-1!=M.iconscolorover&&It(W,M.iconscolorover),1==M.rotateonhover&&(k+=45,wt(W[0],k)),M.scaleover>M.scale&&-1<M.scaleover&&bt(M.scaleover),"settings"==O&&o.controls.SettingsVisible()||1==M.tip&&1!=M.tipalways&&((i=1<F.length&&!h?F[1]:F[0])&&0==i.indexOf("var:")&&(l.innerHTML=window[i.substr(4)],Tt()),show(n),css(n,{opacity:1})),"mute"==O&&(o.actions.volumewheel(!0),o.volumewheel=!0),o.controlover=!0,o.controls.Mouse(t,"over")}function ut(){var e;if(E=!1,1==M.iconsover&&(e=h&&exist(M.icon2)?1:0,N&&2<H.length&&(e=2),gt(),show(W[e])),1==M.bg&&(css(s,{background:hex2rgb(M.bgcolor,M.bga)}),exist2(M.bgbrovr)&&css(s,{filter:"brightness(1)"})),-1<M.aover)for(e=0;e<z.length;e++)"hidden"!=W[e].style.visibility&&css(W[e],{opacity:M.a});-1<M.scaleover&&bt(M.scale),-1!=M.iconscolorover&&It(W,-1==M.iconscolor?"#ffffff":M.iconscolor),"mute"!=O||o.fullscreen||(o.actions.volumewheel(!1),o.volumewheel=!1),dt(),o.controlover=!1,o.controls&&o.controls.Mouse(t,"out")}function dt(){1==M.tip&&1!=M.tipalways&&(hide(n),css(n,{opacity:0}))}function ht(e){e&&(e.cancelBubble=!0),I||(o.controls.ControlClick(t),"custom"==O&&ft(),dt(),1==M.rotateonclick&&(k+=45,wt(W[0],k)),L=!0,(1==M.hideafterclick||"control_start"==t&&1==M.hide&&1==M.hideonplay)&&o.controls.refresh())}function ft(){z&&(1<z.length&&(1==h?(show(W[0]),hide(W[1])):(show(W[1]),hide(W[0]))),1==M.tip&&1<F.length&&(l.innerHTML=o.ni+(1==h?F[0]:F[1])+o.ni2,Tt())),exist(M.linkurl0)&&(M.linkurl=1==h?M.linkurl0:M.linkurl2),pt(),h=1!=h,M.linkurl&&-1<M.linkurl.indexOf(",0/1")&&js(M.linkurl,h?1:0),1==M.bg&&exist(M.bgcolorlink2)&&-1!=M.bgcolorlink2&&(h?(M.bgcolorlink0=M.bgcolor,M.bgcolor=M.bgcolorlink2):M.bgcolor=M.bgcolorlink0,at(),ot(s),lt(),"text"==M.type?Et():bt(M.scale))}function pt(){exist(M.texts)&&1<M.texts.length&&xt(1==h?M.texts[0]:M.texts[1])}function gt(){for(var t=0;t<z.length;t++)"hidden"!=W[t].style.visibility&&(css(W[t],{opacity:M.a}),hide(W[t]))}function vt(t){W[0]&&W[0].offsetWidth>o.screen_w-M.marginleft-M.marginright-M.bgpaddingleft-M.bgpaddingright&&(1==M.marquee?(t=t||W[0].innerHTML,W[0].innerHTML="<marquee>"+t+"</marquee>"):css(W[0],{"white-space":"normal"}),css(W[0],{width:o.screen_w-M.marginleft-M.marginright-M.bgpaddingleft-M.bgpaddingright}))}function mt(){s?(g=!1,M.loading=0,hide(s),W[0]&&(M.w=W[0].offsetWidth*M.scale,M.h=W[0].offsetHeight*M.scale,bt(M.scale)),M.loaded=0,at(),st(),ot(r),show(s),lt(),o.controls.resize(),isVisible(B)||hide2(B)):g=!0}function yt(){o.system.mobile||o.controlover||ct(),Tt()}function bt(t){if(0<t){for(css(s,{transform:"scale("+t+")"}),et=0;et<z.length;et++)css(W[et],{transform:"scale("+t+")"});M.tmln&&M.tmln.scale(t),w=S=t}}function Tt(){1==M.tip&&(css(n,{top:(1==R?-i-n.offsetHeight+3:-n.offsetHeight/2)+M.tipmargintop-M.tipmarginbottom,left:(1==P?-l.offsetWidth:1==R?-e/2:+l.offsetWidth)-(1==R?0:l.offsetWidth/2+5)+M.tipmarginleft-M.tipmarginright,height:M.tippaddingtop+l.offsetHeight+M.tippaddingbottom,width:M.tippaddingleft+l.offsetWidth+M.tippaddingright}),css(a,{height:n.offsetHeight}),n.style.zIndex="1000")}function St(){I=!1}function wt(t,e){css(t,{transform:"rotate("+e+"deg)"+(t!=W[0]||A||1==S?"":" scale("+S+")")})}function xt(t){var e,i;"text"==M.type&&(exist(t)&&(M.with_hours&&(4==t.length&&(t=(M.timeshort?"0:0":"00:0")+t),5==t.length&&(t=(M.timeshort?"0:":"00:")+t),7==t.length&&(t=(M.timeshort?"":"0")+t)),M.with_min&&4==t.length&&(t="0"+t),M.lngth=t.length),t=(M.presmbl?M.presmbl+(M.minus4back?"":" "):"")+t+(M.postsmbl?" "+M.postsmbl:""),e=W[0].offsetWidth+(1==M.bg?M.bgpaddingtop+M.bgpaddingbottom:0),i=W[0].offsetHeight+(1==M.bg?M.bgpaddingtop+M.bgpaddingbottom:0),W[0].innerHTML=o.ni+("custom"==O?Rt(t):t)+o.ni2,1==M.triangle&&(W[0].innerHTML+='<span style="display:inline-block;width:10px"></span><span style="border-top: 3px solid '+CheckColor(M.color)+';border-left: 3px solid transparent;border-right: 3px solid transparent;position: absolute;right:3px;top: 50%;margin-top: -1px;"></span>'),"title"==O&&(css(W[0],{width:"auto","white-space":"nowrap"}),vt(t)),M.w=W[0].offsetWidth+(1==M.bg?M.bgpaddingtop+M.bgpaddingbottom:0),M.h=W[0].offsetHeight+(1==M.bg?M.bgpaddingtop+M.bgpaddingbottom:0),(e!=M.w||i!=M.h||0<M.w&&0==m)&&Et(),0<W[0].offsetWidth?m=M.w:(""!=x&&hide(W[0]),""!=t&&setTimeout(Et,10)))}function Et(){"text"==M.type&&W[0]&&0<W[0].offsetWidth&&(""!=x&&show(W[0]),e=M.w=W[0].offsetWidth,i=M.h=W[0].offsetHeight,at(),ot(s),lt(),o.controls&&(indOf([M.position],"control")?o.controls.resizeFromText():o.controls.resize()))}function _t(t){return o.ni+(""==M.tiptext?Lang(D[t]):1<F.length?F[t]:F[0])+o.ni2}function kt(){hide2(B);for(var t=B.getElementsByTagName("*"),e=t.length;e--;)css(t[e],{"animation-play-state":"paused"});b=!1}function Pt(){controlCSS(z[0],M.color,W[0])}function Rt(e){var i,s=e+"";if(-1<e.indexOf("{")){if(-1<e.indexOf("{time}")&&exist(o.continue)&&(e=e.replace("{time}",timeFormat(o.continue.flag().t))),-1<e.indexOf("{title")&&(i=o.titlestore||v.title||"",-1<e.indexOf("{title2}")&&o.controls&&(e=e.replace("{title2}",o.controls.PlaylistG("title2"))),o.butplstart&&o.controls&&(i=o.controls.PlaylistG("butplstart")),e=e.replace("{title}",i),o.butplstart&&!o.controls&&setTimeout(xt,100,s)),-1<e.indexOf("{text"))for(var r=1;r<6;r++)-1<e.indexOf("{text"+r+"}")&&(e=exist(v["text"+r])?e.replace("{text"+r+"}",v["text"+r]):e.replace("{text"+r+"}",""));-1<e.indexOf("{next}")&&(o.ctxtnk=t,o.controls&&(e=e.replace("{next}",o.controls.PlaylistG("nxtttl"))))}return e}function It(t,e){for(var i=0;i<t.length;i++)SvgColor(t[i],e);"chromecast"==M.linkurl&&o.chromecast&&o.chromecast.Color(t[0],e)}this.Click=function(){ht()},this.c=function(){return B},this.s=function(t){return M[t]},this.ss=function(t,e){return!!exist(M[t])&&M[t][e]},this.g=function(s){switch(s){case"width":return e;case"height":return i;case"h":return existv(M.bgh,i);case"x":return int(B.style.left);case"y":return int(B.style.top);case"opacity":return B.style.opacity||1;case"show":return b;case"scaleX":return S;case"scaleY":return w;case"action":return O;case"action_settings":return x;case"clicked":return L;case"type":return M.type;case"length":return M.lngth||0;case"key":return t;case"x0":return u;case"y0":return d;case"over":return E;case"settings#":return 0==x.indexOf("settings#");case"settings:":return 0==x.indexOf("settings:");case"ctxt":return"custom"==O&&"text"==M.type;case"set#visible":return C;default:return!1}},this.set=function(e,i){switch(e){case"show":E&&ut(),b=i;break;case"display":(s=i)&&o.system.mobile&&(I=!0,setTimeout(St,300)),s||1==M.iconsreplay&&N&&(hide(W[V]),show(W[0]),N=!1),1==M.loading?(s?show:hide)(B):("control_time"==t||"control_duration"==t?(s?show:hide)(B):css(B,{display:s?"block":"none"}),(b=s)&&show(B)),s&&M.resizetxt&&(M.resizetxt=!1,setTimeout(Et,100));break;case"show2":show2(B);break;case"hide2":hide2(B);break;case"unhidden":M.hidden=0;break;case"hidetime":0<M.hidesec&&1!=M.hidden&&!f&&(clearTimeout(f),f=setTimeout((function(){hide2(B),M.hidden=1,f=void 0}),1e3*M.hidesec));break;case"scale":bt(i);break;case"scale0":css(B,{transform:"scale(0)"});break;case"scaleX":css(B,{transform:"scaleX("+i+")"}),S=i;break;case"scaleY":css(B,{transform:"scaleY("+i+")"}),w=i;break;case"opacity":css(B,{opacity:i});break;case"iconopacity":css(W[0],{opacity:i});break;case"saturate":css(W[0],{filter:"saturate("+i+")"});break;case"left":case"x":css(B,{left:i});break;case"top":case"y":css(B,{top:i});break;case"width":css(B,{width:i});break;case"height":css(B,{height:i});break;case"over_final":M.over_final=i;break;case"rightside":P=i;break;case"set#visible":C=i;break;case"animation":M.animation=i;break;case"skip":M.skip=i;break;case"x0":u=i;break;case"y0":d=i;break;case"hdnn":M.hdnn=i;break;default:return!1}var s},this.UpdateText=function(t,e){""==x||"x"!=M.text&&"1x"!=M.text||(t+="x"),e&&(t=M.text+t),xt(t),isVisible(B)||(M.resizetxt=!0)},this.CustomText=function(t){Y!=t&&(M.customtext=t,xt(t),isVisible(B)||(M.resizetxt=!0),o.controls&&o.controls.resize()),Y=t},this.Rotate=function(){wt(Z,y),y+=20},this.RenewFromTitle=function(t){-1<M.text.indexOf("{title")&&xt(M.text)},this.CustomToogle=function(){ft()},this.ResizeText=function(){Et()},this.UpdateVolume=function(e){if(1==M.displayvolume){var i=4;if("control_mute"==t){if(o.system.mobile)return}else i=8;for(var s=[],r=1;r<i;r++)s[r]=document.getElementById("pjs_".concat(v.id,t,"volume_element",r));if(s[1]){for(r=1;r<i;r++)s[r]&&hide(s[r]);if(4==i)for(r=1;r<i;r++)r/i<e&&s[r]&&show(s[r]);else for(r=i;0<r;r--)if(r/i<=+e+1/i&&s[r]){show(s[r]);break}}}},this.On=function(){h||(z&&1<z.length&&1<D.length&&(hide(W[0]),show(W[1])),1<D.length&&(O=D[1],1==M.tip&&(l.innerHTML=_t(1),Tt())),1==M.iconsreplay&&N&&(hide(W[V]),N=!1),pt(),h=!0)},this.CustomSwitch=function(e){var i;i=e,(e=document.getElementById("pjs_".concat(v.id,t,"slider")))?(css(e,{transition:"transform 0.1s ease-out"}),e.style.transform=1==i?"translate(0, 0)":"translate(-7px, 0)"):M.a=1==i?1:.5,h=1==i,1==M.tip&&1<F.length&&(l.innerHTML=h?F[0]:F[1]),console.log(W[0]),css(W[0],{opacity:M.a})},this.Tmln=function(t,e){M.tmln&&M.tmln.update(t,e)},this.Off=function(){h&&(z&&1<z.length&&1<D.length&&(show(W[0]),hide(W[1]),css(W[0],{opacity:M.a})),O=D[0],1<D.length&&1==M.tip&&(l.innerHTML=_t(0),Tt()),pt(),N=h=!1)},this.ReplayIcon=function(){1==M.iconsreplay&&(gt(),show(W[V]),N=!0)},this.Buffer=function(){var t=!1;if(1==M.hide&&1==M.hidewithposter&&isVisible(o.poster)&&(t=!0),!t){show2(B);for(var e=B.getElementsByTagName("*"),i=e.length;i--;)css(e[i],{"animation-play-state":"running"});b=!0}},this.BufferStop=function(){kt()},this.Remove=function(){if(0<z.length)for(et=0;et<z.length;et++)W[et].parentNode==B&&B.removeChild(W[et]),W[et]=null;s&&(s.removeAttribute("onclick"),s.removeAttribute("onmouseover"),s.removeAttribute("onmouseout"),s.parentNode.removeChild(s),s=null),"timeline"==M.position?B.parentNode==o.timeline&&o.timeline.removeChild(B):B.parentNode==o.frame?o.frame.removeChild(B):o.toolbar&&B.parentNode==o.toolbar&&o.toolbar.removeChild(B),n&&n.parentNode==B&&B.removeChild(n),B=null},this.HdIcon=function(){p&&p.toggle()},this.setcss=function(){Pt()},this.UpText=function(){xt(M.text)}},ControlLine=function(t,e){var i,s,r,n,a,l,c,u,d,h,f,p,g,m,y,b=[],T=!0,S=1,w=1,x=0,E=0;for(i in o.current_thumb=-1,default_style.but)b[i]=default_style.but[i];for(i in e=v[t].action,v[t].type,default_style[e])b[i]=default_style[e][i];for(i in v[t])b[i]=v[t][i];b.w=parseInt(b.w),b.h=parseInt(b.h),b=MarginPadding(b,"margin","margin"),b=MarginPadding(b,"marginproc","marginproc"),o.small&&(0<b.wps&&(b.w=parseInt(b.wps)),b.mrgnprs&&"0 0 0 0"!=b.mrgnprs&&(b=MarginPadding(b,"marginproc","mrgnprs")));var _=createElement("div");(1==v.toolbar.hidedown&&1==v.toolbar.hide?o.toolbar:o.frame).appendChild(_),"line"==e&&(o.timeline=_);var k=!1;b.customline&&"volume"!=b.customline&&(k=!0),css(_,{position:"absolute",top:0,left:0,opacity:1,fontSize:"14px",lineHeight:"1em"}),1==b.ontop&&(_.style.zIndex=b.order),function(){r=createElement("div");var t=(b=MarginPadding(b,"bgpadding","bgpadding")).h+b.bgpaddingtop+b.bgpaddingbottom,e=b.w+b.bgpaddingleft+b.bgpaddingright;1==b.bg||(b.bga=0),b=MarginPadding(b,"clickmargin","clickmargin"),1!=v.toolbar.clickarea&&1!=b.clickarea||(b.bgcolor="#ff0000",b.bg=1,b.bga=.5),css(r,{position:"absolute",top:0,left:0,width:e,height:t*b.clickscaley,borderRadius:b.bgo*t/2,background:hex2rgb(b.bgcolor,b.bga),pointerEvents:"auto",transition:"opacity .1s linear, background .1s linear"}),1==b.blur&&css(r,{"backdrop-filter":"blur(8px)"}),1==b.bgborder&&css(r,{border:"1px solid #"+b.bgbordercolor}),1==b.click?(1==b.hand&&css(r,{cursor:"pointer"}),o.system.mobile&&1!=v.desktop||(r.onclick=X,r.onmouseup=q,r.onmousedown=K,r.onmousemove=$)):css(r,{cursor:"default"}),o.system.mobile||(r.onmouseover=j,r.onmousemove=$,r.onmouseout=Q),o.system.mobile&&1==b.click&&(r.addEventListener("touchstart",(function(t){t.cancelBubble=!0,!exist(t.clientX)&&0<t.touches.length&&(t.clientX=t.touches[0].pageX,t.clientY=t.touches[0].pageY),j(g=t),K(t)})),r.addEventListener("touchend",(function(t){t.cancelBubble=!0,o.mouseDown=!1,Q(),q(g)})),r.addEventListener("click",(function(t){t.cancelBubble=!0})),r.addEventListener("touchmove",(function(t){!exist(t.clientX)&&0<t.touches.length&&(t.clientX=t.touches[0].pageX,t.clientY=t.touches[0].pageY),g=t,o.mouseDown=!0,$(t)}))),css(r,{left:Math.ceil(-b.w/2-b.bgpaddingleft)}),css(r,{top:Math.ceil(-b.h/2-b.bgpaddingtop+b.clickmargintop-b.clickmarginbottom)}),1==b.bglines&&Bglines(r,b.bgcolor,b.bgline1,b.bgline2),_.appendChild(r)}();var P=createElement("div");css(P,{position:"absolute",bottom:Math.round(-b.h/2),left:Math.round(-b.w/2)}),0<b.rounding&&1==b.roundout&&css(P,{"border-radius":b.rounding*b.h/2,height:b.h,overflow:"hidden","pointer-events":"none"}),exist2(b.dom)&&attr(_,{id:v.id+"_control_"+b.dom}),_.appendChild(P),"line"==e&&1==v.thumbs&&(o.thumb=createElement("div"),css(o.thumb,{position:"absolute",left:0,top:0,width:v.thumb_width,height:v.thumb_height,overflow:"hidden","pointer-events":"none","background-color":"#000","border-radius":v.thumb_radius+"px",display:"none"}),o.thumb.id="pjs_thumbnail_"+v.id,1==v.thumb_border&&css(o.thumb,{border:v.thumb_borderwidth+"px solid "+SettingsParser("color",v.thumb_bordercolor)}),1==v.thumb_shadow&&css(o.thumb,{"box-shadow":"0px 1px 5px rgba(0,0,0,0.5)"}),o.thumb.style.zIndex="999",_.appendChild(o.thumb)),1==b.tip&&(h=createElement("div"),css(h,{position:"absolute",left:0,top:0,height:"auto","pointer-events":"none",opacity:0,transition:"opacity 0.1s linear"}),b=MarginPadding(b,"tippadding","tippadding"),f=createElement("div"),css(f,{position:"absolute","padding-left":b.tippaddingleft,"padding-right":b.tippaddingright,"padding-top":b.tippaddingtop,"padding-bottom":b.tippaddingbottom-1,"text-align":"center",color:b.tipcolor,"font-family":checkFont(b.tipfont),"font-size":b.tipfontsize*existv(v.globalfs,1),"letter-spacing":b.tipletterspacing+"px","line-height":"1","background-color":hex2rgb(b.tipbgcolor,b.tipbga),"border-radius":b.tipbgrounding}),b.linetippointer&&(b.tippointer=b.linetippointer),1==b.tippointer&&((p=createElement("div")).innerHTML='<svg width="8px" height="6px" viewBox="0 0 8 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polygon id="Rectangle" stroke="none" fill="'+CheckColor(b.tipbgcolor)+'" fill-rule="evenodd" points="0 0 8 0 4 6"></polygon></svg>'),_.appendChild(h),h.appendChild(f),1==b.tippointer&&(h.appendChild(p),css(p,{opacity:b.tipbga})),h.style.zIndex="1000");var R=createElement("div");if(H(0,R,0,1==b.gradient?"linear-gradient("+(1==b.grdlft?"to left,":"")+CheckColor(b.gradientcolorbg)+", "+CheckColor(b.colorbg)+")":CheckColor(b.colorbg),b.w,b.abg),1==b.customdesign&&exist(b.customdesignsvg)){var I=createElement("div");I.innerHTML=b.customdesignsvg.replace(/\#FFFFFF/g,CheckColor(b.colorbg)),R.appendChild(I),css(I,{position:"absolute",bottom:-Math.round(b.h/2),left:0,"pointer-events":"none"}),css(R,{overflow:"hidden",background:"none"});for(var A=["path","polygon","polyline","rect","ellipse"],L=0;L<A.length;L++)if(0<(W=I.querySelectorAll("svg "+A[L])).length)for(var C=0;C<W.length;C++)W[C].style.fill=CheckColor(b.colorbg)}P.appendChild(R);var M,D=createElement("div");H(1,D,b.linespeed1,1==b.gradient?"linear-gradient("+(1==b.grdlft?"to left,":"")+CheckColor(b.gradientcolorload)+", "+CheckColor(b.colorload)+")":b.colorload,0,b.aload),P.appendChild(D),0<b.aover&&(H(2,M=createElement("div"),b.linespeed2,b.colorover,0,b.aover),P.appendChild(M));var O,F,N,U,z=createElement("div");if(H(3,z,b.linespeed3,1==b.gradient?"linear-gradient("+(1==b.grdlft?"to left,":"")+CheckColor(b.gradientcolor)+", "+CheckColor(b.color)+")":b.color,0,b.a),1==b.customdesign&&exist(b.customdesignsvg)&&((U=createElement("div")).innerHTML=b.customdesignsvg.replace(/\#FFFFFF/g,CheckColor(b.color)),css(U,{position:"absolute",bottom:-Math.round(b.h/2),left:0,"pointer-events":"none"}),css(z,{overflow:"hidden",background:"none"}),z.appendChild(U)),1==b.value&&(O=createElement("div"),b=MarginPadding(b,"valuepadding","valuepadding"),b=MarginPadding(b,"valuemargin","valuemargin"),css(O,{position:"absolute",bottom:b.h/2,left:0,"pointer-events":"none","font-size":b.valuesize*existv(v.globalfs,1),color:b.valuecolor,"line-height":"100%","padding-top":b.valuepaddingtop,"padding-bottom":b.valuepaddingbottom,"padding-left":b.valuepaddingleft,"padding-right":b.valuepaddingright,"margin-top":b.valuemargintop,"margin-bottom":b.valuemarginbottom,"margin-left":b.valuemarginleft,"margin-right":b.valuemarginright,"border-radius":b.valuerounding+"px",display:"none"}),1==b.valuebg&&css(O,{background:CheckColor(b.valuebgcolor)}),z.appendChild(O),F=!1),o.timeline_h=b.h,P.appendChild(z),1==b.pointed&&"undefined"!=typeof PluginPoints&&(N=new PluginPoints(_,[],s,b)),1==b.handle){if(-1==b.handleicon.toString().indexOf("<svg")&&""==b.handleicon&&(b.handleicon="<svg width='20' height='20'><g><ellipse ry='5' rx='5' cy='10' cx='10' fill='#fff'/></g></svg>"),(d=createElement("div")).innerHTML=b.handleicon.toString(),b=MarginPadding(b,"handlemargin","handlemargin"),css(d,{position:"absolute",top:-10+b.handlemargintop-b.handlemarginbottom,left:-1e3,"pointer-events":"none",height:20,width:b.handle_width,opacity:b.handlea,transition:"transform 0.1s linear, opacity 0.1s linear"}),1==b.handlehide||1==b.handlehideinit?css(d,{transform:"scale(0)"}):1!=b.handlescale&&css(d,{transform:"scale("+b.handlescale+")"}),_.appendChild(d),-1!=b.handlecolor){var W;for(A=["path","rect","ellipse"],L=0;L<A.length;L++)if(0<(W=d.querySelectorAll("svg "+A[L])).length)for(C=0;C<W.length;C++)W[C].style.fill=CheckColor(b.handlecolor)}b.handlewidth=d.offsetWidth}function H(t,e,i,s,o,r){css(e,{position:"absolute",bottom:0,left:0,width:o,height:0<b["h"+t]?b["h"+t]:b.h,background:s?-1<s.indexOf("linear")?s:CheckColor(s):"","border-radius":1==b.roundout?1:b.rounding*b.h/2,opacity:r,"pointer-events":"none",transition:"transform 0.2s ease-in-out"})}function V(t){1==b.handle&&(t<b.handlewidth/2&&20!=b.handle_width&&(t=b.handlewidth/2),t>s-b.handlewidth/2&&20!=b.handle_width&&(t=s-b.handlewidth/2),t=t-s/2-b.handlewidth/2+b.handlemarginleft-b.handlemarginright,css(d,{left:t}))}function B(){css(d,{transform:"scale("+b.handlescale+")"})}function j(i){o.controls.Mouse(t,"over"),1==b.bg&&(-1!=b.bgaover&&new Motion({mc:r,type:"alpha_div",to:b.bgaover,time:.1,me:t+"bg"}),exist2(b.bgcolorover)&&css(r,{"background-color":b.bgcolorover})),exist2(b.coloroverplay)&&css(z,{"background-color":b.coloroverplay}),1==b.handle&&(1==b.handleiconsover&&exist(b.handleiconover)&&(1==b.handleiconspress&&l||(d.innerHTML="<svg width='"+b.handle_width+"' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>"+b.handleiconover.toString()+"</svg>")),1==b.handlehide?1==b.handlehideinit&&!o.start||B():-1!=b.handleaover&&new Motion({mc:d,type:"alpha_div",to:b.handleaover,time:.1,me:t+"handle"})),1==b.tip&&(0<o.media.duration()||"volume"==e||k)&&et(),0<b.expand&&(css(r,{transform:"scaleY("+((b.expand-1)/5+1)+")"}),G(b.expand)),1==b.handle&&1==b.handlemove&&V(Z(i.clientX)-E),"volume"==e&&(o.actions.volumewheel(!0),o.volumewheel=!0),m=!0,o.controlover=!0}function G(t){css(R,{transform:"scaleY("+t+")"}),css(D,{transform:"scaleY("+t+")"}),M&&css(M,{transform:"scaleY("+t+")"}),css(z,{transform:"scaleY("+t+")"})}function Q(){c||(0<b.aover&&css(M,{width:0}),exist2(b.coloroverplay)&&css(z,{"background-color":b.color}),1==b.bg&&(-1!=b.bgaover&&new Motion({mc:r,type:"alpha_div",to:b.bga,time:.1,me:t+"bg"}),exist2(b.bgcolorover)&&css(r,{"background-color":b.bgcolor})),1==b.handle&&(1==b.handleiconsover&&exist(b.handleiconover)&&(1==b.handleiconspress&&l||(d.innerHTML="<svg width='"+b.handle_width+"' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>"+b.handleicon.toString()+"</svg>")),1==b.handlehide?css(d,{transform:"scale(0)"}):-1!=b.handleaover&&new Motion({mc:d,type:"alpha_div",to:b.handlea,time:.1,me:t+"handle"})),0<b.expand&&(css(r,{transform:"scaleY(1)"}),G(1)),"volume"!=e||o.fullscreen||(o.actions.volumewheel(!1),o.volumewheel=!1),o.controls.Mouse(t,"out")),1==b.pointed&&N&&N.out(),1==b.tip&&(0<o.media.duration()||"volume"==e)&&it(),o.thumbs_on&&"line"==e&&(o.th.hide(),o.current_thumb=-1),m=!1,o.controlover=!1}function X(t){t.cancelBubble=!0}function q(i){"volume"==e&&o.hidden_volume_over&&(c=!0,clearTimeout(y),y=setTimeout((function(){c=!1,Q()}),1e3)),J(),o.mouseDown=!1,1==b.handle&&1==b.handleiconspress&&exist(b.handleiconpress)&&(d.innerHTML="<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>"+b.handleicon.toString()+"</svg>"),Y(i.clientX,i.clientY),o.controls.ControlClick(t),o.controls.StageMouseUp(i.clientX,i.clientY),i.cancelBubble=!0}function K(t){l=!0,1==b.handle&&1==b.handleiconspress&&exist(b.handleiconpress)&&(d.innerHTML="<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>"+b.handleiconpress.toString()+"</svg>"),x=findTop(r),E=findLeft(r),Y(t.clientX,t.clientY),st(u,1,"no")}function Y(t,e){var i;t=Z(t),e=Z(e);var r=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),n=Math.max(document.documentElement.scrollTop,document.body.scrollTop);o.system.mobile||(e+=n,t+=r),0<b.vertical?(i=e-x-b.bgpaddingright,u=i/s,270==b.vertical&&(i=e-x-b.bgpaddingleft,u=-1*((u=i/s)-1))):(i=t-E-b.bgpaddingleft,u=i/s,134<b.rotation&&b.rotation<235&&(i=t-E-b.bgpaddingright,u=-1*((u=i/s)-1))),1<u&&(u=1),u<0&&(u=0)}function Z(t){return 1<o.fzoom&&(t/=o.fzoom),t}function J(){l=!1}function $(t){var i,n;E=findLeft(r),0<b.aover&&(!o.start&&"line"==e||css(M,{width:Z(t.clientX)-E})),1==b.tip&&(0<o.media.duration()||"volume"==e||k)&&(et(),x=findTop(r),Y(t.clientX,t.clientY),"line"==e&&(1==v.hlsdvrtime?o.media.isLive()&&0<o.media.currentFile().indexOf("?DVR")?f.innerHTML="- "+timeFormat((1-u)*o.media.duration(!0)):f.innerHTML=timeFormat(u*o.media.duration()):(n=o.media.duration(),0<v.delete&&(n-=+v.delete),i="",1==b.pointed&&N&&""!=(i=N.tip(u*n))&&(i+="<br>"),f.innerHTML=i+timeFormat(u*n))),"volume"!=e&&!k||(f.innerHTML=ot(u)),tt(t)),o.thumbs_on&&"line"==e&&o.th&&0<o.media.duration()&&(0==b.tip&&(x=findTop(r),E=findLeft(r),Y(t.clientX,t.clientY)),(n=-s/2+(Z(t.clientX)-E)-v.thumb_width/2)>s/2-v.thumb_width&&(n=s/2-v.thumb_width),css(o.thumb,{top:-v.thumb_height-(0<v.thumb_bottom?+v.thumb_bottom:5)-v.thumb_border,left:n<-s/2?-s/2:n}),o.th.time(u*o.media.duration(),Z(t.clientX),E,s)),1==b.handle&&1==b.handlemove&&V(Z(t.clientX)-E),o.system.mobile&&K(t)}function tt(t,e,i){t=-s/2+(Z(t.clientX)+document.documentElement.scrollLeft-E)-f.offsetWidth/2+(i||0),i=0,1!=v.notofh&&(t+s/2+f.offsetWidth+10>o.screen_w&&(i=t,t=o.screen_w-s/2-f.offsetWidth-10),t+o.screen_w/2<0&&(i=t,t=-o.screen_w/2)),e={top:-f.offsetHeight-+b.linetipmarginbottom-b.tippaddingtop-b.tippaddingbottom-(1==b.toptip?b.h/2*(0<b.expand?b.expand:1):0)+(e||0),left:t},css(h,e),1==b.tippointer&&css(p,{position:"absolute",left:f.offsetWidth/2-4+(0!=i?i-t:0),top:f.offsetHeight-6})}function et(){isVisible(h)&&0!=h.style.opacity||(show(h),css(h,{opacity:1}))}function it(){hide(h),css(h,{opacity:0})}function st(t,i,o){var r;t<0&&(t=0),0<v.delete&&1<i&&(i-=v.delete,t-=v.delete),1==b.handle&&1==b.handlehideinit&&1!=b.handlehide&&!b.handleinit&&0<t&&(B(),b.handleinit=!0),l&&1!=i||(0<i&&0<t?(i<t&&(t=i),(r=s*(t/i))==z.offsetWidth&&(r=-1)):r=0,0<=r&&(css(z,{width:r}),1==b.handlemove&&m&&!o||V(r)),exist(O)&&(i<2&&"line"==e?F&&(hide2(O),F=!1):(F||(show2(O),F=!0),O.innerHTML="line"==e?Time(0==t?i:t):ot(t))))}function ot(t){var e=Math.round(100*t);if(k){if(o.line_speed)return(k&&exist2(b.tiptext)?b.tiptext+"&nbsp;":"")+parseFloat(t*o.files_speed.slice(-1)[0]).toFixed(1);if(o.line_volume2)return(k&&exist2(b.tiptext)?b.tiptext+"&nbsp;":"")+o.volume2}return e}0!=b.rotation&&css(_,{transform:"rotate("+b.rotation+"deg)"}),1==b.hidden&&(hide(_),T=!1),"volume"!=e||k||(1==b.hide&&1==b.hideoutmute?(o.hidden_volume=!0,b.hidden=!0):o.hidden_volume=!1),(b.vertical=0)!=b.rotation&&(b.rotation2=Math.abs(b.rotation),45<b.rotation2&&b.rotation2<135&&(b.vertical=90),225<b.rotation2&&b.rotation2<315&&(b.vertical=270)),k&&(b.customline&&(o["line_"+b.customline]=b.customline),s=b.w,"speed"==b.customline&&st(1,o.files_speed.slice(-1)[0],"no"),"volume2"==b.customline&&(U=v.volume,!v.pip||v.pip.volume&&(U=v.pip.volume),st(U,1,"no"))),this.PlacePoints=function(){N&&N.place(s)},this.RenewPoints=function(){N&&N.update(s)},this.ShowTip=function(t,e,i,s){et(),f.innerHTML=e,tt(t,i,s)},this.HideTip=function(){it()},this.c=function(){return _},this.s=function(t){return b[t]},this.ss=function(t,e){return b[t][e]},this.g=function(i){switch(i){case"width":return s;case"offsetwidth":return R.offsetWidth;case"height":return b.h;case"x":return int(_.style.left);case"y":return int(_.style.top);case"opacity":return _.style.opacity||1;case"show":return T;case"scaleX":return S;case"scaleY":return w;case"action":return e;case"key":return t;case"x0":return n;case"y0":return a;case"click":return u;case"cul":return k;default:return!1}},this.set=function(t,i){switch(t){case"show":T=i;break;case"mouseDown":l=i;break;case"display":"line"==e||1==b.hide?css(_,{visibility:i?"visible":"hidden"}):css(_,{display:i?"block":"none"}),T=i;break;case"scaleX":css(_,{transform:"scaleX("+i+")"}),S=i;break;case"scaleY":css(_,{transform:"scaleY("+i+")"}),w=i;break;case"opacity":css(_,{opacity:i});break;case"left":case"x":css(_,{left:i});break;case"top":case"y":css(_,{top:i});break;case"click":u=i;break;case"hiddenwidth":b.hiddenwidth=i;break;case"width":css(_,{width:i});break;case"height":css(_,{height:i});break;case"over_final":b.roundingver_final=i;break;case"x0":n=i;break;case"y0":a=i}},this.Resize=function(t){!function(t){var i;t!=s&&(s=t,i=(o.timeline_w=s)/R.offsetWidth,css(r,{width:s+b.bgpaddingleft+b.bgpaddingright,left:-s/2-b.bgpaddingleft}),css(P,{left:-s/2}),css(R,{width:s}),css(P,{width:s}),(t=D.offsetWidth*i)>R.offsetWidth&&(t=R.offsetWidth),css(D,{width:t}),i=z.offsetWidth*i,css(z,{width:i}),V(i),"line"==e&&(!o.continue||1!=v.timestore||o.start||(i=o.continue.flag()).t&&i.d&&st(i.t,i.d)),1==b.pointed&&N&&N.place(s),o.cut&&o.cut.Resize())}(t)},this.StageLeave=function(t){},this.StageMove=function(i,s){l&&("volume"!=e&&!k||(Y(i,s),o.controls.ControlClick(t)),"volume"==e&&(o.hidden_volume_over=!0),Y(i,s),st(u,1,"no"))},this.StageMouseUp=function(e,i){l&&(J(),l=!1,Y(e,i),o.controls.ControlClick(t),st(u,1,"no"))},this.UpdatePlay=function(t,e,i){null==e&&null==t&&!i||st(t,e,i)},this.UpdatePlaySeek=function(){1<u&&(u=1),u<0&&(u=0),css(z,{width:u*s})},this.UpdateLoad=function(t,e){var i;0<e&&0<t?(s<(i=s*(t/e))&&(i=s),css(D,{width:int(i)})):css(D,{width:0})},this.Cut=function(t){1==b.cut&&(o.cut?exist(t)&&0!=t||!o.cutted?(!o.cutted||exist(t)&&1!=t&&0!=t)&&(o.cut.restart(t),o.cutted=!0):(o.cut.hide(),o.cutted=!1):0!=t&&"undefined"!=typeof PluginCut&&(o.cut=new PluginCut(_,b,t),o.cutted=!0))},this.Remove=function(){_.removeChild(P),r&&(r.removeAttribute("onclick"),r.removeAttribute("onmouseover"),r.removeAttribute("onmouseout"),r.parentNode.removeChild(r),r=null),d&&_.removeChild(d),_.parentNode==o.frame?o.frame.removeChild(_):o.toolbar&&_.parentNode==o.toolbar&&o.toolbar.removeChild(_),_=null}},ControlsBg=function(){var t,e,i=[],s=!0,r=1,n=1,a=0,l=0,c=random(1e5,2e5);for(e in i.position=v.toolbar.position,v.toolbar)v.toolbar.hasOwnProperty(e)&&(i[e]=v.toolbar[e]);0==i.show&&(v.toolbar.h=i.h=0,i.padding=i.margin="0 0 0 0",i.gradient=0),i.scale=1,i=MarginPadding(i,"margin","margin"),exist(i.paddingtop)&&20!=i.paddingtop&&"-20 0 0 0"==i.margin&&(i.margintop=i.paddingtop),exist2(i.mrgnsmll)&&o.small&&(i=MarginPadding(i,"margin","mrgnsmll")),1==i.mrgnp&&(i.marginleft+="%",i.marginright+="%");var u=createElement("div");1==i.blur&&0==i.gradient?(i.blra=i.a,v.toolbar.a=i.a=1):i.blur=0,css(u,{position:"absolute",left:0,top:0,width:1==i.stretchonfullscreen?"100%":o.normal_w,opacity:i.a,"pointer-events":"none",fontSize:"14px",lineHeight:"1em"}),o.frame.appendChild(u);var d,h=createElement("div");css(h,{height:i.h-("top"!=i.position?i.marginbottom+i.margintop:0),display:"block","margin-left":i.marginleft,"margin-right":i.marginright,"border-radius":i.rounding}),0<i.brd&&css(h,{border:"1px solid rgba(255,255,255,"+i.brd+")"}),u.appendChild(h),t=u.offsetWidth,v.toolbar_margintop=-i.margintop,1==i.gradient?"000000"==i.color||""!=v.toolbar.image?("top"!=i.position&&(v.toolbar_margintop=98-i.h),d="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==",-1<v.toolbar.image.indexOf("data:image")&&(d=v.toolbar.image),css(h,{height:i.h+("top"!=i.position?v.toolbar_margintop:0),background:"url("+d+") repeat-x 50% 100%","background-size":"auto"})):(d="to bottom, "+hex2rgb(i.color,0)+", "+hex2rgb(i.color,1),css(h,{background:"linear-gradient("+d+")"})):(1==i.blur&&(css(u,{"backdrop-filter":"blur(8px)"}),css(h,{opacity:i.blra})),css(h,{"background-color":i.color})),this.h=function(){return i.h-("top"!=i.position?i.margintop:0)},this.c=function(){return u},this.s=function(t){return i[t]},this.g=function(e){if(!u)return!1;switch(e){case"w":return 0<u.offsetWidth&&(t=u.offsetWidth),t;case"width":return u.offsetWidth;case"height":return u.offsetHeight;case"x":return int(u.style.left);case"y":return int(u.style.top);case"opacity":return u.style.opacity||1;case"show":return s;case"scaleX":return r;case"scaleY":return n;case"key":return"bg";case"x0":return a;case"y0":return l;case"motion_id":return"bg"+c;default:return!1}},this.set=function(e,i){switch(e){case"show":s=i;break;case"w":t=i;break;case"display":css(u,{display:i&&1!=v.nocontrols?"block":"none"}),s=i;break;case"scale":css(u,{transform:"scale("+i+")"}),n=r=i;break;case"scaleX":css(u,{transform:"scaleX("+i+")"}),r=i;break;case"scaleY":css(u,{transform:"scaleY("+i+")"}),n=i;break;case"opacity":css(u,{opacity:i});break;case"left":case"x":css(u,{left:i});break;case"top":case"y":css(u,{top:i});break;case"width":css(u,{width:i});break;case"height":css(u,{height:i});break;case"x0":a=i;break;case"y0":l=i}},this.Remove=function(){o.frame.removeChild(u),u=null}};function VisibleCheck(){exist(options.id)&&document.getElementById(options.id)&&(isHidden(document.getElementById(options.id))&&1!=options.visible?setTimeout(VisibleCheck,50):1==options.fast?setTimeout(Init,50):Init())}function Init(){for(var t=0;t<pljssglobal.length;t++)exist(pljssglobal[t])&&(pljssglobal[t].api("id")==options.id?pljssglobal[t].api("playing")&&pljssglobal[t].api("stop"):1==v.unatpl&&1==pljssglobal[t].api("v","autoplay")&&(options.autoplay=0));pljssglobal.push(o.this);var e=!1;if(exist(options.player))for(t=2;t<10;t++)options.player==t&&""!=o["u"+t]&&(v=UpdateObject(v,JSON.parse(decode(o["u"+t]))),e=!0);if(""==o.u||e||(v=UpdateObject(v,"object"!=typeof o.u?JSON.parse(decode(o.u)):o.u)),v.control_forward={on:1,order:8,order0:8,copy:1,link:1,action:"custom",icon:"<svg width='18' height='18'> <g fill='ffffff'><path d='M19.6916 7.34849C19.4416 7.01849 18.9716 6.94849 18.6416 7.19849C18.3116 7.44849 18.2416 7.91849 18.4916 8.24849C19.5716 9.68849 20.1416 11.3685 20.1416 13.1085C20.1416 17.5985 16.4916 21.2485 12.0016 21.2485C7.51156 21.2485 3.86156 17.5985 3.86156 13.1085C3.86156 8.61849 7.51156 4.97849 12.0016 4.97849C12.5816 4.97849 13.1716 5.04849 13.8116 5.19849C13.8416 5.20849 13.8716 5.19849 13.9116 5.19849C13.9316 5.19849 13.9616 5.21849 13.9816 5.21849C14.0116 5.21849 14.0316 5.20849 14.0616 5.20849C14.1016 5.20849 14.1316 5.19849 14.1616 5.18849C14.2116 5.17849 14.2616 5.15849 14.3116 5.12849C14.3416 5.10849 14.3816 5.09849 14.4116 5.07849C14.4216 5.06849 14.4416 5.06849 14.4516 5.05849C14.4816 5.03849 14.4916 5.00849 14.5116 4.98849C14.5516 4.94849 14.5816 4.91849 14.6116 4.86849C14.6416 4.82849 14.6516 4.77849 14.6716 4.73849C14.6816 4.70849 14.7016 4.67849 14.7116 4.64849C14.7116 4.62849 14.7116 4.61849 14.7116 4.59849C14.7216 4.54849 14.7216 4.49849 14.7116 4.44849C14.7116 4.39849 14.7116 4.35849 14.7016 4.30849C14.6916 4.26849 14.6716 4.22849 14.6516 4.17849C14.6316 4.12849 14.6116 4.07849 14.5816 4.03849C14.5716 4.01849 14.5716 4.00849 14.5616 3.99849L12.5816 1.52849C12.3216 1.20849 11.8516 1.15849 11.5316 1.40849C11.2116 1.66849 11.1616 2.13849 11.4116 2.45849L12.2316 3.47849C12.1516 3.47849 12.0716 3.46849 11.9916 3.46849C6.68156 3.46849 2.35156 7.78849 2.35156 13.1085C2.35156 18.4285 6.67156 22.7485 11.9916 22.7485C17.3116 22.7485 21.6316 18.4285 21.6316 13.1085C21.6416 11.0385 20.9616 9.04849 19.6916 7.34849Z' fill='#ffffff'/> <path d='M9.5415 16.6708C9.1315 16.6708 8.7915 16.3308 8.7915 15.9208V12.5308L8.6015 12.7508C8.3215 13.0608 7.8515 13.0808 7.5415 12.8108C7.2315 12.5308 7.2115 12.0608 7.4815 11.7508L8.9815 10.0808C9.1915 9.85081 9.5215 9.77081 9.8115 9.88081C10.1015 9.99081 10.2915 10.2708 10.2915 10.5808V15.9308C10.2915 16.3408 9.9615 16.6708 9.5415 16.6708Z' fill='#ffffff'/> <path d='M14 16.6703C12.48 16.6703 11.25 15.4403 11.25 13.9203V12.5703C11.25 11.0503 12.48 9.82031 14 9.82031C15.52 9.82031 16.75 11.0503 16.75 12.5703V13.9203C16.75 15.4403 15.52 16.6703 14 16.6703ZM14 11.3303C13.31 11.3303 12.75 11.8903 12.75 12.5803V13.9303C12.75 14.6203 13.31 15.1803 14 15.1803C14.69 15.1803 15.25 14.6203 15.25 13.9303V12.5803C15.25 11.8903 14.69 11.3303 14 11.3303Z' fill='#ffffff'/></g> </svg>",type:"svg",position:"controls-left",margin:"0 0 6 20",scale:"1",linkurl:"api:seek,+10",scaleover:"1",marginproc:"0 0 0 4",hide:1,hideonleaveandplay:1},v.control_rewind={on:1,order:7,order0:7,copy:1,link:1,action:"custom",icon:"<svg width='20' height='20'><g fill='#ffffff'> <path d='M9.5415 16.6708C9.1315 16.6708 8.7915 16.3308 8.7915 15.9208V12.5308L8.6015 12.7508C8.3215 13.0608 7.8515 13.0808 7.5415 12.8108C7.2315 12.5308 7.2115 12.0608 7.4815 11.7508L8.9815 10.0808C9.1915 9.85081 9.5215 9.77081 9.8115 9.88081C10.1015 9.99081 10.2915 10.2708 10.2915 10.5808V15.9308C10.2915 16.3408 9.9615 16.6708 9.5415 16.6708Z' fill='#ffffff'/> <path d='M12.0011 3.47974C11.9211 3.47974 11.8411 3.48974 11.7611 3.48974L12.5811 2.46974C12.8411 2.14974 12.7911 1.66974 12.4611 1.41974C12.1411 1.15974 11.6711 1.20974 11.4111 1.53974L9.44109 3.99974C9.43109 4.00974 9.43109 4.01974 9.42109 4.03974C9.39109 4.07974 9.37109 4.12974 9.35109 4.16974C9.33109 4.21974 9.31109 4.25974 9.30109 4.29974C9.29109 4.34974 9.29109 4.38974 9.29109 4.43974C9.29109 4.48974 9.29109 4.53974 9.29109 4.58974C9.29109 4.60974 9.29109 4.61974 9.29109 4.63974C9.30109 4.66974 9.32109 4.68974 9.33109 4.72974C9.35109 4.77974 9.36109 4.81974 9.39109 4.85974C9.42109 4.89974 9.45109 4.93974 9.49109 4.97974C9.51109 4.99974 9.53109 5.02974 9.55109 5.04974C9.56109 5.05974 9.58109 5.05974 9.59109 5.06974C9.62109 5.08974 9.65109 5.10974 9.69109 5.11974C9.74109 5.14974 9.79109 5.16974 9.84109 5.17974C9.88109 5.19974 9.91109 5.19974 9.95109 5.19974C9.98109 5.19974 10.0011 5.20974 10.0311 5.20974C10.0511 5.20974 10.0811 5.19974 10.1011 5.18974C10.1311 5.18974 10.1611 5.18974 10.2011 5.18974C10.8411 5.03974 11.4411 4.96974 12.0111 4.96974C16.5011 4.96974 20.1511 8.61974 20.1511 13.1097C20.1511 17.5997 16.5011 21.2497 12.0111 21.2497C7.52109 21.2497 3.87109 17.5997 3.87109 13.1097C3.87109 11.3697 4.44109 9.68974 5.52109 8.24974C5.77109 7.91974 5.70109 7.44974 5.37109 7.19974C5.04109 6.94974 4.57109 7.01974 4.32109 7.34974C3.04109 9.04974 2.37109 11.0397 2.37109 13.1097C2.37109 18.4197 6.69109 22.7497 12.0111 22.7497C17.3311 22.7497 21.6511 18.4297 21.6511 13.1097C21.6511 7.78974 17.3111 3.47974 12.0011 3.47974Z' fill='#ffffff'/> <path d='M14 16.6703C12.48 16.6703 11.25 15.4403 11.25 13.9203V12.5703C11.25 11.0503 12.48 9.82031 14 9.82031C15.52 9.82031 16.75 11.0503 16.75 12.5703V13.9203C16.75 15.4403 15.52 16.6703 14 16.6703ZM14 11.3303C13.31 11.3303 12.75 11.8903 12.75 12.5803V13.9303C12.75 14.6203 13.31 15.1803 14 15.1803C14.69 15.1803 15.25 14.6203 15.25 13.9303V12.5803C15.25 11.8903 14.69 11.3303 14 11.3303Z' fill='#ffffff'/></g> </svg>",type:"svg",position:"controls-left",margin:"0 0 6 20",scale:"1",linkurl:"api:seek,-10",scaleover:"1",marginproc:"0 0 0 3",hide:1,hideonleaveandplay:1},delete v.control_live,"function"!=typeof pljscom)for(var i in options)options.hasOwnProperty(i)&&0==i.indexOf("rc_")&&(options[i]=null);v=UpdateObject(v,options),o.container=document.getElementById(v.id),1==v.observer&&1==v.viewinit&&"function"==typeof InitVisible?(Visibility(o.container,"intvsbl"),InitVisible()||window.document.addEventListener("scroll",InitVisible)):Init2()}function Init2(){var pstr=v.poster;if(1==v.pstrcnfg&&exist(v.poster)&&exist(pstr)&&""!=v.poster&&(v.poster=pstr),exist(v.file)&&""!=v.file||1!=v.emptyremove){for(var key in 1!=v.postmessage&&1!=v.pjsframed||window.addEventListener("message",(function(t){var e,i=void 0;exist(t.data.time)&&(i=t.data.time),exist(t.data.volume)&&(i=t.data.volume),exist(t.data.method)&&(e=t.data.method),exist(t.data.api)&&(e=t.data.api),e&&v.postmessages&&""!=v.postmessages&&-1==v.postmessages.replace(/\s+/gi,"").split(",").indexOf(e)||(1==v.pjsframed&&"function"==typeof PjsFrMsg&&PjsFrMsg(t),e&&o.init&&(exist(t.data.set)&&(i=t.data.set),i=apiProcessor(e,i),window.parent.postMessage({event:e,answer:i},"*")))})),o.compilation)o.compilation.hasOwnProperty(key)&&""!=o.compilation[key]&&(o.compilations+=o.compilation[key]+" ");if(log(o.version+" "+o.compilations),pljssglobalid=v.id,o.d=location.hostname,o.hs=location.hash,!v.plstart&&indOf([o.hs],"#play-")&&(v.plstart=o.hs.substr(o.hs.indexOf("#play-")+6)),parent){var exception=!1;try{if(parent)if(parent.document)for(var frames=parent.document.getElementsByTagName("IFRAME"),i=0;i<frames.length;i++)frames[i].contentWindow===window&&(o.parentIframe=frames[i],o.iniframe=!0,1!=v.notframe&&css(o.parentIframe,{border:"none"}),o.parentIframe_style=o.parentIframe.style,log("iframe"));else exception=!0}catch(t){exception=!0}exception&&(o.iniframe=!0,log("Cross-domain"))}if(o.iniframe&&document.referrer&&(o.domain=document.referrer.split("/")[2]),o.prted||prtObj(),"function"!=typeof PjsFr||!PjsFr()){o.init=!0,CustomFonts();var today=new Date,obsrvr,ioscss,tmp;if(20==today.getDate()&&10==random(1,20)&&0!=v.srvsga&&(Script(o.gaurl,o.gaurl),setTimeout((function(){window.ga&&(ga("create","UA-88484718-6","auto",{name:"pjs",allowLinker:!0}),ga("require","linker"),ga("linker:autoLink",[o.d]),ga("pjs.send","event",{eventCategory:"Player",eventAction:"Init",eventLabel:o.d}))}),3e3)),1==v.ga&&1!=v.ga4&&"function"==typeof PluginOldGA&&(o.ga=new PluginOldGA),!o.container)return v.log=1,void log('id "'+v.id+'" not found');if(o.container.innerHTML="",css(o.container,{padding:0,"word-spacing":"normal"}),o.container_h=o.container.offsetHeight,o.container_w=o.container.offsetWidth,exist(v.playersize)&&!exist(v.aspect)&&(exist(v.playersize.aspect)&&(v.aspect=v.playersize.aspect),exist(v.playersize.changeheight)&&(v.changeheight=v.playersize.changeheight)),-1<o.container.style.width.indexOf("%")&&(o.container_w_procent=o.container.style.width),("off"==v.aspect||-1<o.container.style.height.indexOf("%"))&&(v.aspect="%",o.container_h_procent=o.container.style.height,o.container_h=0),0==o.container_w&&(0<o.container.style.width.indexOf("px")?o.container_w=parseInt(o.container.style.width):0<o.container.parentNode.style.width.indexOf("px")?o.container_w=parseInt(o.container.parentNode.style.width):0<o.container.parentNode.parentNode.style.width.indexOf("px")&&(o.container_w=parseInt(o.container.parentNode.parentNode.style.width))),0<String(v.aspect).indexOf("x")?(o.aspect=v.aspect.split("x")[0]/v.aspect.split("x")[1],0==o.container_h&&(o.container_h=o.container_w/o.aspect)):o.aspect=0,css(o.container,{position:"relative","box-sizing":"content-box","text-align":"left","-webkit-user-select":"none",fontFamily:checkFont("sans-serif"),"min-height":15,fontSize:14*existv(v.globalfs,1),"line-height":"1em",direction:"ltr","color-scheme":"none"}),1==v.shadow&&css(o.container,{"box-shadow":" 0 15px 35px rgba(50,50,93,.1), 0 5px 15px rgba(0,0,0,.07)"}),0<o.aspect?css(o.container,{height:o.container_h}):css(o.container,{height:0==o.container_h?o.container_h_procent:o.container_h}),0==o.container_w&&css(o.container,{width:"100%"}),o.frame=createElement("div"),css(o.frame,{position:"absolute","box-sizing":"content-box",backgroundColor:v.screencolor,color:"#ffffff",width:"100%",height:"100%",left:0,top:0,fontSize:"14px","line-height":"1em"}),1!=v.notofh&&(o.frame.style.overflow="hidden"),1==v.transbg&&(o.frame.style.backgroundColor="transparent"),1==v.border&&css(o.container,{border:v.bordersize+"px solid "+v.bordercolor}),o.css=document.createElement("style"),o.css.type="text/css",o.frame.appendChild(o.css),o.frame.setAttribute("id","oframe"+v.id),datetime(1),window.MutationObserver&&(obsrvr=new MutationObserver((function(t){if(0<t[0].removedNodes.length)for(var e=0;e<t[0].removedNodes.length;e++)t[0].removedNodes[e]==o.frame&&Destroy()})),obsrvr.observe(o.container,{childList:!0})),o.frameresize=createElement("iframe"),attr(o.frameresize,{id:"pjsfrrs"+v.id,scrolling:"no",title:"pjsfrrs"+v.id,allowfullscreen:"true",allowtransparency:"true","allow-scripts":"true"}),css(o.frameresize,{position:"absolute",width:"100%",height:"100%",border:0,"pointer-events":"none"}),!document.querySelector(".pjscssed")){var tmp="";if(1==v.clrs)for(var i=1;i<4;i++)exist2(v["color"+i])&&(tmp+="--pjscolor"+i+":"+CheckColor(v["color"+i])+";");pushCSS("pjsdiv, pjsdiv > *{-webkit-backface-visibility: hidden;position: static;top: auto;left: auto;overflow:visible;direction:ltr!important;max-width:none!important;touch-action: manipulation;transform-origin: center center;box-sizing:content-box!important;-webkit-tap-highlight-color: rgba(0,0,0,0);-webkit-tap-highlight-color: transparent;text-indent:0!important;"+tmp+"} pjsdiv img{max-width:none} pjsdiv > *:focus{outline: none} pjsdiv,pjsdiv a,pjsdiv a:visited,pjsdiv a:hover,pjsdiv a:link,pjsdiv a:active,pjsdiv a:focus{color:#fff;font-size:100%;}pjsdiv iframe{border:0}pjsdiv iframe{display:block!important;max-height:none!important;background:transparent}.pjscssed{}"),o.frame.setAttribute("class","pjscssed")}o.frame.appendChild(o.frameresize),o.container.oncontextmenu=function(t){o.rightclick++,5==o.rightclick&&(v.log=1,log(o.version+" "+o.compilations+" "+o.playerid)),(t=t||window.event).cancelBubble=!0,t.stopPropagation&&t.stopPropagation();var e=t.pageX-findLeft(o.frame);t=t.pageY-findTop(o.frame);return 1==v.rc_custom&&exist(v.rc_label)&&""!=trim(v.rc_label)&&(o.brand=v.rc_label,exist(v.rc_labelurl)&&(o.brandurl=v.rc_labelurl),"none"==v.rc_label&&(o.brandurl=o.d)),RightMenu(e,t),!1},o.system=new System,o.system.ios&&(ioscss=1==v.hidestartbutios?"*::-webkit-media-controls-start-playback-button {display: none!important;-webkit-appearance: none;}":"",(1!=v.nativecontrolsmobile||1==v.nativenotios||1==v.nativenotiphone&&o.system.iphone||1==v.nativenotipad&&o.system.ipad)&&(o.system.ios&&1==v.nativefullios||(ioscss+="video::-webkit-media-controls {display:none !important;}*::-webkit-media-controls-panel {display: none!important;-webkit-appearance: none;}*::--webkit-media-controls-play-button {display: none!important;-webkit-appearance: none;}")),tmp=document.createElement("style"),tmp.type="text/css",tmp.appendChild(document.createTextNode(ioscss)),o.frame.appendChild(tmp)),o.system.mobiletv&&1==v.autoplay&&1==v.autoplaynomobiletv&&(v.autoplay=0),0==o.aspect&&15==o.frame.offsetHeight&&!o.container_h_procent&&0<v.playerheight&&css(o.container,{height:v.playerheight}),exist(v.autonext)&&(v.playlist.autoplaylist=v.autonext),exist(v.playlistloop)&&(v.playlist.playlistrewind=v.playlistloop),exist(v.start)&&(o.seekto=v.start),exist(window.requestAnimationFrame)&&1==v.rafinit?window.requestAnimationFrame(Ready):Ready()}}else log("remove");function RightMenu(t,e){if(-1==o.brandurl.indexOf(o.d)||1==v.rc_anyway||1==v.rightmenu){if(exist(o.rightmenu))show2(o.rightmenu);else{var i;v.rmbgcolor||(v.rmbgcolor="000000"),v.rmcolor||(v.rmcolor="ffffff"),o.rightmenu=createElement("div");for(var s,r=0,n=0;n<10;n++)if((1==v["rm"+n]&&1==v.rightmenu||9==n)&&(exist(v["rm"+n+"t"])&&exist(v["rm"+n+"a"])||9==n)){if(i=createElement("div2"),9==n){if(1==v.rc_nobrand)break;i.innerText=o.brand+(1==v.rc_version?" "+o.version:"")}else i.innerText=v["rm"+n+"t"];9!=n&&((-1<v["rm"+n+"a"].indexOf(",0/1")||-1<v["rm"+n+"a"].indexOf(",1/0"))&&(s=v["rm"+n+"a"].split(","),i.innerText+=" ("+(1==apiProcessor(s[0].substr(4))?Lang("on"):Lang("off"))+")"),0==v["rm"+n+"a"].indexOf("share")&&(o.shareme=!0,o.share||o.controls.CrShr())),i.setAttribute("i",n),RightCSS(i),i.addEventListener("click",RightClick),o.rightmenu.appendChild(i),r++}css(o.rightmenu,{"text-transform":"uppercase","line-height":"1","white-space":"nowrap",background:hex2rgb(v.rmbgcolor,.7)}),1<r&&css(o.rightmenu,{padding:"5px"}),o.rightmenu.style.zIndex="99999",o.rightmenu.onmousemove=RightMove,o.frame.appendChild(o.rightmenu)}css(o.rightmenu,{position:"absolute",top:e,left:t,"text-align":"left"});var a=!1;o.screen_w-t<o.rightmenu.offsetWidth-20&&1!=v.notofh&&(css(o.rightmenu,{left:t-o.rightmenu.offsetWidth}),a=!0),1!=v.rmright&&!a||css(o.rightmenu,{"text-align":"right"}),o.right_x=t,o.right_y=e,clearTimeout(o.rightout),o.rightout=setTimeout((function(){hide2(o.rightmenu)}),2e3)}}function RightMove(){clearTimeout(o.rightout),o.rightout=setTimeout((function(){hide2(o.rightmenu)}),2e3)}function RightClick(e){var i=e.target.getAttribute("i"),y,dont=!1,x,z,b,u;0<i&&(9==i?""!=o.brandurl&&window.open(o.brandurl):(x=v["rm"+i+"a"],x&&(0==x.indexOf("api:")&&(-1<x.indexOf(",0/1")||-1<x.indexOf(",1/0")?(z=x.split(","),b=o.controls.butByS(x,"linkurl"),u=apiProcessor(z[0].substr(4),z[1],b),js(z,u),reRightMenu(),RightMenu(o.right_x,o.right_y),dont=!0):(y=x.split(","),apiProcessor(y[0].substr(4),exist(y[1])?y[1]:null))),0==x.indexOf("share:")&&o.share&&o.share.api(x.substr(6)),0==x.indexOf("js:")&&(y=x.split(","),eval(y[0].substr(3)+"("+(exist(y[1])?'"'+y[1]+'"':"")+(exist(y[2])?',"'+y[2]+'"':"")+")")),0==x.indexOf("url:")&&(x=x.replace(/\(url\)/g,Href()),x=x.replace(/\(ref\)/g,encodeURIComponent(exist(v.parent_domain)?v.parent_domain:document.referrer)),x=x.replace(/\(title\)/g,o.titlestore),x=x.replace(/\(label\)/g,v.label),window.open(x.substr(4))))),dont||hide2(o.rightmenu))}function RightCSS(t){css(t,{padding:"4px 5px","font-size":(v.rmsize||"55")*existv(v.globalfs,1)+"%","letter-spacing":"0.15em",opacity:.9,color:v.rmcolor}),t.addEventListener("mouseover",RightOver),t.addEventListener("mouseout",RightOut)}function RightOver(t){css(t.target,{opacity:1}),css(t.target,{background:hex2rgb(v.rmbgcolor,.5)})}function RightOut(t){css(t.target,{opacity:.9}),css(t.target,{background:"none"})}}function Ready(){if(log("Ready"),o.actions=new Actions,v.file||(v.file="?"),v.pl&&(v.file=v.pl+o.pltxt),o.sessid=randomstr(),o.sesstime=0,o.storage=StorageSupport(),o.storage){null!=localStorage.getItem("pljsuserid")?o.userid=localStorage.getItem("pljsuserid"):(o.userid=randomstr(),localStorage.setItem("pljsuserid",o.userid)),1==v.qualitystore&&null!=localStorage.getItem("pljsquality")&&(o.default_quality=localStorage.getItem("pljsquality"),exist2(v.forbidden_quality)&&-1<v.forbidden_quality.indexOf(o.default_quality)&&(o.default_quality=null)),1==v.trackstore&&null!=localStorage.getItem("pljstrack")&&(v.default_audio=localStorage.getItem("pljstrack"));for(var i=0;i<o.vsts.length;i++)1==v["vast_nofirst"+o.vsts[i]]&&(null!=localStorage.getItem("pljsfirst"+o.vsts[i])||(v[o.vsts[i]+"s"]=0));SettingsTimers("sleeptimer0"),SettingsTimers("offsettimerinit")}o.href2=o.href.substr(o.href.indexOf("://")+3),0<o.href2.indexOf("#")&&(o.href2=o.href2.substr(0,o.href2.indexOf("#"))),o.storage&&1==v.timestore&&(o.continue=new TimeStore),1==v.observer&&(o.visibility=v.startvisibility,Visibility(o.container,"visibility",!0)),1==v.minify&&1==v.observer&&(o.minify=new PluginMini),1==v.ab&&PluginBlock(),1==v.quizes&&(o.quiz=new PluginQuiz,o.quiz.Start()),o.media=new Media(v.file),o.system.mobile&&1!=v.desktop||(o.frame.addEventListener("mouseenter",(function(){o.mouseHere=!0,o.mouseHere2=!0,o.controls&&o.controls.StageOver()})),o.frame.addEventListener("mouseleave",(function(t){o.mouseDown||(0<v.toolbar.hideleavetimeout?(clearTimeout(o.leavetimeout2),o.leavetimeout2=setTimeout((function(){o.mouseHere!=o.mouseHere2&&(o.mouseHere=o.mouseHere2,o.controls.Review())}),1e3*v.toolbar.hideleavetimeout)):o.mouseHere=!1,o.mouseHere2=!1,o.controls&&o.controls.StageLeave())}))),o.system.mobile||(o.frame.addEventListener("mousedown",(function(t){o.mouseDown=!0})),o.frame.addEventListener("mouseup",(function(t){o.mouseDown=!1,o.volumewheel||(o.hidden_volume_over=!1,o.hidden_volume_over_process=!1),o.system.touch&&o.system.desktop&&o.fullscreen&&setTimeout((function(){o.mouseHere=!1,o.controls.Review()}),500),setTimeout((function(){o.focus=!0}),500),o.system.mobile&&o.controls.ToolbarHidden()||o.controls&&o.controls.StageMouseUp(t.clientX,t.clientY),1==v.hidevideo&&o.controls.SettingsVisible()&&o.controls.Settings()})),o.frame.addEventListener("mousemove",(function(t){exist(o.controls)&&(o.mouseDown?o.controls.StageMove(t.clientX,t.clientY):o.controls.StageMove2())}))),o.system.mobile&&window.addEventListener("orientationchange",OrientationChange,!1),1==v.geo&&"function"==typeof PluginGeo&&(o.geo=new PluginGeo),o.mediacontainer.addEventListener("touchstart",(function(t){t.touches&&(o.tchs=t.touches.length),o.mouseDown=!0,o.mouseHere=!0,o.mouseMove=!1,Touch("start",t)}),{passive:!0}),o.mediacontainer.addEventListener("touchmove",(function(t){t.touches&&(o.tchs=t.touches.length,1<o.tchs&&(o.tchs2=1)),o.mouseDown&&(o.mouseMove=!0,Touch("move",t))}),{passive:!0}),o.mediacontainer.addEventListener("touchend",(function(t){o.mouseDown=!1,setTimeout((function(){o.mouseHere=!1}),500),1==v.click0timeout&&(new Date).getTime()-o.clicktime<1e3*(v.dclckto||.3)&&DoubleClick(t),!o.mouseMove&&o.tchs<2&&1!=o.tchs2&&ScreenClick(t),o.mouseMove=!1,(o.tchs=0)==t.touches.length&&(o.tchs=0,o.tchs2=0),Touch("end",t)}),{passive:!0});try{window.document.addEventListener("mouseup",(function(t){o.focus=!1,o.volumewheel||(o.hidden_volume_over=!1,o.hidden_volume_over_process=!1),o.mouseDown&&o.controls&&(o.mouseDown=!1,o.controls.StageMouseUp(t.clientX,t.clientY),o.controls.StageLeave()),o.mouseHere||o.system.mobile||o.system.tv||(o.controls.SettingsClose(),o.droplist&&o.droplist.Close(),o.controls.closePl())}))}catch(t){}function FSL(t,e){var i=["","moz","webkit","ms","MSFullscreenChange"];if(t)for(var s=0;s<i.length;s++)t.addEventListener(i[s]+(s<i.length-1?"fullscreenchange":""),e,!1)}if(window.document.addEventListener("mousemove",(function(t){o.controls&&o.mouseDown&&o.controls.StageMove(t.clientX,t.clientY)})),o.frame.addEventListener("touchstart",(function(t){o.touch=!0,o.mouseDown=!0}),{passive:!0}),o.frame.addEventListener("touchend",(function(t){o.touch=!1,o.mouseDown=!1}),{passive:!0}),window.document.addEventListener("touchmove",(function(t){o.controls&&o.touch&&o.controls.StageMove(t.touches[0].pageX,t.touches[0].pageY)}),{passive:!0}),window.document.addEventListener("keyup",(function(t){var e=t.target.tagName.toLowerCase();"input"==e||"textarea"==e||"pjsin"==e||o.controls&&o.controls.KeyUp(t)})),window.document.addEventListener("keydown",(function(t){var e=t.target.tagName.toLowerCase();"input"==e||"textarea"==e||"div"==e||"pjsin"==e||o.controls&&o.controls.KeyDown(t)})),o.parentIframe&&FSL(parent.document,ParentFS),FSL(document,FullscreenChange),exist(o.frameresize.contentWindow)){if(o.frameresize.contentWindow.addEventListener("resize",FrameResizer,!0),o.system.mobile||(o.mediacontainer.addEventListener("click",ScreenClick,!1),1==v.doubleclick&&1==v.click0timeout&&o.mediacontainer.addEventListener("dblclick",DoubleClick,!1)),MainUpdateSize(),v.chromecast&&1==v.chromecast.on&&(o.chromecast=new ChromeCast),1==v.effects&&(o.effects=new PluginEffects),1==v.mediatags&&(o.mediatags=new PluginMediaTags),o.controls=new Controls,v.control_title.templated&&(o.title_template=v.control_title.template),Title(),MainResize(),o.storage){var sp,spd;1!=v.volumestore||0==v.volume||o.system.mobile||(null!=localStorage.getItem("pljsvolume")&&(v.volume=localStorage.getItem("pljsvolume")),1==localStorage.getItem("pljsmute")&&1==v.mutestore&&(v.mute=1)),1==v.speedstore&&(sp=localStorage.getItem("pljsspeed"),exist(sp)&&(0<sp.indexOf(".")&&o.line_speed?o.actions.SetSpeed(sp,1):o.files_speed&&(spd=indOf(o.files_speed,sp,!0),-1!=spd&&o.controls.SettingsExist("speed")&&(o.current_speed=spd,o.media.SetSpeed(o.files_speed[spd])),o.controls.SettingsSpeed())));var substore=!1;if(1==v.sub_designstore)for(var j=0;j<o.sub_options.length;j++)null!=localStorage.getItem("pljs"+o.sub_options[j])&&(v[o.sub_options[j]]=localStorage.getItem("pljs"+o.sub_options[j]),substore=!0);o.system.mobile&&(substore||v.sub_bottommob&&-1<v.sub_bottommob&&(v.sub_bottom=v.sub_bottommob),exist(v.sub_sizemob)&&(v.sub_size=v.sub_sizemob,exist2(v.sub_sizemobfull)&&(v.sub_size_fullscreen=v.sub_sizemobfull)))}var f;o.continue&&(f=o.continue.flag(),f.t&&f.d&&(o.controls.Played(f.t,f.d),o.controls.Duration(f.t,f.d),v.duration=f.d)),o.actions.Volume(v.volume),1==v.mute&&(o.actions.Mute(),o.controls.refresh()),exist(v.default_speed)&&apiProcessor("speed",v.default_speed),o.alert=new Alert,0<v.rounding&&(1==v.hidevideo||o.normal_h<120?(css(o.container,{"border-radius":v.rounding+"px"}),css(o.frame,{"border-radius":v.rounding+"px"})):PluginRounding()),exist(v.midroll)&&str2obj("midroll"),exist(v.overlay)&&str2obj("overlay"),exist(o.playlist)&&js("playlist"),1==v.pass&&1==v.passonstart&&o.actions.Password();for(var i=2;i<10;i++)exist(v["design"+i])&&"mobile"==v["design"+i]&&o.system.mobile&&apiProcessor("design",i);setTimeout(FrameResizer,500,!0),setTimeout((function(){js("init"),v.ready&&("function"==typeof v.ready&&(v.ready=v.ready.name),eval(v.ready+(-1==v.ready.indexOf("()")?'("'+v.id+'")':"")))}),1)}else log("Local")}function ScreenClick(t){2<o.moving[o.mediacontainer]||(o.acted=!0,0==v.dclckto&&(v.click0timeout=1),o.click_t&&1==v.screenclick&&!o.system.tv?DoubleClick(t):(t=1e3*(v.dclckto||.35),ClearClick(),clearTimeout(o.click_t2),o.click_t2=setTimeout((function(){o.clicks=0}),200+t),1==v.click0timeout||0==v.doubleclick&&1!=v.hotkey.seeksides?ScreenClick2():o.click_t=setTimeout(ScreenClick2,t)),o.clicks++,JsClk())}function ScreenClick2(){if(ClearClick(),o.system.mobile){if(o.controls.ToolbarHidden()&&(o.controls.StageMove2(),o.muted&&1==v.unmuteonclick&&(o.actions.Unmute(),v.unmuteonclick=0),1!=v.mobtch1))return;if(o.nativefull){if(1==v.nativefulldroid&&1==v.nfscldr&&o.system.android)return;if(1==v.nativefullios&&1==v.nfsclios&&o.system.ios)return}}1<o.clicks&&1==v.hotkey.seeksides?o.clicks=0:(o.clicks=0,1==v.screenclick&&(o.system.mobile&&1==v.nombclck||o.actions.ScreenClick()))}function DoubleClick(t){ClearClick();var e,i=!1;1==v.hotkey.seeksides&&t&&(1==v.hotkey.seeksidesmob&&!o.system.mobile||(o.system.mobile?(e=t.layerX)||t.changedTouches&&(e=t.changedTouches[0].pageX-findLeft(o.frame)):e=t.offsetX,1<o.fzoom&&(e/=o.fzoom),e&&(e<o.screen_w/2?e<20*o.screen_w/100&&(apiProcessor("seek","-"+existv(v.hotkey.seeksidesec,10)*o.clicks),1==v.hotkey.icons&&1==v.hotkey.seekicon&&PluginHotIcon("seek",0),i=!0):e>o.screen_w-20*o.screen_w/100&&(apiProcessor("seek","+"+existv(v.hotkey.seeksidesec,10)*o.clicks),1==v.hotkey.icons&&1==v.hotkey.seekicon&&PluginHotIcon("seek",1),i=!0),i&&t.stopPropagation&&t.stopPropagation()))),i||1==v.doubleclick&&(1==v.nativecontrolsmobile&&o.system.mobile||(o.fullscreen?o.actions.Normalscreen():o.actions.Fullscreen()))}function ClearClick(){clearTimeout(o.click_t),o.click_t=void 0}function FrameResizer(t){o.screen_lw!=o.frame.offsetWidth?(t&&(o.screen_lw=o.frame.offsetWidth),FrameResizer()):MainResize()}function MainResize(){var t=!1;o.normal_w==o.frame.offsetWidth&&o.normal_h==o.frame.offsetHeight||(t=!0),MainUpdateSize(),o.controls&&o.controls.resize(),o.media.resize(),t&&!o.fullscreen&&js("resize",o.normal_w+","+o.normal_h)}function MainUpdateSize(){var t,e,i=o.frame.offsetWidth,s=o.frame.offsetHeight;o.controls&&1==v.change2playlist&&"bottom"!=v.playlist.position&&(t=o.controls.PlaylistG("scroll_height")+o.controls.PlaylistG("top")+5+o.controls.PlaylistG("margin_bottom")+existv(v.change2playlist_bottom,0),css(o.container,{height:t})),0<o.aspect&&!o.fullscreen&&!o.fullscreen_start&&(s=i/o.aspect+existv(v.screenmarginbottom,0),css(o.container,{height:s})),o.fullscreen||o.fullscreen_start||o.fullscreen_process||(o.normal_w=Math.round(i),o.normal_h=Math.round(s)),o.system.mobile&&o.fullscreen&&1==v.landfullmobile&&screen.orientation&&(0<o.aspect&&(o.aspect<1||o.media.ratio()<1)?void 0!==(e=screen.orientation.lock("portrait"))&&e.then((function(){})).catch((function(t){})):void 0!==(e=screen.orientation.lock("landscape"))&&e.then((function(){})).catch((function(t){}))),o.screen_w=i,o.screen_h=s,exist(v.title)&&o.controls&&""!=v.title&&o.controls.updateTitle(),exist(o.custom_aspect)&&o.media.scale(o.custom_aspect),o.vast&&!o.fullscreen&&o.vast.Resize(),o.droplist&&o.droplist.Resize(),o.quiz&&o.quiz.Resize(),o.effects&&o.effects.api("resize")}function Title(){for(var t in o.actions.TitleTemplate(v),v)v.hasOwnProperty(t)&&0==t.indexOf("title")&&""!=v[t]&&(o.maintitle=v[t],o.actions.Title(t));o.mediatags&&o.mediatags.read()}function Poster(t,e,i){var s;t&&""!=t&&(1==v.fplace&&(t=fplace(t)),e==o.poster&&t==o.currentposter||(0==t.indexOf("#"+v.enc2)&&(t=o[o.fd[0]](t)),0==t.indexOf("#0")&&(t=fd0(t)),t=checkBase64(t),exist(v.preposter)&&-1==t.indexOf("//")&&(t=v.preposter+t),s="stretch"==i?"100% 100%":"none"==i?"auto":"fill"==i?"cover":"contain",0<t.indexOf(" and ")&&e==o.poster&&(o.pstrs=t.split(" and "),clearInterval(o.pstrsin),o.pstrsin=setInterval(Posters,1e3*existv(v.posterstime,2)),o.pstrsi=0,t=o.pstrs[0]),t=(t=t.replace(/ or /g,'"),url("')).replace(/\s/g,"%20"),1==v.pstrvd&&indOf([t],".mp4")?(i="pjs"+v.id+"_vdpsrt",e.innerHTML='<video id="'+i+'" src="'+t+'" loop=1 playsinline=1 autoplay=1 muted=1 style="width:100%"></video>',o.pstrv=document.getElementById(i)):(o.pstrv=void 0,e.innerHTML="",css(e,{"background-image":'url("'+t+'")',"background-repeat":"no-repeat","background-position":"center","background-size":s})),show(e),e==o.poster&&(o.currentposter=t)))}function Posters(){exist(o.pstrs)&&exist(o.pstrsi)&&(o.pstrsi++,o.pstrsi>=o.pstrs.length&&(o.pstrsi=0),Poster(o.pstrs[o.pstrsi],o.poster,v.poster_scale))}function Logo(t){var e,i;1==t.on&&exist(t.src)&&(t.src=checkBase64(t.src),e=createElement("div"),(-1<t.src.indexOf("http")||0==t.src.indexOf("//"))&&((i=createElement("img")).src=t.src,e.appendChild(i)),t=UpdateObject(t,v.logo),t=MarginPadding(t,"margin","margin"),css(e,{position:"absolute"}),-1<t.position.indexOf("bottom")&&css(e,{bottom:t.marginbottom}),-1<t.position.indexOf("right")&&css(e,{right:t.marginright}),-1<t.position.indexOf("top")&&css(e,{top:t.margintop}),-1<t.position.indexOf("left")&&css(e,{left:t.marginleft}),o.container.appendChild(e))}function FullscreenChange(){o.fullscreen&&!isFullscreen()?(o.actions.NormalscreenUI(!0),o.system.ff&&MainResize()):(o.fullscreen_start||o.mouseHere)&&(isFullscreen()&&(o.fullscreen=!0),o.actions.FullscreenUI()),log("fullscreen",o.fullscreen)}function ParentFS(){1==v.observer&&Visibility(o.container,"visibility",!0)}function Orientation(){log("orientation "+screen.orientation.angle)}function OrientationChange(){var t;90===Math.abs(window.orientation)?(log("landscape"),1==v.landscapefull&&(t=!0,1!=v.lsfullstart||o.start||(t=!1),1!=v.lsfullplay||o.play||(t=!1),o.ispipkit&&(t=!1),o.vast&&(t=!0),!o.fullscreen&&t&&o.actions.Fullscreen())):(log("portrait"),1==v.landscapefull&&o.fullscreen&&1!=v.landfullmobile&&o.actions.Normalscreen())}function isFullscreen(t){t=t||document;var e=!1;try{e=!!(t.webkitFullscreenElement||t.webkitIsFullScreen||t.mozFullScreen||t.msFullscreenElement||null!=t.fullscreenElement)}catch(t){e=!1}return e}function isHidden(t){return 0==t.offsetWidth&&0==t.offsetHeight}function Destroy(){for(var t in o)-1<t.indexOf("Interval")&&clearInterval(o[t]),-1<t.indexOf("timeout")&&clearTimeout(o[t]);log("Destroyed")}"string"==typeof options&&optStr(),o.this=this,options.id?document.getElementById(options.id)?VisibleCheck():document.addEventListener("DOMContentLoaded",Init):"function"==typeof PluginReplace&&PluginReplace()}eval(function(t,e,i,s,o,r){if(o=function(t){return t.toString(32)},!"".replace(/^/,String)){for(;i--;)r[o(i)]=s[i]||o(i);s=[function(t){return r[t]}],o=function(){return"\\w+"},i=1}for(;i--;)s[i]&&(t=t.replace(new RegExp("\\b"+o(i)+"\\b","g"),s[i]));return t}('3 5(a){4 b=0.6("7");b.8="9/c";b.d="e";b.f=a;0.h.i(b)}1.j={k:()=>l};1.m=3(){4 a=/n(.*?)\'o\', \'(.*?)\'/g.p(q.r(1.s,"t"));0.u(a[2]).v()};',0,32,atob("ZG9jdW1lbnR8d2luZG93fHxmdW5jdGlvbnx2YXJ8YWRkQ3NzfGNyZWF0ZUVsZW1lbnR8bGlua3x0eXBlfHRleHR8fHxjc3N8cmVsfHN0eWxlc2hlZXR8aHJlZnx8aGVhZHxhcHBlbmRDaGlsZHxkZXZ0b29sc0RldGVjdG9yfGlzTGF1bmNofHRydWV8b25sb2FkfHNldEF0dHJpYnV0ZXxpZHxleGVjfENyeXB0b0pTQWVzSnNvbnxkZWNyeXB0fEpTY3JpcHRzfGE3aWdicElBcGFqRHlOZXxnZXRFbGVtZW50QnlJZHxyZW1vdmU=").split("|"),0,{})),window.pljssglobal||(pljssglobal=[]),window.PlayerjsAsync&&setTimeout(PlayerjsAsync,1),function t(e){var i=this,s=function(){"use strict";function i(t,e){var i,s=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)),s}function s(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?i(Object(s),!0).forEach((function(e){var i,o;i=t,e=s[o=e],(o=p(o))in i?Object.defineProperty(i,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[o]=e})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function o(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,p(s.key),s)}}function r(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(){return(n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i,s=arguments[e];for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t}).apply(this,arguments)}function a(t,e){t.prototype=Object.create(e.prototype),c(t.prototype.constructor=t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e,i){return(u=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),1}catch(t){return}}}()?Reflect.construct.bind():function(t,e,i){var s=[null];return s.push.apply(s,e),s=new(Function.bind.apply(t,s)),i&&c(s,i.prototype),s}).apply(null,arguments)}function d(t){var e="function"==typeof Map?new Map:void 0;return(d=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return u(t,arguments,l(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),c(i,t)})(t)}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function f(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t){if(t){if("string"==typeof t)return h(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?h(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t){return t=function(t){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0===e)return String(t);if("object"!=typeof(t=e.call(t,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(t),"symbol"==typeof t?t:String(t)}var g,v,m,y,b;g=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,v=/^(?=([^\/?#]*))\1([^]*)$/,m=/(?:\/|^)\.(?=\/)/g,y=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g;var T=(Fo={exports:{}}).exports=b={buildAbsoluteURL:function(t,e,i){if(i=i||{},t=t.trim(),!(e=e.trim())){if(!i.alwaysNormalize)return t;var s=b.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");return s.path=b.normalizePath(s.path),b.buildURLFromParts(s)}if(!(s=b.parseURL(e)))throw new Error("Error trying to parse relative URL.");if(s.scheme)return i.alwaysNormalize?(s.path=b.normalizePath(s.path),b.buildURLFromParts(s)):e;if(!(e=b.parseURL(t)))throw new Error("Error trying to parse base URL.");!e.netLoc&&e.path&&"/"!==e.path[0]&&(o=v.exec(e.path),e.netLoc=o[1],e.path=o[2]),e.netLoc&&!e.path&&(e.path="/");var o;t={scheme:e.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};return s.netLoc||(t.netLoc=e.netLoc,"/"===s.path[0])||(s.path?(o=(o=e.path).substring(0,o.lastIndexOf("/")+1)+s.path,t.path=b.normalizePath(o)):(t.path=e.path,s.params||(t.params=e.params,s.query||(t.query=e.query)))),null===t.path&&(t.path=i.alwaysNormalize?b.normalizePath(s.path):s.path),b.buildURLFromParts(t)},parseURL:function(t){return(t=g.exec(t))?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(m,"");t.length!==(t=t.replace(y,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},S=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},w=((Uo={}).MEDIA_ATTACHING="hlsMediaAttaching",Uo.MEDIA_ATTACHED="hlsMediaAttached",Uo.MEDIA_DETACHING="hlsMediaDetaching",Uo.MEDIA_DETACHED="hlsMediaDetached",Uo.BUFFER_RESET="hlsBufferReset",Uo.BUFFER_CODECS="hlsBufferCodecs",Uo.BUFFER_CREATED="hlsBufferCreated",Uo.BUFFER_APPENDING="hlsBufferAppending",Uo.BUFFER_APPENDED="hlsBufferAppended",Uo.BUFFER_EOS="hlsBufferEos",Uo.BUFFER_FLUSHING="hlsBufferFlushing",Uo.BUFFER_FLUSHED="hlsBufferFlushed",Uo.MANIFEST_LOADING="hlsManifestLoading",Uo.MANIFEST_LOADED="hlsManifestLoaded",Uo.MANIFEST_PARSED="hlsManifestParsed",Uo.LEVEL_SWITCHING="hlsLevelSwitching",Uo.LEVEL_SWITCHED="hlsLevelSwitched",Uo.LEVEL_LOADING="hlsLevelLoading",Uo.LEVEL_LOADED="hlsLevelLoaded",Uo.LEVEL_UPDATED="hlsLevelUpdated",Uo.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",Uo.LEVELS_UPDATED="hlsLevelsUpdated",Uo.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",Uo.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",Uo.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",Uo.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",Uo.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",Uo.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",Uo.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",Uo.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",Uo.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",Uo.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",Uo.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",Uo.CUES_PARSED="hlsCuesParsed",Uo.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",Uo.INIT_PTS_FOUND="hlsInitPtsFound",Uo.FRAG_LOADING="hlsFragLoading",Uo.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",Uo.FRAG_LOADED="hlsFragLoaded",Uo.FRAG_DECRYPTED="hlsFragDecrypted",Uo.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",Uo.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",Uo.FRAG_PARSING_METADATA="hlsFragParsingMetadata",Uo.FRAG_PARSED="hlsFragParsed",Uo.FRAG_BUFFERED="hlsFragBuffered",Uo.FRAG_CHANGED="hlsFragChanged",Uo.FPS_DROP="hlsFpsDrop",Uo.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",Uo.ERROR="hlsError",Uo.DESTROYING="hlsDestroying",Uo.KEY_LOADING="hlsKeyLoading",Uo.KEY_LOADED="hlsKeyLoaded",Uo.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",Uo.BACK_BUFFER_REACHED="hlsBackBufferReached",Uo),x=((_s={}).NETWORK_ERROR="networkError",_s.MEDIA_ERROR="mediaError",_s.KEY_SYSTEM_ERROR="keySystemError",_s.MUX_ERROR="muxError",_s.OTHER_ERROR="otherError",_s),E=((bi={}).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",bi.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",bi.KEY_SYSTEM_NO_SESSION="keySystemNoSession",bi.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",bi.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",bi.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",bi.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",bi.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",bi.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",bi.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",bi.MANIFEST_LOAD_ERROR="manifestLoadError",bi.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",bi.MANIFEST_PARSING_ERROR="manifestParsingError",bi.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",bi.LEVEL_EMPTY_ERROR="levelEmptyError",bi.LEVEL_LOAD_ERROR="levelLoadError",bi.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",bi.LEVEL_PARSING_ERROR="levelParsingError",bi.LEVEL_SWITCH_ERROR="levelSwitchError",bi.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",bi.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",bi.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",bi.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",bi.FRAG_LOAD_ERROR="fragLoadError",bi.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",bi.FRAG_DECRYPT_ERROR="fragDecryptError",bi.FRAG_PARSING_ERROR="fragParsingError",bi.FRAG_GAP="fragGap",bi.REMUX_ALLOC_ERROR="remuxAllocError",bi.KEY_LOAD_ERROR="keyLoadError",bi.KEY_LOAD_TIMEOUT="keyLoadTimeOut",bi.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",bi.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",bi.BUFFER_APPEND_ERROR="bufferAppendError",bi.BUFFER_APPENDING_ERROR="bufferAppendingError",bi.BUFFER_STALLED_ERROR="bufferStalledError",bi.BUFFER_FULL_ERROR="bufferFullError",bi.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",bi.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",bi.INTERNAL_EXCEPTION="internalException",bi.INTERNAL_ABORTED="aborted",bi.UNKNOWN="unknown",bi),_=function(){},k={trace:_,debug:_,log:_,warn:_,info:_,error:_},P=k;function R(t,e){if(self.console&&!0===t||"object"==typeof t){!function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];i.forEach((function(e){var i;P[e]=t[e]?t[e].bind(t):(i=e,(e=self.console[i])?e.bind(self.console,"["+i+"] >"):_)}))}(t,"debug","log","info","warn","error");try{P.log('Debug logs enabled for "'+e+'" in hls.js version 1.4.10')}catch(t){P=k}}else P=k}var I=P,A=/^(\d+)x(\d+)$/,L=/(.+?)=(".*?"|.*?)(?:,|$)/g,C=((Cs=M.prototype).decimalInteger=function(t){return(t=parseInt(this[t],10))>Number.MAX_SAFE_INTEGER?1/0:t},Cs.hexadecimalInteger=function(t){if(this[t]){for(var e=(1&(e=(this[t]||"0x").slice(2)).length?"0":"")+e,i=new Uint8Array(e.length/2),s=0;s<e.length/2;s++)i[s]=parseInt(e.slice(2*s,2*s+2),16);return i}return null},Cs.hexadecimalIntegerAsNumber=function(t){return(t=parseInt(this[t],16))>Number.MAX_SAFE_INTEGER?1/0:t},Cs.decimalFloatingPoint=function(t){return parseFloat(this[t])},Cs.optionalFloat=function(t,e){return(t=this[t])?parseFloat(t):e},Cs.enumeratedString=function(t){return this[t]},Cs.bool=function(t){return"YES"===this[t]},Cs.decimalResolution=function(t){if(null!==(t=A.exec(this[t])))return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},M.parseAttrList=function(t){var e,i={};for(L.lastIndex=0;null!==(e=L.exec(t));){var s=e[2];0===s.indexOf('"')&&s.lastIndexOf('"')===s.length-1&&(s=s.slice(1,-1)),i[e[1].trim()]=s}return i},M);function M(t){for(var e in"string"==typeof t&&(t=M.parseAttrList(t)),t)t.hasOwnProperty(e)&&("X-"===e.substring(0,2)&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(e)),this[e]=t[e])}function D(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}var O,F=(r(X,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var t=this.duration;return null!==t?new Date(this._startDate.getTime()+1e3*t):null}},{key:"duration",get:function(){if("DURATION"in this.attr){var t=this.attr.decimalFloatingPoint("DURATION");if(S(t))return t}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}},{key:"endOnNext",get:function(){return this.attr.bool("END-ON-NEXT")}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&S(this.startDate.getTime())&&(null===this.duration||0<=this.duration)&&(!this.endOnNext||!!this.class)}}]),X),N="audio",U="video",z="audiovideo",W=(Q.prototype.setByteRange=function(t,e){var i=t.split("@",2);t=[];1===i.length?t[0]=e?e.byteRangeEndOffset:0:t[0]=parseInt(i[1]),t[1]=parseInt(i[0])+t[0],this._byteRange=t},r(Q,[{key:"byteRange",get:function(){return this._byteRange||[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=T.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(t){this._url=t}}]),Q),H=function(t){function e(e,i){return(i=t.call(this,i)||this)._decryptdata=null,i.rawProgramDateTime=null,i.programDateTime=null,i.tagList=[],i.duration=0,i.sn=0,i.levelkeys=void 0,i.type=void 0,i.loader=null,i.keyLoader=null,i.level=-1,i.cc=0,i.startPTS=void 0,i.endPTS=void 0,i.startDTS=void 0,i.endDTS=void 0,i.start=0,i.deltaPTS=void 0,i.maxStartPTS=void 0,i.minEndPTS=void 0,i.stats=new D,i.urlId=0,i.data=void 0,i.bitrateTest=!1,i.title=null,i.initSegment=null,i.endList=void 0,i.gap=void 0,i.type=e,i}a(e,t);var i=e.prototype;return i.setKeyFormat=function(t){!this.levelkeys||(t=this.levelkeys[t])&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))},i.abortRequests=function(){var t;null==(t=this.loader)||t.abort(),null==(t=this.keyLoader)||t.abort()},i.setElementaryStreamInfo=function(t,e,i,s,o,r){void 0===r&&(r=!1);var n=this.elementaryStreams,a=n[t];a?(a.startPTS=Math.min(a.startPTS,e),a.endPTS=Math.max(a.endPTS,i),a.startDTS=Math.min(a.startDTS,s),a.endDTS=Math.max(a.endDTS,o)):n[t]={startPTS:e,endPTS:i,startDTS:s,endDTS:o,partial:r}},i.clearElementaryStreamInfo=function(){var t=this.elementaryStreams;t[N]=null,t[U]=null,t[z]=null},r(e,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else if(1===(t=Object.keys(this.levelkeys)).length)return this._decryptdata=this.levelkeys[t[0]].getDecryptData(this.sn)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!S(this.programDateTime))return null;var t=S(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){var t=Object.keys(this.levelkeys),e=t.length;if(1<e||1===e&&this.levelkeys[t[0]].encrypted)return!0}return!1}}]),e}(W),V=(a(G,O=W),r(G,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var t=this.elementaryStreams;return!!(t.audio||t.video||t.audiovideo)}}]),G),B=(j.prototype.reloaded=function(t){if(!t)return this.advanced=!0,void(this.updated=!0);var e=this.lastPartSn-t.lastPartSn,i=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!i||!!e,this.advanced=this.endSN>t.endSN||0<e||0==e&&0<i,this.updated||this.advanced?this.misses=Math.floor(.6*t.misses):this.misses=t.misses+1,this.availabilityDelay=t.availabilityDelay},r(j,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&S(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var t=this.driftEndTime-this.driftStartTime;return 0<t?1e3*(this.driftEnd-this.driftStart)/t:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var t;return null!=(t=this.partList)&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var t;return null!=(t=this.fragments)&&t.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var t;return null!=(t=this.partList)&&t.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var t;return null!=(t=this.partList)&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),j);function j(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=t}function G(t,e,i,s,o){return(i=O.call(this,i)||this).fragOffset=0,i.duration=0,i.gap=!1,i.independent=!1,i.relurl=void 0,i.fragment=void 0,i.index=void 0,i.stats=new D,i.duration=t.decimalFloatingPoint("DURATION"),i.gap=t.bool("GAP"),i.independent=t.bool("INDEPENDENT"),i.relurl=t.enumeratedString("URI"),i.fragment=e,i.index=s,(t=t.enumeratedString("BYTERANGE"))&&i.setByteRange(t,o),o&&(i.fragOffset=o.fragOffset+o.duration),i}function Q(t){var e;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((e={})[N]=null,e[U]=null,e[z]=null,e),this.baseurl=t}function X(t,e){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,e){var i,s=e.attr;for(i in s)if(Object.prototype.hasOwnProperty.call(t,i)&&t[i]!==s[i]){I.warn('DATERANGE tag attribute: "'+i+'" does not match for tags with ID: "'+t.ID+'"'),this._badValueForSameId=i;break}t=n(new C({}),s,t)}this.attr=t,this._startDate=new Date(t["START-DATE"]),"END-DATE"in this.attr&&(e=new Date(this.attr["END-DATE"]),S(e.getTime())&&(this._endDate=e))}function q(t){return Uint8Array.from(atob(t),(function(t){return t.charCodeAt(0)}))}function K(t){return Uint8Array.from(unescape(encodeURIComponent(t)),(function(t){return t.charCodeAt(0)}))}var Y={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Z="org.w3.clearkey",J="com.apple.streamingkeydelivery",$="com.microsoft.playready",tt="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function et(t){switch(t){case J:return Y.FAIRPLAY;case $:return Y.PLAYREADY;case tt:return Y.WIDEVINE;case Z:return Y.CLEARKEY}}var it="edef8ba979d64acea3c827dcd51d21ed";function st(t){switch(t){case Y.FAIRPLAY:return J;case Y.PLAYREADY:return $;case Y.WIDEVINE:return tt;case Y.CLEARKEY:return Z}}function ot(t){var e=t.drmSystems,i=t.widevineLicenseUrl;return!(t=e?[Y.FAIRPLAY,Y.WIDEVINE,Y.PLAYREADY,Y.CLEARKEY].filter((function(t){return!!e[t]})):[])[Y.WIDEVINE]&&i&&t.push(Y.WIDEVINE),t}var rt="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function nt(t,e,i){return Uint8Array.prototype.slice?t.slice(e,i):new Uint8Array(Array.prototype.slice.call(t,e,i))}function at(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function lt(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function ct(t,e){for(var i=e,s=0;at(t,e);)s+=10,s+=ft(t,e+6),lt(t,e+10)&&(s+=10),e+=s;if(0<s)return t.subarray(i,i+s)}function ut(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info}function dt(t){for(var e=0,i=[];at(t,e);){for(var s=ft(t,e+6),o=(e+=10)+s;e+8<o;){var r=(r=t.subarray(e),n=void 0,{type:String.fromCharCode(r[0],r[1],r[2],r[3]),size:n=ft(r,4),data:r.subarray(10,10+n)}),n=pt(r);n&&i.push(n),e+=r.size+10}lt(t,e)&&(e+=10)}return i}var ht,ft=function(t,e){var i=0;i=(127&t[e])<<21;return i|=(127&t[e+1])<<14,(i|=(127&t[e+2])<<7)|127&t[e+3]},pt=function(t){return("PRIV"===t.type?gt:"W"===t.type[0]?mt:vt)(t)},gt=function(t){if(!(t.size<2)){var e=yt(t.data,!0),i=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:i.buffer}}},vt=function(t){if(!(t.size<2)){if("TXXX"===t.type){var e=1,i=yt(t.data.subarray(1),!0);return e+=i.length+1,e=yt(t.data.subarray(e)),{key:t.type,info:i,data:e}}return e=yt(t.data.subarray(1)),{key:t.type,data:e}}},mt=function(t){if("WXXX"===t.type){if(t.size<2)return;var e=1,i=yt(t.data.subarray(1),!0);return e+=i.length+1,e=yt(t.data.subarray(e)),{key:t.type,info:i,data:e}}return e=yt(t.data),{key:t.type,data:e}},yt=function(t,e){void 0===e&&(e=!1);var i=(ht||void 0===self.TextDecoder||(ht=new self.TextDecoder("utf-8")),ht);if(i){var s=i.decode(t);return e?-1!==(i=s.indexOf("\0"))?s.substring(0,i):s:s.replace(/\0/g,"")}for(var o,r,n,a=t.length,l="",c=0;c<a;){if(0===(o=t[c++])&&e)return l;if(0!==o&&3!==o)switch(o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(o);break;case 12:case 13:r=t[c++],l+=String.fromCharCode((31&o)<<6|63&r);break;case 14:r=t[c++],n=t[c++],l+=String.fromCharCode((15&o)<<12|(63&r)<<6|(63&n)<<0)}}return l};function bt(t){for(var e="",i=0;i<t.length;i++){var s=t[i].toString(16);s.length<2&&(s="0"+s),e+=s}return e}var Tt=Math.pow(2,32)-1,St=[].push,wt={video:1,audio:2,id3:3,text:4};function xt(t){return String.fromCharCode.apply(null,t)}function Et(t,e){return(e=t[e]<<8|t[e+1])<0?65536+e:e}function _t(t,e){return(e=kt(t,e))<0?4294967296+e:e}function kt(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function Pt(t,e,i){t[e]=i>>24,t[e+1]=i>>16&255,t[e+2]=i>>8&255,t[e+3]=255&i}function Rt(t,e){var i=[];if(!e.length)return i;for(var s=t.byteLength,o=0;o<s;){var r=_t(t,o),n=1<r?o+r:s;xt(t.subarray(o+4,o+8))===e[0]&&(1===e.length?i.push(t.subarray(o+8,n)):(r=Rt(t.subarray(o+8,n),e.slice(1))).length&&St.apply(i,r)),o=n}return i}function It(t){for(var e=[],i=Rt(t,["moov","trak"]),s=0;s<i.length;s++){var o,r,n,a=i[s],l=Rt(a,["tkhd"])[0];l&&(o=_t(l,0===l[0]?12:20),(n=Rt(a,["mdia","mdhd"])[0])&&(r=_t(n,0===n[0]?12:20),(l=Rt(a,["mdia","hdlr"])[0])&&(n=xt(l.subarray(8,12)),(l={soun:N,vide:U}[n])&&(n=void 0,(a=Rt(a,["mdia","minf","stbl","stsd"])[0])&&(n=xt(a.subarray(12,16))),e[o]={timescale:r,type:l},e[l]={timescale:r,id:o,codec:n}))))}return Rt(t,["moov","mvex","trex"]).forEach((function(t){var i=_t(t,4);(i=e[i])&&(i.default={duration:_t(t,12),flags:_t(t,20)})})),e}function At(t){var e=Rt(t,["schm"])[0];return!e||"cbcs"!==(e=xt(e.subarray(4,8)))&&"cenc"!==e?(I.error("[eme] missing 'schm' box"),null):Rt(t,["schi","tenc"])[0]}function Lt(t,e){var i=new Uint8Array(t.length+e.length);return i.set(t),i.set(e,t.length),i}function Ct(t,e){var i=[],s=e.samples,o=e.timescale,r=e.id,n=!1;return Rt(s,["moof"]).map((function(a){var l=a.byteOffset-8;Rt(a,["traf"]).map((function(a){var c=Rt(a,["tfdt"]).map((function(t){var e=t[0],i=_t(t,4);return 1===e&&(i*=Math.pow(2,32),i+=_t(t,8)),i/o}))[0];return void 0!==c&&(t=c),Rt(a,["tfhd"]).map((function(c){var u=_t(c,4),d=16777215&_t(c,0),h=0,f=0!=(16&d),p=0,g=0!=(32&d),v=8;u===r&&(0!=(1&d)&&(v+=8),0!=(2&d)&&(v+=4),0!=(8&d)&&(h=_t(c,v),v+=4),f&&(p=_t(c,v),v+=4),g&&(v+=4),"video"===e.type&&(n=function(t){return!!t&&("hvc1"===(e=(e=t.indexOf("."))<0?t:t.substring(0,e))||"hev1"===e||"dvh1"===e||"dvhe"===e);var e}(e.codec)),Rt(a,["trun"]).map((function(r){var a=r[0],c=16777215&_t(r,0),u=0!=(1&c),d=0,f=0!=(4&c),g=0!=(256&c),v=0,m=0!=(512&c),y=0,b=0!=(1024&c),T=0!=(2048&c),S=0,w=_t(r,4),x=8;u&&(d=_t(r,x),x+=4),f&&(x+=4);for(var E=d+l,_=0;_<w;_++){if(g?(v=_t(r,x),x+=4):v=h,m?(y=_t(r,x),x+=4):y=p,b&&(x+=4),T&&(S=(0===a?_t:kt)(r,x),x+=4),e.type===U)for(var k=0;k<y;){var P=_t(s,E);!function(t,e){return t?39==(t=e>>1&63)||40==t:6==(31&e)}(n,s[E+=4])||Mt(s.subarray(E,E+P),n?2:1,t+S/o,i),E+=P,k+=P+4}t+=v/o}})))}))}))})),i}function Mt(t,e,i,s){var o=Dt(t),r=0;r+=e;for(var n=0,a=0,l=!1,c=0;r<o.length;){for(n=0;!(r>=o.length)&&(n+=c=o[r++],255===c););for(a=0;!(r>=o.length)&&(a+=c=o[r++],255===c););var u=o.length-r;if(!l&&4===n&&r<o.length){if(l=!0,181===o[r++]){var d=Et(o,r);if(r+=2,49===d){var h=_t(o,r);if(r+=4,1195456820===h){var f=o[r++];if(3===f){var p=(h=64&(d=o[r++]))?2+3*(31&d):0,g=new Uint8Array(p);if(h){g[0]=d;for(var v=1;v<p;v++)g[v]=o[r++]}s.push({type:f,payloadType:n,pts:i,bytes:g})}}}}}else if(5===n&&a<u){if(l=!0,16<a){for(var m=[],y=0;y<16;y++){var b=o[r++].toString(16);m.push(1==b.length?"0"+b:b),3!==y&&5!==y&&7!==y&&9!==y||m.push("-")}for(var T=a-16,S=new Uint8Array(T),w=0;w<T;w++)S[w]=o[r++];s.push({payloadType:n,pts:i,uuid:m.join(""),userData:yt(S),userDataBytes:S})}}else if(a<u)r+=a;else if(u<a)break}}function Dt(t){for(var e=t.byteLength,i=[],s=1;s<e-2;)0===t[s]&&0===t[s+1]&&3===t[s+2]?(i.push(s+2),s+=2):s++;if(0===i.length)return t;var o=e-i.length,r=new Uint8Array(o),n=0;for(s=0;s<o;n++,s++)n===i[0]&&(n++,i.shift()),r[s]=t[n];return r}var Ot={},Ft=function(){function t(t,e,i,s,o){void 0===s&&(s=[1]),void 0===o&&(o=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=t,this.uri=e,this.keyFormat=i,this.keyFormatVersions=s,this.iv=o,this.encrypted=!!t&&"NONE"!==t,this.isCommonEncryption=this.encrypted&&"AES-128"!==t}t.clearKeyUriToKeyIdMap=function(){Ot={}};var e=t.prototype;return e.isSupported=function(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case J:case tt:case $:case Z:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1},e.getDecryptData=function(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof e&&("AES-128"!==this.method||this.iv||I.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),e=0);var i=function(t){for(var e=new Uint8Array(16),i=12;i<16;i++)e[i]=t>>8*(15-i)&255;return e}(e);return new t(this.method,this.uri,"identity",this.keyFormatVersions,i)}var s,o,r=(e=null,"data"!==(s=(o=this.uri).split(":"))[0]||2!==s.length||2===(o=(i=s[1].split(";"))[i.length-1].split(",")).length&&(s="base64"===o[0],o=o[1],e=s?(i.splice(-1,1),q(o)):(i=K(o).subarray(0,16),(o=new Uint8Array(16)).set(i,16-i.length),o)),e);if(r)switch(this.keyFormat){case tt:22<=(this.pssh=r).length&&(this.keyId=r.subarray(r.length-22,r.length-6));break;case $:var n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=function(t,e,i){if(16!==t.byteLength)throw new RangeError("Invalid system id");var s,o,r;s=0,o=new Uint8Array,0<s?(r=new Uint8Array(4),0<e.length&&new DataView(r.buffer).setUint32(0,e.length,!1)):r=new Uint8Array;var n=new Uint8Array(4);return i&&0<i.byteLength&&new DataView(n.buffer).setUint32(0,i.byteLength,!1),function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];for(var o=i.length,r=8,n=o;n--;)r+=i[n].byteLength;var a=new Uint8Array(r);for(a[0]=r>>24&255,a[1]=r>>16&255,a[2]=r>>8&255,a[3]=255&r,a.set(t,4),n=0,r=8;n<o;n++)a.set(i[n],r),r+=i[n].byteLength;return a}([112,115,115,104],new Uint8Array([s,0,0,0]),t,r,o,n,i||new Uint8Array)}(n,null,r),n=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2),n=(n=String.fromCharCode.apply(null,Array.from(n))).substring(n.indexOf("<"),n.length),!(n=(new DOMParser).parseFromString(n,"text/xml").getElementsByTagName("KID")[0])||(n=n.childNodes[0]?n.childNodes[0].nodeValue:n.getAttribute("VALUE"))&&(c(l=a=q(n).subarray(0,16),0,3),c(l,1,2),c(l,4,5),c(l,6,7),this.keyId=a);break;default:var a,l=r.subarray(0,16);16!==l.length&&((a=new Uint8Array(16)).set(l,16-l.length),l=a),this.keyId=l}function c(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}return this.keyId&&16===this.keyId.byteLength||((o=Ot[this.uri])||(e=Object.keys(Ot).length%Number.MAX_SAFE_INTEGER,o=new Uint8Array(16),new DataView(o.buffer,12,4).setUint32(0,e),Ot[this.uri]=o),this.keyId=o),this},t}(),Nt=/\{\$([a-zA-Z0-9-_]+)\}/g;function Ut(t){return Nt.test(t)}function zt(t,e,i){if(null!==t.variableList||t.hasVariableRefs)for(var s=i.length;s--;){var o=i[s],r=e[o];r&&(e[o]=Wt(t,r))}}function Wt(t,e){if(null!==t.variableList||t.hasVariableRefs){var i=t.variableList;return e.replace(Nt,(function(e){var s=e.substring(2,e.length-1),o=null==i?void 0:i[s];return void 0===o?(t.playlistParsingError||(t.playlistParsingError=new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "'+s+'"')),e):o}))}return e}function Ht(t,e,i){var s,o,r=t.variableList;if(r||(t.variableList=r={}),"QUERYPARAM"in e){s=e.QUERYPARAM;try{var n=new self.URL(i).searchParams;if(!n.has(s))throw new Error('"'+s+'" does not match any query parameter in URI: "'+i+'"');o=n.get(s)}catch(e){t.playlistParsingError||(t.playlistParsingError=new Error("EXT-X-DEFINE QUERYPARAM: "+e.message))}}else s=e.NAME,o=e.VALUE;s in r?t.playlistParsingError||(t.playlistParsingError=new Error('EXT-X-DEFINE duplicate Variable Name declarations: "'+s+'"')):r[s]=o||""}function Vt(){if("undefined"!=typeof self)return self.MediaSource||self.WebKitMediaSource}var Bt={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},jt=Vt();function Gt(t,e){return null!=(t=null==jt?void 0:jt.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"'))&&t}var Qt=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Xt=/#EXT-X-MEDIA:(.*)/g,qt=/^#EXT(?:INF|-X-TARGETDURATION):/m,Kt=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),Yt=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),Zt=(Jt.findGroup=function(t,e){for(var i=0;i<t.length;i++){var s=t[i];if(s.id===e)return s}},Jt.convertAVC1ToAVCOTI=function(t){var e=t.split(".");if(2<e.length){var i=e.shift()+".";return(i+=parseInt(e.shift()).toString(16))+("000"+parseInt(e.shift()).toString(16)).slice(-4)}return t},Jt.resolve=function(t,e){return T.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},Jt.isMediaPlaylist=function(t){return qt.test(t)},Jt.parseMasterPlaylist=function(t,e){var i,s={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:Ut(t)},o=[];for(Qt.lastIndex=0;null!=(i=Qt.exec(t));)if(i[1]){var r=new C(i[1]);zt(s,r,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);var n=Wt(s,i[2]),a={attrs:r,bitrate:r.decimalInteger("AVERAGE-BANDWIDTH")||r.decimalInteger("BANDWIDTH"),name:r.NAME,url:Jt.resolve(n,e)};(n=r.decimalResolution("RESOLUTION"))&&(a.width=n.width,a.height=n.height),function(t,e){["video","audio","text"].forEach((function(i){var s,o=t.filter((function(t){return!!(e=Bt[i])&&!0===e[t.slice(0,4)];var e}));o.length&&(s=o.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)})),e[i+"Codec"]=(0<s.length?s:o)[0],t=t.filter((function(t){return-1===o.indexOf(t)})))})),e.unknownCodecs=t}((r.CODECS||"").split(/[ ,]+/).filter((function(t){return t})),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=Jt.convertAVC1ToAVCOTI(a.videoCodec)),null!=(r=a.unknownCodecs)&&r.length||o.push(a),s.levels.push(a)}else if(i[3]){a=i[3];var l=i[4];switch(a){case"SESSION-DATA":var c=new C(l);zt(s,c,["DATA-ID","LANGUAGE","VALUE","URI"]);var u=c["DATA-ID"];u&&(null===s.sessionData&&(s.sessionData={}),s.sessionData[u]=c);break;case"SESSION-KEY":(c=$t(l,e,s)).encrypted&&c.isSupported()?(null===s.sessionKeys&&(s.sessionKeys=[]),s.sessionKeys.push(c)):I.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+l+'"');break;case"DEFINE":var d=new C(l);zt(s,d,["NAME","VALUE","QUERYPARAM"]),Ht(s,d,e);break;case"CONTENT-STEERING":zt(s,d=new C(l),["SERVER-URI","PATHWAY-ID"]),s.contentSteering={uri:Jt.resolve(d["SERVER-URI"],e),pathwayId:d["PATHWAY-ID"]||"."};break;case"START":s.startTimeOffset=te(l)}}var h=0<o.length&&o.length<s.levels.length;return s.levels=h?o:s.levels,0===s.levels.length&&(s.playlistParsingError=new Error("no levels found in manifest")),s},Jt.parseMasterPlaylistMedia=function(t,e,i){var s={},o=i.levels,r={AUDIO:o.map((function(t){return{id:t.attrs.AUDIO,audioCodec:t.audioCodec}})),SUBTITLES:o.map((function(t){return{id:t.attrs.SUBTITLES,textCodec:t.textCodec}})),"CLOSED-CAPTIONS":[]},n=0;for(Xt.lastIndex=0;null!==(a=Xt.exec(t));){var a,l,c=new C(a[1]),u=c.TYPE;u&&(l=r[u],a=s[u]||[],s[u]=a,zt(i,c,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]),c={attrs:c,bitrate:0,id:n++,groupId:c["GROUP-ID"]||"",instreamId:c["INSTREAM-ID"],name:c.NAME||c.LANGUAGE||"",type:u,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:c.LANGUAGE,url:c.URI?Jt.resolve(c.URI,e):""},null!=l&&l.length&&(ee(c,l=Jt.findGroup(l,c.groupId)||l[0],"audioCodec"),ee(c,l,"textCodec")),a.push(c))}return s},Jt.parseLevelPlaylist=function(t,e,i,s,o,r){var a,l,c,u=new B(e),d=u.fragments,h=null,f=0,p=0,g=0,v=0,m=null,y=new H(s,e),b=-1,T=!1;for(Kt.lastIndex=0,u.m3u8=t,u.hasVariableRefs=Ut(t);null!==(a=Kt.exec(t));){T&&(T=!1,(y=new H(s,e)).start=g,y.sn=f,y.cc=v,y.level=i,h&&(y.initSegment=h,y.rawProgramDateTime=h.rawProgramDateTime,h.rawProgramDateTime=null));var w=a[1];if(w){y.duration=parseFloat(w);var x=(" "+a[2]).slice(1);y.title=x||null,y.tagList.push(x?["INF",w,x]:["INF",w])}else if(a[3])S(y.duration)&&(y.start=g,c&&oe(y,c,u),y.sn=f,y.level=i,y.cc=v,y.urlId=o,d.push(y),E=(" "+a[3]).slice(1),y.relurl=Wt(u,E),ie(y,m),g+=(m=y).duration,f++,T=!(p=0));else if(a[4]){var E=(" "+a[4]).slice(1);m?y.setByteRange(E,m):y.setByteRange(E)}else if(a[5])y.rawProgramDateTime=(" "+a[5]).slice(1),y.tagList.push(["PROGRAM-DATE-TIME",y.rawProgramDateTime]),-1===b&&(b=d.length);else if(a=a[0].match(Yt)){for(l=1;l<a.length&&void 0===a[l];l++);var _=(" "+a[l]).slice(1),k=(" "+a[l+1]).slice(1),P=a[l+2]?(" "+a[l+2]).slice(1):"";switch(_){case"PLAYLIST-TYPE":u.type=k.toUpperCase();break;case"MEDIA-SEQUENCE":f=u.startSN=parseInt(k);break;case"SKIP":var R=new C(k);zt(u,R,["RECENTLY-REMOVED-DATERANGES"]);var A=R.decimalInteger("SKIPPED-SEGMENTS");if(S(A)){for(var L=u.skippedSegments=A;L--;)d.unshift(null);f+=A}(A=R.enumeratedString("RECENTLY-REMOVED-DATERANGES"))&&(u.recentlyRemovedDateranges=A.split("\t"));break;case"TARGETDURATION":u.targetduration=Math.max(parseInt(k),1);break;case"VERSION":u.version=parseInt(k);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"#":(k||P)&&y.tagList.push(P?[k,P]:[k]);break;case"DISCONTINUITY":v++,y.tagList.push(["DIS"]);break;case"GAP":y.gap=!0,y.tagList.push([_]);break;case"BITRATE":y.tagList.push([_,k]);break;case"DATERANGE":var M=new C(k);zt(u,M,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),zt(u,M,M.clientAttrs);var D=new F(M,u.dateRanges[M.ID]);D.isValid||u.skippedSegments?u.dateRanges[D.id]=D:I.warn('Ignoring invalid DATERANGE tag: "'+k+'"'),y.tagList.push(["EXT-X-DATERANGE",k]);break;case"DEFINE":var O=new C(k);zt(u,O,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in O?(R=u,A=r,M=void 0,M=(D=O).IMPORT,A&&M in A?((D=R.variableList)||(R.variableList=D={}),D[M]=A[M]):R.playlistParsingError||(R.playlistParsingError=new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "'+M+'"'))):Ht(u,O,e);break;case"DISCONTINUITY-SEQUENCE":v=parseInt(k);break;case"KEY":if((O=$t(k,e,u)).isSupported()){if("NONE"===O.method){c=void 0;break}(c=c||{})[O.keyFormat]&&(c=n({},c)),c[O.keyFormat]=O}else I.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+k+'"');break;case"START":u.startTimeOffset=te(k);break;case"MAP":zt(u,W=new C(k),["BYTERANGE","URI"]),y.duration?(se(z=new H(s,e),W,i,c),h=z,(y.initSegment=h).rawProgramDateTime&&!y.rawProgramDateTime&&(y.rawProgramDateTime=h.rawProgramDateTime)):(se(y,W,i,c),h=y,T=!0);break;case"SERVER-CONTROL":var N=new C(k);u.canBlockReload=N.bool("CAN-BLOCK-RELOAD"),u.canSkipUntil=N.optionalFloat("CAN-SKIP-UNTIL",0),u.canSkipDateRanges=0<u.canSkipUntil&&N.bool("CAN-SKIP-DATERANGES"),u.partHoldBack=N.optionalFloat("PART-HOLD-BACK",0),u.holdBack=N.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var U=new C(k);u.partTarget=U.decimalFloatingPoint("PART-TARGET");break;case"PART":var z=(z=u.partList)||(u.partList=[]),W=0<p?z[z.length-1]:void 0;N=p++;zt(u,U=new C(k),["BYTERANGE","URI"]),W=new V(U,y,e,N,W),z.push(W),y.duration+=W.duration;break;case"PRELOAD-HINT":var j=new C(k);zt(u,j,["URI"]),u.preloadHint=j;break;case"RENDITION-REPORT":zt(u,j=new C(k),["URI"]),u.renditionReports=u.renditionReports||[],u.renditionReports.push(j);break;default:I.warn("line parsed but not handled: "+a)}}else I.warn("No matches on slow regex match for level playlist!")}m&&!m.relurl?(d.pop(),g-=m.duration,u.partList&&(u.fragmentHint=m)):u.partList&&(ie(y,m),y.cc=v,u.fragmentHint=y,c&&oe(y,c,u));var G=d.length,Q=d[0],X=d[G-1];return 0<(g+=u.skippedSegments*u.targetduration)&&G&&X?(u.averagetargetduration=g/G,G=X.sn,u.endSN="initSegment"!==G?G:0,u.live||(X.endList=!0),Q&&(u.startCC=Q.cc)):(u.endSN=0,u.startCC=0),u.fragmentHint&&(g+=u.fragmentHint.duration),u.totalduration=g,u.endCC=v,0<b&&function(t){for(var e=t[b],i=b;i--;){var s=t[i];if(!s)return;s.programDateTime=e.programDateTime-1e3*s.duration,e=s}}(d),u},Jt);function Jt(){}function $t(t,e,i){var s=new C(t);zt(i,s,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);var o=null!=(n=s.METHOD)?n:"",r=s.URI,n=(t=s.hexadecimalInteger("IV"),i=s.KEYFORMATVERSIONS,null!=(n=s.KEYFORMAT)?n:"identity");return r&&s.IV&&!t&&I.error("Invalid IV: "+s.IV),e=r?Zt.resolve(r,e):"",i=(i||"1").split("/").map(Number).filter(Number.isFinite),new Ft(o,e,n,i,t)}function te(t){return t=new C(t).decimalFloatingPoint("TIME-OFFSET"),S(t)?t:null}function ee(t,e,i){(e=e[i])&&(t[i]=e)}function ie(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):null!=e&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),S(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}function se(t,e,i,s){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=i,t.sn="initSegment",s&&(t.levelkeys=s),t.initSegment=null}function oe(t,e,i){t.levelkeys=e,(i=i.encryptedFragments).length&&i[i.length-1].levelkeys===e||!Object.keys(e).some((function(t){return e[t].isCommonEncryption}))||i.push(t)}var re="manifest",ne="level",ae="audioTrack",le="subtitleTrack",ce="main",ue="audio",de="subtitle";function he(t){switch(t.type){case ae:return ue;case le:return de;default:return ce}}function fe(t,e){return void 0!==(t=t.url)&&0!==t.indexOf("data:")||(t=e.url),t}var pe=((Qi=ge.prototype).startLoad=function(t){},Qi.stopLoad=function(){this.destroyInternalLoaders()},Qi.registerListeners=function(){var t=this.hls;t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.LEVEL_LOADING,this.onLevelLoading,this),t.on(w.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(w.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},Qi.unregisterListeners=function(){var t=this.hls;t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.LEVEL_LOADING,this.onLevelLoading,this),t.off(w.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(w.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},Qi.createInternalLoader=function(t){var e=(s=this.hls.config).pLoader,i=s.loader,s=new(e||i)(s);return this.loaders[t.type]=s},Qi.getInternalLoader=function(t){return this.loaders[t.type]},Qi.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},Qi.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},Qi.destroy=function(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()},Qi.onManifestLoading=function(t,e){e=e.url,this.variableList=null,this.load({id:null,level:0,responseType:"text",type:re,url:e,deliveryDirectives:null})},Qi.onLevelLoading=function(t,e){var i=e.id,s=e.level,o=e.url;e=e.deliveryDirectives;this.load({id:i,level:s,responseType:"text",type:ne,url:o,deliveryDirectives:e})},Qi.onAudioTrackLoading=function(t,e){var i=e.id,s=e.groupId,o=e.url;e=e.deliveryDirectives;this.load({id:i,groupId:s,level:null,responseType:"text",type:ae,url:o,deliveryDirectives:e})},Qi.onSubtitleTrackLoading=function(t,e){var i=e.id,s=e.groupId,o=e.url;e=e.deliveryDirectives;this.load({id:i,groupId:s,level:null,responseType:"text",type:le,url:o,deliveryDirectives:e})},Qi.load=function(t){var e,i=this,s=this.hls.config,o=this.getInternalLoader(t);if(o){if((a=o.context)&&a.url===t.url)return void I.trace("[playlist-loader]: playlist request ongoing");I.log("[playlist-loader]: aborting previous loader for type: "+t.type),o.abort()}a=t.type===re?s.manifestLoadPolicy.default:n({},s.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),o=this.createInternalLoader(t),null!=(s=t.deliveryDirectives)&&s.part&&(t.type===ne&&null!==t.level?e=this.hls.levels[t.level].details:t.type===ae&&null!==t.id?e=this.hls.audioTracks[t.id].details:t.type===le&&null!==t.id&&(e=this.hls.subtitleTracks[t.id].details),e)&&(s=e.partTarget,e=e.targetduration,s&&e&&(r=1e3*Math.max(3*s,.8*e),a=n({},a,{maxTimeToFirstByteMs:Math.min(r,a.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(r,a.maxTimeToFirstByteMs)})));var r=a.errorRetry||a.timeoutRetry||{},a={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:r.maxNumRetry||0,retryDelay:r.retryDelayMs||0,maxRetryDelay:r.maxRetryDelayMs||0};r={onSuccess:function(t,e,s,o){var r=i.getInternalLoader(s);i.resetInternalLoader(s.type);var n=t.data;0===n.indexOf("#EXTM3U")?(e.parsing.start=performance.now(),Zt.isMediaPlaylist(n)?i.handleTrackOrLevelPlaylist(t,e,s,o||null,r):i.handleMasterPlaylist(t,e,s,o)):i.handleManifestParsingError(t,s,new Error("no EXTM3U delimiter"),o||null,e)},onError:function(t,e,s,o){i.handleNetworkError(e,s,!1,t,o)},onTimeout:function(t,e,s){i.handleNetworkError(e,s,!0,void 0,t)}};o.load(t,a,r)},Qi.handleMasterPlaylist=function(t,e,i,s){var o,r,n,a,l,c=this.hls,u=t.data,d=fe(t,i),h=Zt.parseMasterPlaylist(u,d);h.playlistParsingError?this.handleManifestParsingError(t,i,h.playlistParsingError,s,e):(o=h.contentSteering,r=h.levels,n=h.sessionData,a=h.sessionKeys,l=h.startTimeOffset,t=h.variableList,this.variableList=t,h=void 0===(u=(i=Zt.parseMasterPlaylistMedia(u,d,h)).AUDIO)?[]:u,u=i.SUBTITLES,i=i["CLOSED-CAPTIONS"],h.length&&(h.some((function(t){return!t.url}))||!r[0].audioCodec||r[0].attrs.AUDIO||(I.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new C({}),bitrate:0,url:""}))),c.trigger(w.MANIFEST_LOADED,{levels:r,audioTracks:h,subtitles:u,captions:i,contentSteering:o,url:d,stats:e,networkDetails:s,sessionData:n,sessionKeys:a,startTimeOffset:l,variableList:t}))},Qi.handleTrackOrLevelPlaylist=function(t,e,i,s,o){var r=this.hls,n=i.id,a=i.level,l=i.type,c=fe(t,i),u=S(n)?n:0;n=S(a)?a:u,a=he(i),u=Zt.parseLevelPlaylist(t.data,c,n,a,u,this.variableList);l===re&&(l={attrs:new C({}),bitrate:0,details:u,name:"",url:c},r.trigger(w.MANIFEST_LOADED,{levels:[l],audioTracks:[],url:c,stats:e,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})),e.parsing.end=performance.now(),i.levelDetails=u,this.handlePlaylistLoaded(u,t,e,i,s,o)},Qi.handleManifestParsingError=function(t,e,i,s,o){this.hls.trigger(w.ERROR,{type:x.NETWORK_ERROR,details:E.MANIFEST_PARSING_ERROR,fatal:e.type===re,url:t.url,err:i,error:i,reason:i.message,response:t,context:e,networkDetails:s,stats:o})},Qi.handleNetworkError=function(t,e,i,o,r){void 0===i&&(i=!1);var n="A network "+(i?"timeout":"error"+(o?" (status "+o.code+")":""))+" occurred while loading "+t.type;t.type===ne?n+=": "+t.level+" id: "+t.id:t.type!==ae&&t.type!==le||(n+=" id: "+t.id+' group-id: "'+t.groupId+'"');var a=new Error(n);I.warn("[playlist-loader]: "+n);var l=E.UNKNOWN,c=!1;n=this.getInternalLoader(t);switch(t.type){case re:l=i?E.MANIFEST_LOAD_TIMEOUT:E.MANIFEST_LOAD_ERROR,c=!0;break;case ne:l=i?E.LEVEL_LOAD_TIMEOUT:E.LEVEL_LOAD_ERROR,c=!1;break;case ae:l=i?E.AUDIO_TRACK_LOAD_TIMEOUT:E.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case le:l=i?E.SUBTITLE_TRACK_LOAD_TIMEOUT:E.SUBTITLE_LOAD_ERROR,c=!1}n&&this.resetInternalLoader(t.type),r={type:x.NETWORK_ERROR,details:l,fatal:c,url:t.url,loader:n,context:t,error:a,networkDetails:e,stats:r},o&&(t=(null==e?void 0:e.url)||t.url,r.response=s({url:t,data:void 0},o)),this.hls.trigger(w.ERROR,r)},Qi.handlePlaylistLoaded=function(t,e,i,s,o,r){var n=this.hls,a=s.type,l=s.level,c=s.id,u=s.groupId,d=s.deliveryDirectives,h=fe(e,s),f=he(s),p="number"==typeof s.level&&f===ce?l:void 0;if(t.fragments.length)if(t.targetduration||(t.playlistParsingError=new Error("Missing Target Duration")),l=t.playlistParsingError)n.trigger(w.ERROR,{type:x.NETWORK_ERROR,details:E.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:l,reason:l.message,response:e,context:s,level:p,parent:f,networkDetails:o,stats:i});else switch(t.live&&r&&(r.getCacheAge&&(t.ageHeader=r.getCacheAge()||0),r.getCacheAge&&!isNaN(t.ageHeader)||(t.ageHeader=0)),a){case re:case ne:n.trigger(w.LEVEL_LOADED,{details:t,level:p||0,id:c||0,stats:i,networkDetails:o,deliveryDirectives:d});break;case ae:n.trigger(w.AUDIO_TRACK_LOADED,{details:t,id:c||0,groupId:u||"",stats:i,networkDetails:o,deliveryDirectives:d});break;case le:n.trigger(w.SUBTITLE_TRACK_LOADED,{details:t,id:c||0,groupId:u||"",stats:i,networkDetails:o,deliveryDirectives:d})}else a=new Error("No Segments found in Playlist"),n.trigger(w.ERROR,{type:x.NETWORK_ERROR,details:E.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:a,reason:a.message,response:e,context:s,level:p,parent:f,networkDetails:o,stats:i})},ge);function ge(t){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=t,this.registerListeners()}function ve(t,e){var i;try{i=new Event("addtrack")}catch(t){(i=document.createEvent("Event")).initEvent("addtrack",!1,!1)}i.track=t,e.dispatchEvent(i)}function me(t,e){var i=t.mode;if("disabled"===i&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(i){I.debug("[texttrack-utils]: "+i);try{var s=new self.TextTrackCue(e.startTime,e.endTime,e.text);s.id=e.id,t.addCue(s)}catch(t){I.debug("[texttrack-utils]: Legacy TextTrackCue fallback failed: "+t)}}"disabled"===i&&(t.mode=i)}function ye(t){var e=t.mode;if("disabled"===e&&(t.mode="hidden"),t.cues)for(var i=t.cues.length;i--;)t.removeCue(t.cues[i]);"disabled"===e&&(t.mode=e)}function be(t,e,i,s){var o=t.mode;if("disabled"===o&&(t.mode="hidden"),t.cues&&0<t.cues.length)for(var r=function(t,e,i){var s=[],o=function(t,e){if(e<t[0].startTime)return 0;var i=t.length-1;if(e>t[i].endTime)return-1;for(var s=0,o=i;s<=o;){var r=Math.floor((o+s)/2);if(e<t[r].startTime)o=r-1;else{if(!(e>t[r].startTime&&s<i))return r;s=r+1}}return t[s].startTime-e<e-t[o].startTime?s:o}(t,e);if(-1<o)for(var r=o,n=t.length;r<n;r++){var a=t[r];if(a.startTime>=e&&a.endTime<=i)s.push(a);else if(a.startTime>i)return s}return s}(t.cues,e,i),n=0;n<r.length;n++)s&&!s(r[n])||t.removeCue(r[n]);"disabled"===o&&(t.mode=o)}var Te="org.id3",Se="https://aomedia.org/emsg/ID3";function we(){if("undefined"!=typeof self)return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var xe=function(){var t=we();try{new t(0,Number.POSITIVE_INFINITY,"")}catch(t){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function Ee(t,e){return t.getTime()/1e3-e}var _e=((Go=Me.prototype).destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},Go._registerListeners=function(){var t=this.hls;t.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(w.LEVEL_UPDATED,this.onLevelUpdated,this)},Go._unregisterListeners=function(){var t=this.hls;t.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(w.LEVEL_UPDATED,this.onLevelUpdated,this)},Go.onMediaAttached=function(t,e){this.media=e.media},Go.onMediaDetaching=function(){this.id3Track&&(ye(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},Go.onManifestLoading=function(){this.dateRangeCuesAppended={}},Go.createTrack=function(t){return(t=this.getID3Track(t.textTracks)).mode="hidden",t},Go.getID3Track=function(t){if(this.media){for(var e=0;e<t.length;e++){var i=t[e];if("metadata"===i.kind&&"id3"===i.label)return ve(i,this.media),i}return this.media.addTextTrack("metadata","id3")}},Go.onFragParsingMetadata=function(t,e){if(this.media){var i=this.hls.config,s=i.enableEmsgMetadataCues,o=i.enableID3MetadataCues;if(s||o){var r=e.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var n=we(),a=0;a<r.length;a++){var l=r[a].type;if((l!==Se||s)&&o){var c=dt(r[a].data);if(c){var u=r[a].pts,d=u+r[a].duration;xe<d&&(d=xe),d-u<=0&&(d=u+.25);for(var h=0;h<c.length;h++){var f,p=c[h];ut(p)||(this.updateId3CueEnds(u,l),(f=new n(u,d,"")).value=p,l&&(f.type=l),this.id3Track.addCue(f))}}}}}}},Go.updateId3CueEnds=function(t,e){var i,s=null==(i=this.id3Track)?void 0:i.cues;if(s)for(var o=s.length;o--;){var r=s[o];r.type===e&&r.startTime<t&&r.endTime===xe&&(r.endTime=t)}},Go.onBufferFlushing=function(t,e){var i,s,o=e.startOffset,r=e.endOffset,n=e.type,a=this.id3Track;(e=this.hls)&&(e=e.config,i=e.enableEmsgMetadataCues,s=e.enableID3MetadataCues,a&&(i||s)&&be(a,o,r,"audio"===n?function(t){return t.type===Te&&s}:"video"===n?function(t){return t.type===Se&&i}:function(t){return t.type===Te&&s||t.type===Se&&i}))},Go.onLevelUpdated=function(t,e){var i=this;e=e.details;if(this.media&&e.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var s=this.dateRangeCuesAppended,o=this.id3Track,r=e.dateRanges,n=Object.keys(r);if(o)for(var a=Object.keys(s).filter((function(t){return!n.includes(t)})),l=a.length;l--;)!function(){var t=a[l];Object.keys(s[t].cues).forEach((function(e){o.removeCue(s[t].cues[e])})),delete s[t]}();if(e=e.fragments[e.fragments.length-1],0!==n.length&&S(null==e?void 0:e.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var c=e.programDateTime/1e3-e.start,u=we(),d=0;d<n.length;d++)!function(){var t=n[d],e=r[t],o=s[t],a=(null==o?void 0:o.cues)||{},l=(null==o?void 0:o.durationKnown)||!1,h=Ee(e.startDate,c),f=xe,p=e.endDate;p?(f=Ee(p,c),l=!0):!e.endOnNext||l||(p=n.reduce((function(t,i){var s=r[i];return s.class===e.class&&s.id!==i&&s.startDate>e.startDate&&t.push(s),t}),[]).sort((function(t,e){return t.startDate.getTime()-e.startDate.getTime()}))[0])&&(f=Ee(p.startDate,c),l=!0);for(var g,v=Object.keys(e.attr),m=0;m<v.length;m++){var y,b,T=v[m];"ID"!==T&&"CLASS"!==T&&"START-DATE"!==T&&"DURATION"!==T&&"END-DATE"!==T&&"END-ON-NEXT"!==T&&((b=a[T])?l&&!o.durationKnown&&(b.endTime=f):(y=e.attr[T],b=new u(h,f,""),"SCTE35-OUT"!==(g=T)&&"SCTE35-IN"!==g||(y=Uint8Array.from(y.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer),b.value={key:T,data:y},b.type="com.apple.quicktime.HLS",b.id=t,i.id3Track.addCue(b),a[T]=b))}s[t]={cues:a,dateRange:e,durationKnown:l}}()}}},Me),ke=(($i=Ce.prototype).destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},$i.registerListeners=function(){this.hls.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(w.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(w.ERROR,this.onError,this)},$i.unregisterListeners=function(){this.hls.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(w.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(w.ERROR,this.onError,this)},$i.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},$i.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},$i.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},$i.onLevelUpdated=function(t,e){e=e.details,(this.levelDetails=e).advanced&&this.timeupdate(),!e.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},$i.onError=function(t,e){e.details===E.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(e=this.levelDetails)&&e.live&&I.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},$i.timeupdate=function(){var t,e,i,s=this.media,o=this.levelDetails;s&&o&&(this.currentTime=s.currentTime,null!==(i=this.computeLatency())&&(this._latency=i,t=(e=this.config).lowLatencyMode,e=e.maxLiveSyncPlaybackRate,!t||1===e||null!==(t=this.targetLatency)&&(t=(i-=t)<Math.min(this.maxLatency,t+o.targetduration),o.live&&t&&.05<i&&1<this.forwardBufferLength?(e=Math.min(2,Math.max(1,e)),i=Math.round(2/(1+Math.exp(-.75*i-this.edgeStalled))*20)/20,s.playbackRate=Math.min(e,Math.max(1,i))):1!==s.playbackRate&&0!==s.playbackRate&&(s.playbackRate=1))))},$i.estimateLiveEdge=function(){var t=this.levelDetails;return null===t?null:t.edge+t.age},$i.computeLatency=function(){var t=this.estimateLiveEdge();return null===t?null:t-this.currentTime},r(Ce,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var t=this.config,e=this.levelDetails;return void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:e?t.liveMaxLatencyDurationCount*e.targetduration:0}},{key:"targetLatency",get:function(){if(null===(t=this.levelDetails))return null;var t,e,i=t.holdBack,s=t.partHoldBack,o=t.targetduration,r=(e=this.config).liveSyncDuration,n=e.liveSyncDurationCount;i=(t=e.lowLatencyMode)&&s||i;return((e=this.hls.userConfig).liveSyncDuration||e.liveSyncDurationCount||0===i)&&(i=void 0!==r?r:n*o),i+Math.min(+this.stallCount,o)}},{key:"liveSyncPosition",get:function(){var t=this.estimateLiveEdge(),e=this.targetLatency,i=this.levelDetails;if(null===t||null===e||null===i)return null;var s=i.edge;t=t-e-this.edgeStalled,e=s-i.totalduration,i=s-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(e,t),i)}},{key:"drift",get:function(){var t=this.levelDetails;return null===t?1:t.drift}},{key:"edgeStalled",get:function(){var t=this.levelDetails;if(null===t)return 0;var e=3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration);return Math.max(t.age-e,0)}},{key:"forwardBufferLength",get:function(){var t=this.media,e=this.levelDetails;if(!t||!e)return 0;var i=t.buffered.length;return(i?t.buffered.end(i-1):e.edge)-this.currentTime}}]),Ce),Pe=["NONE","TYPE-0","TYPE-1",null],Re=(Le.prototype.addDirectives=function(t){return t=new self.URL(t),void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href},Le),Ie=(Ae.prototype.addFallback=function(t){this.url.push(t.url),this._attrs.push(t.attrs)},r(Ae,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"attrs",get:function(){return this._attrs[this._urlId]}},{key:"pathwayId",get:function(){return this.attrs["PATHWAY-ID"]||"."}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(t){t%=this.url.length,this._urlId!==t&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=t)}},{key:"audioGroupId",get:function(){var t;return null==(t=this.audioGroupIds)?void 0:t[this.urlId]}},{key:"textGroupId",get:function(){var t;return null==(t=this.textGroupIds)?void 0:t[this.urlId]}}]),Ae);function Ae(t){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[t.url],this._attrs=[t.attrs],this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.unknownCodecs=t.unknownCodecs,this.codecSet=[t.videoCodec,t.audioCodec].filter((function(t){return t})).join(",").replace(/\.[^.,]+/g,"")}function Le(t,e,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=e,this.skip=i}function Ce(t){var e=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return e.timeupdate()},this.hls=t,this.config=t.config,this.registerListeners()}function Me(t){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=t,this._registerListeners()}function De(t,e){var i,s=e.startPTS;S(s)?(i=0,(s=e.sn>t.sn?(i=s-t.start,t):(i=t.start-s,e)).duration!==i&&(s.duration=i)):e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration:e.start=Math.max(t.start-e.duration,0)}function Oe(t,e,i,s,o,r){s-i<=0&&(I.warn("Fragment should have a positive duration",e),s=i+e.duration,r=o+e.duration);var n,a=i,l=s,c=e.startPTS,u=e.endPTS;S(c)&&(n=Math.abs(c-i),S(e.deltaPTS)?e.deltaPTS=Math.max(n,e.deltaPTS):e.deltaPTS=n,a=Math.max(i,c),i=Math.min(i,c),o=Math.min(o,e.startDTS),l=Math.min(s,u),s=Math.max(s,u),r=Math.max(r,e.endDTS)),u=i-e.start,0!==e.start&&(e.start=i),e.duration=s-e.start,e.startPTS=i,e.maxStartPTS=a,e.startDTS=o,e.endPTS=s,e.minEndPTS=l,e.endDTS=r;var d;r=e.sn;if(!t||r<t.startSN||r>t.endSN)return 0;r-=t.startSN;var h=t.fragments;for(h[r]=e,d=r;0<d;d--)De(h[d],h[d-1]);for(d=r;d<h.length-1;d++)De(h[d],h[d+1]);return t.fragmentHint&&De(h[h.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,u}function Fe(t,e){var i=e.startSN+e.skippedSegments-t.startSN;t=t.fragments;i<0||i>=t.length||Ne(e,t[i].start)}function Ne(t,e){if(e){for(var i=t.fragments,s=t.skippedSegments;s<i.length;s++)i[s].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}function Ue(t,e,i){return null!=t&&t.details?ze(null==(t=t.details)?void 0:t.partList,e,i):null}function ze(t,e,i){if(t)for(var s=t.length;s--;){var o=t[s];if(o.index===i&&o.fragment.sn===e)return o}return null}function We(t){switch(t.details){case E.FRAG_LOAD_TIMEOUT:case E.KEY_LOAD_TIMEOUT:case E.LEVEL_LOAD_TIMEOUT:case E.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function He(t,e){return e=We(e),t.default[(e?"timeout":"error")+"Retry"]}function Ve(t,e){return e="linear"===t.backoff?1:Math.pow(2,e),Math.min(e*t.retryDelayMs,t.maxRetryDelayMs)}function Be(t){return s(s({},t),{errorRetry:null,timeoutRetry:null})}function je(t,e,i,s){return t&&e<t.maxNumRetry&&(0===s&&!1===navigator.onLine||s&&(s<400||499<s)||i)}var Ge=function(t,e){for(var i,s,o=0,r=t.length-1;o<=r;){var n=e(s=t[i=(o+r)/2|0]);if(0<n)o=1+i;else{if(!(n<0))return s;r=i-1}}return null};function Qe(t,e,i,s){void 0===i&&(i=0),void 0===s&&(s=0);var o=null;return t?o=e[t.sn-e[0].sn+1]||null:0===i&&0===e[0].start&&(o=e[0]),o&&0===Xe(i,s,o)||!(s=Ge(e,Xe.bind(null,i,s)))||s===t&&o?o:s}function Xe(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),i.start<=t&&i.start+i.duration>t?0:(e=Math.min(e,i.duration+(i.deltaPTS||0)),i.start+i.duration-e<=t?1:i.start-e>t&&i.start?-1:0)}var qe,Ke=((cs=$e.prototype).registerListeners=function(){var t=this.hls;t.on(w.ERROR,this.onError,this),t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.LEVEL_UPDATED,this.onLevelUpdated,this)},cs.unregisterListeners=function(){var t=this.hls;t&&(t.off(w.ERROR,this.onError,this),t.off(w.ERROR,this.onErrorOut,this),t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.LEVEL_UPDATED,this.onLevelUpdated,this))},cs.destroy=function(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}},cs.startLoad=function(t){this.playlistError=0},cs.stopLoad=function(){},cs.getVariantLevelIndex=function(t){return(null==t?void 0:t.type)===ce?t.level:this.hls.loadLevel},cs.onManifestLoading=function(){this.playlistError=0,this.penalizedRenditions={}},cs.onLevelUpdated=function(){this.playlistError=0},cs.onError=function(t,e){var i;if(!e.fatal){var s=this.hls,o=e.context;switch(e.details){case E.FRAG_LOAD_ERROR:case E.FRAG_LOAD_TIMEOUT:case E.KEY_LOAD_ERROR:case E.KEY_LOAD_TIMEOUT:return void(e.errorAction=this.getFragRetryOrSwitchAction(e));case E.FRAG_PARSING_ERROR:if(null!=(i=e.frag)&&i.gap)return void(e.errorAction={action:0,flags:0});case E.FRAG_GAP:case E.FRAG_DECRYPT_ERROR:return e.errorAction=this.getFragRetryOrSwitchAction(e),void(e.errorAction.action=2);case E.LEVEL_EMPTY_ERROR:case E.LEVEL_PARSING_ERROR:var r,n,a=e.parent===ce?e.level:s.loadLevel;return void(e.details===E.LEVEL_EMPTY_ERROR&&null!=(r=e.context)&&null!=(n=r.levelDetails)&&n.live?e.errorAction=this.getPlaylistRetryOrSwitchAction(e,a):(e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,a)));case E.LEVEL_LOAD_ERROR:case E.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==o?void 0:o.level)&&(e.errorAction=this.getPlaylistRetryOrSwitchAction(e,o.level)));case E.AUDIO_TRACK_LOAD_ERROR:case E.AUDIO_TRACK_LOAD_TIMEOUT:case E.SUBTITLE_LOAD_ERROR:case E.SUBTITLE_TRACK_LOAD_TIMEOUT:return o&&(a=s.levels[s.loadLevel])&&(o.type===ae&&o.groupId===a.audioGroupId||o.type===le&&o.groupId===a.textGroupId)?(e.errorAction=this.getPlaylistRetryOrSwitchAction(e,s.loadLevel),e.errorAction.action=2,void(e.errorAction.flags=1)):void 0;case E.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var l;return void((l=null==(l=s.levels[s.loadLevel])?void 0:l.attrs["HDCP-LEVEL"])&&(e.errorAction={action:2,flags:2,hdcpLevel:l}));case E.BUFFER_ADD_CODEC_ERROR:case E.REMUX_ALLOC_ERROR:return void(e.errorAction=this.getLevelSwitchAction(e,null!=(l=e.level)?l:s.loadLevel));case E.INTERNAL_EXCEPTION:case E.BUFFER_APPENDING_ERROR:case E.BUFFER_APPEND_ERROR:case E.BUFFER_FULL_ERROR:case E.LEVEL_SWITCH_ERROR:case E.BUFFER_STALLED_ERROR:case E.BUFFER_SEEK_OVER_HOLE:case E.BUFFER_NUDGE_ON_STALL:return void(e.errorAction={action:0,flags:0})}if(e.type===x.KEY_SYSTEM_ERROR){var c=this.getVariantLevelIndex(e.frag);return e.levelRetry=!1,void(e.errorAction=this.getLevelSwitchAction(e,c))}}},cs.getPlaylistRetryOrSwitchAction=function(t,e){var i=He(this.hls.config.playlistLoadPolicy,t),s=this.playlistError++,o=null==(o=t.response)?void 0:o.code;return je(i,s,We(t),o)?{action:5,flags:0,retryConfig:i,retryCount:s}:(e=this.getLevelSwitchAction(t,e),i&&(e.retryConfig=i,e.retryCount=s),e)},cs.getFragRetryOrSwitchAction=function(t){var e=this.hls,i=this.getVariantLevelIndex(t.frag),s=e.levels[i],o=(r=e.config).fragLoadPolicy,r=r.keyLoadPolicy;o=He(t.details.startsWith("key")?r:o,t),e=e.levels.reduce((function(t,e){return t+e.fragmentError}),0);return s&&(t.details!==E.FRAG_GAP&&s.fragmentError++,s=null==(s=t.response)?void 0:s.code,je(o,e,We(t),s))?{action:5,flags:0,retryConfig:o,retryCount:e}:(i=this.getLevelSwitchAction(t,i),o&&(i.retryConfig=o,i.retryCount=e),i)},cs.getLevelSwitchAction=function(t,e){var i=this.hls;null==e&&(e=i.loadLevel);var s=this.hls.levels[e];if(s&&(s.loadError++,i.autoLevelEnabled)){for(var o=-1,r=i.levels,n=i.loadLevel,a=i.minAutoLevel,l=i.maxAutoLevel,c=null==(e=t.frag)?void 0:e.type,u=(e=null!=(e=t.context)?e:{}).type,d=e.groupId,h=r.length;h--;){var f=(h+n)%r.length;if(f!==n&&a<=f&&f<=l&&0===r[f].loadError){var p=r[f];if(t.details===E.FRAG_GAP&&t.frag){var g=r[f].details;if(g&&null!=(g=Qe(t.frag,g.fragments,t.frag.start))&&g.gap)continue}else{if(u===ae&&d===p.audioGroupId||u===le&&d===p.textGroupId)continue;if(c===ue&&s.audioGroupId===p.audioGroupId||c===de&&s.textGroupId===p.textGroupId)continue}o=f;break}}if(-1<o&&i.loadLevel!==o)return t.levelRetry=!0,{action:2,flags:this.playlistError=0,nextAutoLevel:o}}return{action:2,flags:1}},cs.onErrorOut=function(t,e){var i;switch(null==(i=e.errorAction)?void 0:i.action){case 0:break;case 2:this.sendAlternateToPenaltyBox(e),e.errorAction.resolved||e.details===E.FRAG_GAP||(e.fatal=!0)}e.fatal&&this.hls.stopLoad()},cs.sendAlternateToPenaltyBox=function(t){var e=this.hls,i=t.errorAction;if(i){var s=i.flags,o=i.hdcpLevel,r=i.nextAutoLevel;switch(s){case 0:this.switchLevel(t,r);break;case 1:i.resolved||(i.resolved=this.redundantFailover(t));break;case 2:o&&(e.maxHdcpLevel=Pe[Pe.indexOf(o)-1],i.resolved=!0),this.warn('Restricting playback to HDCP-LEVEL of "'+e.maxHdcpLevel+'" or lower')}i.resolved||this.switchLevel(t,r)}},cs.switchLevel=function(t,e){void 0!==e&&t.errorAction&&(this.warn("switching to level "+e+" after "+t.details),this.hls.nextAutoLevel=e,t.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)},cs.redundantFailover=function(t){var e=this,i=this.hls,s=this.penalizedRenditions,o=t.parent===ce?t.level:i.loadLevel,r=i.levels[o],n=r.url.length,a=(t.frag||r).urlId;r.urlId!==a||t.frag&&!r.details||this.penalizeRendition(r,t);for(var l=1;l<n;l++){var c=function(){var c=(a+l)%n,u=s[c];if(!u||function(t,e,i){if(3e5<performance.now()-t.lastErrorPerfMs)return 1;var s=t.details;if(e.details===E.FRAG_GAP&&s&&e.frag){var o=e.frag.start;if((o=Qe(null,s.fragments,o))&&!o.gap)return 1}return i&&t.errors.length<i.errors.length&&(t=t.errors[t.errors.length-1],s&&t.frag&&e.frag&&Math.abs(t.frag.start-e.frag.start)>3*s.targetduration)?1:void 0}(u,t,s[a]))return e.warn("Switching to Redundant Stream "+(1+c)+"/"+n+': "'+r.url[c]+'" after '+t.details),e.playlistError=0,i.levels.forEach((function(t){t.urlId=c})),i.nextLoadLevel=o,{v:!0}}();if("object"==typeof c)return c.v}return!1},cs.penalizeRendition=function(t,e){var i=this.penalizedRenditions,s=i[t.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};s.lastErrorPerfMs=performance.now(),s.errors.push(e),s.details=t.details,i[t.urlId]=s},$e),Ye=((Ks=Je.prototype).destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},Ks.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},Ks.startLoad=function(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()},Ks.stopLoad=function(){this.canLoad=!1,this.clearTimer()},Ks.switchParams=function(t,e){var i=null==e?void 0:e.renditionReports;if(i){for(var s=-1,o=0;o<i.length;o++){var r=i[o],n=void 0;try{n=new self.URL(r.URI,e.url).href}catch(t){I.warn("Could not construct new URL for Rendition Report: "+t),n=r.URI||""}if(n===t){s=o;break}n===t.substring(0,n.length)&&(s=o)}if(-1!==s){var a=i[s],l=parseInt(a["LAST-MSN"])||(null==e?void 0:e.lastPartSn),c=parseInt(a["LAST-PART"])||(null==e?void 0:e.lastPartIndex);return this.hls.config.lowLatencyMode&&(a=Math.min(e.age-e.partTarget,e.targetduration),0<=c&&a>e.partTarget&&(c+=1)),new Re(l,0<=c?c:void 0,"")}}},Ks.loadPlaylist=function(t){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())},Ks.shouldLoadPlaylist=function(t){return this.canLoad&&!!t&&!!t.url&&(!t.details||t.details.live)},Ks.shouldReloadPlaylist=function(t){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(t)},Ks.playlistLoaded=function(t,e,i){var s=this,o=e.details,r=e.stats,a=self.performance.now(),l=r.loading.first?Math.max(0,a-r.loading.first):0;if(o.advancedDateTime=Date.now()-l,o.live||null!=i&&i.live){if(o.reloaded(i),i&&this.log("live playlist "+t+" "+(o.advanced?"REFRESHED "+o.lastPartSn+"-"+o.lastPartIndex:"MISSED")),i&&0<o.fragments.length&&function(t,e){for(var i=null,s=t.fragments,o=s.length-1;0<=o;o--){var r=s[o].initSegment;if(r){i=r;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;var a,l,c,u=0;if(function(t,s){for(var o=s.skippedSegments,r=Math.max(t.startSN,s.startSN)-s.startSN,n=(t.fragmentHint?1:0)+(o?s.endSN:Math.min(t.endSN,s.endSN))-s.startSN,l=s.startSN-t.startSN,c=s.fragmentHint?s.fragments.concat(s.fragmentHint):s.fragments,d=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,h=r;h<=n;h++){var f=d[l+h],p=c[h];o&&!p&&h<o&&(p=s.fragments[h]=f),f&&p&&(f.relurl&&(u=f.cc-p.cc),S(f.startPTS)&&S(f.endPTS)&&(p.start=p.startPTS=f.startPTS,p.startDTS=f.startDTS,p.maxStartPTS=f.maxStartPTS,p.endPTS=f.endPTS,p.endDTS=f.endDTS,p.minEndPTS=f.minEndPTS,p.duration=f.endPTS-f.startPTS,p.duration&&(a=p),e.PTSKnown=e.alignedSliding=!0),p.elementaryStreams=f.elementaryStreams,p.loader=f.loader,p.stats=f.stats,p.urlId=f.urlId,f.initSegment&&(p.initSegment=f.initSegment,i=f.initSegment))}}(t,e),i&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach((function(t){t.initSegment&&t.initSegment.relurl!==(null==i?void 0:i.relurl)||(t.initSegment=i)})),e.skippedSegments)if(e.deltaUpdateFailed=e.fragments.some((function(t){return!t})),e.deltaUpdateFailed){I.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var d=e.skippedSegments;d--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}else e.canSkipDateRanges&&(e.dateRanges=(g=t.dateRanges,l=e.dateRanges,p=e.recentlyRemovedDateranges,c=n({},g),p&&p.forEach((function(t){delete c[t]})),Object.keys(l).forEach((function(t){var e=new F(l[t].attr,c[t]);e.isValid?c[t]=e:I.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(l[t].attr)+'"')})),c));var h=e.fragments;if(u){I.warn("discontinuity sliding from playlist, take drift into account");for(var f=0;f<h.length;f++)h[f].cc+=u}e.skippedSegments&&(e.startCC=e.fragments[0].cc),function(t,e){if(t&&e)for(var i=0,s=0,o=t.length;s<=o;s++){var r=t[s],n=e[s+i];r&&n&&r.index===n.index&&r.fragment.sn===n.fragment.sn?(n.elementaryStreams=r.elementaryStreams,n.stats=r.stats):i--}}(t.partList,e.partList),a?Oe(e,a,a.startPTS,a.endPTS,a.startDTS,a.endDTS):Fe(t,e),h.length&&(e.totalduration=e.edge-h[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;var p,g=e.advancedDateTime;e.advanced&&g?(p=e.edge,e.driftStart||(e.driftStartTime=g,e.driftStart=p),e.driftEndTime=g,e.driftEnd=p):(e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime)}(i,o),this.canLoad&&o.live){var c,u=void 0,d=void 0;if(o.canBlockReload&&o.endSN&&o.advanced){var h=this.hls.config.lowLatencyMode,f=o.lastPartSn,p=o.endSN,g=o.lastPartIndex;l=f===p;if(-1!==g?(u=l?p+1:f,d=l?h?0:g:g+1):u=p+1,p=(g=o.age)+o.ageHeader,0<(p=Math.min(p-o.partTarget,1.5*o.targetduration))&&(i&&p>i.tuneInGoal?(this.warn("CDN Tune-in goal increased from: "+i.tuneInGoal+" to: "+p+" with playlist age: "+o.age),p=0):(u+=i=Math.floor(p/o.targetduration),void 0!==d&&(d+=Math.round(p%o.targetduration/o.partTarget)),this.log("CDN Tune-in age: "+o.ageHeader+"s last advanced "+g.toFixed(2)+"s goal: "+p+" skip sn "+i+" to part "+d)),o.tuneInGoal=p),c=this.getDeliveryDirectives(o,e.deliveryDirectives,u,d),h||!l)return void this.loadPlaylist(c)}else o.canBlockReload&&(c=this.getDeliveryDirectives(o,e.deliveryDirectives,u,d));d=(d=this.hls.mainForwardBufferInfo)?d.end-d.len:0,d=function(t){void 0===t&&(t=1/0);var e,i=1e3*o.targetduration;return o.updated?(e=o.fragments).length&&t<4*i&&(e=1e3*e[e.length-1].duration)<i&&(i=e):i/=2,Math.round(i)}(1e3*(o.edge-d)),o.updated&&a>this.requestScheduled+d&&(this.requestScheduled=r.loading.start),void 0!==u&&o.canBlockReload?this.requestScheduled=r.loading.first+d-(1e3*o.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+d<a?this.requestScheduled=a:this.requestScheduled-a<=0&&(this.requestScheduled+=d),a=this.requestScheduled-a,a=Math.max(0,a),this.log("reload live playlist "+t+" in "+Math.round(a)+" ms"),this.timer=self.setTimeout((function(){return s.loadPlaylist(c)}),a)}}else this.clearTimer()},Ks.getDeliveryDirectives=function(t,e,i,s){var o,r,n=(o=t.canSkipUntil,n=t.canSkipDateRanges,r=t.endSN,o&&(void 0!==i?i-r:0)<o?n?"v2":"YES":"");return null!=e&&e.skip&&t.deltaUpdateFailed&&(i=e.msn,s=e.part,n=""),new Re(i,s,n)},Ks.checkRetry=function(t){var e,i=this,s=t.details,o=We(t),r=t.errorAction,n=(l=r||{}).action,a=void 0===(a=l.retryCount)?0:a,l=l.retryConfig;if(n=!!r&&!!l&&(5===n||!r.resolved&&2===n)){if(this.requestScheduled=-1,a>=l.maxNumRetry)return!1;o&&null!=(e=t.context)&&e.deliveryDirectives?(this.warn("Retrying playlist loading "+(a+1)+"/"+l.maxNumRetry+' after "'+s+'" without delivery-directives'),this.loadPlaylist()):(e=Ve(l,a),this.timer=self.setTimeout((function(){return i.loadPlaylist()}),e),this.warn("Retrying playlist loading "+(a+1)+"/"+l.maxNumRetry+' after "'+s+'" in '+e+"ms")),t.levelRetry=!0,r.resolved=!0}return n},Je),Ze=function(t){function e(e,i){return(e=t.call(this,e,"[level-controller]")||this)._levels=[],e._firstLevel=-1,e._startLevel=void 0,e.currentLevel=null,e.currentLevelIndex=-1,e.manualLevelIndex=-1,e.steering=void 0,e.onParsedComplete=void 0,e.steering=i,e._registerListeners(),e}a(e,t);var i=e.prototype;return i._registerListeners=function(){var t=this.hls;t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(w.LEVEL_LOADED,this.onLevelLoaded,this),t.on(w.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(w.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(w.FRAG_LOADED,this.onFragLoaded,this),t.on(w.ERROR,this.onError,this)},i._unregisterListeners=function(){var t=this.hls;t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(w.LEVEL_LOADED,this.onLevelLoaded,this),t.off(w.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(w.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(w.FRAG_LOADED,this.onFragLoaded,this),t.off(w.ERROR,this.onError,this)},i.destroy=function(){this._unregisterListeners(),this.steering=null,this.resetLevels(),t.prototype.destroy.call(this)},i.startLoad=function(){this._levels.forEach((function(t){t.loadError=0,t.fragmentError=0})),t.prototype.startLoad.call(this)},i.resetLevels=function(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]},i.onManifestLoading=function(t,e){this.resetLevels()},i.onManifestLoaded=function(t,e){var i,s=[],o={};e.levels.forEach((function(t){var e=t.attrs;-1===(null==(c=t.audioCodec)?void 0:c.indexOf("mp4a.40.34"))||(qe=qe||/chrome|firefox/i.test(navigator.userAgent))&&(t.audioCodec=void 0);var r=e.AUDIO,n=e.CODECS,a=e["FRAME-RATE"],l=e["PATHWAY-ID"],c=e.RESOLUTION;e=e.SUBTITLES,n=(l||".")+"-"+t.bitrate+"-"+c+"-"+a+"-"+n;(i=o[n])?i.addFallback(t):(i=new Ie(t),o[n]=i,s.push(i)),ti(i,"audio",r),ti(i,"text",e)})),this.filterAndSortMediaOptions(s,e)},i.filterAndSortMediaOptions=function(t,e){var i=this,s=[],o=[],r=!1,n=!1,a=!1,l=t.filter((function(t){var e=t.audioCodec,i=t.videoCodec,s=t.width,o=t.height;t=t.unknownCodecs;return r=r||!(!s||!o),n=n||!!i,a=a||!!e,!(null!=t&&t.length)&&(!e||Gt(e,"audio"))&&(!i||Gt(i,"video"))}));if((r||n)&&a&&(l=l.filter((function(t){var e=t.videoCodec,i=t.width;t=t.height;return!!e||!(!i||!t)}))),0!==l.length){e.audioTracks&&ei(s=e.audioTracks.filter((function(t){return!t.audioCodec||Gt(t.audioCodec,"audio")}))),e.subtitles&&ei(o=e.subtitles);var c=l.slice(0);l.sort((function(t,e){return t.attrs["HDCP-LEVEL"]!==e.attrs["HDCP-LEVEL"]?(t.attrs["HDCP-LEVEL"]||"")>(e.attrs["HDCP-LEVEL"]||"")?1:-1:t.bitrate!==e.bitrate?t.bitrate-e.bitrate:t.attrs["FRAME-RATE"]!==e.attrs["FRAME-RATE"]?t.attrs.decimalFloatingPoint("FRAME-RATE")-e.attrs.decimalFloatingPoint("FRAME-RATE"):t.attrs.SCORE!==e.attrs.SCORE?t.attrs.decimalFloatingPoint("SCORE")-e.attrs.decimalFloatingPoint("SCORE"):r&&t.height!==e.height?t.height-e.height:0}));var u=c[0];if(this.steering&&(l=this.steering.filterParsedLevels(l)).length!==c.length)for(var d=0;d<c.length;d++)if(c[d].pathwayId===l[0].pathwayId){u=c[d];break}this._levels=l;for(var h=0;h<l.length;h++)if(l[h]===u){this._firstLevel=h,this.log("manifest loaded, "+l.length+" level(s) found, first bitrate: "+u.bitrate);break}t=a&&!n,s={levels:l,audioTracks:s,subtitleTracks:o,sessionData:e.sessionData,sessionKeys:e.sessionKeys,firstLevel:this._firstLevel,stats:e.stats,audio:a,video:n,altAudio:!t&&s.some((function(t){return!!t.url}))},this.hls.trigger(w.MANIFEST_PARSED,s),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else Promise.resolve().then((function(){var t;i.hls&&(t=new Error("no level with compatible codecs found in manifest"),i.hls.trigger(w.ERROR,{type:x.MEDIA_ERROR,details:E.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:e.url,error:t,reason:t.message}))}))},i.onError=function(t,e){!e.fatal&&e.context&&e.context.type===ne&&e.context.level===this.level&&this.checkRetry(e)},i.onFragLoaded=function(t,e){void 0===(e=e.frag)||e.type!==ce||void 0!==(e=this._levels[e.level])&&(e.loadError=0)},i.onLevelLoaded=function(t,e){var i,s=e.level,o=e.details,r=this._levels[s];if(!r)return this.warn("Invalid level index "+s),void(null!=(i=e.deliveryDirectives)&&i.skip&&(o.deltaUpdateFailed=!0));s===this.currentLevelIndex?(0===r.fragmentError&&(r.loadError=0),this.playlistLoaded(s,e,r.details)):null!=(e=e.deliveryDirectives)&&e.skip&&(o.deltaUpdateFailed=!0)},i.onAudioTrackSwitched=function(t,e){var i=this.currentLevel;if(i){var s=this.hls.audioTracks[e.id].groupId;if(i.audioGroupIds&&i.audioGroupId!==s){for(var o=-1,r=0;r<i.audioGroupIds.length;r++)if(i.audioGroupIds[r]===s){o=r;break}-1!==o&&o!==i.urlId&&(i.urlId=o,this.canLoad&&this.startLoad())}}},i.loadPlaylist=function(e){t.prototype.loadPlaylist.call(this);var i=this.currentLevelIndex,s=this.currentLevel;if(s&&this.shouldLoadPlaylist(s)){var o=s.urlId,r=s.uri;if(e)try{r=e.addDirectives(r)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}var n=s.attrs["PATHWAY-ID"];this.log("Loading level index "+i+(void 0!==(null==e?void 0:e.msn)?" at sn "+e.msn+" part "+e.part:"")+" with"+(n?" Pathway "+n:"")+" URI "+(o+1)+"/"+s.url.length+" "+r),this.clearTimer(),this.hls.trigger(w.LEVEL_LOADING,{url:r,level:i,id:o,deliveryDirectives:e||null})}},i.removeLevel=function(t,e){function i(t,i){return i!==e}var s=this,o=this._levels.filter((function(o,r){return!(r===t&&(1<o.url.length&&void 0!==e?(o.url=o.url.filter(i),o.audioGroupIds&&(o.audioGroupIds=o.audioGroupIds.filter(i)),o.textGroupIds&&(o.textGroupIds=o.textGroupIds.filter(i)),o.urlId=0):(s.steering&&s.steering.removeLevel(o),1)))}));this.hls.trigger(w.LEVELS_UPDATED,{levels:o})},i.onLevelsUpdated=function(t,e){(e=e.levels).forEach((function(t,e){null!=(t=t.details)&&t.fragments&&t.fragments.forEach((function(t){t.level=e}))})),this._levels=e},r(e,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){if(0!==(r=this._levels).length){if(t<0||t>=r.length){var e=new Error("invalid level idx"),i=t<0;if(this.hls.trigger(w.ERROR,{type:x.OTHER_ERROR,details:E.LEVEL_SWITCH_ERROR,level:t,fatal:i,error:e,reason:e.message}),i)return;t=Math.min(t,r.length-1)}var s=this.currentLevelIndex,o=this.currentLevel,r=(e=o?o.attrs["PATHWAY-ID"]:void 0,(i=r[t]).attrs["PATHWAY-ID"]);this.currentLevelIndex=t,this.currentLevel=i,s===t&&i.details&&o&&e===r||(this.log("Switching to level "+t+(r?" with Pathway "+r:"")+" from level "+s+(e?" with Pathway "+e:"")),delete(t=n({},i,{level:t,maxBitrate:i.maxBitrate,attrs:i.attrs,uri:i.uri,urlId:i.urlId}))._attrs,delete t._urlId,this.hls.trigger(w.LEVEL_SWITCHING,t),(t=i.details)&&!t.live||(o=this.switchParams(i.uri,null==o?void 0:o.details),this.loadPlaylist(o)))}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0!==this._startLevel)return this._startLevel;var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),e}(Ye);function Je(t,e){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=I.log.bind(I,e+":"),this.warn=I.warn.bind(I,e+":"),this.hls=t}function $e(t){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=t,this.log=I.log.bind(I,"[info]:"),this.warn=I.warn.bind(I,"[warning]:"),this.error=I.error.bind(I,"[error]:"),this.registerListeners()}function ti(t,e,i){i&&("audio"===e?(t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds[t.url.length-1]=i):"text"===e&&(t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds[t.url.length-1]=i))}function ei(t){var e={};t.forEach((function(t){var i=t.groupId||"";t.id=e[i]=e[i]||0,e[i]++}))}var ii="NOT_LOADED",si="APPENDING",oi="PARTIAL",ri="OK",ni=((ds=ai.prototype)._registerListeners=function(){var t=this.hls;t.on(w.BUFFER_APPENDED,this.onBufferAppended,this),t.on(w.FRAG_BUFFERED,this.onFragBuffered,this),t.on(w.FRAG_LOADED,this.onFragLoaded,this)},ds._unregisterListeners=function(){var t=this.hls;t.off(w.BUFFER_APPENDED,this.onBufferAppended,this),t.off(w.FRAG_BUFFERED,this.onFragBuffered,this),t.off(w.FRAG_LOADED,this.onFragLoaded,this)},ds.destroy=function(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null},ds.getAppendedFrag=function(t,e){var i=this.activePartLists[e];if(i)for(var s=i.length;s--;){var o=i[s];if(!o)break;var r=o.end;if(o.start<=t&&null!==r&&t<=r)return o}return this.getBufferedFrag(t,e)},ds.getBufferedFrag=function(t,e){for(var i=this.fragments,s=Object.keys(i),o=s.length;o--;){var r=i[s[o]];if((null==r?void 0:r.body.type)===e&&r.buffered&&(r=r.body).start<=t&&t<=r.end)return r}return null},ds.detectEvictedFragments=function(t,e,i,s){var o=this;this.timeRanges&&(this.timeRanges[t]=e);var r=(null==s?void 0:s.fragment.sn)||-1;Object.keys(this.fragments).forEach((function(s){var n=o.fragments[s];!n||r>=n.body.sn||(n.buffered||n.loaded?(s=n.range[t])&&s.time.some((function(t){return(t=!o.isTimeBuffered(t.startPTS,t.endPTS,e))&&o.removeFragment(n.body),t})):n.body.type===i&&o.removeFragment(n.body))}))},ds.detectPartialFragments=function(t){var e,i,s=this,o=this.timeRanges,r=t.frag,n=t.part;o&&"initSegment"!==r.sn&&(t=ci(r),!(e=this.fragments[t])||e.buffered&&r.gap||(i=!r.relurl,Object.keys(o).forEach((function(t){var a,l=r.elementaryStreams[t];l&&(a=o[t],l=i||!0===l.partial,e.range[t]=s.getBufferedTimes(r,n,l,a))})),e.loaded=null,Object.keys(e.range).length?(e.buffered=!0,e.body.endList&&(this.endListFragments[e.body.type]=e),li(e)||this.removeParts(r.sn-1,r.type)):this.removeFragment(e.body)))},ds.removeParts=function(t,e){var i=this.activePartLists[e];i&&(this.activePartLists[e]=i.filter((function(e){return e.fragment.sn>=t})))},ds.fragBuffered=function(t,e){var i=ci(t),s=this.fragments[i];!s&&e&&(s=this.fragments[i]={body:t,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},t.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,s.buffered=!0)},ds.getBufferedTimes=function(t,e,i,s){for(var o={time:[],partial:i},r=t.start,n=t.end,a=t.minEndPTS||n,l=t.maxStartPTS||r,c=0;c<s.length;c++){var u=s.start(c)-this.bufferPadding,d=s.end(c)+this.bufferPadding;if(u<=l&&a<=d){o.time.push({startPTS:Math.max(r,s.start(c)),endPTS:Math.min(n,s.end(c))});break}if(r<d&&u<n)o.partial=!0,o.time.push({startPTS:Math.max(r,s.start(c)),endPTS:Math.min(n,s.end(c))});else if(n<=u)break}return o},ds.getPartialFragment=function(t){var e,i,s=null,o=0,r=this.bufferPadding,n=this.fragments;return Object.keys(n).forEach((function(a){(a=n[a])&&li(a)&&(e=a.body.start-r,i=a.body.end+r,e<=t&&t<=i&&(i=Math.min(t-e,i-t),o<=i&&(s=a.body,o=i)))})),s},ds.isEndListAppended=function(t){return void 0!==(t=this.endListFragments[t])&&(t.buffered||li(t))},ds.getState=function(t){return t=ci(t),(t=this.fragments[t])?t.buffered?li(t)?oi:ri:si:ii},ds.isTimeBuffered=function(t,e,i){for(var s,o,r=0;r<i.length;r++){if(s=i.start(r)-this.bufferPadding,o=i.end(r)+this.bufferPadding,s<=t&&e<=o)return!0;if(e<=s)return!1}return!1},ds.onFragLoaded=function(t,e){var i=e.frag,s=e.part;"initSegment"===i.sn||i.bitrateTest||(s=s?null:e,e=ci(i),this.fragments[e]={body:i,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)})},ds.onBufferAppended=function(t,e){var i,s=this,o=e.frag,r=e.part,n=e.timeRanges;"initSegment"!==o.sn&&(i=o.type,r&&((o=this.activePartLists[i])||(this.activePartLists[i]=o=[]),o.push(r)),this.timeRanges=n,Object.keys(n).forEach((function(t){var e=n[t];s.detectEvictedFragments(t,e,i,r)})))},ds.onFragBuffered=function(t,e){this.detectPartialFragments(e)},ds.hasFragment=function(t){return t=ci(t),!!this.fragments[t]},ds.hasParts=function(t){return!(null==(t=this.activePartLists[t])||!t.length)},ds.removeFragmentsInRange=function(t,e,i,s,o){var r=this;s&&!this.hasGaps||Object.keys(this.fragments).forEach((function(n){var a=r.fragments[n];a&&((n=a.body).type!==i||s&&!n.gap||n.start<e&&n.end>t&&(a.buffered||o)&&r.removeFragment(n))}))},ds.removeFragment=function(t){var e=ci(t);t.stats.loaded=0,t.clearElementaryStreamInfo();var i,s=this.activePartLists[t.type];s&&(i=t.sn,this.activePartLists[t.type]=s.filter((function(t){return t.fragment.sn!==i}))),delete this.fragments[e],t.endList&&delete this.endListFragments[t.type]},ds.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1},ai);function ai(t){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=t,this._registerListeners()}function li(t){var e;return t.buffered&&(t.body.gap||(null==(e=t.range.video)?void 0:e.partial)||(null==(e=t.range.audio)?void 0:e.partial)||(null==(t=t.range.audiovideo)?void 0:t.partial))}function ci(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn}var ui=Math.pow(2,17),di=((Fo=hi.prototype).destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},Fo.abort=function(){this.loader&&this.loader.abort()},Fo.load=function(t,e){var i=this,o=t.url;if(!o)return Promise.reject(new mi({type:x.NETWORK_ERROR,details:E.FRAG_LOAD_ERROR,fatal:!1,frag:t,error:new Error("Fragment does not have a "+(o?"part list":"url")),networkDetails:null}));this.abort();var r=this.config,n=r.fLoader,a=r.loader;return new Promise((function(l,c){if(i.loader&&i.loader.destroy(),t.gap){if(t.tagList.some((function(t){return"GAP"===t[0]})))return void c(pi(t));t.gap=!1}var u=i.loader=t.loader=new(n||a)(r),d=fi(t),h=Be(r.fragLoadPolicy.default),f={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===t.sn?1/0:ui};t.stats=u.stats,u.load(d,f,{onSuccess:function(e,s,o,r){i.resetLoader(t,u),e=e.data,o.resetIV&&t.decryptdata&&(t.decryptdata.iv=new Uint8Array(e.slice(0,16)),e=e.slice(16)),l({frag:t,part:null,payload:e,networkDetails:r})},onError:function(e,r,n,a){i.resetLoader(t,u),c(new mi({type:x.NETWORK_ERROR,details:E.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:s({url:o,data:void 0},e),error:new Error("HTTP Error "+e.code+" "+e.text),networkDetails:n,stats:a}))},onAbort:function(e,s,o){i.resetLoader(t,u),c(new mi({type:x.NETWORK_ERROR,details:E.INTERNAL_ABORTED,fatal:!1,frag:t,error:new Error("Aborted"),networkDetails:o,stats:e}))},onTimeout:function(e,s,o){i.resetLoader(t,u),c(new mi({type:x.NETWORK_ERROR,details:E.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,error:new Error("Timeout after "+f.timeout+"ms"),networkDetails:o,stats:e}))},onProgress:function(i,s,o,r){e&&e({frag:t,part:null,payload:o,networkDetails:r})}})}))},Fo.loadPart=function(t,e,i){var o=this;this.abort();var r=this.config,n=r.fLoader,a=r.loader;return new Promise((function(l,c){var u,d,h,f;o.loader&&o.loader.destroy(),t.gap||e.gap?c(pi(t,e)):(u=o.loader=t.loader=new(n||a)(r),d=fi(t,e),h=Be(r.fragLoadPolicy.default),f={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:ui},e.stats=u.stats,u.load(d,f,{onSuccess:function(s,r,n,a){o.resetLoader(t,u),o.updateStatsFromPart(t,e),a={frag:t,part:e,payload:s.data,networkDetails:a},i(a),l(a)},onError:function(i,r,n,a){o.resetLoader(t,u),c(new mi({type:x.NETWORK_ERROR,details:E.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:e,response:s({url:d.url,data:void 0},i),error:new Error("HTTP Error "+i.code+" "+i.text),networkDetails:n,stats:a}))},onAbort:function(i,s,r){t.stats.aborted=e.stats.aborted,o.resetLoader(t,u),c(new mi({type:x.NETWORK_ERROR,details:E.INTERNAL_ABORTED,fatal:!1,frag:t,part:e,error:new Error("Aborted"),networkDetails:r,stats:i}))},onTimeout:function(i,s,r){o.resetLoader(t,u),c(new mi({type:x.NETWORK_ERROR,details:E.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:e,error:new Error("Timeout after "+f.timeout+"ms"),networkDetails:r,stats:i}))}}))}))},Fo.updateStatsFromPart=function(t,e){var i=t.stats,s=e.stats,o=s.total;i.loaded+=s.loaded,o?(e=((e=Math.round(t.duration/e.duration))-(e=Math.min(Math.round(i.loaded/o),e)))*Math.round(i.loaded/e),i.total=i.loaded+e):i.total=Math.max(i.loaded,i.total),i=i.loading,s=s.loading,i.start?i.first+=s.first-s.start:(i.start=s.start,i.first=s.first),i.end=s.end},Fo.resetLoader=function(t,e){t.loader=null,this.loader===e&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),e.destroy()},hi);function hi(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}function fi(t,e){void 0===e&&(e=null);var i,s=e||t,o={frag:t,part:e,responseType:"arraybuffer",url:s.url,headers:{},rangeStart:0,rangeEnd:0},r=s.byteRangeStartOffset,n=s.byteRangeEndOffset;return S(r)&&S(n)&&(e=r,s=n,"initSegment"===t.sn&&"AES-128"===(null==(i=t.decryptdata)?void 0:i.method)&&((i=n-r)%16&&(s=n+(16-i%16)),0!==r&&(o.resetIV=!0,e=r-16)),o.rangeStart=e,o.rangeEnd=s),o}function pi(t,e){var i=new Error("GAP "+(t.gap?"tag":"attribute")+" found");i={type:x.MEDIA_ERROR,details:E.FRAG_GAP,fatal:!1,frag:t,error:i,networkDetails:null};return e&&(i.part=e),(e||t).stats.aborted=!0,new mi(i)}function gi(t,e,i,s,o,r){void 0===s&&(s=0),void 0===o&&(o=-1),void 0===r&&(r=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=t,this.sn=e,this.id=i,this.size=s,this.part=o,this.partial=r}var vi,mi=(a(_i,vi=d(Error)),_i),yi=((Uo=Ei.prototype).abort=function(t){for(var e in this.keyUriToKeyInfo){var i=this.keyUriToKeyInfo[e].loader;if(i){if(t&&t!==i.context.frag.type)return;i.abort()}}},Uo.detach=function(){for(var t in this.keyUriToKeyInfo){var e=this.keyUriToKeyInfo[t];(e.mediaKeySessionContext||e.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[t]}},Uo.destroy=function(){for(var t in this.detach(),this.keyUriToKeyInfo){var e=this.keyUriToKeyInfo[t].loader;e&&e.destroy()}this.keyUriToKeyInfo={}},Uo.createKeyLoadError=function(t,e,i,s,o){return void 0===e&&(e=E.KEY_LOAD_ERROR),new mi({type:x.NETWORK_ERROR,details:e,fatal:!1,frag:t,response:o,error:i,networkDetails:s})},Uo.loadClear=function(t,e){var i=this;if(this.emeController&&this.config.emeEnabled)for(var s=t.sn,o=t.cc,r=0;r<e.length&&"break"!==function(){var t=e[r];if(o<=t.cc&&("initSegment"===s||"initSegment"===t.sn||s<t.sn))return i.emeController.selectKeySystemFormat(t).then((function(e){t.setKeyFormat(e)})),"break"}();r++);},Uo.load=function(t){var e=this;return!t.decryptdata&&t.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(t).then((function(i){return e.loadInternal(t,i)})):this.loadInternal(t)},Uo.loadInternal=function(t,e){e&&t.setKeyFormat(e);var i=t.decryptdata;if(!i){var s=new Error(e?"Expected frag.decryptdata to be defined after setting format "+e:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(t,E.KEY_LOAD_ERROR,s))}if(!(e=i.uri))return Promise.reject(this.createKeyLoadError(t,E.KEY_LOAD_ERROR,new Error('Invalid key URI: "'+e+'"')));var o=this.keyUriToKeyInfo[e];if(null!=o&&o.decryptdata.key)return i.key=o.decryptdata.key,Promise.resolve({frag:t,keyInfo:o});if(null!=o&&o.keyLoadPromise)switch(null==(s=o.mediaKeySessionContext)?void 0:s.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return o.keyLoadPromise.then((function(e){return i.key=e.keyInfo.decryptdata.key,{frag:t,keyInfo:o}}))}switch(o=this.keyUriToKeyInfo[e]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===i.keyFormat?this.loadKeyHTTP(o,t):this.loadKeyEME(o,t);case"AES-128":return this.loadKeyHTTP(o,t);default:return Promise.reject(this.createKeyLoadError(t,E.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'+i.method+'"')))}},Uo.loadKeyEME=function(t,e){var i={frag:e,keyInfo:t};return this.emeController&&this.config.emeEnabled&&(e=this.emeController.loadKey(i))?(t.keyLoadPromise=e.then((function(e){return t.mediaKeySessionContext=e,i}))).catch((function(e){throw t.keyLoadPromise=null,e})):Promise.resolve(i)},Uo.loadKeyHTTP=function(t,e){var i=this,o=this.config,r=new o.loader(o);return e.keyLoader=t.loader=r,t.keyLoadPromise=new Promise((function(n,a){var l={keyInfo:t,frag:e,responseType:"arraybuffer",url:t.decryptdata.uri},c={loadPolicy:u=o.keyLoadPolicy.default,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},u={onSuccess:function(t,e,s,o){var r=s.frag,l=s.keyInfo;s=s.url;if(!r.decryptdata||l!==i.keyUriToKeyInfo[s])return a(i.createKeyLoadError(r,E.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),o));l.decryptdata.key=r.decryptdata.key=new Uint8Array(t.data),r.keyLoader=null,l.loader=null,n({frag:r,keyInfo:l})},onError:function(t,o,r,n){i.resetLoader(o),a(i.createKeyLoadError(e,E.KEY_LOAD_ERROR,new Error("HTTP Error "+t.code+" loading key "+t.text),r,s({url:l.url,data:void 0},t)))},onTimeout:function(t,s,o){i.resetLoader(s),a(i.createKeyLoadError(e,E.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),o))},onAbort:function(t,s,o){i.resetLoader(s),a(i.createKeyLoadError(e,E.INTERNAL_ABORTED,new Error("key loading aborted"),o))}};r.load(l,c,u)}))},Uo.resetLoader=function(t){var e=t.frag,i=t.keyInfo,s=t.url;t=i.loader;e.keyLoader===t&&(e.keyLoader=null,i.loader=null),delete this.keyUriToKeyInfo[s],t&&t.destroy()},Ei),bi=((_s=xi.prototype).destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},_s.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},_s.onHandlerDestroyed=function(){},_s.hasInterval=function(){return!!this._tickInterval},_s.hasNextTick=function(){return!!this._tickTimer},_s.setInterval=function(t){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,t),!0)},_s.clearInterval=function(){return!(!this._tickInterval||(self.clearInterval(this._tickInterval),this._tickInterval=null))},_s.clearNextTick=function(){return!(!this._tickTimer||(self.clearTimeout(this._tickTimer),this._tickTimer=null))},_s.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),1<this._tickCallCount&&this.tickImmediate(),this._tickCallCount=0)},_s.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},_s.doTick=function(){},xi),Ti={length:0,start:function(){return 0},end:function(){return 0}},Si=(wi.isBuffered=function(t,e){try{if(t)for(var i=wi.getBuffered(t),s=0;s<i.length;s++)if(e>=i.start(s)&&e<=i.end(s))return!0}catch(t){}return!1},wi.bufferInfo=function(t,e,i){try{if(t){for(var s=wi.getBuffered(t),o=[],r=0;r<s.length;r++)o.push({start:s.start(r),end:s.end(r)});return this.bufferedInfo(o,e,i)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},wi.bufferedInfo=function(t,e,i){e=Math.max(0,e),t.sort((function(t,e){return t.start-e.start||e.end-t.end}));var s=[];if(i)for(var o=0;o<t.length;o++){var r,n=s.length;n?(r=s[n-1].end,t[o].start-r<i?t[o].end>r&&(s[n-1].end=t[o].end):s.push(t[o])):s.push(t[o])}else s=t;for(var a,l=0,c=e,u=e,d=0;d<s.length;d++){var h=s[d].start,f=s[d].end;if(h<=e+i&&e<f)c=h,l=(u=f)-e;else if(e+i<h){a=h;break}}return{len:l,start:c||0,end:u||0,nextStart:a}},wi.getBuffered=function(t){try{return t.buffered}catch(t){return I.log("failed to get media.buffered",t),Ti}},wi);function wi(){}function xi(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}function Ei(t){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=t}function _i(t){var e;return(e=vi.call(this,t.error.message)||this).data=void 0,e.data=t,e}function ki(t,e){for(var i=null,s=0,o=t.length;s<o;s++){var r=t[s];if(r&&r.cc===e){i=r;break}}return i}function Pi(t,e){t&&(e=t.start+e,t.start=t.startPTS=e,t.endPTS=e+t.duration)}function Ri(t,e){for(var i=e.fragments,s=0,o=i.length;s<o;s++)Pi(i[s],t);e.fragmentHint&&Pi(e.fragmentHint,t),e.alignedSliding=!0}function Ii(t,e){var i,s,o;t.hasProgramDateTime&&e.hasProgramDateTime&&(o=t.fragments,s=e.fragments,o.length&&s.length&&(e=ki(o,(i=s[Math.round(s.length/2)-1]).cc)||o[Math.round(o.length/2)-1],s=i.programDateTime,o=e.programDateTime,null!==s&&null!==o&&Ri((o-s)/1e3-(e.start-i.start),t)))}var Ai=(Yi.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},Yi),Li=(Ki.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},Ki),Ci=((Cs=qi.prototype).uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),i=new Uint32Array(4),s=0;s<4;s++)i[s]=e.getUint32(4*s);return i},Cs.initTable=function(){var t,e=this.sBox,i=this.invSBox,s=(t=this.subMix)[0],o=t[1],r=t[2],n=t[3],a=(t=this.invSubMix)[0],l=t[1],c=t[2],u=t[3],d=new Uint32Array(256),h=0,f=0,p=0;for(p=0;p<256;p++)d[p]=p<128?p<<1:p<<1^283;for(p=0;p<256;p++){var g=(g=f^f<<1^f<<2^f<<3^f<<4)>>>8^255&g^99,v=d[i[e[h]=g]=h],m=d[v],y=d[m],b=257*d[g]^16843008*g;s[h]=b<<24|b>>>8,o[h]=b<<16|b>>>16,r[h]=b<<8|b>>>24,n[h]=b,b=16843009*y^65537*m^257*v^16843008*h,a[g]=b<<24|b>>>8,l[g]=b<<16|b>>>16,c[g]=b<<8|b>>>24,u[g]=b,h?(h=v^d[d[d[y^v]]],f^=d[d[f]]):h=f=1}},Cs.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),i=!0,s=0;s<e.length&&i;)i=e[s]===this.key[s],s++;if(!i){this.key=e;var o=this.keySize=e.length;if(4!==o&&6!==o&&8!==o)throw new Error("Invalid aes key size="+o);for(var r,n,a,l=this.ksRows=4*(o+6+1),c=this.keySchedule=new Uint32Array(l),u=this.invKeySchedule=new Uint32Array(l),d=this.sBox,h=this.rcon,f=(t=this.invSubMix)[0],p=t[1],g=t[2],v=t[3],m=0;m<l;m++)m<o?n=c[m]=e[m]:(a=n,m%o==0?(a=d[(a=a<<8|a>>>24)>>>24]<<24|d[a>>>16&255]<<16|d[a>>>8&255]<<8|d[255&a],a^=h[m/o|0]<<24):6<o&&m%o==4&&(a=d[a>>>24]<<24|d[a>>>16&255]<<16|d[a>>>8&255]<<8|d[255&a]),c[m]=n=(c[m-o]^a)>>>0);for(r=0;r<l;r++)m=l-r,a=3&r?c[m]:c[m-4],u[r]=r<4||m<=4?a:f[d[a>>>24]]^p[d[a>>>16&255]]^g[d[a>>>8&255]]^v[d[255&a]],u[r]=u[r]>>>0}},Cs.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},Cs.decrypt=function(t,e,i){for(var s,o,r,n,a,l,c,u,d,h,f,p,g,v,m=this.keySize+6,y=this.invKeySchedule,b=this.invSBox,T=this.invSubMix,S=T[0],w=T[1],x=T[2],E=T[3],_=(i=this.uint8ArrayToUint32Array_(i))[0],k=i[1],P=i[2],R=i[3],I=new Int32Array(t),A=new Int32Array(I.length),L=this.networkToHostOrderSwap;e<I.length;){for(d=L(I[e]),h=L(I[e+1]),f=L(I[e+2]),p=L(I[e+3]),a=d^y[0],l=p^y[1],c=f^y[2],u=h^y[3],g=4,v=1;v<m;v++)s=S[a>>>24]^w[l>>16&255]^x[c>>8&255]^E[255&u]^y[g],o=S[l>>>24]^w[c>>16&255]^x[u>>8&255]^E[255&a]^y[g+1],r=S[c>>>24]^w[u>>16&255]^x[a>>8&255]^E[255&l]^y[g+2],n=S[u>>>24]^w[a>>16&255]^x[l>>8&255]^E[255&c]^y[g+3],a=s,l=o,c=r,u=n,g+=4;s=b[a>>>24]<<24^b[l>>16&255]<<16^b[c>>8&255]<<8^b[255&u]^y[g],o=b[l>>>24]<<24^b[c>>16&255]<<16^b[u>>8&255]<<8^b[255&a]^y[g+1],r=b[c>>>24]<<24^b[u>>16&255]<<16^b[a>>8&255]<<8^b[255&l]^y[g+2],n=b[u>>>24]<<24^b[a>>16&255]<<16^b[l>>8&255]<<8^b[255&c]^y[g+3],A[e]=L(s^_),A[e+1]=L(n^k),A[e+2]=L(r^P),A[e+3]=L(o^R),_=d,k=h,P=f,R=p,e+=4}return A.buffer},qi),Mi=((W=Xi.prototype).destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},W.isSync=function(){return this.useSoftware},W.flush=function(){var t=this.currentResult,e=this.remainderData;if(!t||e)return this.reset(),null;var i,s=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?(t=(e=(i=s).byteLength)&&new DataView(i.buffer).getUint8(e-1))?nt(i,0,e-t):i:s},W.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},W.decrypt=function(t,e,i){var s=this;return this.useSoftware?new Promise((function(o,r){s.softwareDecrypt(new Uint8Array(t),e,i);var n=s.flush();n?o(n.buffer):r(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(t),e,i)},W.softwareDecrypt=function(t,e,i){var s=this.currentIV,o=this.currentResult,r=this.remainderData;return this.logOnce("JS AES decrypt"),r&&(t=Lt(r,t),this.remainderData=null),(t=this.getValidChunk(t)).length?(s&&(i=s),(s=(s=this.softwareDecrypter)||(this.softwareDecrypter=new Ci)).expandKey(e),this.currentResult=s.decrypt(t.buffer,0,i),this.currentIV=nt(t,-16).buffer,o||null):null},W.webCryptoDecrypt=function(t,e,i){var s=this,o=this.subtle;return this.key===e&&this.fastAesKey||(this.key=e,this.fastAesKey=new Li(o,e)),this.fastAesKey.expandKey().then((function(e){return o?(s.logOnce("WebCrypto AES decrypt"),new Ai(o,new Uint8Array(i)).decrypt(t.buffer,e)):Promise.reject(new Error("web crypto not initialized"))})).catch((function(o){return I.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+o.name+": "+o.message),s.onWebCryptoError(t,e,i)}))},W.onWebCryptoError=function(t,e,i){if(this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(t,e,i),i=this.flush())return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},W.getValidChunk=function(t){var e=t,i=t.length-t.length%16;return i!==t.length&&(e=nt(t,0,i),this.remainderData=nt(t,i)),e},W.logOnce=function(t){this.logEnabled&&(I.log("[decrypter]: "+t),this.logEnabled=!1)},Xi),Di="STOPPED",Oi="IDLE",Fi="KEY_LOADING",Ni="FRAG_LOADING",Ui="FRAG_LOADING_WAITING_RETRY",zi="WAITING_TRACK",Wi="PARSING",Hi="PARSED",Vi="ENDED",Bi="ERROR",ji="WAITING_INIT_PTS",Gi="WAITING_LEVEL",Qi=function(t){function e(e,i,s,o,r){var n;return(n=t.call(this)||this).hls=void 0,n.fragPrevious=null,n.fragCurrent=null,n.fragmentTracker=void 0,n.transmuxer=null,n._state=Di,n.playlistType=void 0,n.media=null,n.mediaBuffer=null,n.config=void 0,n.bitrateTest=!1,n.lastCurrentTime=0,n.nextLoadPosition=0,n.startPosition=0,n.startTimeOffset=null,n.loadedmetadata=!1,n.retryDate=0,n.levels=null,n.fragmentLoader=void 0,n.keyLoader=void 0,n.levelLastLoaded=null,n.startFragRequested=!1,n.decrypter=void 0,n.initPTS=[],n.onvseeking=null,n.onvended=null,n.logPrefix="",n.log=void 0,n.warn=void 0,n.playlistType=r,n.logPrefix=o,n.log=I.log.bind(I,o+":"),n.warn=I.warn.bind(I,o+":"),n.hls=e,n.fragmentLoader=new di(e.config),n.keyLoader=s,n.fragmentTracker=i,n.config=e.config,n.decrypter=new Mi(e.config),e.on(w.MANIFEST_LOADED,n.onManifestLoaded,function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}a(e,t);var i=e.prototype;return i.doTick=function(){this.onTickEnd()},i.onTickEnd=function(){},i.startLoad=function(t){},i.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);var t=this.fragCurrent;null!=t&&t.loader&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Di},i._streamEnded=function(t,e){return!(e.live||t.nextStart||!t.end||!this.media)&&(null!=(t=e.partList)&&t.length?(t=t[t.length-1],Si.isBuffered(this.media,t.start+t.duration/2)):(e=e.fragments[e.fragments.length-1].type,this.fragmentTracker.isEndListAppended(e)))},i.getLevelDetails=function(){var t;if(this.levels&&null!==this.levelLastLoaded)return null==(t=this.levels[this.levelLastLoaded])?void 0:t.details},i.onMediaAttached=function(t,e){e=this.media=this.mediaBuffer=e.media,this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended),e=this.config,this.levels&&e.autoStartLoad&&this.state===Di&&this.startLoad(e.startPosition)},i.onMediaDetaching=function(){var t=this.media;null!=t&&t.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&this.onvseeking&&this.onvended&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},i.onMediaSeeking=function(){var t=this.config,e=this.fragCurrent,i=this.media,s=this.mediaBuffer,o=this.state,r=i?i.currentTime:0;s=Si.bufferInfo(s||i,r,t.maxBufferHole);this.log("media seeking to "+(S(r)?r.toFixed(3):r)+", state: "+o),this.state===Vi?this.resetLoadingState():e&&(o=t.maxFragLookUpTolerance,t=e.start-o,o=e.start+e.duration+o,(!s.len||o<s.start||t>s.end)&&(o=o<r,(r<t||o)&&(o&&e.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),e.abortRequests(),this.resetLoadingState()),this.fragPrevious=null))),i&&(this.fragmentTracker.removeFragmentsInRange(r,1/0,this.playlistType,!0),this.lastCurrentTime=r),this.loadedmetadata||s.len||(this.nextLoadPosition=this.startPosition=r),this.tickImmediate()},i.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i.onManifestLoaded=function(t,e){this.startTimeOffset=e.startTimeOffset,this.initPTS=[]},i.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},i.onHandlerDestroyed=function(){this.state=Di,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},i.loadFragment=function(t,e,i){this._loadFragForPlayback(t,e,i)},i._loadFragForPlayback=function(t,e,i){var s=this;this._doFragLoad(t,e,i,(function(e){return s.fragContextChanged(t)?(s.warn("Fragment "+t.sn+(e.part?" p: "+e.part.index:"")+" of level "+t.level+" was dropped during download."),void s.fragmentTracker.removeFragment(t)):(t.stats.chunkCount++,void s._handleFragmentLoadProgress(e))})).then((function(e){var i;e&&(i=s.state,s.fragContextChanged(t)?i!==Ni&&(s.fragCurrent||i!==Wi)||(s.fragmentTracker.removeFragment(t),s.state=Oi):("payload"in e&&(s.log("Loaded fragment "+t.sn+" of level "+t.level),s.hls.trigger(w.FRAG_LOADED,e)),s._handleFragmentLoadComplete(e)))})).catch((function(e){s.state!==Di&&s.state!==Bi&&(s.warn(e),s.resetFragmentLoading(t))}))},i.clearTrackerIfNeeded=function(t){var e,i=this.fragmentTracker;i.getState(t)===si?(e=t.type,e=this.getFwdBufferInfo(this.mediaBuffer,e),e=Math.max(t.duration,e?e.len:this.config.maxBufferLength),this.reduceMaxBufferLength(e)&&i.removeFragment(t)):0===(null==(e=this.mediaBuffer)?void 0:e.buffered.length)?i.removeAllFragments():i.hasParts(t.type)&&(i.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type}),i.getState(t)===oi&&i.removeFragment(t))},i.flushMainBuffer=function(t,e,i){void 0===i&&(i=null),t-e&&(i={startOffset:t,endOffset:e,type:i},this.hls.trigger(w.BUFFER_FLUSHING,i))},i._loadInitSegment=function(t,e){var i=this;this._doFragLoad(t,e).then((function(e){if(!e||i.fragContextChanged(t)||!i.levels)throw new Error("init load aborted");return e})).then((function(e){var s=i.hls,o=e.payload,r=t.decryptdata;if(o&&0<o.byteLength&&r&&r.key&&r.iv&&"AES-128"===r.method){var n=self.performance.now();return i.decrypter.decrypt(new Uint8Array(o),r.key.buffer,r.iv.buffer).catch((function(e){throw s.trigger(w.ERROR,{type:x.MEDIA_ERROR,details:E.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e})).then((function(i){var o=self.performance.now();return s.trigger(w.FRAG_DECRYPTED,{frag:t,payload:i,stats:{tstart:n,tdecrypt:o}}),e.payload=i,e}))}return e})).then((function(s){var o=i.fragCurrent,r=i.hls;if(!i.levels)throw new Error("init load aborted, missing levels");var n=t.stats;i.state=Oi,e.fragmentError=0,t.data=new Uint8Array(s.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),s.frag===o&&r.trigger(w.FRAG_BUFFERED,{stats:n,frag:o,part:null,id:t.type}),i.tick()})).catch((function(e){i.state!==Di&&i.state!==Bi&&(i.warn(e),i.resetFragmentLoading(t))}))},i.fragContextChanged=function(t){var e=this.fragCurrent;return!t||!e||t.level!==e.level||t.sn!==e.sn||t.urlId!==e.urlId},i.fragBufferedComplete=function(t,e){var i=this.mediaBuffer||this.media;this.log("Buffered "+t.type+" sn: "+t.sn+(e?" part: "+e.index:"")+" of "+(this.playlistType===ce?"level":"track")+" "+t.level+" (frag:["+(null!=(e=t.startPTS)?e:NaN).toFixed(3)+"-"+(null!=(e=t.endPTS)?e:NaN).toFixed(3)+"] > buffer:"+(i?function(t){for(var e="",i=t.length,s=0;s<i;s++)e+="["+t.start(s).toFixed(3)+"-"+t.end(s).toFixed(3)+"]";return e}(Si.getBuffered(i)):"(detached)")+")"),this.state=Oi,i&&(!this.loadedmetadata&&t.type==ce&&i.buffered.length&&(null==(i=this.fragCurrent)?void 0:i.sn)===(null==(i=this.fragPrevious)?void 0:i.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},i.seekToStartPos=function(){},i._handleFragmentLoadComplete=function(t){var e,i,s=this.transmuxer;s&&(e=t.frag,i=t.part,t=!(t=t.partsLoaded)||0===t.length||t.some((function(t){return!t})),t=new gi(e.level,e.sn,e.stats.chunkCount+1,0,i?i.index:-1,!t),s.flush(t))},i._handleFragmentLoadProgress=function(t){},i._doFragLoad=function(t,e,i,s){var o=this;void 0===i&&(i=null);var r=null==e?void 0:e.details;if(!this.levels||!r)throw new Error("frag load aborted, missing level"+(r?"":" detail")+"s");var n=null;if(!t.encrypted||null!=(l=t.decryptdata)&&l.key?!t.encrypted&&r.encryptedFragments.length&&this.keyLoader.loadClear(t,r.encryptedFragments):(this.log("Loading key for "+t.sn+" of ["+r.startSN+"-"+r.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level),this.state=Fi,this.fragCurrent=t,n=this.keyLoader.load(t).then((function(t){if(!o.fragContextChanged(t.frag))return o.hls.trigger(w.KEY_LOADED,t),o.state===Fi&&(o.state=Oi),t})),this.hls.trigger(w.KEY_LOADING,{frag:t}),null===this.fragCurrent&&(n=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),i=Math.max(t.start,i||0),this.config.lowLatencyMode&&"initSegment"!==t.sn){var a=r.partList;if(a&&s){i>t.end&&r.fragmentHint&&(t=r.fragmentHint);var l=this.getNextPart(a,t,i);if(-1<l){var c=a[l];return this.log("Loading part sn: "+t.sn+" p: "+c.index+" cc: "+t.cc+" of playlist ["+r.startSN+"-"+r.endSN+"] parts [0-"+l+"-"+(a.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(i.toFixed(3))),this.nextLoadPosition=c.start+c.duration,this.state=Ni,l=n?n.then((function(i){return!i||o.fragContextChanged(i.frag)?null:o.doFragPartsLoad(t,c,e,s)})).catch((function(t){return o.handleFragLoadError(t)})):this.doFragPartsLoad(t,c,e,s).catch((function(t){return o.handleFragLoadError(t)})),this.hls.trigger(w.FRAG_LOADING,{frag:t,part:c,targetBufferTime:i}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):l}if(!t.url||this.loadedEndOfParts(a,i))return Promise.resolve(null)}}this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(r?"of ["+r.startSN+"-"+r.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(i.toFixed(3))),S(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=Ni;var u=this.config.progressive;n=u&&n?n.then((function(e){return!e||o.fragContextChanged(null==e?void 0:e.frag)?null:o.fragmentLoader.load(t,s)})).catch((function(t){return o.handleFragLoadError(t)})):Promise.all([this.fragmentLoader.load(t,u?s:void 0),n]).then((function(t){return t=t[0],!u&&t&&s&&s(t),t})).catch((function(t){return o.handleFragLoadError(t)}));return this.hls.trigger(w.FRAG_LOADING,{frag:t,targetBufferTime:i}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):n},i.doFragPartsLoad=function(t,e,i,s){var o=this;return new Promise((function(r,n){var a,l=[],c=null==(a=i.details)?void 0:a.partList;!function e(a){o.fragmentLoader.loadPart(t,a,s).then((function(s){var n=(l[a.index]=s).part;if(o.hls.trigger(w.FRAG_LOADED,s),!(s=Ue(i,t.sn,a.index+1)||ze(c,t.sn,a.index+1)))return r({frag:t,part:n,partsLoaded:l});e(s)})).catch(n)}(e)}))},i.handleFragLoadError=function(t){var e;return"data"in t?(e=t.data,t.data&&e.details===E.INTERNAL_ABORTED?this.handleFragLoadAborted(e.frag,e.part):this.hls.trigger(w.ERROR,e)):this.hls.trigger(w.ERROR,{type:x.OTHER_ERROR,details:E.INTERNAL_EXCEPTION,err:t,error:t,fatal:!0}),null},i._handleTransmuxerFlush=function(t){var e,i,s,o=this.getCurrentContext(t);o&&this.state===Wi?(e=o.frag,i=o.part,s=o.level,o=self.performance.now(),e.stats.parsing.end=o,i&&(i.stats.parsing.end=o),this.updateLevelTiming(e,i,s,t.partial)):this.fragCurrent||this.state===Di||this.state===Bi||(this.state=Oi)},i.getCurrentContext=function(t){var e=this.levels,i=this.fragCurrent,s=t.level,o=t.sn;t=t.part;if(null==e||!e[s])return this.warn("Levels object was unset while buffering fragment "+o+" of level "+s+". The current chunk will not be buffered."),null;var r=e[s];t=(s=-1<t?Ue(r,o,t):null)?s.fragment:function(){if(null==r||!r.details)return null;var t=r.details,e=t.fragments[o-t.startSN];return e||((e=t.fragmentHint)&&e.sn===o?e:o<t.startSN&&i&&i.sn===o?i:null)}();return t?(i&&i!==t&&(t.stats=i.stats),{frag:t,part:s,level:r}):null},i.bufferFragmentData=function(t,e,i,s,o){var r,n,a;t&&this.state===Wi&&(r=t.data1,n=t.data2,(a=r)&&n&&(a=Lt(r,n)),null!=a&&a.length&&(a={type:t.type,frag:e,part:i,chunkMeta:s,parent:e.type,data:a},this.hls.trigger(w.BUFFER_APPENDING,a),t.dropped&&t.independent&&!i&&(o||this.flushBufferGap(e))))},i.flushBufferGap=function(t){var e,i,s=this.media;s&&(Si.isBuffered(s,s.currentTime)?(i=s.currentTime,e=Si.bufferInfo(s,i,0),s=t.duration,s=Math.min(2*this.config.maxFragLookUpTolerance,.25*s),i=Math.max(Math.min(t.start-s,e.end-s),i+s),t.start-i>s&&this.flushMainBuffer(i,t.start)):this.flushMainBuffer(0,t.start))},i.getFwdBufferInfo=function(t,e){var i=this.getLoadPosition();return S(i)?this.getFwdBufferInfoAtPos(t,i,e):null},i.getFwdBufferInfoAtPos=function(t,e,i){var s=this.config.maxBufferHole,o=Si.bufferInfo(t,e,s);return 0===o.len&&void 0!==o.nextStart&&(i=this.fragmentTracker.getBufferedFrag(e,i))&&o.nextStart<i.end?Si.bufferInfo(t,e,Math.max(o.nextStart,s)):o},i.getMaxBufferLength=function(t){var e=this.config;t=t?Math.max(8*e.maxBufferSize/t,e.maxBufferLength):e.maxBufferLength;return Math.min(t,e.maxMaxBufferLength)},i.reduceMaxBufferLength=function(t){var e=this.config;t=t||e.maxBufferLength;return e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},i.getAppendedFrag=function(t,e){return(t=this.fragmentTracker.getAppendedFrag(t,ce))&&"fragment"in t?t.fragment:t},i.getNextFragment=function(t,e){var i=e.fragments,s=i.length;if(!s)return null;var o,r=this.config,n=i[0].start;if(e.live){var a=r.initialLiveManifestSize;if(s<a)return this.warn("Not enough fragments to start playback (have: "+s+", need: "+a+")"),null;e.PTSKnown||this.startFragRequested||-1!==this.startPosition||(o=this.getInitialLiveFragment(e,i),this.startPosition=o?this.hls.liveSyncPosition||o.start:t)}else t<=n&&(o=i[0]);return o||(r=r.lowLatencyMode?e.partEnd:e.fragmentEnd,o=this.getFragmentAtPosition(t,r,e)),this.mapToInitFragWhenRequired(o)},i.isLoopLoading=function(t,e){var i=this.fragmentTracker.getState(t);return(i===ri||i===oi&&!!t.gap)&&this.nextLoadPosition>e},i.getNextFragmentLoopLoading=function(t,e,i,s,o){var r=t.gap;return null===(e=this.getNextFragment(this.nextLoadPosition,e))?e:(t=e,r&&t&&!t.gap&&i.nextStart&&null!==(r=this.getFwdBufferInfoAtPos(this.mediaBuffer||this.media,i.nextStart,s))&&i.len+r.len>=o?(this.log('buffer full after gaps in "'+s+'" playlist starting at sn: '+t.sn),null):t)},i.mapToInitFragWhenRequired=function(t){return null==t||!t.initSegment||null!=t&&t.initSegment.data||this.bitrateTest?t:t.initSegment},i.getNextPart=function(t,e,i){for(var s=-1,o=!1,r=!0,n=0,a=t.length;n<a;n++){var l=t[n];r=r&&!l.independent;if(-1<s&&i<l.start)break;var c=l.loaded;c?s=-1:(o||l.independent||r)&&l.fragment===e&&(s=n),o=c}return s},i.loadedEndOfParts=function(t,e){return(t=t[t.length-1])&&e>t.start&&t.loaded},i.getInitialLiveFragment=function(t,e){var i,s,o=this.fragPrevious,r=null;return o?(t.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+o.programDateTime),r=function(t,e,i){if(null===e||!Array.isArray(t)||!t.length||!S(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;i=i||0;for(var s,o,r,n=0;n<t.length;++n){var a=t[n];if(s=e,o=i,r=a,o=1e3*Math.min(o,r.duration+(r.deltaPTS||0)),(r.endProgramDateTime||0)-o>s)return a}return null}(e,o.endProgramDateTime,this.config.maxFragLookUpTolerance)),r||((i=o.sn+1)>=t.startSN&&i<=t.endSN&&(i=e[i-t.startSN],o.cc===i.cc&&(r=i,this.log("Live playlist, switching playlist, load frag with next SN: "+r.sn))),r||(s=o.cc,(r=Ge(e,(function(t){return t.cc<s?1:t.cc>s?-1:0})))&&this.log("Live playlist, switching playlist, load frag with same CC: "+r.sn)))):null!==(e=this.hls.liveSyncPosition)&&(r=this.getFragmentAtPosition(e,this.bitrateTest?t.fragmentEnd:t.edge,t)),r},i.getFragmentAtPosition=function(t,e,i){var s=this.config,o=this.fragPrevious,r=i.fragments,n=i.endSN,a=i.fragmentHint,l=s.maxFragLookUpTolerance,c=i.partList;return(s=!!(s.lowLatencyMode&&null!=c&&c.length&&a))&&a&&!this.bitrateTest&&(r=r.concat(a),n=a.sn),(t=t<e?Qe(o,r,t,e-l<t?0:l):r[r.length-1])&&(l=t.sn-i.startSN,((i=this.fragmentTracker.getState(t))===ri||i===oi&&t.gap)&&(o=t),o&&t.sn===o.sn&&(!s||c[0].fragment.sn>t.sn)&&o&&t.level===o.level&&(l=r[1+l],t=t.sn<n&&this.fragmentTracker.getState(l)!==ri?l:null)),t},i.synchronizeToLiveEdge=function(t){var e,i,s,o,r=this.config,n=this.media;n&&(e=this.hls.liveSyncPosition,i=n.currentTime,o=t.fragments[0].start,s=t.edge,o=i>=o-r.maxFragLookUpTolerance&&i<=s,null!==e&&n.duration>e&&(i<e||!o)&&(t=void 0!==r.liveMaxLatencyDuration?r.liveMaxLatencyDuration:r.liveMaxLatencyDurationCount*t.targetduration,(!o&&n.readyState<4||i<s-t)&&(this.loadedmetadata||(this.nextLoadPosition=e),n.readyState&&(this.warn("Playback: "+i.toFixed(3)+" is located too far from the end of live sliding playlist: "+s+", reset currentTime to : "+e.toFixed(3)),n.currentTime=e))))},i.alignPlaylists=function(t,e){var i=this.levels,s=this.levelLastLoaded,o=this.fragPrevious,r=null!==s?i[s]:null,n=t.fragments.length;if(!n)return this.warn("No fragments in live playlist"),0;var a,l,c=t.fragments[0].start,u=!e,d=t.alignedSliding&&S(c);return u||!d&&!c?(a=o,i=t,(s=r)&&(u=a,l=i,(d=s).details&&(l.endCC>l.startCC||u&&u.cc<l.startCC)&&(d=function(t){var e=t.fragments;if((t=l.fragments).length&&e.length){if((t=ki(e,t[0].cc))&&(!t||t.startPTS))return t;I.log("No frag in previous level to align on")}else I.log("No fragments to align")}(d.details))&&S(d.start)&&(I.log("Adjusting PTS using last level due to CC increase within current level "+l.url),Ri(d.start,l)),!i.alignedSliding&&s.details&&(r=i,(a=s.details).fragments.length&&r.hasProgramDateTime&&a.hasProgramDateTime&&(u=a.fragments[0].programDateTime,(a=((d=r.fragments[0].programDateTime)-u)/1e3+a.fragments[0].start)&&S(a)&&(I.log("Adjusting PTS using programDateTime delta "+(d-u)+"ms, sliding:"+a.toFixed(3)+" "+r.url+" "),Ri(a,r)))),i.alignedSliding||!s.details||i.skippedSegments||Fe(s.details,i)),i=t.fragments[0].start,this.log("Live playlist sliding: "+i.toFixed(2)+" start-sn: "+(e?e.startSN:"na")+"->"+t.startSN+" prev-sn: "+(o?o.sn:"na")+" fragments: "+n),i):c},i.waitForCdnTuneIn=function(t){return t.live&&t.canBlockReload&&t.partTarget&&t.tuneInGoal>Math.max(t.partHoldBack,3*t.partTarget)},i.setStartPosition=function(t,e){var i,s,o=this.startPosition;o<e&&(o=-1),-1!==o&&-1!==this.lastCurrentTime||(null!==(s=((i=null!==this.startTimeOffset)?this:t).startTimeOffset)&&S(s)?(o=e+s,s<0&&(o+=t.totalduration),o=Math.min(Math.max(e,o),e+t.totalduration),this.log("Start time offset "+s+" found in "+(i?"multivariant":"media")+" playlist, adjust startPosition to "+o),this.startPosition=o):t.live?o=this.hls.liveSyncPosition||e:this.startPosition=o=0,this.lastCurrentTime=o),this.nextLoadPosition=o},i.getLoadPosition=function(){var t=this.media,e=0;return this.loadedmetadata&&t?e=t.currentTime:this.nextLoadPosition&&(e=this.nextLoadPosition),e},i.handleFragLoadAborted=function(t,e){this.transmuxer&&"initSegment"!==t.sn&&t.stats.aborted&&(this.warn("Fragment "+t.sn+(e?" part "+e.index:"")+" of level "+t.level+" was aborted"),this.resetFragmentLoading(t))},i.resetFragmentLoading=function(t){this.fragCurrent&&(this.fragContextChanged(t)||this.state===Ui)||(this.state=Oi)},i.onFragmentOrKeyLoadError=function(t,e){!e.chunkMeta||e.frag||(r=this.getCurrentContext(e.chunkMeta))&&(e.frag=r.frag);var i,s,o,r,n,a=e.frag;a&&a.type===t&&this.levels&&(this.fragContextChanged(a)?this.warn("Frag load error must match current frag to retry "+a.url+" > "+(null==(o=this.fragCurrent)?void 0:o.url)):((i=e.details===E.FRAG_GAP)&&this.fragmentTracker.fragBuffered(a,!0),o=void 0===(r=(n=(s=e.errorAction)||{}).retryCount)?0:r,r=n.retryConfig,s&&5===n.action&&r?(this.resetStartWhenNotLoaded(null!=(n=this.levelLastLoaded)?n:a.level),n=Ve(r,o),this.warn("Fragment "+a.sn+" of "+t+" "+a.level+" errored with "+e.details+", retrying loading "+(o+1)+"/"+r.maxNumRetry+" in "+n+"ms"),s.resolved=!0,this.retryDate=self.performance.now()+n,this.state=Ui):r&&s?(this.resetFragmentErrors(t),o<r.maxNumRetry?i||(s.resolved=!0):I.warn(e.details+" reached or exceeded max retry ("+o+")")):2===(null==s?void 0:s.action)?this.state=Gi:this.state=Bi,this.tickImmediate()))},i.reduceLengthAndFlushBuffer=function(t){if(this.state!==Wi&&this.state!==Hi)return!1;var e=t.parent,i=this.getFwdBufferInfo(this.mediaBuffer,e),s=i&&.5<i.len;return s&&this.reduceMaxBufferLength(i.len),(s=!s)&&this.warn("Buffer full error while media.currentTime is not buffered, flush "+e+" buffer"),t.frag&&(this.fragmentTracker.removeFragment(t.frag),this.nextLoadPosition=t.frag.start),this.resetLoadingState(),s},i.resetFragmentErrors=function(t){t===ue&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==Di&&(this.state=Oi)},i.afterBufferFlushed=function(t,e,i){t&&(t=Si.getBuffered(t),this.fragmentTracker.detectEvictedFragments(e,t,i),this.state===Vi&&this.resetLoadingState())},i.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=Oi},i.resetStartWhenNotLoaded=function(t){this.loadedmetadata||(this.startFragRequested=!1,null!=(t=this.levels?this.levels[t].details:null)&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition)},i.resetWhenMissingContext=function(t){var e;this.warn("The loading context changed while buffering fragment "+t.sn+" of level "+t.level+". This chunk will not be buffered."),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(null!=(e=this.levelLastLoaded)?e:t.level),this.resetLoadingState()},i.removeUnbufferedFrags=function(t){void 0===t&&(t=0),this.fragmentTracker.removeFragmentsInRange(t,1/0,this.playlistType,!1,!0)},i.updateLevelTiming=function(t,e,i,s){var o=this,r=i.details;if(r){if(Object.keys(t.elementaryStreams).reduce((function(e,n){var a=t.elementaryStreams[n];if(a){var l=a.endPTS-a.startPTS;return l<=0?(o.warn("Could not parse fragment "+t.sn+" "+n+" duration reliably ("+l+")"),e||!1):(l=s?0:Oe(r,t,a.startPTS,a.endPTS,a.startDTS,a.endDTS),o.hls.trigger(w.LEVEL_PTS_UPDATED,{details:r,level:i,drift:l,type:n,frag:t,start:a.startPTS,end:a.endPTS}),!0)}return e}),!1))i.fragmentError=0;else if(null===(null==(n=this.transmuxer)?void 0:n.error)){var n=new Error("Found no media in fragment "+t.sn+" of level "+t.level+" resetting transmuxer to fallback to playlist timing");if(0===i.fragmentError&&(i.fragmentError++,t.gap=!0,this.fragmentTracker.removeFragment(t),this.fragmentTracker.fragBuffered(t,!0)),this.warn(n.message),this.hls.trigger(w.ERROR,{type:x.MEDIA_ERROR,details:E.FRAG_PARSING_ERROR,fatal:!1,error:n,frag:t,reason:"Found no media in msn "+t.sn+' of level "'+i.url+'"'}),!this.hls)return;this.resetTransmuxer()}this.state=Hi,this.hls.trigger(w.FRAG_PARSED,{frag:t,part:e})}else this.warn("level.details undefined")},i.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},i.recoverWorkerError=function(t){var e;"demuxerWorker"===t.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(null!=(e=null!=(t=this.levelLastLoaded)?t:null==(e=this.fragCurrent)?void 0:e.level)?e:0),this.resetLoadingState())},r(e,[{key:"state",get:function(){return this._state},set:function(t){var e=this._state;e!==t&&(this._state=t,this.log(e+"->"+t))}}]),e}(bi);function Xi(t,e){if(e=void 0===(e=(void 0===e?{}:e).removePKCS7Padding)||e,this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=t.enableSoftwareAES,this.removePKCS7Padding=e)try{var i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch(t){}null===this.subtle&&(this.useSoftware=!0)}function qi(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}function Ki(t,e){this.subtle=void 0,this.key=void 0,this.subtle=t,this.key=e}function Yi(t,e){this.subtle=void 0,this.aesIV=void 0,this.subtle=t,this.aesIV=e}function Zi(){return self.SourceBuffer||self.WebKitSourceBuffer}function Ji(t,e){return void 0===t&&(t=""),void 0===e&&(e=9e4),{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}var $i=((Go=es.prototype).resetInitSegment=function(t,e,i,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},Go.resetTimeStamp=function(t){this.initPTS=t,this.resetContiguity()},Go.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},Go.canParse=function(t,e){return!1},Go.appendFrame=function(t,e,i){},Go.demux=function(t,e){this.cachedData&&(t=Lt(this.cachedData,t),this.cachedData=null);var i,s,o,r=ct(t,0),n=r?r.length:0,a=this._audioTrack,l=this._id3Track,c=r?function(){for(var t=dt(r),e=0;e<t.length;e++){var i=t[e];if(ut(i))return function(t){if(8===t.data.byteLength){t=1&(e=new Uint8Array(t.data))[3];var e=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return e/=45,t&&(e+=47721858.84),Math.round(e)}}(i)}}():void 0,u=t.length;for((null===this.basePTS||0===this.frameIndex&&S(c))&&(this.basePTS=ts(c,e,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),r&&0<r.length&&l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:Te,duration:Number.POSITIVE_INFINITY});n<u;)this.canParse(t,n)?(s=this.appendFrame(a,t,n))?(this.frameIndex++,this.lastPTS=s.sample.pts,i=n+=s.length):n=u:at(s=t,o=n)&&ft(s,o+6)+10<=s.length-o?(r=ct(t,n),l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:Te,duration:Number.POSITIVE_INFINITY}),i=n+=r.length):n++,n===u&&i!==u&&(o=nt(t,i),this.cachedData?this.cachedData=Lt(this.cachedData,o):this.cachedData=o);return{audioTrack:a,videoTrack:Ji(),id3Track:l,textTrack:Ji()}},Go.demuxSampleAes=function(t,e,i){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},Go.flush=function(t){var e=this.cachedData;return e&&(this.cachedData=null,this.demux(e,0)),{audioTrack:this._audioTrack,videoTrack:Ji(),id3Track:this._id3Track,textTrack:Ji()}},Go.destroy=function(){},es),ts=function(t,e,i){return S(t)?90*t:9e4*e+(i?9e4*i.baseTime/i.timescale:0)};function es(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}function is(t,e){return 255===t[e]&&240==(246&t[e+1])}function ss(t,e){return 1&t[e+1]?7:9}function os(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function rs(t,e){return e+1<t.length&&is(t,e)}function ns(t,e,i,s,o){t.samplerate||(o=function(t,e,i,s){var o,r,n=navigator.userAgent.toLowerCase(),a=s,l=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],c=1+((192&e[i+2])>>>6),u=(60&e[i+2])>>>2;if(!(l.length-1<u))return o=(1&e[i+2])<<2,o|=(192&e[i+3])>>>6,I.log("manifest codec:"+s+", ADTS type:"+c+", samplingIndex:"+u),s=/firefox/i.test(n)?6<=u?(c=5,r=new Array(4),u-3):(c=2,r=new Array(2),u):-1!==n.indexOf("android")?(c=2,r=new Array(2),u):(c=5,r=new Array(4),s&&(-1!==s.indexOf("mp4a.40.29")||-1!==s.indexOf("mp4a.40.5"))||!s&&6<=u?u-3:((s&&-1!==s.indexOf("mp4a.40.2")&&(6<=u&&1==o||/vivaldi/i.test(n))||!s&&1==o)&&(c=2,r=new Array(2)),u)),r[0]=c<<3,r[0]|=(14&u)>>1,r[1]|=(1&u)<<7,r[1]|=o<<3,5===c&&(r[1]|=(14&s)>>1,r[2]=(1&s)<<7,r[2]|=8,r[3]=0),{config:r,samplerate:l[u],channelCount:o,codec:"mp4a.40."+c,manifestCodec:a};t.trigger(w.ERROR,{type:x.MEDIA_ERROR,details:E.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+u})}(e,i,s,o))&&(t.config=o.config,t.samplerate=o.samplerate,t.channelCount=o.channelCount,t.codec=o.codec,t.manifestCodec=o.manifestCodec,I.log("parsed codec:"+t.codec+", rate:"+o.samplerate+", channels:"+o.channelCount))}function as(t){return 9216e4/t}function ls(t,e,i,s,o){var r,n=s+o*as(t.samplerate);s=function(){var t=ss(e,i);if(i+t<=e.length){var s=os(e,i)-t;if(0<s)return{headerLength:t,frameLength:s}}}();if(s){var a=s.frameLength;s=(o=s.headerLength)+a;return(a=Math.max(0,i+s-e.length))?(r=new Uint8Array(s-o)).set(e.subarray(i+o,e.length),0):r=e.subarray(i+o,i+s),o={unit:r,pts:n},a||t.samples.push(o),{sample:o,length:s,missing:a}}return a=e.length-i,(r=new Uint8Array(a)).set(e.subarray(i,e.length),0),{sample:{unit:r,pts:n},length:a,missing:-1}}var cs=function(t){function e(e,i){var s;return(s=t.call(this)||this).observer=void 0,s.config=void 0,s.observer=e,s.config=i,s}a(e,t);var i=e.prototype;return i.resetInitSegment=function(e,i,s,o){t.prototype.resetInitSegment.call(this,e,i,s,o),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:i,duration:o,inputTimeScale:9e4,dropped:0}},e.probe=function(t){if(!t)return!1;for(var e=(ct(t,0)||[]).length,i=t.length;e<i;e++)if(function(t,e){if(rs(t,e)){var i=ss(t,e);if(e+i>=t.length)return;var s=os(t,e);if(s<=i)return;return(s=e+s)===t.length||rs(t,s)}}(t,e))return I.log("ADTS sync word found !"),!0;return!1},i.canParse=function(t,e){return e+5<t.length&&is(t,e)&&os(t,e)<=t.length-e},i.appendFrame=function(t,e,i){if(ns(t,this.observer,e,i,t.manifestCodec),(i=ls(t,e,i,this.basePTS,this.frameIndex))&&0===i.missing)return i},e}($i),us=/\/emsg[-/]ID3/i,ds=((Ks=ms.prototype).resetTimeStamp=function(){},Ks.resetInitSegment=function(t,e,i,s){var o,r,n,a=this.videoTrack=Ji("video",1),l=this.audioTrack=Ji("audio",1),c=this.txtTrack=Ji("text",1);this.id3Track=Ji("id3",1),this.timeOffset=0,null!=t&&t.byteLength&&((r=It(t)).video&&(t=(o=r.video).id,n=o.timescale,o=o.codec,a.id=t,a.timescale=c.timescale=n,a.codec=o),r.audio&&(o=(n=r.audio).id,r=n.timescale,n=n.codec,l.id=o,l.timescale=r,l.codec=n),c.id=wt.text,a.sampleDuration=0,a.duration=l.duration=s)},Ks.resetContiguity=function(){this.remainderData=null},ms.probe=function(t){return 0<Rt(t=16384<t.length?t.subarray(0,16384):t,["moof"]).length},Ks.demux=function(t,e){this.timeOffset=e;var i=t,s=this.videoTrack,o=this.txtTrack;return this.config.progressive?(this.remainderData&&(i=Lt(this.remainderData,t)),t=function(t){var e={valid:null,remainder:null},i=Rt(t,["moof"]);return i?i.length<2?(e.remainder=t,e):(i=i[i.length-1],e.valid=nt(t,0,i.byteOffset-8),e.remainder=nt(t,i.byteOffset-8),e):e}(i),this.remainderData=t.remainder,s.samples=t.valid||new Uint8Array):s.samples=i,i=this.extractID3Track(s,e),o.samples=Ct(e,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:i,textTrack:this.txtTrack}},Ks.flush=function(){var t=this.timeOffset,e=this.videoTrack,i=this.txtTrack;e.samples=this.remainderData||new Uint8Array,this.remainderData=null;var s=this.extractID3Track(e,this.timeOffset);return i.samples=Ct(t,e),{videoTrack:e,audioTrack:Ji(),id3Track:s,textTrack:Ji()}},Ks.extractID3Track=function(t,e){var i=this.id3Track;return!t.samples.length||(t=Rt(t.samples,["emsg"]))&&t.forEach((function(t){var s,o=function(t){var e="",i="",s=0,o=0,r=0,n=0,a=0,l=0;if(0===(u=t[0])){for(;"\0"!==xt(t.subarray(l,l+1));)e+=xt(t.subarray(l,l+1)),l+=1;for(e+=xt(t.subarray(l,l+1)),l+=1;"\0"!==xt(t.subarray(l,l+1));)i+=xt(t.subarray(l,l+1)),l+=1;i+=xt(t.subarray(l,l+1)),l+=1,s=_t(t,12),o=_t(t,16),n=_t(t,20),a=_t(t,24),l=28}else if(1===u){s=_t(t,l+=4);var c=_t(t,l+=4),u=_t(t,l+=4);for(l+=4,r=Math.pow(2,32)*c+u,Number.isSafeInteger(r)||(r=Number.MAX_SAFE_INTEGER,I.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),n=_t(t,l),a=_t(t,l+=4),l+=4;"\0"!==xt(t.subarray(l,l+1));)e+=xt(t.subarray(l,l+1)),l+=1;for(e+=xt(t.subarray(l,l+1)),l+=1;"\0"!==xt(t.subarray(l,l+1));)i+=xt(t.subarray(l,l+1)),l+=1;i+=xt(t.subarray(l,l+1)),l+=1}return{schemeIdUri:e,value:i,timeScale:s,presentationTime:r,presentationTimeDelta:o,eventDuration:n,id:a,payload:t.subarray(l,t.byteLength)}}(t);us.test(o.schemeIdUri)&&(s=S(o.presentationTime)?o.presentationTime/o.timeScale:e+o.presentationTimeDelta/o.timeScale,(t=4294967295===o.eventDuration?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale)<=.001&&(t=Number.POSITIVE_INFINITY),o=o.payload,i.samples.push({data:o,len:o.byteLength,dts:s,pts:s,type:Se,duration:t}))})),i},Ks.demuxSampleAes=function(t,e,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},Ks.destroy=function(){},ms),hs=null,fs=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],ps=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],gs=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],vs=[0,1,1,4];function ms(t,e){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=e}function ys(t,e,i,s,o){if(!(i+24>e.length)){var r=bs(e,i);if(r&&i+r.frameLength<=e.length)return o=s+o*(9e4*r.samplesPerFrame/r.sampleRate),o={unit:e.subarray(i,i+r.frameLength),pts:o,dts:o},t.config=[],t.channelCount=r.channelCount,t.samplerate=r.sampleRate,t.samples.push(o),{sample:o,length:r.frameLength,missing:0}}}function bs(t,e){var i=t[e+1]>>3&3,s=t[e+1]>>1&3,o=t[e+2]>>4&15,r=t[e+2]>>2&3;if(1!=i&&0!=o&&15!=o&&3!=r){var n=t[e+2]>>1&1,a=t[e+3]>>6,l=1e3*fs[14*(3==i?3-s:3==s?3:4)+o-1],c=ps[3*(3==i?0:2==i?1:2)+r],u=3==a?1:2;i=8*(o=gs[i][s])*(r=vs[s]),n=Math.floor(o*l/c+n)*r;return null===hs&&(r=(navigator.userAgent||"").match(/Chrome\/(\d+)/i),hs=r?parseInt(r[1]):0),hs&&hs<=87&&2==s&&224e3<=l&&0==a&&(t[e+3]=128|t[e+3]),{sampleRate:c,channelCount:u,frameLength:n,samplesPerFrame:i}}}function Ts(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])}function Ss(t,e){return e+1<t.length&&Ts(t,e)}var ws=((Fo=Ps.prototype).loadWord=function(){var t=this.data,e=this.bytesAvailable,i=t.byteLength-e,s=new Uint8Array(4);if(0===(e=Math.min(4,e)))throw new Error("no bytes available");s.set(t.subarray(i,i+e)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=8*e,this.bytesAvailable-=e},Fo.skipBits=function(t){var e;t=Math.min(t,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>t||(t-=this.bitsAvailable,t-=(e=t>>3)<<3,this.bytesAvailable-=e,this.loadWord()),this.word<<=t,this.bitsAvailable-=t},Fo.readBits=function(t){var e=Math.min(this.bitsAvailable,t),i=this.word>>>32-e;if(32<t&&I.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,0<this.bitsAvailable)this.word<<=e;else{if(!(0<this.bytesAvailable))throw new Error("no bits available");this.loadWord()}return 0<(e=t-e)&&this.bitsAvailable?i<<e|this.readBits(e):i},Fo.skipLZ=function(){for(var t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},Fo.skipUEG=function(){this.skipBits(1+this.skipLZ())},Fo.skipEG=function(){this.skipBits(1+this.skipLZ())},Fo.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},Fo.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},Fo.readBoolean=function(){return 1===this.readBits(1)},Fo.readUByte=function(){return this.readBits(8)},Fo.readUShort=function(){return this.readBits(16)},Fo.readUInt=function(){return this.readBits(32)},Fo.skipScalingList=function(t){for(var e=8,i=8,s=0;s<t;s++)0!==i&&(i=(e+this.readEG()+256)%256),e=0===i?e:i},Fo.readSPS=function(){var t,e,i,s=0,o=0,r=0,n=0,a=this.readUByte.bind(this),l=this.readBits.bind(this),c=this.readUEG.bind(this),u=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);a();var g=a();if(l(5),d(3),a(),f(),100===g||110===g||122===g||244===g||44===g||83===g||86===g||118===g||128===g){var v=c();if(3===v&&d(1),f(),f(),d(1),u())for(e=3!==v?8:12,i=0;i<e;i++)u()&&p(i<6?16:64)}if(f(),0===(v=c()))c();else if(1===v)for(d(1),h(),h(),t=c(),i=0;i<t;i++)h();f(),d(1),v=c(),f=c(),0===(l=l(1))&&d(1),d(1),u()&&(s=c(),o=c(),r=c(),n=c());var m=[1,1];if(u()&&u())switch(a()){case 1:m=[1,1];break;case 2:m=[12,11];break;case 3:m=[10,11];break;case 4:m=[16,11];break;case 5:m=[40,33];break;case 6:m=[24,11];break;case 7:m=[20,11];break;case 8:m=[32,11];break;case 9:m=[80,33];break;case 10:m=[18,11];break;case 11:m=[15,11];break;case 12:m=[64,33];break;case 13:m=[160,99];break;case 14:m=[4,3];break;case 15:m=[3,2];break;case 16:m=[2,1];break;case 255:m=[a()<<8|a(),a()<<8|a()]}return{width:Math.ceil(16*(v+1)-2*s-2*o),height:(2-l)*(f+1)*16-(l?2:4)*(r+n),pixelRatio:m}},Fo.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},Ps),xs=((Uo=ks.prototype).decryptBuffer=function(t){return this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer)},Uo.decryptAacSample=function(t,e,i){var s,o=this,r=t[e].unit;r.length<=16||(s=(s=r.subarray(16,r.length-r.length%16)).buffer.slice(s.byteOffset,s.byteOffset+s.length),this.decryptBuffer(s).then((function(s){s=new Uint8Array(s),r.set(s,16),o.decrypter.isSync()||o.decryptAacSamples(t,e+1,i)})))},Uo.decryptAacSamples=function(t,e,i){for(;;e++){if(e>=t.length)return void i();if(!(t[e].unit.length<32||(this.decryptAacSample(t,e,i),this.decrypter.isSync())))return}},Uo.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,i=new Int8Array(e),s=0,o=32;o<t.length-16;o+=160,s+=16)i.set(t.subarray(o,o+16),s);return i},Uo.getAvcDecryptedUnit=function(t,e){for(var i=new Uint8Array(e),s=0,o=32;o<t.length-16;o+=160,s+=16)t.set(i.subarray(s,s+16),o);return t},Uo.decryptAvcSample=function(t,e,i,s,o){var r=this,n=Dt(o.data),a=this.getAvcEncryptedData(n);this.decryptBuffer(a.buffer).then((function(a){o.data=r.getAvcDecryptedUnit(n,a),r.decrypter.isSync()||r.decryptAvcSamples(t,e,i+1,s)}))},Uo.decryptAvcSamples=function(t,e,i,s){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;e++,i=0){if(e>=t.length)return void s();for(var o=t[e].units;!(i>=o.length);i++){var r=o[i];if(!(r.data.length<=48||1!==r.type&&5!==r.type||(this.decryptAvcSample(t,e,i,s,r),this.decrypter.isSync())))return}}},ks),Es=188,_s=function(){function t(t,e,i){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=t,this.config=e,this.typeSupported=i}t.probe=function(e){return 0<(e=t.syncOffset(e))&&I.warn("MPEG2-TS detected but first sync word found @ offset "+e),-1!==e},t.syncOffset=function(t){for(var e=t.length,i=Math.min(940,t.length-Es)+1,s=0;s<i;){for(var o=!1,r=-1,n=0,a=s;a<e;a+=Es){if(71!==t[a]){if(n)return-1;break}if(n++,-1===r&&0!==(r=a)&&(i=Math.min(r+18612,t.length-Es)+1),(o=o||0===Is(t,a))&&1<n&&(0===r&&2<n||i<a+Es))return r}s++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:wt[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===t?e:void 0}};var e=t.prototype;return e.resetInitSegment=function(e,i,s,o){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video"),this._audioTrack=t.createTrack("audio",o),this._id3Track=t.createTrack("id3"),this._txtTrack=t.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=i,this.videoCodec=s,this._duration=o},e.resetTimeStamp=function(){},e.resetContiguity=function(){var t=this._audioTrack,e=this._avcTrack,i=this._id3Track;t&&(t.pesData=null),e&&(e.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},e.demux=function(e,i,s,o){var r;void 0===s&&(s=!1),void 0===o&&(o=!1),s||(this.sampleAes=null);var n=this._avcTrack,a=this._audioTrack,l=this._id3Track,c=this._txtTrack,u=n.pid,d=n.pesData,h=a.pid,f=l.pid,p=a.pesData,g=l.pesData,v=null,m=this.pmtParsed,y=this._pmtId,b=e.length;if(this.remainderData&&(b=(e=Lt(this.remainderData,e)).length,this.remainderData=null),b<Es&&!o)return this.remainderData=e,{audioTrack:a,videoTrack:n,id3Track:l,textTrack:c};var T=Math.max(0,t.syncOffset(e));(b-=(b-T)%Es)<e.byteLength&&!o&&(this.remainderData=new Uint8Array(e.buffer,b,e.buffer.byteLength-b));for(var S,_=0,k=T;k<b;k+=Es)if(71===e[k]){var P=!!(64&e[k+1]),R=Is(e,k),A=void 0;if(1<(48&e[k+3])>>4){if((A=k+5+e[k+4])===k+Es)continue}else A=k+4;switch(R){case u:P&&(d&&(r=As(d))&&this.parseAVCPES(n,c,r,!1),d={data:[],size:0}),d&&(d.data.push(e.subarray(A,k+Es)),d.size+=k+Es-A);break;case h:if(P){if(p&&(r=As(p)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,r);break;case"mp3":this.parseMPEGPES(a,r)}p={data:[],size:0}}p&&(p.data.push(e.subarray(A,k+Es)),p.size+=k+Es-A);break;case f:P&&(g&&(r=As(g))&&this.parseID3PES(l,r),g={data:[],size:0}),g&&(g.data.push(e.subarray(A,k+Es)),g.size+=k+Es-A);break;case 0:P&&(A+=e[A]+1),y=this._pmtId=(31&(S=e)[(L=A)+10])<<8|S[L+11];break;case y:P&&(A+=e[A]+1);var L=function(t,e,i,s){var o={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},r=e+3+((15&t[e+1])<<8|t[e+2])-4;for(e+=12+((15&t[e+10])<<8|t[e+11]);e<r;){var n=Is(t,e);switch(t[e]){case 207:if(!s){I.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===o.audio&&(o.audio=n);break;case 21:-1===o.id3&&(o.id3=n);break;case 219:if(!s){I.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===o.avc&&(o.avc=n);break;case 3:case 4:!0!==i.mpeg&&!0!==i.mp3?I.log("MPEG audio found, not supported in this browser"):-1===o.audio&&(o.audio=n,o.segmentCodec="mp3");break;case 36:I.warn("Unsupported HEVC stream type found")}e+=5+((15&t[e+3])<<8|t[e+4])}return o}(e,A,this.typeSupported,s);0<(u=L.avc)&&(n.pid=u),0<(h=L.audio)&&(a.pid=h,a.segmentCodec=L.segmentCodec),0<(f=L.id3)&&(l.pid=f),null===v||m||(I.warn("MPEG-TS PMT found at "+k+" after unknown PID '"+v+"'. Backtracking to sync byte @"+T+" to parse all TS packets."),v=null,k=T-188),m=this.pmtParsed=!0;break;case 17:case 8191:break;default:v=R}}else _++;0<_&&(C=new Error("Found "+_+" TS packet/s that do not start with 0x47"),this.observer.emit(w.ERROR,w.ERROR,{type:x.MEDIA_ERROR,details:E.FRAG_PARSING_ERROR,fatal:!1,error:C,reason:C.message})),n.pesData=d,a.pesData=p,l.pesData=g;var C={audioTrack:a,videoTrack:n,id3Track:l,textTrack:c};return o&&this.extractRemainingSamples(C),C},e.flush=function(){var t=this.remainderData;return this.remainderData=null,t=t?this.demux(t,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t},e.extractRemainingSamples=function(t){var e,i=t.audioTrack,s=t.videoTrack,o=t.id3Track,r=t.textTrack,n=s.pesData,a=i.pesData;t=o.pesData;if(n&&(e=As(n))?(this.parseAVCPES(s,r,e,!0),s.pesData=null):s.pesData=n,a&&(e=As(a))){switch(i.segmentCodec){case"aac":this.parseAACPES(i,e);break;case"mp3":this.parseMPEGPES(i,e)}i.pesData=null}else null!=a&&a.size&&I.log("last AAC PES packet truncated,might overlap between fragments"),i.pesData=a;t&&(e=As(t))?(this.parseID3PES(o,e),o.pesData=null):o.pesData=t},e.demuxSampleAes=function(t,e,i){return i=this.demux(t,i,!0,!this.config.progressive),e=this.sampleAes=new xs(this.observer,this.config,e),this.decrypt(i,e)},e.decrypt=function(t,e){return new Promise((function(i){var s=t.audioTrack,o=t.videoTrack;s.samples&&"aac"===s.segmentCodec?e.decryptAacSamples(s.samples,0,(function(){o.samples?e.decryptAvcSamples(o.samples,0,0,(function(){i(t)})):i(t)})):o.samples&&e.decryptAvcSamples(o.samples,0,0,(function(){i(t)}))}))},e.destroy=function(){this._duration=0},e.parseAVCPES=function(t,e,i,s){var o,r=this,n=this.parseAVCNALu(t,i.data),a=this.avcSample,l=!1;i.data=null,a&&n.length&&!t.audFound&&(Ls(a,t),a=this.avcSample=Rs(!1,i.pts,i.dts,"")),n.forEach((function(s){switch(s.type){case 1:var n=!1;o=!0;var c=s.data;l&&4<c.length&&(2!==(u=new ws(c).readSliceType())&&4!==u&&7!==u&&9!==u||(n=!0)),n&&null!=a&&a.frame&&!a.key&&(Ls(a,t),a=r.avcSample=null),(a=a||(r.avcSample=Rs(!0,i.pts,i.dts,""))).frame=!0,a.key=n;break;case 5:o=!0,null!=a&&a.frame&&!a.key&&(Ls(a,t),a=r.avcSample=null),(a=a||(r.avcSample=Rs(!0,i.pts,i.dts,""))).key=!0,a.frame=!0;break;case 6:o=!0,Mt(s.data,1,i.pts,e.samples);break;case 7:if(l=o=!0,!t.sps){var u=s.data;n=new ws(u).readSPS();t.width=n.width,t.height=n.height,t.pixelRatio=n.pixelRatio,t.sps=[u],t.duration=r._duration;for(var d=u.subarray(1,4),h="avc1.",f=0;f<3;f++){var p=d[f].toString(16);p.length<2&&(p="0"+p),h+=p}t.codec=h}break;case 8:o=!0,t.pps||(t.pps=[s.data]);break;case 9:o=!1,t.audFound=!0,a&&Ls(a,t),a=r.avcSample=Rs(!1,i.pts,i.dts,"");break;case 12:o=!0;break;default:o=!1,a&&(a.debug+="unknown NAL "+s.type+" ")}a&&o&&a.units.push(s)})),s&&a&&(Ls(a,t),this.avcSample=null)},e.getLastNalUnit=function(t){var e,i=this.avcSample;return i&&0!==i.units.length||(i=t[t.length-1]),null!=i&&i.units&&(e=(e=i.units)[e.length-1]),e},e.parseAVCNALu=function(t,e){var i,s,o,r,n,a,l=e.byteLength,c=t.naluState||0,u=c,d=[],h=0,f=-1,p=0;for(-1===c&&(p=31&e[f=0],c=0,h=1);h<l;)i=e[h++],c=c?1!==c?i?1===i?(0<=f?(r={data:e.subarray(f,h-c-1),type:p},d.push(r)):(o=this.getLastNalUnit(t.samples))&&(u&&h<=4-u&&o.state&&(o.data=o.data.subarray(0,o.data.byteLength-u)),0<(s=h-c-1))&&((r=new Uint8Array(o.data.byteLength+s)).set(o.data,0),r.set(e.subarray(0,s),o.data.byteLength),o.data=r,o.state=0),h<l?(p=31&e[f=h],0):-1):0:3:i?0:2:i?0:1;return 0<=f&&0<=c&&(a={data:e.subarray(f,l),type:p,state:c},d.push(a)),0!==d.length||(n=this.getLastNalUnit(t.samples))&&((a=new Uint8Array(n.data.byteLength+e.byteLength)).set(n.data,0),a.set(e,n.data.byteLength),n.data=a),t.naluState=c,d},e.parseAACPES=function(t,e){var i,s,o,r,n=0,a=this.aacOverFlow,l=e.data;for(a&&(this.aacOverFlow=null,c=a.missing,o=a.sample.unit.byteLength,-1===c?((r=new Uint8Array(o+l.byteLength)).set(a.sample.unit,0),r.set(l,o),l=r):(u=o-c,a.sample.unit.set(l.subarray(0,c),u),t.samples.push(a.sample),n=a.missing)),i=n,s=l.length;i<s-1&&!rs(l,i);i++);if(i!==n){var c=i<s-1,u=c?"AAC PES did not start with ADTS header,offset:"+i:"No ADTS header found in AAC PES";n=new Error(u);if(I.warn("parsing error: "+u),this.observer.emit(w.ERROR,w.ERROR,{type:x.MEDIA_ERROR,details:E.FRAG_PARSING_ERROR,fatal:!1,levelRetry:c,error:n,reason:u}),!c)return}if(ns(t,this.observer,l,i,this.audioCodec),void 0!==e.pts)d=e.pts;else{if(!a)return void I.warn("[tsdemuxer]: AAC PES unknown PTS");e=as(t.samplerate);var d=a.sample.pts+e}for(var h,f=0;i<s;){if(i+=(h=ls(t,l,i,d,f)).length,h.missing){this.aacOverFlow=h;break}for(f++;i<s-1&&!rs(l,i);i++);}},e.parseMPEGPES=function(t,e){var i=e.data,s=i.length,o=0,r=0,n=e.pts;if(void 0!==n)for(;r<s;)if(Ss(i,r)){var a=ys(t,i,r,n,o);if(!a)break;r+=a.length,o++}else r++;else I.warn("[tsdemuxer]: MPEG PES unknown PTS")},e.parseID3PES=function(t,e){void 0!==e.pts?(e=n({},e,{type:this._avcTrack?Se:Te,duration:Number.POSITIVE_INFINITY}),t.samples.push(e)):I.warn("[tsdemuxer]: ID3 PES unknown PTS")},t}();function ks(t,e,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new Mi(e,{removePKCS7Padding:!1})}function Ps(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}function Rs(t,e,i,s){return{key:t,frame:!1,pts:e,dts:i,units:[],debug:s,length:0}}function Is(t,e){return((31&t[e+1])<<8)+t[e+2]}function As(t){var e,i,s,o,r=0,n=t.data;if(!t||0===t.size)return null;for(;n[0].length<19&&1<n.length;){var a=new Uint8Array(n[0].length+n[1].length);a.set(n[0]),a.set(n[1],n[0].length),n[0]=a,n.splice(1,1)}if(1!==((e=n[0])[0]<<16)+(e[1]<<8)+e[2])return null;if((i=(e[4]<<8)+e[5])&&i>t.size-6)return null;var l=e[7];192&l&&(s=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&l?54e5<s-(o=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)&&(I.warn(Math.round((s-o)/9e4)+"s delta between PTS and DTS, align them"),s=o):o=s);var c=(l=e[8])+9;if(t.size<=c)return null;t.size-=c;for(var u=new Uint8Array(t.size),d=0,h=n.length;d<h;d++){var f=(e=n[d]).byteLength;if(c){if(f<c){c-=f;continue}e=e.subarray(c),f-=c,c=0}u.set(e,r),r+=f}return i&&(i-=l+3),{data:u,pts:s,dts:o,len:i}}function Ls(t,e){if(t.units.length&&t.frame){if(void 0===t.pts){var i=e.samples,s=i.length;if(!s)return e.dropped++,0;s=i[s-1],t.pts=s.pts,t.dts=s.dts}e.samples.push(t)}t.debug.length&&I.log(t.pts+"/"+t.dts+":"+t.debug)}var Cs=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var i=e.prototype;return i.resetInitSegment=function(e,i,s,o){t.prototype.resetInitSegment.call(this,e,i,s,o),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:i,duration:o,inputTimeScale:9e4,dropped:0}},e.probe=function(t){if(!t)return!1;for(var e=(ct(t,0)||[]).length,i=t.length;e<i;e++)if(function(t,e){if(e+1<t.length&&Ts(t,e)){var i=bs(t,e),s=4;return null!=i&&i.frameLength&&(s=i.frameLength),(s=e+s)===t.length||Ss(t,s)}}(t,e))return I.log("MPEG Audio sync word found !"),!0;return!1},i.canParse=function(t,e){return Ts(t,e)&&4<=t.length-e},i.appendFrame=function(t,e,i){if(null!==this.basePTS)return ys(t,e,i,this.basePTS,this.frameIndex)},e}($i),Ms=(Ns.getSilentFrame=function(t,e){return"mp4a.40.2"===t?1===e?new Uint8Array([0,200,0,128,35,128]):2===e?new Uint8Array([33,0,73,144,2,25,0,35,128]):3===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]):4===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]):5===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]):6===e?new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]):void 0:1===e?new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]):2===e||3===e?new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]):void 0},Ns),Ds=Math.pow(2,32)-1,Os=(Fs.init=function(){for(var t in Fs.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})Fs.types.hasOwnProperty(t)&&(Fs.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var e=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Fs.HDLR_TYPES={video:e,audio:i};var s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);Fs.STTS=Fs.STSC=Fs.STCO=o,Fs.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Fs.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Fs.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Fs.STSD=new Uint8Array([0,0,0,0,0,0,0,1]),e=new Uint8Array([105,115,111,109]),i=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]),Fs.FTYP=Fs.box(Fs.types.ftyp,e,o,e,i),Fs.DINF=Fs.box(Fs.types.dinf,Fs.box(Fs.types.dref,s))},Fs.box=function(t){for(var e=8,i=arguments.length,s=new Array(1<i?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];for(var r=s.length,n=r;r--;)e+=s[r].byteLength;var a=new Uint8Array(e);for(a[0]=e>>24&255,a[1]=e>>16&255,a[2]=e>>8&255,a[3]=255&e,a.set(t,4),r=0,e=8;r<n;r++)a.set(s[r],e),e+=s[r].byteLength;return a},Fs.hdlr=function(t){return Fs.box(Fs.types.hdlr,Fs.HDLR_TYPES[t])},Fs.mdat=function(t){return Fs.box(Fs.types.mdat,t)},Fs.mdhd=function(t,e){e*=t;var i=Math.floor(e/(1+Ds));e=Math.floor(e%(1+Ds));return Fs.box(Fs.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,e>>24,e>>16&255,e>>8&255,255&e,85,196,0,0]))},Fs.mdia=function(t){return Fs.box(Fs.types.mdia,Fs.mdhd(t.timescale,t.duration),Fs.hdlr(t.type),Fs.minf(t))},Fs.mfhd=function(t){return Fs.box(Fs.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},Fs.minf=function(t){return"audio"===t.type?Fs.box(Fs.types.minf,Fs.box(Fs.types.smhd,Fs.SMHD),Fs.DINF,Fs.stbl(t)):Fs.box(Fs.types.minf,Fs.box(Fs.types.vmhd,Fs.VMHD),Fs.DINF,Fs.stbl(t))},Fs.moof=function(t,e,i){return Fs.box(Fs.types.moof,Fs.mfhd(t),Fs.traf(i,e))},Fs.moov=function(t){for(var e=t.length,i=[];e--;)i[e]=Fs.trak(t[e]);return Fs.box.apply(null,[Fs.types.moov,Fs.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(Fs.mvex(t)))},Fs.mvex=function(t){for(var e=t.length,i=[];e--;)i[e]=Fs.trex(t[e]);return Fs.box.apply(null,[Fs.types.mvex].concat(i))},Fs.mvhd=function(t,e){e*=t;var i=Math.floor(e/(1+Ds));e=Math.floor(e%(1+Ds)),e=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,e>>24,e>>16&255,e>>8&255,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Fs.box(Fs.types.mvhd,e)},Fs.sdtp=function(t){for(var e,i=t.samples||[],s=new Uint8Array(4+i.length),o=0;o<i.length;o++)e=i[o].flags,s[o+4]=e.dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return Fs.box(Fs.types.sdtp,s)},Fs.stbl=function(t){return Fs.box(Fs.types.stbl,Fs.stsd(t),Fs.box(Fs.types.stts,Fs.STTS),Fs.box(Fs.types.stsc,Fs.STSC),Fs.box(Fs.types.stsz,Fs.STSZ),Fs.box(Fs.types.stco,Fs.STCO))},Fs.avc1=function(t){for(var e,i,s=[],o=[],r=0;r<t.sps.length;r++)i=(e=t.sps[r]).byteLength,s.push(i>>>8&255),s.push(255&i),s=s.concat(Array.prototype.slice.call(e));for(r=0;r<t.pps.length;r++)i=(e=t.pps[r]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(e));var n=Fs.box(Fs.types.avcC,new Uint8Array([1,s[3],s[4],s[5],255,224|t.sps.length].concat(s).concat([t.pps.length]).concat(o))),a=t.width,l=t.height,c=t.pixelRatio[0],u=t.pixelRatio[1];return Fs.box(Fs.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>8&255,255&a,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n,Fs.box(Fs.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Fs.box(Fs.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,u>>24,u>>16&255,u>>8&255,255&u])))},Fs.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},Fs.mp4a=function(t){var e=t.samplerate;return Fs.box(Fs.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]),Fs.box(Fs.types.esds,Fs.esds(t)))},Fs.mp3=function(t){var e=t.samplerate;return Fs.box(Fs.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]))},Fs.stsd=function(t){return"audio"===t.type?"mp3"===t.segmentCodec&&"mp3"===t.codec?Fs.box(Fs.types.stsd,Fs.STSD,Fs.mp3(t)):Fs.box(Fs.types.stsd,Fs.STSD,Fs.mp4a(t)):Fs.box(Fs.types.stsd,Fs.STSD,Fs.avc1(t))},Fs.tkhd=function(t){var e=t.id,i=t.duration*t.timescale,s=t.width,o=t.height;t=Math.floor(i/(1+Ds)),i=Math.floor(i%(1+Ds));return Fs.box(Fs.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,255&s,0,0,o>>8&255,255&o,0,0]))},Fs.traf=function(t,e){var i=Fs.sdtp(t),s=t.id,o=Math.floor(e/(1+Ds));e=Math.floor(e%(1+Ds));return Fs.box(Fs.types.traf,Fs.box(Fs.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s])),Fs.box(Fs.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,e>>24,e>>16&255,e>>8&255,255&e])),Fs.trun(t,i.length+16+20+8+16+8+8),i)},Fs.trak=function(t){return t.duration=t.duration||4294967295,Fs.box(Fs.types.trak,Fs.tkhd(t),Fs.mdia(t))},Fs.trex=function(t){return t=t.id,Fs.box(Fs.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},Fs.trun=function(t,e){var i,s,o,r,n,a=t.samples||[],l=a.length,c=12+16*l,u=new Uint8Array(c);for(e+=8+c,u.set(["video"===t.type?1:0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,e>>>24&255,e>>>16&255,e>>>8&255,255&e],0),i=0;i<l;i++)s=(n=a[i]).duration,o=n.size,r=n.flags,n=n.cts,u.set([s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o,r.isLeading<<2|r.dependsOn,r.isDependedOn<<6|r.hasRedundancy<<4|r.paddingValue<<1|r.isNonSync,61440&r.degradPrio,15&r.degradPrio,n>>>24&255,n>>>16&255,n>>>8&255,255&n],12+16*i);return Fs.box(Fs.types.trun,u)},Fs.initSegment=function(t){Fs.types||Fs.init();var e=Fs.moov(t);return(t=new Uint8Array(Fs.FTYP.byteLength+e.byteLength)).set(Fs.FTYP),t.set(e,Fs.FTYP.byteLength),t},Fs);function Fs(){}function Ns(){}function Us(t,e,i,s){return void 0===i&&(i=1),void 0===s&&(s=!1),i*=t*e,s?Math.round(i):i}function zs(t,e){return void 0===e&&(e=!1),Us(t,1e3,1/9e4,e)}Os.types=void 0,Os.HDLR_TYPES=void 0,Os.STTS=void 0,Os.STSC=void 0,Os.STCO=void 0,Os.STSZ=void 0,Os.VMHD=void 0,Os.SMHD=void 0,Os.STSD=void 0,Os.FTYP=void 0,Os.DINF=void 0;var Ws=null,Hs=null;(W=Vs.prototype).destroy=function(){},W.resetTimeStamp=function(t){I.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=t},W.resetNextTimestamp=function(){I.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},W.resetInitSegment=function(){I.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},W.getVideoStartPts=function(t){var e=!1;t=t.reduce((function(t,i){var s=i.pts-t;return s<-4294967296?(e=!0,Bs(t,i.pts)):0<s?t:i.pts}),t[0].pts);return e&&I.debug("PTS rollover detected"),t},W.remux=function(t,e,i,s,o,r,n,a){var l,c,u,d,h,f,p,g=o,v=o,m=-1<t.pid,y=-1<e.pid,b=e.samples.length,T=0<t.samples.length,S=n&&0<b||1<b;return(m&&!T||y&&!S)&&!this.ISGenerated&&!n||(this.ISGenerated||(c=this.generateIS(t,e,o,r)),m=this.isVideoContiguous,n=-1,S&&(n=function(t){for(var e=0;e<t.length;e++)if(t[e].key)return e;return-1}(e.samples),!m&&this.config.forceKeyFrameOnDiscontinuity)&&(h=!0,0<n?(I.warn("[mp4-remuxer]: Dropped "+n+" out of "+b+" video samples due to a missing keyframe"),f=this.getVideoStartPts(e.samples),e.samples=e.samples.slice(n),e.dropped+=n,f=v+=(e.samples[0].pts-f)/e.inputTimeScale):-1===n&&(I.warn("[mp4-remuxer]: No keyframe found out of "+b+" video samples"),h=!1)),this.ISGenerated&&(T&&S&&(b=this.getVideoStartPts(e.samples),b=(Bs(t.samples[0].pts,b)-b)/e.inputTimeScale,g+=Math.max(0,b),v+=Math.max(0,-b)),T?(t.samplerate||(I.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),c=this.generateIS(t,e,o,r)),l=this.remuxAudio(t,g,this.isAudioContiguous,r,y||S||a===ue?v:void 0),S&&(p=l?l.endPTS-l.startPTS:0,e.inputTimeScale||(I.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),c=this.generateIS(t,e,o,r)),p=this.remuxVideo(e,v,m,p))):S&&(p=this.remuxVideo(e,v,m,0)),p&&(p.firstKeyFrame=n,p.independent=-1!==n,p.firstKeyFramePTS=f))),this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(d=js(i,o,this._initPTS,this._initDTS)),s.samples.length&&(u=Gs(s,o,this._initPTS))),{audio:l,video:p,initSegment:c,independent:h,text:u,id3:d}},W.generateIS=function(t,e,i,s){var o,r,n,a=t.samples,l=e.samples,c=this.typeSupported,u={},d=this._initPTS,h=!d||s;s="audio/mp4";if(h&&(n=r=1/0),t.config&&a.length&&(t.timescale=t.samplerate,"mp3"===t.segmentCodec&&(c.mpeg?(s="audio/mpeg",t.codec=""):c.mp3&&(t.codec="mp3")),u.audio={id:"audio",container:s,codec:t.codec,initSegment:"mp3"===t.segmentCodec&&c.mpeg?new Uint8Array(0):Os.initSegment([t]),metadata:{channelCount:t.channelCount}},h&&(o=t.inputTimeScale,d&&o===d.timescale?h=!1:n=r=a[0].pts-Math.round(o*i))),e.sps&&e.pps&&l.length&&(e.timescale=e.inputTimeScale,u.video={id:"main",container:"video/mp4",codec:e.codec,initSegment:Os.initSegment([e]),metadata:{width:e.width,height:e.height}},h)&&(o=e.inputTimeScale,d&&o===d.timescale?h=!1:(d=this.getVideoStartPts(l),i=Math.round(o*i),r=Math.min(r,Bs(l[0].dts,d)-i),n=Math.min(n,d-i))),Object.keys(u).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:n,timescale:o},this._initDTS={baseTime:r,timescale:o}):n=o=void 0,{tracks:u,initPTS:n,timescale:o}},W.remuxVideo=function(t,e,i,s){var o,r=t.inputTimeScale,a=t.samples,l=[],c=a.length,u=this._initPTS,d=this.nextAvcDts,h=8,f=this.videoSampleDuration,p=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,v=!1;i&&null!==d||(d=e*r-(a[0].pts-Bs(a[0].dts,a[0].pts)));for(var m=u.baseTime*r/u.timescale,y=0;y<c;y++){var b=a[y];b.pts=Bs(b.pts-m,d),b.dts=Bs(b.dts-m,d),b.dts<a[0<y?y-1:y].dts&&(v=!0)}v&&a.sort((function(t,e){var i=t.dts-e.dts;e=t.pts-e.pts;return i||e})),o=a[0].dts;var T=(u=(e=a[a.length-1].dts)-o)?Math.round(u/(c-1)):f||t.inputTimeScale/30;i&&(u=(F=o-d)<-1,((i=T<F)||u)&&(i?I.warn("AVC: "+zs(F,!0)+" ms ("+F+"dts) hole between fragments detected, filling it"):I.warn("AVC: "+zs(-F,!0)+" ms ("+F+"dts) overlapping between fragments detected"),!u||d>=a[0].pts)&&(o=d,u=a[0].pts-F,a[0].dts=o,a[0].pts=u,I.log("Video: First PTS/DTS adjusted: "+zs(u,!0)+"/"+zs(o,!0)+", delta: "+zs(F,!0)+" ms"))),o=Math.max(0,o);for(var S=0,_=0,k=0;k<c;k++){for(var P=a[k],R=P.units,A=R.length,L=0,C=0;C<A;C++)L+=R[C].data.length;_+=L,S+=A,P.length=L,P.dts=Math.max(P.dts,o),p=Math.min(P.pts,p),g=Math.max(P.pts,g)}e=a[c-1].dts;var M,D=_+4*S+8;try{M=new Uint8Array(D)}catch(t){return void this.observer.emit(w.ERROR,w.ERROR,{type:x.MUX_ERROR,details:E.REMUX_ALLOC_ERROR,fatal:!1,error:t,bytes:D,reason:"fail allocating video mdat "+D})}var O=new DataView(M.buffer);O.setUint32(0,D),M.set(Os.types.mdat,4);for(var F,N=!1,U=Number.POSITIVE_INFINITY,z=Number.POSITIVE_INFINITY,W=Number.NEGATIVE_INFINITY,H=Number.NEGATIVE_INFINITY,V=0;V<c;V++){for(var B=a[V],j=B.units,G=0,Q=0,X=j.length;Q<X;Q++){var q=(K=j[Q]).data,K=K.data.byteLength;O.setUint32(h,K),h+=4,M.set(q,h),h+=K,G+=4+K}var Y,Z,J=void 0;V<c-1?(f=a[V+1].dts-B.dts,J=a[V+1].pts-B.pts):(Y=this.config,$=0<V?B.dts-a[V-1].dts:T,J=0<V?B.pts-a[V-1].pts:T,Y.stretchShortVideoTrack&&null!==this.nextAudioPts&&Math.floor(Y.maxBufferHole*r)<(Z=(s?p+s*r:this.nextAudioPts)-B.pts)?((f=Z-$)<0?f=$:N=!0,I.log("[mp4-remuxer]: It is approximately "+Z/90+" ms to the next segment; using duration "+f/90+" ms for the last video frame.")):f=$);var $=Math.round(B.pts-B.dts);U=Math.min(U,f),W=Math.max(W,f),z=Math.min(z,J),H=Math.max(H,J);l.push(new Xs(B.key,f,G,$))}if(l.length)if(Ws)Ws<70&&((F=l[0].flags).dependsOn=2,F.isNonSync=0);else if(Hs&&H-z<W-U&&T/W<.025&&0===l[0].cts){I.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var tt=o,et=0,it=l.length;et<it;et++){var st,ot=tt+l[et].duration,rt=tt+l[et].cts;et<it-1?(st=ot+l[et+1].cts,l[et].duration=st-rt):l[et].duration=et?l[et-1].duration:T,l[et].cts=0,tt=ot}}return f=N||!f?T:f,this.nextAvcDts=d=e+f,this.videoSampleDuration=f,this.isVideoContiguous=!0,e={data1:Os.moof(t.sequenceNumber++,o,n({},t,{samples:l})),data2:M,startPTS:p/r,endPTS:(g+f)/r,startDTS:o/r,endDTS:d/r,type:"video",hasAudio:!1,hasVideo:!0,nb:l.length,dropped:t.dropped},t.samples=[],t.dropped=0,e},W.remuxAudio=function(t,e,i,s,o){var r=t.inputTimeScale,a=r/(t.samplerate||r),l="aac"===t.segmentCodec?1024:1152,c=l*a,u=this._initPTS,d="mp3"===t.segmentCodec&&this.typeSupported.mpeg,h=[],f=void 0!==o,p=t.samples,g=d?0:8,v=this.nextAudioPts||-1,m=e*r,y=u.baseTime*r/u.timescale;if(this.isAudioContiguous=i=i||p.length&&0<v&&(s&&Math.abs(m-v)<9e3||Math.abs(Bs(p[0].pts-y,m)-v)<20*c),p.forEach((function(t){t.pts=Bs(t.pts-y,m)})),!i||v<0){if(!(p=p.filter((function(t){return 0<=t.pts}))).length)return;v=0===o?0:s&&!f?Math.max(0,m):p[0].pts}if("aac"===t.segmentCodec)for(var b=this.config.maxAudioFramesDrift,T=0,S=v;T<p.length;T++){var _=p[T],k=_.pts,P=k-S,R=Math.abs(1e3*P/r);if(P<=-b*c&&f)0===T&&(I.warn("Audio frame @ "+(k/r).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*P/r)+" ms."),this.nextAudioPts=v=S=k);else if(b*c<=P&&R<1e4&&f){var A=Math.round(P/c);(S=k-A*c)<0&&(A--,S+=c),0===T&&(this.nextAudioPts=v=S),I.warn("[mp4-remuxer]: Injecting "+A+" audio frame @ "+(S/r).toFixed(3)+"s due to "+Math.round(1e3*P/r)+" ms gap.");for(var L=0;L<A;L++){var C=Math.max(S,0),M=Ms.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);M||(I.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),M=_.unit.subarray()),p.splice(T,0,{unit:M,pts:C}),S+=c,T++}}_.pts=S,S+=c}for(var D,O=null,F=null,N=0,U=p.length;U--;)N+=p[U].unit.byteLength;for(var z=0,W=p.length;z<W;z++){var H=(V=p[z]).unit,V=V.pts;if(null!==F)h[z-1].duration=Math.round((V-F)/a);else{if(i&&"aac"===t.segmentCodec&&(V=v),O=V,!(0<N))return;N+=g;try{D=new Uint8Array(N)}catch(t){return void this.observer.emit(w.ERROR,w.ERROR,{type:x.MUX_ERROR,details:E.REMUX_ALLOC_ERROR,fatal:!1,error:t,bytes:N,reason:"fail allocating audio mdat "+N})}d||(new DataView(D.buffer).setUint32(0,N),D.set(Os.types.mdat,4))}D.set(H,g),g+=H=H.byteLength,h.push(new Xs(!0,l,H,0)),F=V}if(u=h.length)return o=h[h.length-1],this.nextAudioPts=v=F+a*o.duration,s=O/r,o=v/r,u={data1:d?new Uint8Array(0):Os.moof(t.sequenceNumber++,O/a,n({},t,{samples:h})),data2:D,startPTS:s,endPTS:o,startDTS:s,endDTS:o,type:"audio",hasAudio:!0,hasVideo:!(t.samples=[]),nb:u},this.isAudioContiguous=!0,u},W.remuxEmptyAudio=function(t,e,i,s){var o=t.inputTimeScale,r=o/(t.samplerate||o),n=this.nextAudioPts,a=9e4*(a=this._initDTS).baseTime/a.timescale,l=(null!==n?n:s.startDTS*o)+a,c=(a=s.endDTS*o+a,1024*r),u=Math.ceil((a-l)/c),d=Ms.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(I.warn("[mp4-remuxer]: remux empty Audio"),d){for(var h=[],f=0;f<u;f++){var p=l+f*c;h.push({unit:d,pts:p,dts:p})}return t.samples=h,this.remuxAudio(t,e,i,!1)}I.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},bi=Vs;function Vs(t,e,i,s){var o;this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=t,this.config=e,this.typeSupported=i,this.ISGenerated=!1,null===Ws&&(o=(navigator.userAgent||"").match(/Chrome\/(\d+)/i),Ws=o?parseInt(o[1]):0),null===Hs&&(o=navigator.userAgent.match(/Safari\/(\d+)/i),Hs=o?parseInt(o[1]):0)}function Bs(t,e){var i;if(null===e)return t;for(i=e<t?-8589934592:8589934592;4294967296<Math.abs(t-e);)t+=i;return t}function js(t,e,i,s){var o=t.samples.length;if(o){for(var r=t.inputTimeScale,n=0;n<o;n++){var a=t.samples[n];a.pts=Bs(a.pts-i.baseTime*r/i.timescale,e*r)/r,a.dts=Bs(a.dts-s.baseTime*r/s.timescale,e*r)/r}var l=t.samples;return t.samples=[],{samples:l}}}function Gs(t,e,i){var s=t.samples.length;if(s){for(var o=t.inputTimeScale,r=0;r<s;r++){var n=t.samples[r];n.pts=Bs(n.pts-i.baseTime*o/i.timescale,e*o)/o}t.samples.sort((function(t,e){return t.pts-e.pts}));var a=t.samples;return t.samples=[],{samples:a}}}var Qs,Xs=function(t,e,i,s){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=e,this.size=i,this.cts=s,this.flags=new qs(t)},qs=function(t){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=t?2:1,this.isNonSync=t?0:1},Ks=((Go=Ys.prototype).destroy=function(){},Go.resetTimeStamp=function(t){this.initPTS=t,this.lastEndTime=null},Go.resetNextTimestamp=function(){this.lastEndTime=null},Go.resetInitSegment=function(t,e,i,s){this.audioCodec=e,this.videoCodec=i,this.generateInitSegment(function(t){if(!t||!s)return t;var e=s.keyId;return e&&s.isCommonEncryption&&Rt(t,["moov","trak"]).forEach((function(t){var i=Rt(t,["mdia","minf","stbl","stsd"])[0].subarray(8),s=0<(t=Rt(i,["enca"])).length;s||(t=Rt(i,["encv"])),t.forEach((function(t){Rt(s?t.subarray(28):t.subarray(78),["sinf"]).forEach((function(t){var i=At(t);i&&((t=i.subarray(8,24)).some((function(t){return 0!==t}))||(I.log("[eme] Patching keyId in 'enc"+(s?"a":"v")+">sinf>>tenc' box: "+bt(t)+" -> "+bt(e)),i.set(e,8)))}))}))})),t}(t)),this.emitInitSegment=!0},Go.generateInitSegment=function(t){var e=this.audioCodec,i=this.videoCodec;if(null==t||!t.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var s=this.initData=It(t),o=(e=e||Zs(s.audio,N),i=i||Zs(s.video,U),{});s.audio&&s.video?o.audiovideo={container:"video/mp4",codec:e+","+i,initSegment:t,id:"main"}:s.audio?o.audio={container:"audio/mp4",codec:e,initSegment:t,id:"audio"}:s.video?o.video={container:"video/mp4",codec:i,initSegment:t,id:"main"}:I.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=o},Go.remux=function(t,e,i,s,o,r){var n=this.initPTS,a=this.lastEndTime,l={audio:void 0,video:void 0,text:s,id3:i,initSegment:void 0};S(a)||(a=this.lastEndTime=o||0);var c=e.samples;if(null==c||!c.length)return l;var u={initPTS:void 0,timescale:1},d=this.initData;if(null!=d&&d.length||(this.generateInitSegment(c),d=this.initData),null==d||!d.length)return I.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),l;this.emitInitSegment&&(u.tracks=this.initTracks,this.emitInitSegment=!1);var h,f=function(t,e){for(var i=0,s=0,o=0,r=Rt(t,["moof","traf"]),n=0;n<r.length;n++){var a=r[n],l=Rt(a,["tfhd"])[0],c=e[_t(l,4)];if(c){var u=c.default,d=_t(l,0)|(null==u?void 0:u.flags),h=null==u?void 0:u.duration;8&d&&(h=_t(l,2&d?12:8));for(var f=c.timescale||9e4,p=Rt(a,["trun"]),g=0;g<p.length;g++)!(i=function(t){var e=_t(t,0),i=8;1&e&&(i+=4),4&e&&(i+=4);for(var s=0,o=_t(t,4),r=0;r<o;r++)256&e&&(s+=_t(t,i),i+=4),512&e&&(i+=4),1024&e&&(i+=4),2048&e&&(i+=4);return s}(p[g]))&&h&&(i=h*_t(p[g],4)),c.type===U?s+=i/f:c.type===N&&(o+=i/f)}}if(0!==s||0!==o)return s||o;for(var v=0,m=Rt(t,["sidx"]),y=0;y<m.length;y++){var b=function(t){var e=[],i=t[0],s=8,o=_t(t,s);s+=4,s+=0===i?8:16,s+=2;var r=t.length+0,n=Et(t,s);s+=2;for(var a=0;a<n;a++){var l=s,c=_t(t,l);l+=4;var u=2147483647&c;if(1==(2147483648&c)>>>31)return I.warn("SIDX has hierarchical references (not supported)"),null;c=_t(t,l),l+=4,e.push({referenceSize:u,subsegmentDuration:c,info:{duration:c/o,start:r,end:r+u-1}}),r+=u,s=l+=4}return{earliestPresentationTime:0,timescale:o,version:i,referencesCount:n,references:e}}(m[y]);null!=b&&b.references&&(v+=b.references.reduce((function(t,e){return t+e.info.duration||0}),0))}return v}(c,d);h=d,e=Rt(c,["moof","traf"]).reduce((function(t,e){var i=Rt(e,["tfdt"])[0],s=i[0];e=Rt(e,["tfhd"]).reduce((function(t,e){var o=_t(e,4);if(e=h[o]){if(o=_t(i,4),1===s){if(o===Tt)return I.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),t;o*=1+Tt,o+=_t(i,8)}if(e=o/(e.timescale||9e4),isFinite(e)&&(null===t||e<t))return e}return t}),null);return null!==e&&isFinite(e)&&(null===t||e<t)?e:t}),null);(function(t,e,i){if(null===t)return 1;var s=Math.max(f,1);t=e-t.baseTime/t.timescale;return Math.abs(t-i)>s}(n,e=null===e?o:e,o)||u.timescale!==n.timescale&&r)&&(u.initPTS=e-o,n&&1===n.timescale&&I.warn("Adjusting initPTS by "+(u.initPTS-n.baseTime)),this.initPTS=n={baseTime:u.initPTS,timescale:1});var p,g;t=(r=t?e-n.baseTime/n.timescale:a)+f;return p=d,g=n.baseTime/n.timescale,Rt(c,["moof","traf"]).forEach((function(t){Rt(t,["tfhd"]).forEach((function(e){var i;e=_t(e,4);(e=p[e])&&(i=e.timescale||9e4,Rt(t,["tfdt"]).forEach((function(t){var e=t[0],s=_t(t,4);0===e?(s-=g*i,Pt(t,4,s=Math.max(s,0))):(s*=Math.pow(2,32),s+=_t(t,8),s-=g*i,s=Math.max(s,0),e=Math.floor(s/(1+Tt)),s=Math.floor(s%(1+Tt)),Pt(t,4,e),Pt(t,8,s))})))}))})),0<f?this.lastEndTime=t:(I.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp()),e=!!d.audio,a=!!d.video,d="",e&&(d+="audio"),a&&(d+="video"),a={data1:c,startPTS:r,startDTS:r,endPTS:t,endDTS:t,type:d,hasAudio:e,hasVideo:a,nb:1,dropped:0},l.audio="audio"===a.type?a:void 0,l.video="audio"!==a.type?a:void 0,l.initSegment=u,l.id3=js(i,o,n,n),s.samples.length&&(l.text=Gs(s,o,n)),l},Ys);function Ys(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}function Zs(t,e){return(t=null==t?void 0:t.codec)&&4<t.length?t:"hvc1"===t||"hev1"===t?"hvc1.1.6.L120.90":"av01"===t?"av01.0.04M.08":"avc1"===t||e===U?"avc1.42e01e":"mp4a.40.5"}try{Qs=self.performance.now.bind(self.performance)}catch(Fo){I.debug("Unable to use Performance API on this environment"),Qs="undefined"!=typeof self&&self.Date.now}var Js=[{demux:ds,remux:Ks},{demux:_s,remux:bi},{demux:cs,remux:bi},{demux:Cs,remux:bi}],$s=((Fo=eo.prototype).configure=function(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset()},Fo.push=function(t,e,i,s){var o=this,r=i.transmuxing;r.executeStart=Qs();var n=new Uint8Array(t),a=this.currentTransmuxState,l=this.transmuxConfig;s&&(this.currentTransmuxState=s);var c=(v=s||a).contiguous,u=v.discontinuity,d=v.trackSwitch,h=v.accurateTimeOffset,f=v.timeOffset,p=v.initSegmentChange,g=l.audioCodec,v=(t=l.videoCodec,s=l.defaultInitPts,a=l.duration,l.initSegmentData);if((l=(l=null,0<n.byteLength&&null!=e&&null!=e.key&&null!==e.iv&&null!=e.method&&(l=e),l))&&"AES-128"===l.method){var m=this.getDecrypter();if(!m.isSync())return this.decryptionPromise=m.webCryptoDecrypt(n,l.key.buffer,l.iv.buffer).then((function(t){return t=o.push(t,null,i),o.decryptionPromise=null,t})),this.decryptionPromise;var y=m.softwareDecrypt(n,l.key.buffer,l.iv.buffer);if(-1<i.part&&(y=m.flush()),!y)return r.executeEnd=Qs(),to(i);n=new Uint8Array(y)}return(m=this.needsProbing(u,d))&&(y=this.configureTransmuxer(n))?(I.warn("[transmuxer] "+y.message),this.observer.emit(w.ERROR,w.ERROR,{type:x.MEDIA_ERROR,details:E.FRAG_PARSING_ERROR,fatal:!1,error:y,reason:y.message}),r.executeEnd=Qs(),to(i)):((u||d||p||m)&&this.resetInitSegment(v,g,t,a,e),(u||p||m)&&this.resetInitialTimestamp(s),c||this.resetContiguity(),f=this.transmux(n,l,f,h,i),(h=this.currentTransmuxState).contiguous=!0,h.discontinuity=!1,h.trackSwitch=!1,r.executeEnd=Qs(),f)},Fo.flush=function(t){var e=this,i=t.transmuxing;i.executeStart=Qs();var s=this.decrypter,o=this.currentTransmuxState,r=this.decryptionPromise;if(r)return r.then((function(){return e.flush(t)}));var n=[];o=o.timeOffset;!s||(a=s.flush())&&n.push(this.push(a,null,t));s=this.demuxer;var a=this.remuxer;return s&&a?io(o=s.flush(o))?o.then((function(i){return e.flushRemux(n,i,t),n})):(this.flushRemux(n,o,t),n):(i.executeEnd=Qs(),[to(t)])},Fo.flushRemux=function(t,e,i){var s=e.audioTrack,o=e.videoTrack,r=e.id3Track,n=e.textTrack,a=(e=(a=this.currentTransmuxState).accurateTimeOffset,a.timeOffset);I.log("[transmuxer.ts]: Flushed fragment "+i.sn+(-1<i.part?" p: "+i.part:"")+" of level "+i.level),e=this.remuxer.remux(s,o,r,n,a,e,!0,this.id),t.push({remuxResult:e,chunkMeta:i}),i.transmuxing.executeEnd=Qs()},Fo.resetInitialTimestamp=function(t){var e=this.demuxer,i=this.remuxer;e&&i&&(e.resetTimeStamp(t),i.resetTimeStamp(t))},Fo.resetContiguity=function(){var t=this.demuxer,e=this.remuxer;t&&e&&(t.resetContiguity(),e.resetNextTimestamp())},Fo.resetInitSegment=function(t,e,i,s,o){var r=this.demuxer,n=this.remuxer;r&&n&&(r.resetInitSegment(t,e,i,s),n.resetInitSegment(t,e,i,o))},Fo.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},Fo.transmux=function(t,e,i,s,o){return e&&"SAMPLE-AES"===e.method?this.transmuxSampleAes(t,e,i,s,o):this.transmuxUnencrypted(t,i,s,o)},Fo.transmuxUnencrypted=function(t,e,i,s){var o=(n=this.demuxer.demux(t,e,!1,!this.config.progressive)).audioTrack,r=n.videoTrack,n=(t=n.id3Track,n.textTrack);return{remuxResult:this.remuxer.remux(o,r,t,n,e,i,!1,this.id),chunkMeta:s}},Fo.transmuxSampleAes=function(t,e,i,s,o){var r=this;return this.demuxer.demuxSampleAes(t,e,i).then((function(t){return{remuxResult:r.remuxer.remux(t.audioTrack,t.videoTrack,t.id3Track,t.textTrack,i,s,!1,r.id),chunkMeta:o}}))},Fo.configureTransmuxer=function(t){for(var e,i=this.config,s=this.observer,o=this.typeSupported,r=this.vendor,n=0,a=Js.length;n<a;n++)if(Js[n].demux.probe(t)){e=Js[n];break}if(!e)return new Error("Failed to find demuxer by probing fragment data");var l=this.demuxer,c=this.remuxer,u=e.remux,d=e.demux;c&&c instanceof u||(this.remuxer=new u(s,i,o,r)),l&&l instanceof d||(this.demuxer=new d(s,i,o),this.probe=d.probe)},Fo.needsProbing=function(t,e){return!this.demuxer||!this.remuxer||t||e},Fo.getDecrypter=function(){return this.decrypter||(this.decrypter=new Mi(this.config))},eo),to=function(t){return{remuxResult:{},chunkMeta:t}};function eo(t,e,i,s,o){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=t,this.typeSupported=e,this.config=i,this.vendor=s,this.id=o}function io(t){return"then"in t&&t.then instanceof Function}function so(t,e,i,s,o){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=e,this.initSegmentData=i,this.duration=s,this.defaultInitPts=o||null}function oo(t,e,i,s,o,r){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=t,this.contiguous=e,this.accurateTimeOffset=i,this.trackSwitch=s,this.timeOffset=o,this.initSegmentChange=r}var ro,no,ao={exports:{}};function lo(){}function co(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function uo(t,e,i,s,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");return o=new co(i,s||t,o),e=no?no+e:e,t._events[e]?t._events[e].fn?t._events[e]=[t._events[e],o]:t._events[e].push(o):(t._events[e]=o,t._eventsCount++),t}function ho(t,e){0==--t._eventsCount?t._events=new lo:delete t._events[e]}function fo(){this._events=new lo,this._eventsCount=0}Uo=ao,ro=Object.prototype.hasOwnProperty,no="~",Object.create&&(lo.prototype=Object.create(null),(new lo).__proto__||(no=!1)),fo.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)ro.call(t,e)&&i.push(no?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},fo.prototype.listeners=function(t){t=no?no+t:t;var e=this._events[t];if(!e)return[];if(e.fn)return[e.fn];for(var i=0,s=e.length,o=new Array(s);i<s;i++)o[i]=e[i].fn;return o},fo.prototype.listenerCount=function(t){return t=no?no+t:t,(t=this._events[t])?t.fn?1:t.length:0},fo.prototype.emit=function(t,e,i,s,o,r){var n=no?no+t:t;if(!this._events[n])return!1;var a,l=this._events[n],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,s),!0;case 5:return l.fn.call(l.context,e,i,s,o),!0;case 6:return l.fn.call(l.context,e,i,s,o,r),!0}for(h=1,a=new Array(c-1);h<c;h++)a[h-1]=arguments[h];l.fn.apply(l.context,a)}else for(var u,d=l.length,h=0;h<d;h++)switch(l[h].once&&this.removeListener(t,l[h].fn,void 0,!0),c){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,e);break;case 3:l[h].fn.call(l[h].context,e,i);break;case 4:l[h].fn.call(l[h].context,e,i,s);break;default:if(!a)for(u=1,a=new Array(c-1);u<c;u++)a[u-1]=arguments[u];l[h].fn.apply(l[h].context,a)}return!0},fo.prototype.on=function(t,e,i){return uo(this,t,e,i,!1)},fo.prototype.once=function(t,e,i){return uo(this,t,e,i,!0)},fo.prototype.removeListener=function(t,e,i,s){if(t=no?no+t:t,!this._events[t])return this;if(!e)return ho(this,t),this;var o=this._events[t];if(o.fn)o.fn!==e||s&&!o.once||i&&o.context!==i||ho(this,t);else{for(var r=0,n=[],a=o.length;r<a;r++)(o[r].fn!==e||s&&!o[r].once||i&&o[r].context!==i)&&n.push(o[r]);n.length?this._events[t]=1===n.length?n[0]:n:ho(this,t)}return this},fo.prototype.removeAllListeners=function(t){return t?(t=no?no+t:t,this._events[t]&&ho(this,t)):(this._events=new lo,this._eventsCount=0),this},fo.prototype.off=fo.prototype.removeListener,fo.prototype.addListener=fo.prototype.on,fo.prefixed=no,fo.EventEmitter=fo,Uo.exports=fo;var po,go,vo,mo=(po=ao.exports)&&po.__esModule&&Object.prototype.hasOwnProperty.call(po,"default")?po.default:po;function yo(t,e){if(!((s=e.remuxResult).audio||s.video||s.text||s.id3||s.initSegment))return!1;var i=[],s=(o=e.remuxResult).audio,o=o.video;return s&&bo(i,s),o&&bo(i,o),t.postMessage({event:"transmuxComplete",data:e},i),!0}function bo(t,e){e.data1&&t.push(e.data1.buffer),e.data2&&t.push(e.data2.buffer)}function To(t,e,i){e.reduce((function(e,i){return yo(t,i)||e}),!1)||t.postMessage({event:"transmuxComplete",data:e[0]}),t.postMessage({event:"flush",data:i})}function So(t,e){go.postMessage({event:t,data:e})}void 0!==e&&e&&(go=self,(vo=new mo).on(w.FRAG_DECRYPTED,So),vo.on(w.ERROR,So),go.addEventListener("message",(function(t){var e=t.data;switch(e.cmd){case"init":var i=JSON.parse(e.config);go.transmuxer=new $s(vo,e.typeSupported,i,e.vendor,e.id),R(i.debug,e.id),function(){for(var t in I)!function(t){I[t]=function(e){So("workerLog",{logType:t,message:e})}}(t)}(),So("init",null);break;case"configure":go.transmuxer.configure(e.config);break;case"demux":io(s=go.transmuxer.push(e.data,e.decryptdata,e.chunkMeta,e.state))?(go.transmuxer.async=!0,s.then((function(t){yo(go,t)})).catch((function(t){So(w.ERROR,{type:x.MEDIA_ERROR,details:E.FRAG_PARSING_ERROR,chunkMeta:e.chunkMeta,fatal:!1,error:t,err:t,reason:"transmuxer-worker push error"})}))):(go.transmuxer.async=!1,yo(go,s));break;case"flush":var s,o=e.chunkMeta;io(s=go.transmuxer.flush(o))||go.transmuxer.async?(io(s)||(s=Promise.resolve(s)),s.then((function(t){To(go,t,o)})).catch((function(t){So(w.ERROR,{type:x.MEDIA_ERROR,details:E.FRAG_PARSING_ERROR,chunkMeta:e.chunkMeta,fatal:!1,error:t,err:t,reason:"transmuxer-worker flush error"})}))):To(go,s,o)}})));var wo=Vt()||{isTypeSupported:function(){return!1}},xo=(($i=Do.prototype).resetWorker=function(){var t,e;this.workerContext&&(t=(e=this.workerContext).worker,(e=e.objectURL)&&self.URL.revokeObjectURL(e),t.removeEventListener("message",this.onwmsg),t.onerror=null,t.terminate(),this.workerContext=null)},$i.destroy=function(){this.workerContext?(this.resetWorker(),this.onwmsg=void 0):(t=this.transmuxer)&&(t.destroy(),this.transmuxer=null);var t=this.observer;t&&t.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},$i.push=function(t,e,i,s,o,r,n,a,l,c){var u=this;l.transmuxing.start=self.performance.now();var d=this.transmuxer,h=(r||o).start,f=o.decryptdata,p=!((T=this.frag)&&o.cc===T.cc),g=!(T&&l.level===T.level),v=T?l.sn-T.sn:-1,m=this.part?l.part-this.part.index:-1,y=0==v&&1<l.id&&l.id===(null==T?void 0:T.stats.chunkCount),b=!g&&(1==v||0==v&&(1==m||y&&m<=0));y=self.performance.now();(g||v||0===o.stats.parsing.start)&&(o.stats.parsing.start=y),!r||!m&&b||(r.stats.parsing.start=y);var T,S=new oo(p,b,a,g,h,T=!(T&&(null==(S=o.initSegment)?void 0:S.url)===(null==(S=T.initSegment)?void 0:S.url)));b&&!p&&!T||(I.log("[transmuxer-interface, "+o.type+"]: Starting new transmux session for sn: "+l.sn+" p: "+l.part+" level: "+l.level+" id: "+l.id+"\n        discontinuity: "+p+"\n        trackSwitch: "+g+"\n        contiguous: "+b+"\n        accurateTimeOffset: "+a+"\n        timeOffset: "+h+"\n        initSegmentChange: "+T),c=new so(i,s,e,n,c),this.configureTransmuxer(c)),this.frag=o,this.part=r,this.workerContext?this.workerContext.worker.postMessage({cmd:"demux",data:t,decryptdata:f,chunkMeta:l,state:S},t instanceof ArrayBuffer?[t]:[]):d&&(io(S=d.push(t,f,l,S))?(d.async=!0,S.then((function(t){u.handleTransmuxComplete(t)})).catch((function(t){u.transmuxerError(t,l,"transmuxer-interface push error")}))):(d.async=!1,this.handleTransmuxComplete(S)))},$i.flush=function(t){var e=this;t.transmuxing.start=self.performance.now();var i,s=this.transmuxer;this.workerContext?this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:t}):s&&(io(i=s.flush(t))||s.async?(io(i)||(i=Promise.resolve(i)),i.then((function(i){e.handleFlushResult(i,t)})).catch((function(i){e.transmuxerError(i,t,"transmuxer-interface flush error")}))):this.handleFlushResult(i,t))},$i.transmuxerError=function(t,e,i){this.hls&&(this.error=t,this.hls.trigger(w.ERROR,{type:x.MEDIA_ERROR,details:E.FRAG_PARSING_ERROR,chunkMeta:e,fatal:!1,error:t,err:t,reason:i}))},$i.handleFlushResult=function(t,e){var i=this;t.forEach((function(t){i.handleTransmuxComplete(t)})),this.onFlush(e)},$i.onWorkerMessage=function(t){var e=t.data,i=this.hls;switch(e.event){case"init":var s=null==(s=this.workerContext)?void 0:s.objectURL;s&&self.URL.revokeObjectURL(s);break;case"transmuxComplete":this.handleTransmuxComplete(e.data);break;case"flush":this.onFlush(e.data);break;case"workerLog":I[e.data.logType]&&I[e.data.logType](e.data.message);break;default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,i.trigger(e.event,e.data)}},$i.configureTransmuxer=function(t){var e=this.transmuxer;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:t}):e&&e.configure(t)},$i.handleTransmuxComplete=function(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)},Do),Eo=((W=Mo.prototype).destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},W.poll=function(t,e){var i=this.config,s=this.media,o=this.stalled;if(null!==s){var r=s.currentTime,n=s.seeking,a=this.seeking&&!n,l=!this.seeking&&n;if(this.seeking=n,r===t){if(l||a)this.stalled=null;else if(!(s.paused&&!n||s.ended||0===s.playbackRate)&&Si.getBuffered(s).length&&(l=0<(t=Si.bufferInfo(s,r,0)).len,a=t.nextStart||0,l||a)){if(n){if(l=2<t.len,e=!a||e&&e.start<=r||2<a-r&&!this.fragmentTracker.getPartialFragment(r),l||e)return;this.moved=!1}if(!this.moved&&null!==this.stalled){a=Math.max(a,t.start||0)-r;var c=null!=(u=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null)&&null!=(c=u.details)&&c.live?2*u.details.targetduration:2,u=this.fragmentTracker.getPartialFragment(r);if(0<a&&(a<=c||u))return void this._trySkipBufferHole(u)}c=self.performance.now(),null!==o?(u=c-o,!n&&250<=u&&(this._reportStall(t),!this.media)||(i=Si.bufferInfo(s,r,i.maxBufferHole),this._tryFixBufferStall(i,u))):this.stalled=c}}else this.moved=!0,null!==o&&(this.stallReported&&(o=self.performance.now()-o,I.warn("playback not stuck anymore @"+r+", after "+Math.round(o)+"ms"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0)}},W._tryFixBufferStall=function(t,e){var i=this.config,s=this.fragmentTracker,o=this.media;null!==o&&(o=o.currentTime,(!(s=s.getPartialFragment(o))||!this._trySkipBufferHole(s)&&this.media)&&(t.len>i.maxBufferHole||t.nextStart&&t.nextStart-o<i.maxBufferHole)&&e>1e3*i.highBufferWatchdogPeriod&&(I.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer()))},W._reportStall=function(t){var e=this.hls,i=this.media;!this.stallReported&&i&&(this.stallReported=!0,i=new Error("Playback stalling at @"+i.currentTime+" due to low buffer ("+JSON.stringify(t)+")"),I.warn(i.message),e.trigger(w.ERROR,{type:x.MEDIA_ERROR,details:E.BUFFER_STALLED_ERROR,fatal:!1,error:i,buffer:t.len}))},W._trySkipBufferHole=function(t){var e=this.config,i=this.hls,s=this.media;if(null===s)return 0;var o=s.currentTime,r=o<(c=Si.bufferInfo(s,o,0)).start?c.start:c.nextStart;if(r){var n=c.len<=e.maxBufferHole,a=0<c.len&&c.len<1&&s.readyState<3;if(0<(c=r-o)&&(n||a)){if(c>e.maxBufferHole){var l=this.fragmentTracker,c=!1;if(0!==o||(e=l.getAppendedFrag(0,ce))&&r<e.end&&(c=!0),!c){var u=t||l.getAppendedFrag(o,ce);if(u){for(var d=!1,h=u.end;h<r;){var f=l.getPartialFragment(h);if(!f){d=!0;break}h+=f.duration}if(d)return 0}}}return u=Math.max(r+.05,o+.1),I.warn("skipping hole, adjusting currentTime from "+o+" to "+u),this.moved=!0,this.stalled=null,s.currentTime=u,t&&!t.gap&&(o=new Error("fragment loaded with buffer holes, seeking from "+o+" to "+u),i.trigger(w.ERROR,{type:x.MEDIA_ERROR,details:E.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:o,reason:o.message,frag:t})),u}}return 0},W._tryNudgeBuffer=function(){var t,e,i=this.config,s=this.hls,o=this.media,r=this.nudgeRetry;null!==o&&(t=o.currentTime,this.nudgeRetry++,r<i.nudgeMaxRetry?(e=t+(r+1)*i.nudgeOffset,r=new Error("Nudging 'currentTime' from "+t+" to "+e),I.warn(r.message),o.currentTime=e,s.trigger(w.ERROR,{type:x.MEDIA_ERROR,details:E.BUFFER_NUDGE_ON_STALL,error:r,fatal:!1})):(i=new Error("Playhead still not moving while enough data buffered @"+t+" after "+i.nudgeMaxRetry+" nudges"),I.error(i.message),s.trigger(w.ERROR,{type:x.MEDIA_ERROR,details:E.BUFFER_STALLED_ERROR,error:i,fatal:!0})))},Mo),_o=function(t){function e(e,i,s){return(s=t.call(this,e,i,s,"[stream-controller]",ce)||this).audioCodecSwap=!1,s.gapController=null,s.level=-1,s._forceStartLoad=!1,s.altAudio=!1,s.audioOnly=!1,s.fragPlaying=null,s.onvplaying=null,s.onvseeked=null,s.fragLastKbps=0,s.couldBacktrack=!1,s.backtrackFragment=null,s.audioCodecSwitch=!1,s.videoBuffer=null,s._registerListeners(),s}a(e,t);var i=e.prototype;return i._registerListeners=function(){var t=this.hls;t.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.MANIFEST_PARSED,this.onManifestParsed,this),t.on(w.LEVEL_LOADING,this.onLevelLoading,this),t.on(w.LEVEL_LOADED,this.onLevelLoaded,this),t.on(w.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(w.ERROR,this.onError,this),t.on(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(w.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(w.BUFFER_CREATED,this.onBufferCreated,this),t.on(w.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(w.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(w.FRAG_BUFFERED,this.onFragBuffered,this)},i._unregisterListeners=function(){var t=this.hls;t.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.MANIFEST_PARSED,this.onManifestParsed,this),t.off(w.LEVEL_LOADED,this.onLevelLoaded,this),t.off(w.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(w.ERROR,this.onError,this),t.off(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(w.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(w.BUFFER_CREATED,this.onBufferCreated,this),t.off(w.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(w.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(w.FRAG_BUFFERED,this.onFragBuffered,this)},i.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},i.startLoad=function(t){var e,i,s;this.levels?(e=this.lastCurrentTime,i=this.hls,this.stopLoad(),this.setInterval(100),this.level=-1,this.startFragRequested||(-1===(s=i.startLevel)&&(i.config.testBandwidth&&1<this.levels.length?(s=0,this.bitrateTest=!0):s=i.nextAutoLevel),this.level=i.nextLoadLevel=s,this.loadedmetadata=!1),0<e&&-1===t&&(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=Oi,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()):(this._forceStartLoad=!0,this.state=Di)},i.stopLoad=function(){this._forceStartLoad=!1,t.prototype.stopLoad.call(this)},i.doTick=function(){switch(this.state){case Gi:var t=this.levels,e=this.level;if((e=null==t||null==(i=t[e])?void 0:i.details)&&(!e.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(e))break;this.state=Oi;break}if(this.hls.nextLoadLevel===this.level)break;this.state=Oi;break;case Ui:var i=self.performance.now();(!(e=this.retryDate)||e<=i||null!=(i=this.media)&&i.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state=Oi)}this.state===Oi&&this.doTickIdle(),this.onTickEnd()},i.onTickEnd=function(){t.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},i.doTickIdle=function(){var t=this.hls,e=this.levelLastLoaded,i=this.levels,s=this.media,o=t.config,r=t.nextLoadLevel;if(null!==e&&(s||!this.startFragRequested&&o.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&null!=i&&i[r]&&(s=i[r],null!==(o=this.getMainFwdBufferInfo()))){if((i=this.getLevelDetails())&&this._streamEnded(o,i)){var n={};return this.altAudio&&(n.type="video"),this.hls.trigger(w.BUFFER_EOS,n),void(this.state=Vi)}if(t.loadLevel!==r&&-1===t.manualLevel&&this.log("Adapting to level "+r+" from level "+this.level),this.level=t.nextLoadLevel=r,!(i=s.details)||this.state===Gi||i.live&&this.levelLastLoaded!==r)return this.level=r,void(this.state=Gi);var a,l;n=o.len;(t=this.getMaxBufferLength(s.maxBitrate))<=n||(this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null),r=this.backtrackFragment?this.backtrackFragment.start:o.end,n=this.getNextFragment(r,i),this.couldBacktrack&&!this.fragPrevious&&n&&"initSegment"!==n.sn&&this.fragmentTracker.getState(n)!==ri?(a=(null!=(l=this.backtrackFragment)?l:n).sn-i.startSN,(l=i.fragments[a-1])&&n.cc===l.cc&&(n=l,this.fragmentTracker.removeFragment(l))):this.backtrackFragment&&o.len&&(this.backtrackFragment=null),n&&this.isLoopLoading(n,r)&&(n.gap||(l=((a=this.audioOnly&&!this.altAudio?N:U)==U?this.videoBuffer:this.mediaBuffer)||this.media)&&this.afterBufferFlushed(l,a,ce),n=this.getNextFragmentLoopLoading(n,i,o,ce,t)),n&&(!n.initSegment||n.initSegment.data||this.bitrateTest||(n=n.initSegment),this.loadFragment(n,s,r)))}},i.loadFragment=function(e,i,s){var o=this.fragmentTracker.getState(e);this.fragCurrent=e,o===ii||o===oi?"initSegment"===e.sn?this._loadInitSegment(e,i):this.bitrateTest?(this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e,i)):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,i,s)):this.clearTrackerIfNeeded(e)},i.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,ce)},i.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.end+.5):null},i.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},i.nextLevelSwitch=function(){var t=this.levels,e=this.media;if(null!=e&&e.readyState){var i=this.getAppendedFrag(e.currentTime);i&&1<i.start&&this.flushMainBuffer(0,i.start-1);var s=this.getLevelDetails();if(null!=s&&s.live&&(!(i=this.getMainFwdBufferInfo())||i.len<2*s.targetduration))return;o=!e.paused&&t?(o=t[this.hls.nextLoadLevel],(r=this.fragLastKbps)&&this.fragCurrent?this.fragCurrent.duration*o.maxBitrate/(1e3*r)+1:0):0;var o,r=this.getBufferedFrag(e.currentTime+o);!r||(e=this.followingBufferedFrag(r))&&(this.abortCurrentFrag(),o=e.maxStartPTS||e.start,e=e.duration,e=Math.max(r.end,o+Math.min(Math.max(e-this.config.maxFragLookUpTolerance,.5*e),.75*e)),this.flushMainBuffer(e,Number.POSITIVE_INFINITY))}},i.abortCurrentFrag=function(){var t=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,t&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.state){case Fi:case Ni:case Ui:case Wi:case Hi:this.state=Oi}this.nextLoadPosition=this.getLoadPosition()},i.flushMainBuffer=function(e,i){t.prototype.flushMainBuffer.call(this,e,i,this.altAudio?"video":null)},i.onMediaAttached=function(e,i){t.prototype.onMediaAttached.call(this,e,i),i=i.media,this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new Eo(this.config,i,this.fragmentTracker,this.hls)},i.onMediaDetaching=function(){var e=this.media;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),t.prototype.onMediaDetaching.call(this)},i.onMediaPlaying=function(){this.tick()},i.onMediaSeeked=function(){var t=(t=this.media)?t.currentTime:null;S(t)&&this.log("Media seeked to "+t.toFixed(3)),null!==(t=this.getMainFwdBufferInfo())&&0!==t.len?this.tick():this.warn('Main forward buffer length on "seeked" event '+(t?t.len:"empty")+")")},i.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(w.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1},i.onManifestParsed=function(t,e){var i,s,o,r=!1,n=!1;e.levels.forEach((function(t){(i=t.audioCodec)&&(-1!==i.indexOf("mp4a.40.2")&&(r=!0),-1!==i.indexOf("mp4a.40.5")&&(n=!0))})),this.audioCodecSwitch=r&&n&&!("function"==typeof(null==(o=Zi())||null==(s=o.prototype)?void 0:s.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1},i.onLevelLoading=function(t,e){var i=this.levels;!i||this.state!==Oi||(!(i=i[e.level]).details||i.details.live&&this.levelLastLoaded!==e.level||this.waitForCdnTuneIn(i.details))&&(this.state=Gi)},i.onLevelLoaded=function(t,e){var i=this.levels,s=e.level,o=e.details,r=o.totalduration;if(i){this.log("Level "+s+" loaded ["+o.startSN+","+o.endSN+"]"+(o.lastPartSn?"[part-"+o.lastPartSn+"-"+o.lastPartIndex+"]":"")+", cc ["+o.startCC+", "+o.endCC+"] duration:"+r);r=i[s];if(!(i=this.fragCurrent)||this.state!==Ni&&this.state!==Ui||i.level===e.level&&i.urlId===r.urlId||!i.loader||this.abortCurrentFrag(),e=0,o.live||null!=(i=r.details)&&i.live){if(o.fragments[0]||(o.deltaUpdateFailed=!0),o.deltaUpdateFailed)return;e=this.alignPlaylists(o,r.details)}if(r.details=o,this.levelLastLoaded=s,this.hls.trigger(w.LEVEL_UPDATED,{details:o,level:s}),this.state===Gi){if(this.waitForCdnTuneIn(o))return;this.state=Oi}this.startFragRequested?o.live&&this.synchronizeToLiveEdge(o):this.setStartPosition(o,e),this.tick()}else this.warn("Levels were reset while loading level "+s)},i._handleFragmentLoadProgress=function(t){var e=t.frag,i=t.part,s=t.payload;if(l=this.levels){var o=(c=l[e.level]).details;if(!o)return this.warn("Dropping fragment "+e.sn+" of level "+e.level+" after level details were reset"),void this.fragmentTracker.removeFragment(e);var r=c.videoCodec,n=o.PTSKnown||!o.live,a=null==(u=e.initSegment)?void 0:u.data,l=(t=this._getAudioCodec(c),this.transmuxer=this.transmuxer||new xo(this.hls,ce,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this))),c=-1!==(u=i?i.index:-1),u=new gi(e.level,e.sn,e.stats.chunkCount,s.byteLength,u,c);c=this.initPTS[e.cc];l.push(s,a,t,r,e,i,o.totalduration,n,u,c)}else this.warn("Levels were reset while fragment load was in progress. Fragment "+e.sn+" of level "+e.level+" will not be buffered")},i.onAudioTrackSwitching=function(t,e){var i,s=this.altAudio;e.url||(this.mediaBuffer!==this.media?(this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media,(i=this.fragCurrent)&&(this.log("Switching to main audio track, cancel main fragment load"),i.abortRequests(),this.fragmentTracker.removeFragment(i)),this.resetTransmuxer(),this.resetLoadingState()):this.audioOnly&&this.resetTransmuxer(),i=this.hls,s&&(i.trigger(w.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),i.trigger(w.AUDIO_TRACK_SWITCHED,e))},i.onAudioTrackSwitched=function(t,e){var i=e.id;!(e=!!this.hls.audioTracks[i].url)||(i=this.videoBuffer)&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i),this.altAudio=e,this.tick()},i.onBufferCreated=function(t,e){var i,s=e.tracks,o=!1;for(i in s){var r,n,a,l=s[i];"main"===l.id?(a=l,"video"===(n=i)&&(r=s[i])&&(this.videoBuffer=r.buffer)):o=!0}o&&a?(this.log("Alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=a.buffer):this.mediaBuffer=this.media},i.onFragBuffered=function(t,e){var i=e.frag,s=e.part;if(!i||i.type===ce){if(this.fragContextChanged(i))return this.warn("Fragment "+i.sn+(s?" p: "+s.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Hi&&(this.state=Oi));e=(s||i).stats,this.fragLastKbps=Math.round(8*e.total/(e.buffering.end-e.loading.first)),"initSegment"!==i.sn&&(this.fragPrevious=i),this.fragBufferedComplete(i,s)}},i.onError=function(t,e){var i;if(e.fatal)this.state=Bi;else switch(e.details){case E.FRAG_GAP:case E.FRAG_PARSING_ERROR:case E.FRAG_DECRYPT_ERROR:case E.FRAG_LOAD_ERROR:case E.FRAG_LOAD_TIMEOUT:case E.KEY_LOAD_ERROR:case E.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ce,e);break;case E.LEVEL_LOAD_ERROR:case E.LEVEL_LOAD_TIMEOUT:case E.LEVEL_PARSING_ERROR:e.levelRetry||this.state!==Gi||(null==(i=e.context)?void 0:i.type)!==ne||(this.state=Oi);break;case E.BUFFER_FULL_ERROR:if(!e.parent||"main"!==e.parent)return;this.reduceLengthAndFlushBuffer(e)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case E.INTERNAL_EXCEPTION:this.recoverWorkerError(e)}},i.checkBuffer=function(){var t,e=this.media,i=this.gapController;e&&i&&e.readyState&&(!this.loadedmetadata&&Si.getBuffered(e).length||(t=this.state!==Oi?this.fragCurrent:null,i.poll(this.lastCurrentTime,t)),this.lastCurrentTime=e.currentTime)},i.onFragLoadEmergencyAborted=function(){this.state=Oi,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},i.onBufferFlushed=function(t,e){var i=e.type;(i!==N||this.audioOnly&&!this.altAudio)&&(e=(i===U?this.videoBuffer:this.mediaBuffer)||this.media,this.afterBufferFlushed(e,i,ce))},i.onLevelsUpdated=function(t,e){this.levels=e.levels},i.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},i.seekToStartPos=function(){var t,e,i,s=this.media;s&&(t=s.currentTime,0<=(e=this.startPosition)&&t<e&&(s.seeking?this.log("could not seek to "+e+", already seeking at "+t):(0<(i=((i=Si.getBuffered(s)).length?i.start(0):0)-e)&&(i<this.config.maxBufferHole||i<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+i+" to match buffer start"),e+=i,this.startPosition=e),this.log("seek to target start position "+e+" from current time "+t),s.currentTime=e)))},i._getAudioCodec=function(t){return t=this.config.defaultAudioCodec||t.audioCodec,this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t},i._loadBitrateTestFrag=function(t,e){var i=this;t.bitrateTest=!0,this._doFragLoad(t,e).then((function(s){var o,r=i.hls;s&&!i.fragContextChanged(t)&&(e.fragmentError=0,i.state=Oi,i.startFragRequested=!1,i.bitrateTest=!1,(o=t.stats).parsing.start=o.parsing.end=o.buffering.start=o.buffering.end=self.performance.now(),r.trigger(w.FRAG_LOADED,s),t.bitrateTest=!1)}))},i._handleTransmuxComplete=function(t){var e,i="main",s=this.hls,o=t.remuxResult,r=t.chunkMeta;if(f=this.getCurrentContext(r)){var n=f.frag,a=f.part,l=f.level,c=o.video,u=o.text,d=o.id3,h=o.initSegment,f=(t=l.details,this.altAudio?void 0:o.audio);if(this.fragContextChanged(n))this.fragmentTracker.removeFragment(n);else{if(this.state=Wi,h&&(null!=h&&h.tracks&&(p=n.initSegment||n,this._bufferInitSegment(l,h.tracks,p,r),s.trigger(w.FRAG_PARSING_INIT_SEGMENT,{frag:p,id:i,tracks:h.tracks})),m=h.initPTS,y=h.timescale,S(m)&&(this.initPTS[n.cc]={baseTime:m,timescale:y},s.trigger(w.INIT_PTS_FOUND,{frag:n,id:i,initPTS:m,timescale:y}))),c&&t&&"initSegment"!==n.sn){var p=t.fragments[n.sn-1-t.startSN],g=n.sn===t.startSN,v=!p||n.cc>p.cc;if(!1!==o.independent){h=c.startPTS;var m=c.endPTS,y=c.startDTS,b=c.endDTS;if(a)a.elementaryStreams[c.type]={startPTS:h,endPTS:m,startDTS:y,endDTS:b};else if(c.firstKeyFrame&&c.independent&&1===r.id&&!v&&(this.couldBacktrack=!0),c.dropped&&c.independent){if(o=((p=this.getMainFwdBufferInfo())?p.end:this.getLoadPosition())+this.config.maxBufferHole,p=c.firstKeyFramePTS||h,!g&&o<p-this.config.maxBufferHole&&!v)return void this.backtrack(n);v&&(n.gap=!0),n.setElementaryStreamInfo(c.type,n.start,m,n.start,b,!0)}n.setElementaryStreamInfo(c.type,h,m,y,b),this.backtrackFragment&&(this.backtrackFragment=n),this.bufferFragmentData(c,n,a,r,g||v)}else{if(!g&&!v)return void this.backtrack(n);n.gap=!0}}f&&(b=f.startPTS,c=f.endPTS,g=f.startDTS,v=f.endDTS,a&&(a.elementaryStreams[N]={startPTS:b,endPTS:c,startDTS:g,endDTS:v}),n.setElementaryStreamInfo(N,b,c,g,v),this.bufferFragmentData(f,n,a,r)),t&&null!=d&&null!=(e=d.samples)&&e.length&&(d={id:i,frag:n,details:t,samples:d.samples},s.trigger(w.FRAG_PARSING_METADATA,d)),t&&u&&(u={id:i,frag:n,details:t,samples:u.samples},s.trigger(w.FRAG_PARSING_USERDATA,u))}}else this.resetWhenMissingContext(r)},i._bufferInitSegment=function(t,e,i,s){var o,r,n,a,l,c=this;this.state===Wi&&(this.audioOnly=!!e.audio&&!e.video,this.altAudio&&!this.audioOnly&&delete e.audio,o=e.audio,r=e.video,n=e.audiovideo,o&&(a=t.audioCodec,l=navigator.userAgent.toLowerCase(),this.audioCodecSwitch&&(a=a&&(-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==o.metadata.channelCount&&-1===l.indexOf("firefox")&&(a="mp4a.40.5")),-1!==l.indexOf("android")&&"audio/mpeg"!==o.container&&(a="mp4a.40.2",this.log("Android: force audio codec to "+a)),t.audioCodec&&t.audioCodec!==a&&this.log('Swapping manifest audio codec "'+t.audioCodec+'" for "'+a+'"'),o.levelCodec=a,o.id="main",this.log("Init audio buffer, container:"+o.container+", codecs[selected/level/parsed]=["+(a||"")+"/"+(t.audioCodec||"")+"/"+o.codec+"]")),r&&(r.levelCodec=t.videoCodec,r.id="main",this.log("Init video buffer, container:"+r.container+", codecs[level/parsed]=["+(t.videoCodec||"")+"/"+r.codec+"]")),n&&this.log("Init audiovideo buffer, container:"+n.container+", codecs[level/parsed]=["+(t.attrs.CODECS||"")+"/"+n.codec+"]"),this.hls.trigger(w.BUFFER_CODECS,e),Object.keys(e).forEach((function(t){var o=e[t].initSegment;null!=o&&o.byteLength&&c.hls.trigger(w.BUFFER_APPENDING,{type:t,data:o,frag:i,part:null,chunkMeta:s,parent:i.type})})),this.tick())},i.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer||this.media,ce)},i.backtrack=function(t){this.couldBacktrack=!0,this.backtrackFragment=t,this.resetTransmuxer(),this.flushBufferGap(t),this.fragmentTracker.removeFragment(t),this.fragPrevious=null,this.nextLoadPosition=t.start,this.state=Oi},i.checkFragmentChanged=function(){var t,e=this.media,i=null;e&&1<e.readyState&&!1===e.seeking&&(t=e.currentTime,Si.isBuffered(e,t)?i=this.getAppendedFrag(t):Si.isBuffered(e,t+.1)&&(i=this.getAppendedFrag(t+.1)),i&&(this.backtrackFragment=null,e=this.fragPlaying,t=i.level,e&&i.sn===e.sn&&e.level===t&&i.urlId===e.urlId||(this.fragPlaying=i,this.hls.trigger(w.FRAG_CHANGED,{frag:i}),e&&e.level===t||this.hls.trigger(w.LEVEL_SWITCHED,{level:t}))))},r(e,[{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"currentFrag",get:function(){var t=this.media;return t?this.fragPlaying||this.getAppendedFrag(t.currentTime):null}},{key:"currentProgramDateTime",get:function(){if(t=this.media){var t,e=t.currentTime;if((t=this.currentFrag)&&S(e)&&S(t.programDateTime))return t=t.programDateTime+1e3*(e-t.start),new Date(t)}return null}},{key:"currentLevel",get:function(){var t=this.currentFrag;return t?t.level:-1}},{key:"nextBufferedFrag",get:function(){var t=this.currentFrag;return t?this.followingBufferedFrag(t):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),e}(Qi),ko=((Go=Co.prototype).sample=function(t,e){var i=Math.pow(this.alpha_,t);this.estimate_=e*(1-i)+i*this.estimate_,this.totalWeight_+=t},Go.getTotalWeight=function(){return this.totalWeight_},Go.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_},Co),Po=((ds=Lo.prototype).update=function(t,e){var i=this.slow_,s=this.fast_,o=this.ttfb_;i.halfLife!==t&&(this.slow_=new ko(t,i.getEstimate(),i.getTotalWeight())),s.halfLife!==e&&(this.fast_=new ko(e,s.getEstimate(),s.getTotalWeight())),o.halfLife!==t&&(this.ttfb_=new ko(t,o.getEstimate(),o.getTotalWeight()))},ds.sample=function(t,e){e=8*e/(t=(t=Math.max(t,this.minDelayMs_))/1e3),this.fast_.sample(t,e),this.slow_.sample(t,e)},ds.sampleTTFB=function(t){var e=t/1e3;e=Math.sqrt(2)*Math.exp(-Math.pow(e,2)/2);this.ttfb_.sample(e,Math.max(t,5))},ds.canEstimate=function(){return this.fast_.getTotalWeight()>=this.minWeight_},ds.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},ds.getEstimateTTFB=function(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_},ds.destroy=function(){},Lo),Ro=(_s=((Ks=Ao.prototype).registerListeners=function(){var t=this.hls;t.on(w.FRAG_LOADING,this.onFragLoading,this),t.on(w.FRAG_LOADED,this.onFragLoaded,this),t.on(w.FRAG_BUFFERED,this.onFragBuffered,this),t.on(w.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(w.LEVEL_LOADED,this.onLevelLoaded,this)},Ks.unregisterListeners=function(){var t=this.hls;t.off(w.FRAG_LOADING,this.onFragLoading,this),t.off(w.FRAG_LOADED,this.onFragLoaded,this),t.off(w.FRAG_BUFFERED,this.onFragBuffered,this),t.off(w.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(w.LEVEL_LOADED,this.onLevelLoaded,this)},Ks.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},Ks.onFragLoading=function(t,e){var i=e.frag;this.ignoreFragment(i)||(this.fragCurrent=i,this.partCurrent=null!=(e=e.part)?e:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))},Ks.onLevelSwitching=function(t,e){this.clearTimer()},Ks.getTimeToLoadFrag=function(t,e,i,s){return t+i/e+(s?this.lastLevelLoadSec:0)},Ks.onLevelLoaded=function(t,e){var i=this.hls.config,s=(o=e.stats).total,o=o.bwEstimate;S(s)&&S(o)&&(this.lastLevelLoadSec=8*s/o),e.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD)},Ks._abandonRulesCheck=function(){var t=this.fragCurrent,e=this.partCurrent,i=this.hls,s=i.autoLevelEnabled,o=i.media;if(t&&o){var r=performance.now(),n=(e||t).stats,a=(e||t).duration,l=r-n.loading.start;if(n.aborted||n.loaded&&n.loaded===n.total||0===t.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(s&&!o.paused&&o.playbackRate&&o.readyState)if(null!==(p=i.mainForwardBufferInfo)){var c=this.bwEstimator.getEstimateTTFB(),u=Math.abs(o.playbackRate);if(!(l<=Math.max(c,a/(2*u)*1e3))){var d=p.len/u;if(!(2*a/u<=d)){r=n.loading.first?n.loading.first-n.loading.start:-1,s=n.loaded&&-1<r,o=this.bwEstimator.getEstimate();var h=i.levels,f=i.minAutoLevel,p=h[t.level];u=n.total||Math.max(n.loaded,Math.round(a*p.maxBitrate/8));if((p=l-r)<1&&s&&(p=Math.min(l,8*n.loaded/o)),!((u=(p=s?1e3*n.loaded/p:0)?(u-n.loaded)/p:8*u/o+c/1e3)<=d)){for(var g=p?8*p:o,v=Number.POSITIVE_INFINITY,m=t.level-1;f<m;m--){var y=h[m].maxBitrate;if((v=this.getTimeToLoadFrag(c/1e3,g,a*y,!h[m].details))<d)break}u<=v||10*a<v||(i.nextLoadLevel=m,s?this.bwEstimator.sample(l-Math.min(c,r),n.loaded):this.bwEstimator.sampleTTFB(l),this.clearTimer(),I.warn("[abr] Fragment "+t.sn+(e?" part "+e.index:"")+" of level "+t.level+" is loading too slowly;\n      Time to underbuffer: "+d.toFixed(3)+" s\n      Estimated load time for current fragment: "+u.toFixed(3)+" s\n      Estimated load time for down switch fragment: "+v.toFixed(3)+" s\n      TTFB estimate: "+r+"\n      Current BW estimate: "+(S(o)?(o/1024).toFixed(3):"Unknown")+" Kb/s\n      New BW estimate: "+(this.bwEstimator.getEstimate()/1024).toFixed(3)+" Kb/s\n      Aborting and switching to level "+m),t.loader&&(this.fragCurrent=this.partCurrent=null,t.abortRequests()),i.trigger(w.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:e,stats:n}))}}}}}},Ks.onFragLoaded=function(t,e){var i,s,o=e.frag,r=e.part,n=(r||o).stats;o.type===ce&&this.bwEstimator.sampleTTFB(n.loading.first-n.loading.start),this.ignoreFragment(o)||(this.clearTimer(),this.lastLoadedFragLevel=o.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate&&(s=(r||o).duration,e=((i=this.hls.levels[o.level]).loaded?i.loaded.bytes:0)+n.loaded,s=(i.loaded?i.loaded.duration:0)+s,i.loaded={bytes:e,duration:s},i.realBitrate=Math.round(8*e/s)),o.bitrateTest&&(r={stats:n,frag:o,part:r,id:o.type},this.onFragBuffered(w.FRAG_BUFFERED,r),o.bitrateTest=!1))},Ks.onFragBuffered=function(t,e){var i=e.frag,s=e.part;(e=(null!=s&&s.stats.loaded?s:i).stats).aborted||this.ignoreFragment(i)||(s=e.parsing.end-e.loading.start-Math.min(e.loading.first-e.loading.start,this.bwEstimator.getEstimateTTFB()),this.bwEstimator.sample(s,e.loaded),e.bwEstimate=this.bwEstimator.getEstimate(),i.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0)},Ks.ignoreFragment=function(t){return t.type!==ce||"initSegment"===t.sn},Ks.clearTimer=function(){self.clearInterval(this.timer)},Ks.getNextABRAutoLevel=function(){var t=this.fragCurrent,e=this.partCurrent,i=this.hls,s=i.maxAutoLevel,o=i.config,r=i.minAutoLevel,n=i.media,a=e?e.duration:t?t.duration:0,l=n&&0!==n.playbackRate?Math.abs(n.playbackRate):1,c=this.bwEstimator?this.bwEstimator.getEstimate():o.abrEwmaDefaultEstimate,u=i.mainForwardBufferInfo;e=(u?u.len:0)/l;return 0<=(t=this.findBestLevel(c,r,s,e,o.abrBandWidthFactor,o.abrBandWidthUpFactor))?t:(I.trace("[abr] "+(e?"rebuffering expected":"buffer is empty")+", finding optimal quality level"),n=a?Math.min(a,o.maxStarvationDelay):o.maxStarvationDelay,i=o.abrBandWidthFactor,u=o.abrBandWidthUpFactor,e||(l=this.bitrateTestDelay)&&(n=(a?Math.min(a,o.maxLoadingDelay):o.maxLoadingDelay)-l,I.trace("[abr] bitrate test took "+Math.round(1e3*l)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*n)+" ms"),i=u=1),t=this.findBestLevel(c,r,s,e+n,i,u),Math.max(t,0))},Ks.findBestLevel=function(t,e,i,s,o,r){for(var n,a=this.fragCurrent,l=this.partCurrent,c=this.lastLoadedFragLevel,u=this.hls.levels,d=u[c],h=!(null==d||null==(n=d.details)||!n.live),f=null==d?void 0:d.codecSet,p=l?l.duration:a?a.duration:0,g=this.bwEstimator.getEstimateTTFB()/1e3,v=e,m=-1,y=i;e<=y;y--){if(!(x=u[y])||f&&x.codecSet!==f)x&&(v=Math.min(y,v),m=Math.max(y,m));else{-1!==m&&I.trace("[abr] Skipped level(s) "+v+"-"+m+' with CODECS:"'+u[m].attrs.CODECS+'"; not compatible with "'+d.attrs.CODECS+'"');var b=x.details,T=(l?null==b?void 0:b.partTarget:null==b?void 0:b.averagetargetduration)||p,w=y<=c?o*t:r*t,x=u[y].maxBitrate;b=this.getTimeToLoadFrag(g,w,x*T,void 0===b);if(I.trace("[abr] level:"+y+" adjustedbw-bitrate:"+Math.round(w-x)+" avgDuration:"+T.toFixed(1)+" maxFetchDuration:"+s.toFixed(1)+" fetchDuration:"+b.toFixed(1)),x<w&&(0===b||!S(b)||h&&!this.bitrateTestDelay||b<s))return y}}return-1},r(Ao,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this.bwEstimator;if(-1!==t&&!e.canEstimate())return t;var i=this.getNextABRAutoLevel();return-1!==t&&(e=this.hls.levels).length>Math.max(t,i)&&e[t].loadError<=e[i].loadError?t:(-1!==t&&(i=Math.min(t,i)),i)},set:function(t){this._nextAutoLevel=t}}]),Ao),(cs=Io.prototype).push=function(t){this.chunks.push(t),this.dataLength+=t.length},cs.flush=function(){var t=this.chunks,e=this.dataLength;return t.length?(t=1===t.length?t[0]:function(t){for(var i=new Uint8Array(e),s=0,o=0;o<t.length;o++){var r=t[o];i.set(r,s),s+=r.length}return i}(t),this.reset(),t):new Uint8Array(0)},cs.reset=function(){this.chunks.length=0,this.dataLength=0},Io);Cs=function(t){function e(e,i,s){return(s=t.call(this,e,i,s,"[audio-stream-controller]",ue)||this).videoBuffer=null,s.videoTrackCC=-1,s.waitingVideoCC=-1,s.bufferedTrack=null,s.switchingTrack=null,s.trackId=-1,s.waitingData=null,s.mainDetails=null,s.bufferFlushed=!1,s.cachedTrackLoadedData=null,s._registerListeners(),s}a(e,t);var i=e.prototype;return i.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null},i._registerListeners=function(){var t=this.hls;t.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.LEVEL_LOADED,this.onLevelLoaded,this),t.on(w.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(w.ERROR,this.onError,this),t.on(w.BUFFER_RESET,this.onBufferReset,this),t.on(w.BUFFER_CREATED,this.onBufferCreated,this),t.on(w.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(w.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(w.FRAG_BUFFERED,this.onFragBuffered,this)},i._unregisterListeners=function(){var t=this.hls;t.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.LEVEL_LOADED,this.onLevelLoaded,this),t.off(w.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(w.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(w.ERROR,this.onError,this),t.off(w.BUFFER_RESET,this.onBufferReset,this),t.off(w.BUFFER_CREATED,this.onBufferCreated,this),t.off(w.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(w.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(w.FRAG_BUFFERED,this.onFragBuffered,this)},i.onInitPtsFound=function(t,e){var i=e.frag,s=e.id,o=e.initPTS;e=e.timescale;"main"===s&&(s=i.cc,this.initPTS[i.cc]={baseTime:o,timescale:e},this.log("InitPTS for cc: "+s+" found from main: "+o),this.videoTrackCC=s,this.state===ji&&this.tick())},i.startLoad=function(t){if(!this.levels)return this.startPosition=t,void(this.state=Di);var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),0<e&&-1===t?(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e,this.state=Oi):(this.loadedmetadata=!1,this.state=zi),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()},i.doTick=function(){switch(this.state){case Oi:this.doTickIdle();break;case zi:var e=this.levels,i=this.trackId;if(a=null==e||null==(a=e[i])?void 0:a.details){if(this.waitForCdnTuneIn(a))break;this.state=ji}break;case Ui:var s=performance.now(),o=this.retryDate;(!o||o<=s||null!=(r=this.media)&&r.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=Oi);break;case ji:var r,n,a;(a=this.waitingData)?(o=a.frag,s=a.part,r=a.cache,a=a.complete,void 0!==this.initPTS[o.cc]?(this.waitingData=null,this.waitingVideoCC=-1,this.state=Ni,n={frag:o,part:s,payload:r.flush(),networkDetails:null},this._handleFragmentLoadProgress(n),a&&t.prototype._handleFragmentLoadComplete.call(this,n)):this.videoTrackCC!==this.waitingVideoCC?(this.log("Waiting fragment cc ("+o.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment()):(n=this.getLoadPosition(),Xe((n=Si.bufferInfo(this.mediaBuffer,n,this.config.maxBufferHole)).end,this.config.maxFragLookUpTolerance,o)<0&&(this.log("Waiting fragment cc ("+o.cc+") @ "+o.start+" cancelled because another fragment at "+n.end+" is needed"),this.clearWaitingFragment()))):this.state=Oi}this.onTickEnd()},i.clearWaitingFragment=function(){var t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Oi)},i.resetLoadingState=function(){this.clearWaitingFragment(),t.prototype.resetLoadingState.call(this)},i.onTickEnd=function(){var t=this.media;null!=t&&t.readyState&&(this.lastCurrentTime=t.currentTime)},i.doTickIdle=function(){var t=this.hls,e=this.levels,i=this.media,s=this.trackId,o=t.config;if(null!=e&&e[s]&&(i||!this.startFragRequested&&o.startFragPrefetch)){var r=e[s],n=r.details;if(!n||n.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(n))this.state=zi;else{var a=this.mediaBuffer||this.media;this.bufferFlushed&&a&&(this.bufferFlushed=!1,this.afterBufferFlushed(a,N,ue));var l=this.getFwdBufferInfo(a,ue);if(null!==l){var c=this.bufferedTrack,u=this.switchingTrack;if(!u&&this._streamEnded(l,n))return t.trigger(w.BUFFER_EOS,{type:"audio"}),void(this.state=Vi);if(o=this.getFwdBufferInfo(this.videoBuffer||this.media,ce),e=l.len,!((s=this.getMaxBufferLength(null==o?void 0:o.len))<=e)||u)if(a=n.fragments[0].start,t=l.end,u&&i&&(e=this.getLoadPosition(),c&&u.attrs!==c.attrs&&(t=e),n.PTSKnown&&e<a&&(l.end>a||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=a+.05)),a=!1,(i=this.getNextFragment(t,n))&&this.isLoopLoading(i,t)&&(a=!!i.gap,i=this.getNextFragmentLoopLoading(i,n,l,ce,s)),i){if((s=o&&i.start>o.end+n.targetduration)||(null==o||!o.len)&&l.len){if(null===(n=this.getAppendedFrag(i.start,ce)))return;if(a=a||!!n.gap||!!s&&0===o.len,s&&!a||a&&l.nextStart&&l.nextStart<n.end)return}this.loadFragment(i,r,t)}else this.bufferFlushed=!0}}}},i.getMaxBufferLength=function(e){var i=t.prototype.getMaxBufferLength.call(this);return e?Math.min(Math.max(i,e),this.config.maxMaxBufferLength):i},i.onMediaDetaching=function(){this.videoBuffer=null,t.prototype.onMediaDetaching.call(this)},i.onAudioTracksUpdated=function(t,e){e=e.audioTracks,this.resetTransmuxer(),this.levels=e.map((function(t){return new Ie(t)}))},i.onAudioTrackSwitching=function(t,e){var i=!!e.url;this.trackId=e.id;var s=this.fragCurrent;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),i?this.setInterval(100):this.resetTransmuxer(),i?(this.switchingTrack=e,this.state=Oi):(this.switchingTrack=null,this.bufferedTrack=e,this.state=Di),this.tick()},i.onManifestLoading=function(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1},i.onLevelLoaded=function(t,e){this.mainDetails=e.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(w.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},i.onAudioTrackLoaded=function(t,e){if(null!=this.mainDetails){var i=this.levels,s=e.details,o=e.id;if(i){this.log("Track "+o+" loaded ["+s.startSN+","+s.endSN+"]"+(s.lastPartSn?"[part-"+s.lastPartSn+"-"+s.lastPartIndex+"]":"")+",duration:"+s.totalduration);var r=i[o];i=0;if(s.live||null!=(n=r.details)&&n.live){var n=this.mainDetails;if(s.fragments[0]||(s.deltaUpdateFailed=!0),s.deltaUpdateFailed||!n)return;i=!r.details&&s.hasProgramDateTime&&n.hasProgramDateTime?(Ii(s,n),s.fragments[0].start):this.alignPlaylists(s,r.details)}r.details=s,this.levelLastLoaded=o,this.startFragRequested||!this.mainDetails&&s.live||this.setStartPosition(r.details,i),this.state!==zi||this.waitForCdnTuneIn(s)||(this.state=Oi),this.tick()}else this.warn("Audio tracks were reset while loading level "+o)}else this.cachedTrackLoadedData=e},i._handleFragmentLoadProgress=function(t){var e=t.frag,i=t.part,s=t.payload,o=this.config,r=this.trackId,n=this.levels;if(n){var a=n[r];if(a){var l=a.details;if(!l)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(e.start);var c=o.defaultAudioCodec||a.audioCodec||"mp4a.40.2",u=(u=this.transmuxer)||(this.transmuxer=new xo(this.hls,ue,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));t=this.initPTS[e.cc],o=null==(n=e.initSegment)?void 0:n.data;void 0!==t?(n=-1!==(a=i?i.index:-1),n=new gi(e.level,e.sn,e.stats.chunkCount,s.byteLength,a,n),u.push(s,o,c,"",e,i,l.totalduration,!1,n,t)):(this.log("Unknown video PTS for cc "+e.cc+", waiting for video PTS before demuxing audio frag "+e.sn+" of ["+l.startSN+" ,"+l.endSN+"],track "+r),(this.waitingData=this.waitingData||{frag:e,part:i,cache:new Ro,complete:!1}).cache.push(new Uint8Array(s)),this.waitingVideoCC=this.videoTrackCC,this.state=ji)}else this.warn("Audio track is undefined on fragment load progress")}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+e.sn+" of level "+e.level+" will not be buffered")},i._handleFragmentLoadComplete=function(e){this.waitingData?this.waitingData.complete=!0:t.prototype._handleFragmentLoadComplete.call(this,e)},i.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},i.onBufferCreated=function(t,e){var i=e.tracks.audio;i&&(this.mediaBuffer=i.buffer||null),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer||null)},i.onFragBuffered=function(t,e){var i=e.frag,o=e.part;i.type===ue?this.fragContextChanged(i)?this.warn("Fragment "+i.sn+(o?" p: "+o.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+(this.switchingTrack?this.switchingTrack.name:"false")):("initSegment"!==i.sn&&(this.fragPrevious=i,(e=this.switchingTrack)&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger(w.AUDIO_TRACK_SWITCHED,s({},e)))),this.fragBufferedComplete(i,o)):this.loadedmetadata||i.type!==ce||(i=this.videoBuffer||this.media)&&Si.getBuffered(i).length&&(this.loadedmetadata=!0)},i.onError=function(e,i){var s;if(i.fatal)this.state=Bi;else switch(i.details){case E.FRAG_GAP:case E.FRAG_PARSING_ERROR:case E.FRAG_DECRYPT_ERROR:case E.FRAG_LOAD_ERROR:case E.FRAG_LOAD_TIMEOUT:case E.KEY_LOAD_ERROR:case E.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ue,i);break;case E.AUDIO_TRACK_LOAD_ERROR:case E.AUDIO_TRACK_LOAD_TIMEOUT:case E.LEVEL_PARSING_ERROR:i.levelRetry||this.state!==zi||(null==(s=i.context)?void 0:s.type)!==ae||(this.state=Oi);break;case E.BUFFER_FULL_ERROR:if(!i.parent||"audio"!==i.parent)return;this.reduceLengthAndFlushBuffer(i)&&(this.bufferedTrack=null,t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"));break;case E.INTERNAL_EXCEPTION:this.recoverWorkerError(i)}},i.onBufferFlushed=function(t,e){e.type===N&&(this.bufferFlushed=!0,this.state===Vi&&(this.state=Oi))},i._handleTransmuxComplete=function(t){var e,i,s,o,r,a,l,c,u=this.hls,d=t.remuxResult,h=t.chunkMeta,f=this.getCurrentContext(h);f?(i=f.frag,s=f.part,o=f.level.details,r=d.audio,c=d.text,l=d.id3,t=d.initSegment,!this.fragContextChanged(i)&&o?(this.state=Wi,this.switchingTrack&&r&&this.completeAudioSwitch(this.switchingTrack),null!=t&&t.tracks&&(a=i.initSegment||i,this._bufferInitSegment(t.tracks,a,h),u.trigger(w.FRAG_PARSING_INIT_SEGMENT,{frag:a,id:"audio",tracks:t.tracks})),r&&(f=r.startPTS,d=r.endPTS,a=r.startDTS,t=r.endDTS,s&&(s.elementaryStreams[N]={startPTS:f,endPTS:d,startDTS:a,endDTS:t}),i.setElementaryStreamInfo(N,f,d,a,t),this.bufferFragmentData(r,i,s,h)),null!=l&&null!=(e=l.samples)&&e.length&&(l=n({id:"audio",frag:i,details:o},l),u.trigger(w.FRAG_PARSING_METADATA,l)),c&&(c=n({id:"audio",frag:i,details:o},c),u.trigger(w.FRAG_PARSING_USERDATA,c))):this.fragmentTracker.removeFragment(i)):this.resetWhenMissingContext(h)},i._bufferInitSegment=function(t,e,i){var s;this.state===Wi&&(t.video&&delete t.video,(s=t.audio)&&(s.levelCodec=s.codec,s.id="audio",this.log("Init audio buffer, container:"+s.container+", codecs[parsed]=["+s.codec+"]"),this.hls.trigger(w.BUFFER_CODECS,t),null!=(s=s.initSegment)&&s.byteLength&&(s={type:"audio",frag:e,part:null,chunkMeta:i,parent:e.type,data:s},this.hls.trigger(w.BUFFER_APPENDING,s)),this.tick()))},i.loadFragment=function(e,i,s){var o=this.fragmentTracker.getState(e);this.fragCurrent=e,this.switchingTrack||o===ii||o===oi?"initSegment"===e.sn?this._loadInitSegment(e,i):null!=(o=i.details)&&o.live&&!this.initPTS[e.cc]?(this.log("Waiting for video PTS in continuity counter "+e.cc+" of live stream before loading audio fragment "+e.sn+" of level "+this.trackId),this.state=ji):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,i,s)):this.clearTrackerIfNeeded(e)},i.completeAudioSwitch=function(e){var i=this.hls,o=this.media,r=null==(n=this.bufferedTrack)?void 0:n.attrs,n=e.attrs;o&&r&&(r.CHANNELS!==n.CHANNELS||r.NAME!==n.NAME||r.LANGUAGE!==n.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.bufferedTrack=e,this.switchingTrack=null,i.trigger(w.AUDIO_TRACK_SWITCHED,s({},e))},e}(Qi),bi=function(t){function e(e){return(e=t.call(this,e,"[audio-track-controller]")||this).tracks=[],e.groupId=null,e.tracksInGroup=[],e.trackId=-1,e.currentTrack=null,e.selectDefaultTrack=!0,e.registerListeners(),e}a(e,t);var i=e.prototype;return i.registerListeners=function(){var t=this.hls;t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.MANIFEST_PARSED,this.onManifestParsed,this),t.on(w.LEVEL_LOADING,this.onLevelLoading,this),t.on(w.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(w.ERROR,this.onError,this)},i.unregisterListeners=function(){var t=this.hls;t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.MANIFEST_PARSED,this.onManifestParsed,this),t.off(w.LEVEL_LOADING,this.onLevelLoading,this),t.off(w.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(w.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(w.ERROR,this.onError,this)},i.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,t.prototype.destroy.call(this)},i.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0},i.onManifestParsed=function(t,e){this.tracks=e.audioTracks||[]},i.onAudioTrackLoaded=function(t,e){var i,s=e.id,o=e.groupId,r=e.details,n=this.tracksInGroup[s];n&&n.groupId===o?(i=n.details,n.details=e.details,this.log("audio-track "+s+' "'+n.name+'" lang:'+n.lang+" group:"+o+" loaded ["+r.startSN+"-"+r.endSN+"]"),s===this.trackId&&this.playlistLoaded(s,e,i)):this.warn("Track with id:"+s+" and group:"+o+" not found in active group "+n.groupId)},i.onLevelLoading=function(t,e){this.switchLevel(e.level)},i.onLevelSwitching=function(t,e){this.switchLevel(e.level)},i.switchLevel=function(t){var e,i=this.hls.levels[t];null!=i&&i.audioGroupIds&&(e=i.audioGroupIds[i.urlId],this.groupId!==e?(this.groupId=e||null,t=this.tracks.filter((function(t){return!e||t.groupId===e})),this.selectDefaultTrack&&!t.some((function(t){return t.default}))&&(this.selectDefaultTrack=!1),i={audioTracks:this.tracksInGroup=t},this.log("Updating audio tracks, "+t.length+" track(s) found in group:"+e),this.hls.trigger(w.AUDIO_TRACKS_UPDATED,i),this.selectInitialTrack()):this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId))},i.onError=function(t,e){!e.fatal&&e.context&&e.context.type===ae&&e.context.id===this.trackId&&e.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(e))},i.setAudioTrack=function(t){var e,i,o,r=this.tracksInGroup;t<0||t>=r.length?this.warn("Invalid id passed to audio-track controller"):(this.clearTimer(),o=this.currentTrack,r[this.trackId],i=(e=r[t]).groupId,r=e.name,this.log("Switching to audio-track "+t+' "'+r+'" lang:'+e.lang+" group:"+i),this.trackId=t,this.currentTrack=e,this.selectDefaultTrack=!1,this.hls.trigger(w.AUDIO_TRACK_SWITCHING,s({},e)),e.details&&!e.details.live||(o=this.switchParams(e.url,null==o?void 0:o.details),this.loadPlaylist(o)))},i.selectInitialTrack=function(){var t=this.tracksInGroup,e=this.findTrackId(this.currentTrack)|this.findTrackId(null);-1!=e?this.setAudioTrack(e):(t=new Error("No track found for running audio group-ID: "+this.groupId+" track count: "+t.length),this.warn(t.message),this.hls.trigger(w.ERROR,{type:x.MEDIA_ERROR,details:E.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t}))},i.findTrackId=function(t){for(var e=this.tracksInGroup,i=0;i<e.length;i++){var s=e[i];if(!this.selectDefaultTrack||s.default){if(!t||void 0!==t.attrs["STABLE-RENDITION-ID"]&&t.attrs["STABLE-RENDITION-ID"]===s.attrs["STABLE-RENDITION-ID"])return s.id;if(t.name===s.name&&t.lang===s.lang)return s.id}}return-1},i.loadPlaylist=function(e){t.prototype.loadPlaylist.call(this);var i=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(i)){var s=i.id,o=i.groupId,r=i.url;if(e)try{r=e.addDirectives(r)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("loading audio-track playlist "+s+' "'+i.name+'" lang:'+i.lang+" group:"+o),this.clearTimer(),this.hls.trigger(w.AUDIO_TRACK_LOADING,{url:r,id:s,groupId:o,deliveryDirectives:e||null})}},r(e,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}}]),e}(Ye);function Io(){this.chunks=[],this.dataLength=0}function Ao(t){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,t=(this.hls=t).config,this.bwEstimator=new Po(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}function Lo(t,e,i,s){void 0===s&&(s=100),this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ko(t),this.fast_=new ko(e),this.defaultTTFB_=s,this.ttfb_=new ko(t)}function Co(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=e,this.totalWeight_=i}function Mo(t,e,i,s){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=t,this.media=e,this.fragmentTracker=i,this.hls=s}function Do(e,i,s,o){var r=this;this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var n=e.config;this.hls=e,this.id=i,this.useWorker=!!n.enableWorker,this.onTransmuxComplete=s,this.onFlush=o,o=function(t,e){(e=e||{}).frag=r.frag,e.id=r.id,t===w.ERROR&&(r.error=e.error),r.hls.trigger(t,e)},this.observer=new mo,this.observer.on(w.FRAG_DECRYPTED,o),this.observer.on(w.ERROR,o);var a,l={mp4:wo.isTypeSupported("video/mp4"),mpeg:wo.isTypeSupported("audio/mpeg"),mp3:wo.isTypeSupported('audio/mp4; codecs="mp3"')},c=navigator.vendor;if(!this.useWorker||"undefined"==typeof Worker||(n.workerPath,0))this.transmuxer=new $s(this.observer,l,n,c,i);else try{n.workerPath?(I.log("loading Web Worker "+n.workerPath+' for "'+i+'"'),this.workerContext=(a=n.workerPath,a=new self.URL(a,self.location.href).href,{worker:new self.Worker(a),scriptURL:a})):(I.log('injecting Web Worker for "'+i+'"'),this.workerContext=(u=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;("+t.toString()+")(true);"],{type:"text/javascript"}),u=self.URL.createObjectURL(u),{worker:new self.Worker(u),objectURL:u})),this.onwmsg=function(t){return r.onWorkerMessage(t)};var u=this.workerContext.worker;u.addEventListener("message",this.onwmsg),u.onerror=function(t){t=new Error(t.message+"  ("+t.filename+":"+t.lineno+")"),n.enableWorker=!1,I.warn('Error in "'+i+'" Web Worker, fallback to inline'),r.hls.trigger(w.ERROR,{type:x.OTHER_ERROR,details:E.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:t})},u.postMessage({cmd:"init",typeSupported:l,vendor:c,id:i,config:JSON.stringify(n)})}catch(e){I.warn('Error setting up "'+i+'" Web Worker, fallback to inline',e),this.resetWorker(),this.error=null,this.transmuxer=new $s(this.observer,l,n,c,i)}}function Oo(t,e){if(t.length===e.length){for(var i=0;i<t.length;i++)if(!function(t,e){var i=t["STABLE-RENDITION-ID"];return i?i===e["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some((function(i){return t[i]!==e[i]}))}(t[i].attrs,e[i].attrs))return;return 1}}var Fo=function(t){function e(e,i,s){return(s=t.call(this,e,i,s,"[subtitle-stream-controller]",de)||this).levels=[],s.currentTrackId=-1,s.tracksBuffered=[],s.mainDetails=null,s._registerListeners(),s}a(e,t);var i=e.prototype;return i.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},i._registerListeners=function(){var t=this.hls;t.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.LEVEL_LOADED,this.onLevelLoaded,this),t.on(w.ERROR,this.onError,this),t.on(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(w.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(w.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(w.FRAG_BUFFERED,this.onFragBuffered,this)},i._unregisterListeners=function(){var t=this.hls;t.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.LEVEL_LOADED,this.onLevelLoaded,this),t.off(w.ERROR,this.onError,this),t.off(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(w.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(w.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(w.FRAG_BUFFERED,this.onFragBuffered,this)},i.startLoad=function(t){this.stopLoad(),this.state=Oi,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()},i.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},i.onMediaDetaching=function(){this.tracksBuffered=[],t.prototype.onMediaDetaching.call(this)},i.onLevelLoaded=function(t,e){this.mainDetails=e.details},i.onSubtitleFragProcessed=function(t,e){var i=e.frag;e=e.success;if(this.fragPrevious=i,this.state=Oi,e){var s=this.tracksBuffered[this.currentTrackId];if(s){for(var o,r=i.start,n=0;n<s.length;n++)if(r>=s[n].start&&r<=s[n].end){o=s[n];break}e=i.start+i.duration,o?o.end=e:(o={start:r,end:e},s.push(o)),this.fragmentTracker.fragBuffered(i)}}},i.onBufferFlushing=function(t,e){var i,s=e.startOffset,o=e.endOffset;0===s&&o!==Number.POSITIVE_INFINITY&&((i=o-1)<=0||(e.endOffsetSubtitles=Math.max(0,i),this.tracksBuffered.forEach((function(t){for(var e=0;e<t.length;)if(t[e].end<=i)t.shift();else{if(!(t[e].start<i))break;t[e].start=i,e++}})),this.fragmentTracker.removeFragmentsInRange(s,i,de)))},i.onFragBuffered=function(t,e){this.loadedmetadata||e.frag.type!==ce||null!=(e=this.media)&&e.buffered.length&&(this.loadedmetadata=!0)},i.onError=function(t,e){(null==(e=e.frag)?void 0:e.type)===de&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Di&&(this.state=Oi))},i.onSubtitleTracksUpdated=function(t,e){var i=this;e=e.subtitleTracks;Oo(this.levels,e)?this.levels=e.map((function(t){return new Ie(t)})):(this.tracksBuffered=[],this.levels=e.map((function(t){return t=new Ie(t),i.tracksBuffered[t.id]=[],t})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,de),this.fragPrevious=null,this.mediaBuffer=null)},i.onSubtitleTrackSwitch=function(t,e){this.currentTrackId=e.id,this.levels.length&&-1!==this.currentTrackId?(null!=(e=this.levels[this.currentTrackId])&&e.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,e&&this.setInterval(500)):this.clearInterval()},i.onSubtitleTrackLoaded=function(t,e){var i=e.details,s=e.id,o=this.currentTrackId,r=this.levels;if(r.length&&(e=r[o],!(s>=r.length||s!==o)&&e)){if(this.mediaBuffer=this.mediaBufferTimeRanges,r=0,i.live||null!=(n=e.details)&&n.live){if(o=this.mainDetails,i.deltaUpdateFailed||!o)return;var n=o.fragments[0];e.details?0===(r=this.alignPlaylists(i,e.details))&&n&&Ne(i,r=n.start):i.hasProgramDateTime&&o.hasProgramDateTime?(Ii(i,o),r=i.fragments[0].start):n&&Ne(i,r=n.start)}e.details=i,this.levelLastLoaded=s,this.startFragRequested||!this.mainDetails&&i.live||this.setStartPosition(e.details,r),this.tick(),i.live&&!this.fragCurrent&&this.media&&this.state===Oi&&(Qe(null,i.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),e.details=void 0))}},i._handleFragmentLoadComplete=function(t){var e,i=this,s=t.frag,o=t.payload,r=(t=s.decryptdata,this.hls);!this.fragContextChanged(s)&&o&&0<o.byteLength&&t&&t.key&&t.iv&&"AES-128"===t.method&&(e=performance.now(),this.decrypter.decrypt(new Uint8Array(o),t.key.buffer,t.iv.buffer).catch((function(t){throw r.trigger(w.ERROR,{type:x.MEDIA_ERROR,details:E.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:s}),t})).then((function(t){var i=performance.now();r.trigger(w.FRAG_DECRYPTED,{frag:s,payload:t,stats:{tstart:e,tdecrypt:i}})})).catch((function(t){i.warn(t.name+": "+t.message),i.state=Oi})))},i.doTick=function(){var t,e,i,s,o,r,n,a,l;this.media?this.state===Oi&&(l=this.currentTrackId,t=(i=this.levels)[l],i.length&&t&&t.details&&(a=this.config,s=this.getLoadPosition(),e=(o=Si.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,a.maxBufferHole)).end,r=o.len,n=this.getFwdBufferInfo(this.media,ce),l=t.details,r>this.getMaxBufferLength(null==n?void 0:n.len)+l.levelTargetDuration||(s=(i=l.fragments).length,o=l.edge,r=null,n=this.fragPrevious,e<o?(a=o-(a=a.maxFragLookUpTolerance)<e?0:a,!(r=Qe(n,i,Math.max(i[0].start,e),a))&&n&&n.start<i[0].start&&(r=i[0])):r=i[s-1],r&&("initSegment"===(r=this.mapToInitFragWhenRequired(r)).sn||(l=i[r.sn-l.startSN-1])&&l.cc===r.cc&&this.fragmentTracker.getState(l)===ii&&(r=l),this.fragmentTracker.getState(r)===ii&&this.loadFragment(r,t,e))))):this.state=Oi},i.getMaxBufferLength=function(e){var i=t.prototype.getMaxBufferLength.call(this);return e?Math.max(i,e):i},i.loadFragment=function(e,i,s){"initSegment"===(this.fragCurrent=e).sn?this._loadInitSegment(e,i):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,i,s))},r(e,[{key:"mediaBufferTimeRanges",get:function(){return new No(this.tracksBuffered[this.currentTrackId]||[])}}]),e}(Qi),No=function(t){function e(e,i,s){if((i>>>=0)>s-1)throw new DOMException("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+i+") is greater than the maximum bound ("+s+")");return t[i][e]}this.buffered=void 0,this.buffered={get length(){return t.length},end:function(i){return e("end",i,t.length)},start:function(i){return e("start",i,t.length)}}},Uo=function(t){function e(e){var i;return(i=t.call(this,e,"[subtitle-track-controller]")||this).media=null,i.tracks=[],i.groupId=null,i.tracksInGroup=[],i.trackId=-1,i.selectDefaultTrack=!0,i.queuedDefaultTrack=-1,i.trackChangeListener=function(){return i.onTextTracksChanged()},i.asyncPollTrackChange=function(){return i.pollTrackChange(0)},i.useTextTrackPolling=!1,i.subtitlePollingInterval=-1,i._subtitleDisplay=!0,i.registerListeners(),i}a(e,t);var i=e.prototype;return i.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,t.prototype.destroy.call(this)},i.registerListeners=function(){var t=this.hls;t.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.MANIFEST_PARSED,this.onManifestParsed,this),t.on(w.LEVEL_LOADING,this.onLevelLoading,this),t.on(w.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(w.ERROR,this.onError,this)},i.unregisterListeners=function(){var t=this.hls;t.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.MANIFEST_PARSED,this.onManifestParsed,this),t.off(w.LEVEL_LOADING,this.onLevelLoading,this),t.off(w.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(w.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(w.ERROR,this.onError,this)},i.onMediaAttached=function(t,e){this.media=e.media,this.media&&(-1<this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},i.pollTrackChange=function(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,t)},i.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),-1<this.trackId&&(this.queuedDefaultTrack=this.trackId),zo(this.media.textTracks).forEach((function(t){ye(t)})),this.subtitleTrack=-1,this.media=null)},i.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},i.onManifestParsed=function(t,e){this.tracks=e.subtitleTracks},i.onSubtitleTrackLoaded=function(t,e){var i=e.id,s=e.details,o=this.trackId,r=this.tracksInGroup[o];r?(o=r.details,r.details=e.details,this.log("subtitle track "+i+" loaded ["+s.startSN+"-"+s.endSN+"]"),i===this.trackId&&this.playlistLoaded(i,e,o)):this.warn("Invalid subtitle track id "+i)},i.onLevelLoading=function(t,e){this.switchLevel(e.level)},i.onLevelSwitching=function(t,e){this.switchLevel(e.level)},i.switchLevel=function(t){var e,i,s,o=this.hls.levels[t];null!=o&&o.textGroupIds&&(e=o.textGroupIds[o.urlId],i=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,this.groupId!==e?(s=this.tracks.filter((function(t){return!e||t.groupId===e})),this.tracksInGroup=s,t=this.findTrackId(null==i?void 0:i.name)||this.findTrackId(),this.groupId=e||null,o={subtitleTracks:s},this.log("Updating subtitle tracks, "+s.length+' track(s) found in "'+e+'" group-id'),this.hls.trigger(w.SUBTITLE_TRACKS_UPDATED,o),-1!==t&&this.setSubtitleTrack(t,i)):this.shouldReloadPlaylist(i)&&this.setSubtitleTrack(this.trackId,i))},i.findTrackId=function(t){for(var e=this.tracksInGroup,i=0;i<e.length;i++){var s=e[i];if((!this.selectDefaultTrack||s.default)&&(!t||t===s.name))return s.id}return-1},i.onError=function(t,e){!e.fatal&&e.context&&e.context.type===le&&e.context.id===this.trackId&&e.context.groupId===this.groupId&&this.checkRetry(e)},i.loadPlaylist=function(e){t.prototype.loadPlaylist.call(this);var i=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(i)){var s=i.id,o=i.groupId,r=i.url;if(e)try{r=e.addDirectives(r)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Loading subtitle playlist for id "+s),this.hls.trigger(w.SUBTITLE_TRACK_LOADING,{url:r,id:s,groupId:o,deliveryDirectives:e||null})}},i.toggleTrackModes=function(t){var e,i=this,s=this.media,o=this.trackId;s&&(s=(e=zo(s.textTracks)).filter((function(t){return t.groupId===i.groupId})),-1===t?[].slice.call(e).forEach((function(t){t.mode="disabled"})):(o=s[o])&&(o.mode="disabled"),(t=s[t])&&(t.mode=this.subtitleDisplay?"showing":"hidden"))},i.setSubtitleTrack=function(t,e){var i,s,o,r,n,a=this.tracksInGroup;this.media?(this.trackId!==t&&this.toggleTrackModes(t),this.trackId===t&&(-1===t||null!=(r=a[t])&&r.details)||t<-1||t>=a.length||(this.clearTimer(),i=a[t],this.log("Switching to subtitle-track "+t+(i?' "'+i.name+'" lang:'+i.lang+" group:"+i.groupId:"")),this.trackId=t,i?(s=i.id,o=void 0===(n=i.groupId)?"":n,r=i.name,a=i.type,n=i.url,this.hls.trigger(w.SUBTITLE_TRACK_SWITCH,{id:s,groupId:o,name:r,type:a,url:n}),e=this.switchParams(i.url,null==e?void 0:e.details),this.loadPlaylist(e)):this.hls.trigger(w.SUBTITLE_TRACK_SWITCH,{id:t}))):this.queuedDefaultTrack=t},i.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,e=zo(this.media.textTracks),i=0;i<e.length;i++)if("hidden"===e[i].mode)t=i;else if("showing"===e[i].mode){t=i;break}this.subtitleTrack!==t&&(this.subtitleTrack=t)}},r(e,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(t){this._subtitleDisplay=t,-1<this.trackId&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1;var e=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(t,e)}}]),e}(Ye);function zo(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];"subtitles"!==s.kind&&"captions"!==s.kind||!s.label||e.push(t[i])}return e}function Wo(t){var e=t;return Qo.hasOwnProperty(t)&&(e=Qo[t]),String.fromCharCode(e)}function Ho(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].toString(16));return e}var Vo=(($i=pr.prototype).append=function(t,e){var i=this.queues[e];i.push(t),1===i.length&&this.buffers[e]&&this.executeNext(e)},$i.insertAbort=function(t,e){this.queues[e].unshift(t),this.executeNext(e)},$i.appendBlocker=function(t){var e,i=new Promise((function(t){e=t})),s={execute:e,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(s,t),i},$i.executeNext=function(t){var e=this.buffers,i=this.queues,s=e[t];if((i=i[t]).length){var o=i[0];try{o.execute()}catch(e){I.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),o.onError(e),null!=s&&s.updating||(i.shift(),this.executeNext(t))}}},$i.shiftAndExecuteNext=function(t){this.queues[t].shift(),this.executeNext(t)},$i.current=function(t){return this.queues[t][0]},pr),Bo=Vt(),jo=/([ha]vc.)(?:\.[^.,]+)+/,Go=((W=fr.prototype).hasSourceTypes=function(){return 0<this.getSourceBufferTypes().length||0<Object.keys(this.pendingTracks).length},W.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},W.registerListeners=function(){var t=this.hls;t.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.MANIFEST_PARSED,this.onManifestParsed,this),t.on(w.BUFFER_RESET,this.onBufferReset,this),t.on(w.BUFFER_APPENDING,this.onBufferAppending,this),t.on(w.BUFFER_CODECS,this.onBufferCodecs,this),t.on(w.BUFFER_EOS,this.onBufferEos,this),t.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(w.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(w.FRAG_PARSED,this.onFragParsed,this),t.on(w.FRAG_CHANGED,this.onFragChanged,this)},W.unregisterListeners=function(){var t=this.hls;t.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.MANIFEST_PARSED,this.onManifestParsed,this),t.off(w.BUFFER_RESET,this.onBufferReset,this),t.off(w.BUFFER_APPENDING,this.onBufferAppending,this),t.off(w.BUFFER_CODECS,this.onBufferCodecs,this),t.off(w.BUFFER_EOS,this.onBufferEos,this),t.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(w.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(w.FRAG_PARSED,this.onFragParsed,this),t.off(w.FRAG_CHANGED,this.onFragChanged,this)},W._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new Vo(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},W.onManifestLoading=function(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null},W.onManifestParsed=function(t,e){var i=2;(!e.audio||e.video)&&e.altAudio||(i=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=i,I.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},W.onMediaAttaching=function(t,e){var i=this.media=e.media;i&&Bo&&((e=this.mediaSource=new Bo).addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),i.src=self.URL.createObjectURL(e),this._objectUrl=i.src,i.addEventListener("emptied",this._onMediaEmptied))},W.onMediaDetaching=function(){var t=this.media,e=this.mediaSource,i=this._objectUrl;if(e){if(I.log("[buffer-controller]: media source detaching"),"open"===e.readyState)try{e.endOfStream()}catch(t){I.warn("[buffer-controller]: onMediaDetaching: "+t.message+" while calling endOfStream")}this.onBufferReset(),e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),t&&(t.removeEventListener("emptied",this._onMediaEmptied),i&&self.URL.revokeObjectURL(i),t.src===i?(t.removeAttribute("src"),t.load()):I.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(w.MEDIA_DETACHED,void 0)},W.onBufferReset=function(){var t=this;this.getSourceBufferTypes().forEach((function(e){var i=t.sourceBuffer[e];try{i&&(t.removeBufferListeners(e),t.mediaSource&&t.mediaSource.removeSourceBuffer(i),t.sourceBuffer[e]=void 0)}catch(i){I.warn("[buffer-controller]: Failed to reset the "+e+" buffer",i)}})),this._initSourceBuffer()},W.onBufferCodecs=function(t,e){var i=this,s=this.getSourceBufferTypes().length;Object.keys(e).forEach((function(t){var o,r,n,a,l,c,u,d,h;s?(o=i.tracks[t])&&"function"==typeof o.buffer.changeType&&(r=(h=e[t]).id,n=h.codec,a=h.levelCodec,l=h.container,c=h.metadata,(u=(o.levelCodec||o.codec).replace(jo,"$1"))!==(d=(a||n).replace(jo,"$1"))&&(h=l+";codecs="+(a||n),i.appendChangeType(t,h),I.log("[buffer-controller]: switching codec "+u+" to "+d),i.tracks[t]={buffer:o.buffer,codec:n,container:l,levelCodec:a,metadata:c,id:r})):i.pendingTracks[t]=e[t]})),s||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},W.appendChangeType=function(t,e){var i=this,s=this.operationQueue,o={execute:function(){var o=i.sourceBuffer[t];o&&(I.log("[buffer-controller]: changing "+t+" sourceBuffer type to "+e),o.changeType(e)),s.shiftAndExecuteNext(t)},onStart:function(){},onComplete:function(){},onError:function(e){I.warn("[buffer-controller]: Failed to change "+t+" SourceBuffer type",e)}};s.append(o,t)},W.onBufferAppending=function(t,e){var i=this,s=this.hls,o=this.operationQueue,r=this.tracks,n=e.data,a=e.type,l=e.frag,c=e.part,u=e.chunkMeta,d=u.buffering[a];e=self.performance.now();d.start=e;var h=l.stats.buffering,f=c?c.stats.buffering:null;0===h.start&&(h.start=e),f&&0===f.start&&(f.start=e);r=r.audio;var p=!1;"audio"===a&&"audio/mpeg"===(null==r?void 0:r.container)&&(p=!this.lastMpegAudioChunk||1===u.id||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);var g=l.start;r={execute:function(){var t,e;d.executeStart=self.performance.now(),p&&(t=i.sourceBuffer[a])&&(e=g-t.timestampOffset,.1<=Math.abs(e)&&(I.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+g+" (delta: "+e+") sn: "+l.sn+")"),t.timestampOffset=g)),i.appendExecutor(n,a)},onStart:function(){},onComplete:function(){var t=self.performance.now();d.executeEnd=d.end=t,0===h.first&&(h.first=t),f&&0===f.first&&(f.first=t);var e,s=i.sourceBuffer,o={};for(e in s)o[e]=Si.getBuffered(s[e]);i.appendError=0,i.hls.trigger(w.BUFFER_APPENDED,{type:a,frag:l,part:c,chunkMeta:u,parent:l.type,timeRanges:o})},onError:function(t){I.error("[buffer-controller]: Error encountered while trying to append to the "+a+" SourceBuffer",t);var e={type:x.MEDIA_ERROR,parent:l.type,details:E.BUFFER_APPEND_ERROR,frag:l,part:c,chunkMeta:u,error:t,err:t,fatal:!1};t.code===DOMException.QUOTA_EXCEEDED_ERR?e.details=E.BUFFER_FULL_ERROR:(i.appendError++,e.details=E.BUFFER_APPEND_ERROR,i.appendError>s.config.appendErrorMaxRetry&&(I.error("[buffer-controller]: Failed "+s.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),e.fatal=!0)),s.trigger(w.ERROR,e)}};o.append(r,a)},W.onBufferFlushing=function(t,e){function i(t){return{execute:s.removeExecutor.bind(s,t,e.startOffset,e.endOffset),onStart:function(){},onComplete:function(){s.hls.trigger(w.BUFFER_FLUSHED,{type:t})},onError:function(e){I.warn("[buffer-controller]: Failed to remove from "+t+" SourceBuffer",e)}}}var s=this,o=this.operationQueue;e.type?o.append(i(e.type),e.type):this.getSourceBufferTypes().forEach((function(t){o.append(i(t),t)}))},W.onFragParsed=function(t,e){var i=this,s=e.frag,o=e.part,r=[];(e=(o||s).elementaryStreams)[z]?r.push("audiovideo"):(e[N]&&r.push("audio"),e[U]&&r.push("video")),0===r.length&&I.warn("Fragments must have at least one ElementaryStreamType set. type: "+s.type+" level: "+s.level+" sn: "+s.sn),this.blockBuffers((function(){var t=self.performance.now();s.stats.buffering.end=t,o&&(o.stats.buffering.end=t),t=(o||s).stats,i.hls.trigger(w.FRAG_BUFFERED,{frag:s,part:o,stats:t,id:s.type})}),r)},W.onFragChanged=function(t,e){this.flushBackBuffer()},W.onBufferEos=function(t,e){var i=this;this.getSourceBufferTypes().reduce((function(t,s){var o=i.sourceBuffer[s];return!o||e.type&&e.type!==s||(o.ending=!0,o.ended||(o.ended=!0,I.log("[buffer-controller]: "+s+" sourceBuffer now EOS"))),t&&!(o&&!o.ended)}),!0)&&(I.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers((function(){i.getSourceBufferTypes().forEach((function(t){(t=i.sourceBuffer[t])&&(t.ending=!1)}));var t=i.mediaSource;t&&"open"===t.readyState?(I.log("[buffer-controller]: Calling mediaSource.endOfStream()"),t.endOfStream()):t&&I.info("[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: "+t.readyState)})))},W.onLevelUpdated=function(t,e){(e=e.details).fragments.length&&(this.details=e,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},W.flushBackBuffer=function(){var t,e,i,s,o,r=this.hls,n=this.details,a=this.media,l=this.sourceBuffer;!a||null===n||(t=this.getSourceBufferTypes()).length&&(s=n.live&&null!==r.config.liveBackBufferLength?r.config.liveBackBufferLength:r.config.backBufferLength,!S(s)||s<0||(e=a.currentTime,i=n.levelTargetDuration,s=Math.max(s,i),o=Math.floor(e/i)*i-s,t.forEach((function(t){var s=l[t];if(s){var a=Si.getBuffered(s);if(0<a.length&&o>a.start(0)){if(r.trigger(w.BACK_BUFFER_REACHED,{bufferEnd:o}),n.live)r.trigger(w.LIVE_BACK_BUFFER_REACHED,{bufferEnd:o});else if(s.ended&&a.end(a.length-1)-e<2*i)return void I.info("[buffer-controller]: Cannot flush "+t+" back buffer while SourceBuffer is in ended state");r.trigger(w.BUFFER_FLUSHING,{startOffset:0,endOffset:o,type:t})}}}))))},W.updateMediaElementDuration=function(){var t,e,i,s,o,r;this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState&&(t=this.details,e=this.hls,r=this.media,i=this.mediaSource,s=t.fragments[0].start+t.totalduration,o=r.duration,r=S(i.duration)?i.duration:0,t.live&&e.config.liveDurationInfinity?(I.log("[buffer-controller]: Media Source duration is set to Infinity"),i.duration=1/0,this.updateSeekableRange(t)):(r<s&&o<s||!S(o))&&(I.log("[buffer-controller]: Updating Media Source duration to "+s.toFixed(3)),i.duration=s))},W.updateSeekableRange=function(t){var e=this.mediaSource,i=t.fragments;i.length&&t.live&&null!=e&&e.setLiveSeekableRange&&(i=Math.max(0,i[0].start),t=Math.max(i,i+t.totalduration),e.setLiveSeekableRange(i,t))},W.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.operationQueue,i=this.pendingTracks,s=Object.keys(i).length;(s&&!t||2===s)&&(this.createSourceBuffers(i),this.pendingTracks={},(i=this.getSourceBufferTypes()).length?(this.hls.trigger(w.BUFFER_CREATED,{tracks:this.tracks}),i.forEach((function(t){e.executeNext(t)}))):(i=new Error("could not create source buffer for media codec(s)"),this.hls.trigger(w.ERROR,{type:x.MEDIA_ERROR,details:E.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:i,reason:i.message})))},W.createSourceBuffers=function(t){var e,i=this.sourceBuffer,s=this.mediaSource;if(!s)throw Error("createSourceBuffers called when mediaSource was null");for(e in t)if(!i[e]){var o=t[e];if(!o)throw Error("source buffer exists for track "+e+", however track does not");var r=o.levelCodec||o.codec,n=o.container+";codecs="+r;I.log("[buffer-controller]: creating sourceBuffer("+n+")");try{var a=i[e]=s.addSourceBuffer(n),l=e;this.addBufferListener(l,"updatestart",this._onSBUpdateStart),this.addBufferListener(l,"updateend",this._onSBUpdateEnd),this.addBufferListener(l,"error",this._onSBUpdateError),this.tracks[e]={buffer:a,codec:r,container:o.container,levelCodec:o.levelCodec,metadata:o.metadata,id:o.id}}catch(t){I.error("[buffer-controller]: error while trying to add sourceBuffer: "+t.message),this.hls.trigger(w.ERROR,{type:x.MEDIA_ERROR,details:E.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:t,mimeType:n})}}},W._onSBUpdateStart=function(t){this.operationQueue.current(t).onStart()},W._onSBUpdateEnd=function(t){var e=this.operationQueue;e.current(t).onComplete(),e.shiftAndExecuteNext(t)},W._onSBUpdateError=function(t,e){var i=new Error(t+" SourceBuffer error");I.error("[buffer-controller]: "+i,e),this.hls.trigger(w.ERROR,{type:x.MEDIA_ERROR,details:E.BUFFER_APPENDING_ERROR,error:i,fatal:!1}),(t=this.operationQueue.current(t))&&t.onError(e)},W.removeExecutor=function(t,e,i){var s=this.media,o=this.mediaSource,r=this.operationQueue,n=this.sourceBuffer[t];if(!s||!o||!n)return I.warn("[buffer-controller]: Attempting to remove from the "+t+" SourceBuffer, but it does not exist"),void r.shiftAndExecuteNext(t);s=S(s.duration)?s.duration:1/0,o=S(o.duration)?o.duration:1/0,(e=Math.max(0,e))<(o=Math.min(i,s,o))&&!n.ending?(n.ended=!1,I.log("[buffer-controller]: Removing ["+e+","+o+"] from the "+t+" SourceBuffer"),n.remove(e,o)):r.shiftAndExecuteNext(t)},W.appendExecutor=function(t,e){var i=this.operationQueue,s=this.sourceBuffer[e];if(!s)return I.warn("[buffer-controller]: Attempting to append to the "+e+" SourceBuffer, but it does not exist"),void i.shiftAndExecuteNext(e);s.ended=!1,s.appendBuffer(t)},W.blockBuffers=function(t,e){var i=this;if(void 0===e&&(e=this.getSourceBufferTypes()),!e.length)return I.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(t);var s=this.operationQueue,o=e.map((function(t){return s.appendBlocker(t)}));Promise.all(o).then((function(){t(),e.forEach((function(t){var e=i.sourceBuffer[t];null!=e&&e.updating||s.shiftAndExecuteNext(t)}))}))},W.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},W.addBufferListener=function(t,e,i){var s=this.sourceBuffer[t];s&&(i=i.bind(this,t),this.listeners[t].push({event:e,listener:i}),s.addEventListener(e,i))},W.removeBufferListeners=function(t){var e=this.sourceBuffer[t];e&&this.listeners[t].forEach((function(t){e.removeEventListener(t.event,t.listener)}))},fr),Qo={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Xo=100,qo={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Ko={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Yo={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Zo={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Jo=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],$o=(hr.prototype.log=function(t,e){this.verboseLevel>=t&&(e="function"==typeof e?e():e,I.log(this.time+" ["+t+"] "+e))},hr),tr=((ds=dr.prototype).reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},ds.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],i=0;i<e.length;i++){var s=e[i];t.hasOwnProperty(s)&&(this[s]=t[s])}},ds.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},ds.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},ds.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},ds.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},dr),er=((Ks=ur.prototype).reset=function(){this.uchar=" ",this.penState.reset()},Ks.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},Ks.setPenState=function(t){this.penState.copy(t)},Ks.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},Ks.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},Ks.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},ur),ir=((cs=cr.prototype).equals=function(t){for(var e=!0,i=0;i<Xo;i++)if(!this.chars[i].equals(t.chars[i])){e=!1;break}return e},cs.copy=function(t){for(var e=0;e<Xo;e++)this.chars[e].copy(t.chars[e])},cs.isEmpty=function(){for(var t=!0,e=0;e<Xo;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},cs.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Xo&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Xo)},cs.moveCursor=function(t){var e=this.pos+t;if(1<t)for(var i=this.pos+1;i<e+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(e)},cs.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},cs.insertChar=function(t){var e=this;144<=t&&this.backSpace();var i=Wo(t);this.pos>=Xo?this.logger.log(0,(function(){return"Cannot insert "+t.toString(16)+" ("+i+") at position "+e.pos+". Skipping it!"})):(this.chars[this.pos].setChar(i,this.currPenState),this.moveCursor(1))},cs.clearFromPos=function(t){for(var e=t;e<Xo;e++)this.chars[e].reset()},cs.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},cs.clearToEndOfRow=function(){this.clearFromPos(this.pos)},cs.getTextString=function(){for(var t=[],e=!0,i=0;i<Xo;i++){var s=this.chars[i].uchar;" "!==s&&(e=!1),t.push(s)}return e?"":t.join("")},cs.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},cr),sr=((Qi=lr.prototype).reset=function(){for(var t=0;t<15;t++)this.rows[t].clear();this.currRow=14},Qi.equals=function(t){for(var e=!0,i=0;i<15;i++)if(!this.rows[i].equals(t.rows[i])){e=!1;break}return e},Qi.copy=function(t){for(var e=0;e<15;e++)this.rows[e].copy(t.rows[e])},Qi.isEmpty=function(){for(var t=!0,e=0;e<15;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},Qi.backSpace=function(){this.rows[this.currRow].backSpace()},Qi.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},Qi.insertChar=function(t){this.rows[this.currRow].insertChar(t)},Qi.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},Qi.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},Qi.setCursor=function(t){this.logger.log(2,"setCursor: "+t),this.rows[this.currRow].setCursor(t)},Qi.setPAC=function(t){this.logger.log(2,(function(){return"pacData = "+JSON.stringify(t)}));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var i=0;i<15;i++)this.rows[i].clear();var s=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){var r=o.rows[s].cueStartTime,n=this.logger.time;if(r&&null!==n&&r<n)for(var a=0;a<this.nrRollUpRows;a++)this.rows[e-this.nrRollUpRows+a+1].copy(o.rows[s+a])}}this.currRow=e,n=this.rows[this.currRow],null!==t.indent&&(l=t.indent,l=Math.max(l-1,0),n.setCursor(t.indent),t.color=n.chars[l].penState.foreground);var l={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(l)},Qi.setBkgData=function(t){this.logger.log(2,(function(){return"bkgData = "+JSON.stringify(t)})),this.backSpace(),this.setPen(t),this.insertChar(32)},Qi.setRollUpRows=function(t){this.nrRollUpRows=t},Qi.rollUp=function(){var t,e=this;null!==this.nrRollUpRows?(this.logger.log(1,(function(){return e.getDisplayText()})),t=this.currRow+1-this.nrRollUpRows,(t=this.rows.splice(t,1)[0]).clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")):this.logger.log(3,"roll_up but nrRollUpRows not set yet")},Qi.getDisplayText=function(t){t=t||!1;for(var e,i=[],s="",o=0;o<15;o++){var r=this.rows[o].getTextString();r&&(e=o+1,t?i.push("Row "+e+": '"+r+"'"):i.push(r.trim()))}return 0<i.length&&(s=t?"["+i.join(" | ")+"]":i.join("\n")),s},Qi.getTextAndFormat=function(){return this.rows},lr),or=((Ye=ar.prototype).reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},Ye.getHandler=function(){return this.outputFilter},Ye.setHandler=function(t){this.outputFilter=t},Ye.setPAC=function(t){this.writeScreen.setPAC(t)},Ye.setBkgData=function(t){this.writeScreen.setBkgData(t)},Ye.setMode=function(t){t!==this.mode&&(this.mode=t,this.logger.log(2,(function(){return"MODE="+t})),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},Ye.insertChars=function(t){for(var e=this,i=0;i<t.length;i++)this.writeScreen.insertChar(t[i]);var s=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(function(){return s+": "+e.writeScreen.getDisplayText(!0)})),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(function(){return"DISPLAYED: "+e.displayedMemory.getDisplayText(!0)})),this.outputDataUpdate())},Ye.ccRCL=function(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},Ye.ccBS=function(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},Ye.ccAOF=function(){},Ye.ccAON=function(){},Ye.ccDER=function(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},Ye.ccRU=function(t){this.logger.log(2,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},Ye.ccFON=function(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},Ye.ccRDC=function(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},Ye.ccTR=function(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")},Ye.ccRTD=function(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")},Ye.ccEDM=function(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},Ye.ccCR=function(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},Ye.ccENM=function(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},Ye.ccEOC=function(){var t,e=this;this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(t=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(function(){return"DISP: "+e.displayedMemory.getDisplayText()}))),this.outputDataUpdate(!0)},Ye.ccTO=function(t){this.logger.log(2,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},Ye.ccMIDROW=function(t){var e={flash:!1};e.underline=t%2==1,e.italics=46<=t,e.italics?e.foreground="white":(t=Math.floor(t/2)-16,e.foreground=["white","green","blue","cyan","red","yellow","magenta"][t]),this.logger.log(2,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},Ye.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},Ye.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},ar),rr=(($i=nr.prototype).getHandler=function(t){return this.channels[t].getHandler()},$i.setHandler=function(t,e){this.channels[t].setHandler(e)},$i.addData=function(t,e){var i,s=!1;this.logger.time=t;for(var o=0;o<e.length;o+=2){var r,n=127&e[o],a=127&e[o+1];0==n&&0==a||(this.logger.log(3,"["+Ho([e[o],e[o+1]])+"] -> ("+Ho([n,a])+")"),(i=this.parseCmd(n,a))||(i=this.parseMidrow(n,a)),!(i=(i=i||this.parsePAC(n,a))||this.parseBackgroundAttributes(n,a))&&(s=this.parseChars(n,a))&&((r=this.currentChannel)&&0<r?this.channels[r].insertChars(s):this.logger.log(2,"No channel found yet. TEXT-MODE?")),i||s||this.logger.log(2,"Couldn't parse cleaned data "+Ho([n,a])+" orig: "+Ho([e[o],e[o+1]])))}},$i.parseCmd=function(t,e){var i=this.cmdHistory;if(!((20===t||28===t||21===t||29===t)&&32<=e&&e<=47||(23===t||31===t)&&33<=e&&e<=35))return!1;if(vr(t,e,i))return gr(null,null,i),this.logger.log(3,"Repeated command ("+Ho([t,e])+") is dropped"),!0;var s=20===t||21===t||23===t?1:2,o=this.channels[s];return 20===t||21===t||28===t||29===t?32===e?o.ccRCL():33===e?o.ccBS():34===e?o.ccAOF():35===e?o.ccAON():36===e?o.ccDER():37===e?o.ccRU(2):38===e?o.ccRU(3):39===e?o.ccRU(4):40===e?o.ccFON():41===e?o.ccRDC():42===e?o.ccTR():43===e?o.ccRTD():44===e?o.ccEDM():45===e?o.ccCR():46===e?o.ccENM():47===e&&o.ccEOC():o.ccTO(e-32),gr(t,e,i),this.currentChannel=s,!0},$i.parseMidrow=function(t,e){var i=0;return(17===t||25===t)&&32<=e&&e<=47&&((i=17===t?1:2)!==this.currentChannel?(this.logger.log(0,"Mismatch channel in midrow parsing"),!1):!!(i=this.channels[i])&&(i.ccMIDROW(e),this.logger.log(3,"MIDROW ("+Ho([t,e])+")"),!0))},$i.parsePAC=function(t,e){var i=this.cmdHistory;if(!((17<=t&&t<=23||25<=t&&t<=31)&&64<=e&&e<=127||(16===t||24===t)&&64<=e&&e<=95))return!1;if(vr(t,e,i))return gr(null,null,i),!0;var s=t<=23?1:2,o=(64<=e&&e<=95?1==s?qo:Yo:1==s?Ko:Zo)[t],r=this.channels[s];return!!r&&(r.setPAC(this.interpretPAC(o,e)),gr(t,e,i),this.currentChannel=s,!0)},$i.interpretPAC=function(t,e){return(t={color:null,italics:!1,indent:null,underline:!1,row:t}).underline=1==(1&(e=95<e?e-96:e-64)),e<=13?t.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(e/2)]:e<=15?(t.italics=!0,t.color="white"):t.indent=4*Math.floor((e-16)/2),t},$i.parseChars=function(t,e){var i,s,o,r=null;return 17<=(o=25<=t?(i=2,t-8):(i=1,t))&&o<=19?(s=17===o?e+80:18===o?e+112:e+144,this.logger.log(2,"Special char '"+Wo(s)+"' in channel "+i),r=[s]):32<=t&&t<=127&&(r=0===e?[t]:[t,e]),r&&(s=Ho(r),this.logger.log(3,"Char codes =  "+s.join(",")),gr(t,e,this.cmdHistory)),r},$i.parseBackgroundAttributes=function(t,e){if(!((16===t||24===t)&&32<=e&&e<=47||(23===t||31===t)&&45<=e&&e<=47))return!1;var i={};16===t||24===t?(s=Math.floor((e-32)/2),i.background=Jo[s],e%2==1&&(i.background=i.background+"_semi")):45===e?i.background="transparent":(i.foreground="black",47===e&&(i.underline=!0));var s=t<=23?1:2;return this.channels[s].setBkgData(i),gr(t,e,this.cmdHistory),!0},$i.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++){var e=this.channels[t];e&&e.reset()}this.cmdHistory={a:null,b:null}},$i.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++){var i=this.channels[e];i&&i.cueSplitAtTime(t)}},nr);function nr(t,e,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var s=new $o;this.channels=[null,new or(t,e,s),new or(t+1,i,s)],this.cmdHistory={a:null,b:null},this.logger=s}function ar(t,e,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new sr(i),this.nonDisplayedMemory=new sr(i),this.lastOutputScreen=new sr(i),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}function lr(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var e=0;e<15;e++)this.rows.push(new ir(t));this.logger=t,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}function cr(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var e=0;e<Xo;e++)this.chars.push(new er);this.logger=t,this.pos=0,this.currPenState=new tr}function ur(t,e,i,s,o,r){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new tr(e,i,s,o,r)}function dr(t,e,i,s,o){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=e||!1,this.italics=i||!1,this.background=s||"black",this.flash=o||!1}function hr(){this.time=null,this.verboseLevel=0}function fr(t){var e=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var t=e.media,i=e.mediaSource;I.log("[buffer-controller]: Media source opened"),t&&(t.removeEventListener("emptied",e._onMediaEmptied),e.updateMediaElementDuration(),e.hls.trigger(w.MEDIA_ATTACHED,{media:t})),i&&i.removeEventListener("sourceopen",e._onMediaSourceOpen),e.checkPendingTracks()},this._onMediaSourceClose=function(){I.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){I.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=function(){var t=e.media,i=e._objectUrl;t&&t.src!==i&&I.error("Media element src was set while attaching MediaSource ("+i+" > "+t.src+")")},this.hls=t,this._initSourceBuffer(),this.registerListeners()}function pr(t){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=t}function gr(t,e,i){i.a=t,i.b=e}function vr(t,e,i){return i.a===t&&i.b===e}var mr=((W=Sr.prototype).dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},W.newCue=function(t,e,i){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)},W.reset=function(){this.cueRanges=[],this.startTime=null},Sr),yr=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var t=["","lr","rl"],e=["start","middle","end","left","right"];function i(t,e){return"string"==typeof e&&(!!Array.isArray(t)&&(e=e.toLowerCase(),!!~t.indexOf(e)&&e))}function s(t){return i(e,t)}function o(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];for(var o=1;o<arguments.length;o++){var r,n=arguments[o];for(r in n)t[r]=n[r]}return t}function r(e,r,n){var a=this,l={enumerable:!0};a.hasBeenReset=!1;var c="",u=!1,d=e,h=r,f=n,p=null,g="",v=!0,m="auto",y="start",b=50,T="middle",S=50,w="middle";Object.defineProperty(a,"id",o({},l,{get:function(){return c},set:function(t){c=""+t}})),Object.defineProperty(a,"pauseOnExit",o({},l,{get:function(){return u},set:function(t){u=!!t}})),Object.defineProperty(a,"startTime",o({},l,{get:function(){return d},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");d=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"endTime",o({},l,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"text",o({},l,{get:function(){return f},set:function(t){f=""+t,this.hasBeenReset=!0}})),Object.defineProperty(a,"region",o({},l,{get:function(){return p},set:function(t){p=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"vertical",o({},l,{get:function(){return g},set:function(e){if(!1===(e=i(t,e)))throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"snapToLines",o({},l,{get:function(){return v},set:function(t){v=!!t,this.hasBeenReset=!0}})),Object.defineProperty(a,"line",o({},l,{get:function(){return m},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"lineAlign",o({},l,{get:function(){return y},set:function(t){if(!(t=s(t)))throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"position",o({},l,{get:function(){return b},set:function(t){if(t<0||100<t)throw new Error("Position must be between 0 and 100.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"positionAlign",o({},l,{get:function(){return T},set:function(t){if(!(t=s(t)))throw new SyntaxError("An invalid or illegal string was specified.");T=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"size",o({},l,{get:function(){return S},set:function(t){if(t<0||100<t)throw new Error("Size must be between 0 and 100.");S=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"align",o({},l,{get:function(){return w},set:function(t){if(!(t=s(t)))throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),a.displayState=void 0}return r.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},r}(),br=(Tr.prototype.decode=function(t,e){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))},Tr);function Tr(){}function Sr(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}function wr(t){function e(t,e,i,s){return 3600*(0|t)+60*(0|e)+(0|i)+parseFloat(s||0)}return(t=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/))?59<parseFloat(t[2])?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}var xr=((ds=Er.prototype).set=function(t,e){this.get(t)||""===e||(this.values[t]=e)},ds.get=function(t,e,i){return i?this.has(t)?this.values[t]:e[i]:this.has(t)?this.values[t]:e},ds.has=function(t){return t in this.values},ds.alt=function(t,e,i){for(var s=0;s<i.length;++s)if(e===i[s]){this.set(t,e);break}},ds.integer=function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},ds.percent=function(t,e){return!!(/^([\d]{1,3})(\.[\d]*)?%$/.test(e)&&0<=(e=parseFloat(e))&&e<=100)&&(this.set(t,e),!0)},Er);function Er(){this.values=Object.create(null)}function _r(t,e,i,s){var o,r,n=s?t.split(s):[t];for(o in n)"string"!=typeof n[o]||2===(r=n[o].split(i)).length&&e(r[0],r[1])}var kr=new yr(0,0,""),Pr="middle"===kr.align?"middle":"center";function Rr(t){return t.replace(/<br(?: \/)?>/gi,"\n")}function Ir(t,e,i){return void 0===i&&(i=0),t.slice(i,i+e.length)===e}var Ar=((Ks=Mr.prototype).parse=function(t){var e=this;function i(){for(var t=0,i=Rr(i=e.buffer);t<i.length&&"\r"!==i[t]&&"\n"!==i[t];)++t;var s=i.slice(0,t);return"\r"===i[t]&&++t,"\n"===i[t]&&++t,e.buffer=i.slice(t),s}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var s="";if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var o=(s=i()).match(/^()?WEBVTT([ \t].*)?$/);if(null==o||!o[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}for(var r=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(r?r=!1:s=i(),e.state){case"HEADER":/:/.test(s)?_r(s,(function(t,e){}),/:/):s||(e.state="ID");continue;case"NOTE":s||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){e.state="NOTE";break}if(!s)continue;if(e.cue=new yr(0,0,""),e.state="CUE",-1===s.indexOf("--\x3e")){e.cue.id=s;continue}case"CUE":if(!e.cue){e.state="BADCUE";continue}try{!function(t,e,i){var s,o,r=t;function n(){var e=wr(t);if(null===e)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function a(){t=t.replace(/^\s+/,"")}if(a(),e.startTime=n(),a(),"--\x3e"!==t.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);t=t.slice(3),a(),e.endTime=n(),a(),s=t,o=new xr,_r(s,(function(t,e){var s;switch(t){case"region":for(var r=i.length-1;0<=r;r--)if(i[r].id===e){o.set(t,i[r].region);break}break;case"vertical":o.alt(t,e,["rl","lr"]);break;case"line":s=e.split(","),o.integer(t,s[0]),o.percent(t,s[0])&&o.set("snapToLines",!1),o.alt(t,s[0],["auto"]),2===s.length&&o.alt("lineAlign",s[1],["start",Pr,"end"]);break;case"position":s=e.split(","),o.percent(t,s[0]),2===s.length&&o.alt("positionAlign",s[1],["start",Pr,"end","line-left","line-right","auto"]);break;case"size":o.percent(t,e);break;case"align":o.alt(t,e,["start",Pr,"end","left","right"])}}),/:/,/\s/),e.region=o.get("region",null),e.vertical=o.get("vertical",""),"auto"===(s=o.get("line","auto"))&&-1===kr.line&&(s=-1),e.line=s,e.lineAlign=o.get("lineAlign","start"),e.snapToLines=o.get("snapToLines",!0),e.size=o.get("size",100),e.align=o.get("align",Pr),"auto"===(s=o.get("position","auto"))&&50===kr.position&&(s="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=s}(s,e.cue,e.regionList)}catch(t){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var n=-1!==s.indexOf("--\x3e");if(!s||n&&(r=!0)){e.oncue&&e.cue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}if(null===e.cue)continue;e.cue.text&&(e.cue.text+="\n"),e.cue.text+=s;continue;case"BADCUE":s||(e.state="ID")}}}catch(t){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},Ks.flush=function(){var t=this;try{if(!t.cue&&"HEADER"!==t.state||(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state||"BADWEBVTT"===t.state)throw new Error("Malformed WebVTT signature.")}catch(e){t.onparsingerror&&t.onparsingerror(e)}return t.onflush&&t.onflush(),this},Mr),Lr=/\r\n|\n\r|\n|\r/g,Cr=function(t){for(var e=5381,i=t.length;i;)e=33*e^t.charCodeAt(--i);return(e>>>0).toString()};function Mr(){this.state="INITIAL",this.buffer="",this.decoder=new br,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}function Dr(t,e,i){return Cr(t.toString())+Cr(e.toString())+Cr(i)}var Or="stpp.ttml.im1t",Fr=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Nr=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Ur={left:"start",center:"center",right:"end",start:"start",end:"end"};function zr(t,e,i,s){var o=Rt(new Uint8Array(t),["mdat"]);if(0!==o.length){var r,a=o.map((function(t){return yt(t)})),l=(o=e.baseTime,void 0===(e=e.timescale)&&(e=1),void 0===r&&(r=!1),Us(o,1,1/e,r));try{a.forEach((function(t){return i(function(t,e){var i=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");var s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(s).reduce((function(t,e){return t[e]=i.getAttribute("ttp:"+e)||s[e],t}),{}),r="preserve"!==i.getAttribute("xml:space"),a=Hr(Wr(i,"styling","style")),l=Hr(Wr(i,"layout","region"));t=Wr(i,"body","[begin]");return[].map.call(t,(function(t){var i=function t(e,i){return[].slice.call(e.childNodes).reduce((function(e,s,o){return"br"===s.nodeName&&o?e+"\n":null!=(o=s.childNodes)&&o.length?t(s,i):i?e+s.textContent.trim().replace(/\s+/g," "):e+s.textContent}),"")}(t,r);if(!i||!t.hasAttribute("begin"))return null;var s=jr(t.getAttribute("begin"),o),c=jr(t.getAttribute("dur"),o),u=jr(t.getAttribute("end"),o);if(null===s)throw Br(t);if(null===u){if(null===c)throw Br(t);u=s+c}(s=new yr(s-e,u-e,i)).id=Dr(s.startTime,s.endTime,s.text);var d,h,f,p;d=l[t.getAttribute("region")],h=a[t.getAttribute("style")],u=a,f="http://www.w3.org/ns/ttml#styling",(i=(p=null)!=d&&d.hasAttribute("style")?d.getAttribute("style"):null)&&u.hasOwnProperty(i)&&(p=u[i]),t=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((function(t,e){var i=Vr(h,f,e)||Vr(d,f,e)||Vr(p,f,e);return i&&(t[e]=i),t}),{});return(u=t.textAlign)&&((i=Ur[u])&&(s.lineAlign=i),s.align=u),n(s,t),s})).filter((function(t){return null!==t}))}(t,l))}))}catch(t){s(t)}}else s(new Error("Could not parse IMSC1 mdat"))}function Wr(t,e,i){return(e=t.getElementsByTagName(e)[0])?[].slice.call(e.querySelectorAll(i)):[]}function Hr(t){return t.reduce((function(t,e){var i=e.getAttribute("xml:id");return i&&(t[i]=e),t}),{})}function Vr(t,e,i){return t&&t.hasAttributeNS(e,i)?t.getAttributeNS(e,i):null}function Br(t){return new Error("Could not parse ttml timestamp "+t)}function jr(t,e){if(!t)return null;var i,s,o,r=wr(t);return null===r&&(Fr.test(t)?(i=e,o=(0|(s=Fr.exec(t))[4])+(0|s[5])/i.subFrameRate,r=3600*(0|s[1])+60*(0|s[2])+(0|s[3])+o/i.frameRate):Nr.test(t)&&(r=function(e){var i=Nr.exec(t),s=Number(i[1]);switch(i[2]){case"h":return 3600*s;case"m":return 60*s;case"ms":return 1e3*s;case"f":return s/e.frameRate;case"t":return s/e.tickRate}return s}(e))),r}function Gr(t){var e,i,s,o;this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions&&(e=new mr(this,"textTrack1"),i=new mr(this,"textTrack2"),s=new mr(this,"textTrack3"),o=new mr(this,"textTrack4"),this.cea608Parser1=new rr(1,e,i),this.cea608Parser2=new rr(3,s,o)),t.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(w.FRAG_LOADING,this.onFragLoading,this),t.on(w.FRAG_LOADED,this.onFragLoaded,this),t.on(w.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(w.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(w.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(w.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(w.BUFFER_FLUSHING,this.onBufferFlushing,this)}(cs=Gr.prototype).destroy=function(){var t=this.hls;t.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(w.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(w.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(w.FRAG_LOADING,this.onFragLoading,this),t.off(w.FRAG_LOADED,this.onFragLoaded,this),t.off(w.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(w.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(w.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(w.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(w.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},cs.addCues=function(t,e,i,s,o){for(var r,n,a,l=!1,c=o.length;c--;){var u=o[c],d=(r=u[0],n=u[1],d=e,Math.min(n,i)-Math.max(r,d));if(0<=d&&(u[0]=Math.min(u[0],e),u[1]=Math.max(u[1],i),l=!0,.5<d/(i-e)))return}l||o.push([e,i]),this.config.renderTextTracksNatively?(a=this.captionsTracks[t],this.Cues.newCue(a,e,i,s)):(s=this.Cues.newCue(null,e,i,s),this.hls.trigger(w.CUES_PARSED,{type:"captions",cues:s,track:t}))},cs.onInitPtsFound=function(t,e){var i=this,s=e.frag,o=e.id,r=e.initPTS,n=e.timescale;e=this.unparsedVttFrags;"main"===o&&(this.initPTS[s.cc]={baseTime:r,timescale:n}),e.length&&(this.unparsedVttFrags=[],e.forEach((function(t){i.onFragLoaded(w.FRAG_LOADED,t)})))},cs.getExistingTrack=function(t){var e=this.media;if(e)for(var i=0;i<e.textTracks.length;i++){var s=e.textTracks[i];if(s[t])return s}return null},cs.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},cs.createNativeTrack=function(t){var e,i,s,o,r;this.captionsTracks[t]||(r=this.captionsProperties,e=this.captionsTracks,i=this.media,s=(o=r[t]).label,r=o.languageCode,(o=this.getExistingTrack(t))?(e[t]=o,ye(e[t]),ve(e[t],i)):(r=this.createTextTrack("captions",s,r))&&(r[t]=!0,e[t]=r))},cs.createNonNativeTrack=function(t){var e;this.nonNativeCaptionsTracks[t]||(e=this.captionsProperties[t])&&(e={_id:t,label:e.label,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media},this.nonNativeCaptionsTracks[t]=e,this.hls.trigger(w.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[e]}))},cs.createTextTrack=function(t,e,i){var s=this.media;if(s)return s.addTextTrack(t,e,i)},cs.onMediaAttaching=function(t,e){this.media=e.media,this._cleanTracks()},cs.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach((function(e){ye(t[e]),delete t[e]})),this.nonNativeCaptionsTracks={}},cs.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},cs._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var i=0;i<e.length;i++)ye(e[i])}},cs.onSubtitleTracksUpdated=function(t,e){var i,s=this,o=e.subtitleTracks||[];e=o.some((function(t){return t.textCodec===Or}));(this.config.enableWebVTT||e&&this.config.enableIMSC1)&&(Oo(this.tracks,o)?this.tracks=o:(this.textTracks=[],this.tracks=o,this.config.renderTextTracksNatively?(i=this.media?this.media.textTracks:null,this.tracks.forEach((function(t,e){var o,r,n;if(i&&e<i.length){for(var a=null,l=0;l<i.length;l++)if(n=t,(r=i[l])&&r.label===n.name&&!r.textTrack1&&!r.textTrack2){a=i[l];break}a&&(o=a)}o?ye(o):(e=s._captionsOrSubtitlesFromCharacteristics(t),(o=s.createTextTrack(e,t.name,t.lang))&&(o.mode="disabled")),o&&(o.groupId=t.groupId,s.textTracks.push(o))}))):this.tracks.length&&(o=this.tracks.map((function(t){return{label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t}})),this.hls.trigger(w.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:o}))))},cs._captionsOrSubtitlesFromCharacteristics=function(t){if(t.attrs.CHARACTERISTICS){var e=/transcribes-spoken-dialog/gi.test(t.attrs.CHARACTERISTICS);t=/describes-music-and-sound/gi.test(t.attrs.CHARACTERISTICS);if(e&&t)return"captions"}return"subtitles"},cs.onManifestLoaded=function(t,e){var i=this;this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((function(t){var e=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);e&&(e="textTrack"+e[1],(e=i.captionsProperties[e])&&(e.label=t.name,t.lang&&(e.languageCode=t.lang),e.media=t))}))},cs.closedCaptionsForLevel=function(t){return null==(t=this.hls.levels[t.level])?void 0:t.attrs["CLOSED-CAPTIONS"]},cs.onFragLoading=function(t,e){var i,s,o=this.cea608Parser1,r=this.cea608Parser2,n=this.lastSn,a=this.lastPartIndex;this.enabled&&o&&r&&e.frag.type===ce&&(i=e.frag.sn,s=null!=(s=null==e||null==(s=e.part)?void 0:s.index)?s:-1,i===n+1||i===n&&s===a+1||(o.reset(),r.reset()),this.lastSn=i,this.lastPartIndex=s)},cs.onFragLoaded=function(t,e){var i,s,o=e.frag,r=e.payload;o.type===de&&(r.byteLength?(s="stats"in e,null!=(i=o.decryptdata)&&i.encrypted&&!s||(i=this.tracks[o.level],(s=this.vttCCs)[o.cc]||(s[o.cc]={start:o.start,prevCC:this.prevCC,new:!0},this.prevCC=o.cc),i&&i.textCodec===Or?this._parseIMSC1(o,r):this._parseVTTs(e))):this.hls.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:o,error:new Error("Empty subtitle payload")}))},cs._parseIMSC1=function(t,e){var i=this,s=this.hls;zr(e,this.initPTS[t.cc],(function(e){i._appendCues(e,t.level),s.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(e){I.log("Failed to parse IMSC1: "+e),s.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:e})}))},cs._parseVTTs=function(t){var e,i=this,s=t.frag,o=t.payload,r=this.initPTS,n=this.unparsedVttFrags,a=r.length-1;r[s.cc]||-1!=a?(e=this.hls,function(t,e,i,s,o,r,n){var a,l,c=new Ar,u=yt(new Uint8Array(t)).trim().replace(Lr,"\n").split("\n"),d=[],h=e?(a=e.baseTime,void 0===(t=e.timescale)&&(t=1),Us(a,9e4,1/t)):0,f="00:00.000",p=0,g=0,v=!0;c.oncue=function(t){var r=i[s],n=i.ccOffset,a=(p-h)/9e4;if(null!=r&&r.new&&(void 0!==g?n=i.ccOffset=r.start:function(t,e){var i=t[s],o=t[i.prevCC];if(!o||!o.new&&i.new)return t.ccOffset=t.presentationOffset=i.start,i.new=!1;for(;null!=o&&o.new;)t.ccOffset+=i.start-o.start,i.new=!1,o=t[(i=o).prevCC];t.presentationOffset=e}(i,a)),a){if(!e)return void(l=new Error("Missing initPTS for VTT MPEGTS"));n=a-i.presentationOffset}a=t.endTime-t.startTime,n=Bs(9e4*(t.startTime+n-g),9e4*o)/9e4,t.startTime=Math.max(n,0),t.endTime=Math.max(n+a,0),a=t.text.trim(),t.text=decodeURIComponent(encodeURIComponent(a)),t.id||(t.id=Dr(t.startTime,t.endTime,a)),0<t.endTime&&d.push(t)},c.onparsingerror=function(t){l=t},c.onflush=function(){l?n(l):r(d)},u.forEach((function(t){if(v){if(Ir(t,"X-TIMESTAMP-MAP=")){v=!1,t.slice(16).split(",").forEach((function(t){Ir(t,"LOCAL:")?f=t.slice(6):Ir(t,"MPEGTS:")&&(p=parseInt(t.slice(7)))}));try{g=function(t){var e=parseInt(t.slice(-3)),i=parseInt(t.slice(-6,-4)),s=parseInt(t.slice(-9,-7)),o=9<t.length?parseInt(t.substring(0,t.indexOf(":"))):0;if(!(S(e)&&S(i)&&S(s)&&S(o)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return e+=1e3*i,(e+=6e4*s)+36e5*o}(f)/1e3}catch(t){l=t}return}""===t&&(v=!1)}c.parse(t+"\n")})),c.flush()}(null!=(r=s.initSegment)&&r.data?Lt(s.initSegment.data,new Uint8Array(o)):o,this.initPTS[s.cc],this.vttCCs,s.cc,s.start,(function(t){i._appendCues(t,s.level),e.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:s})}),(function(r){var l="Missing initPTS for VTT MPEGTS"===r.message;l?n.push(t):i._fallbackToIMSC1(s,o),I.log("Failed to parse VTT cue: "+r),l&&a>s.cc||e.trigger(w.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:s,error:r})}))):n.push(t)},cs._fallbackToIMSC1=function(t,e){var i=this,s=this.tracks[t.level];s.textCodec||zr(e,this.initPTS[t.cc],(function(){s.textCodec=Or,i._parseIMSC1(t,e)}),(function(){s.textCodec="wvtt"}))},cs._appendCues=function(t,e){var i,s,o=this.hls;this.config.renderTextTracksNatively?(i=this.textTracks[e])&&"disabled"!==i.mode&&t.forEach((function(t){return me(i,t)})):(s=this.tracks[e])&&(e=s.default?"default":"subtitles"+e,o.trigger(w.CUES_PARSED,{type:"subtitles",cues:t,track:e}))},cs.onFragDecrypted=function(t,e){e.frag.type===de&&this.onFragLoaded(w.FRAG_LOADED,e)},cs.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},cs.onFragParsingUserdata=function(t,e){var i=this.cea608Parser1,s=this.cea608Parser2;if(this.enabled&&i&&s){var o=e.frag,r=e.samples;if(o.type!==ce||"NONE"!==this.closedCaptionsForLevel(o))for(var n=0;n<r.length;n++){var a=r[n].bytes;a&&(a=this.extractCea608Data(a),i.addData(r[n].pts,a[0]),s.addData(r[n].pts,a[1]))}}},cs.onBufferFlushing=function(t,e){var i,s,o=e.startOffset,r=e.endOffset,n=e.endOffsetSubtitles,a=e.type;!(e=this.media)||e.currentTime<r||(a&&"video"!==a||(i=this.captionsTracks,Object.keys(i).forEach((function(t){return be(i[t],o,r)}))),this.config.renderTextTracksNatively&&0===o&&void 0!==n&&(s=this.textTracks,Object.keys(s).forEach((function(t){return be(s[t],o,n)}))))},cs.extractCea608Data=function(t){for(var e=[[],[]],i=31&t[0],s=2,o=0;o<i;o++){var r=t[s++],n=127&t[s++],a=127&t[s++];0==n&&0==a||0==(4&r)||0!=(r&=3)&&1!=r||(e[r].push(n),e[r].push(a))}return e},Qi=Gr;(Ye=Kr.prototype).setStreamController=function(t){this.streamController=t},Ye.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},Ye.registerListeners=function(){var t=this.hls;t.on(w.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(w.MANIFEST_PARSED,this.onManifestParsed,this),t.on(w.BUFFER_CODECS,this.onBufferCodecs,this),t.on(w.MEDIA_DETACHING,this.onMediaDetaching,this)},Ye.unregisterListener=function(){var t=this.hls;t.off(w.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(w.MANIFEST_PARSED,this.onManifestParsed,this),t.off(w.BUFFER_CODECS,this.onBufferCodecs,this),t.off(w.MEDIA_DETACHING,this.onMediaDetaching,this)},Ye.onFpsDropLevelCapping=function(t,e){e=this.hls.levels[e.droppedLevel],this.isLevelAllowed(e)&&this.restrictedLevels.push({bitrate:e.bitrate,height:e.height,width:e.width})},Ye.onMediaAttaching=function(t,e){this.media=e.media instanceof HTMLVideoElement?e.media:null,this.clientRect=null},Ye.onManifestParsed=function(t,e){var i=this.hls;this.restrictedLevels=[],this.firstLevel=e.firstLevel,i.config.capLevelToPlayerSize&&e.video&&this.startCapping()},Ye.onBufferCodecs=function(t,e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},Ye.onMediaDetaching=function(){this.stopCapping()},Ye.detectPlayerSize=function(){var t,e;this.media&&0<this.mediaHeight&&0<this.mediaWidth&&(t=this.hls.levels).length&&((e=this.hls).autoLevelCapping=this.getMaxLevel(t.length-1),e.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping)},Ye.getMaxLevel=function(t){var e=this,i=this.hls.levels;return i.length?(i=i.filter((function(i,s){return e.isLevelAllowed(i)&&s<=t})),this.clientRect=null,Kr.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)):-1},Ye.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},Ye.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},Ye.getDimensions=function(){if(this.clientRect)return this.clientRect;var t,e=this.media,i={width:0,height:0};return e&&(t=e.getBoundingClientRect(),i.width=t.width,i.height=t.height,i.width||i.height||(i.width=t.right-t.left||e.width||0,i.height=t.bottom-t.top||e.height||0)),this.clientRect=i},Ye.isLevelAllowed=function(t){return!this.restrictedLevels.some((function(e){return t.bitrate===e.bitrate&&t.width===e.width&&t.height===e.height}))},Kr.getMaxLevelByMediaSize=function(t,e,i){if(null==t||!t.length)return-1;for(var s,o=t.length-1,r=0;r<t.length;r+=1){var n=t[r];if((n.width>=e||n.height>=i)&&(!(s=t[r+1])||n.width!==s.width||n.height!==s.height)){o=r;break}}return o},r(Kr,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var t=1;if(!this.hls.config.ignoreDevicePixelRatio)try{t=self.devicePixelRatio}catch(t){}return t}}]),$i=Kr,(W=qr.prototype).setStreamController=function(t){this.streamController=t},W.registerListeners=function(){this.hls.on(w.MEDIA_ATTACHING,this.onMediaAttaching,this)},W.unregisterListeners=function(){this.hls.off(w.MEDIA_ATTACHING,this.onMediaAttaching,this)},W.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},W.onMediaAttaching=function(t,e){var i=this.hls.config;i.capLevelOnFPSDrop&&(e=e.media instanceof self.HTMLVideoElement?e.media:null,(this.media=e)&&"function"==typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod))},W.checkFPS=function(t,e,i){var s,o,r,n,a=performance.now();e&&(this.lastTime&&(r=a-this.lastTime,s=i-this.lastDroppedFrames,n=e-this.lastDecodedFrames,o=1e3*s/r,(r=this.hls).trigger(w.FPS_DROP,{currentDropped:s,currentDecoded:n,totalDroppedFrames:i}),0<o&&s>r.config.fpsDroppedMonitoringThreshold*n&&(n=r.currentLevel,I.warn("drop FPS ratio greater than max allowed value for currentLevel: "+n),0<n&&(-1===r.autoLevelCapping||r.autoLevelCapping>=n)&&(--n,r.trigger(w.FPS_DROP_LEVEL_CAPPING,{level:n,droppedLevel:r.currentLevel}),r.autoLevelCapping=n,this.streamController.nextLevelSwitch()))),this.lastTime=a,this.lastDroppedFrames=i,this.lastDecodedFrames=e)},W.checkFPSInterval=function(){var t,e=this.media;e&&(this.isVideoPlaybackQualityAvailable?(t=e.getVideoPlaybackQuality(),this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)):this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount))},ds=qr;var Qr="[eme]";(Ks=Xr.prototype).destroy=function(){this.unregisterListeners(),this.onMediaDetached();var t=this.config;t.requestMediaKeySystemAccessFunc=null,t.licenseXhrSetup=t.licenseResponseCallback=void 0,t.drmSystems=t.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null},Ks.registerListeners=function(){this.hls.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(w.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(w.MANIFEST_LOADED,this.onManifestLoaded,this)},Ks.unregisterListeners=function(){this.hls.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(w.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(w.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(w.MANIFEST_LOADED,this.onManifestLoaded,this)},Ks.getLicenseServerUrl=function(t){var e=(i=this.config).drmSystems,i=i.widevineLicenseUrl;if(e=e[t])return e.licenseUrl;if(t===Y.WIDEVINE&&i)return i;throw new Error('no license server URL configured for key-system "'+t+'"')},Ks.getServerCertificateUrl=function(t){var e=this.config.drmSystems[t];if(e)return e.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+t+'"]')},Ks.attemptKeySystemAccess=function(t){function e(t,e,i){return!!t&&i.indexOf(t)===e}var i=this,s=this.hls.levels,o=s.map((function(t){return t.audioCodec})).filter(e),r=s.map((function(t){return t.videoCodec})).filter(e);return o.length+r.length===0&&r.push("avc1.42e01e"),new Promise((function(e,s){!function t(n){var a=n.shift();i.getMediaKeysPromise(a,o,r).then((function(t){return e({keySystem:a,mediaKeys:t})})).catch((function(e){n.length?t(n):s(e instanceof Zr?e:new Zr({type:x.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_NO_ACCESS,error:e,fatal:!0},e.message))}))}(t)}))},Ks.requestMediaKeySystemAccess=function(t,e){var i=this.config.requestMediaKeySystemAccessFunc;return"function"==typeof i?i(t,e):(i="Configured requestMediaKeySystemAccess is not a function "+i,null===rt&&"http:"===self.location.protocol&&(i="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(i)))},Ks.getMediaKeysPromise=function(t,e,i){var s=this,o=(e=function(t,e,i,s){var o,r;switch(t){case Y.FAIRPLAY:o=["cenc","sinf"];break;case Y.WIDEVINE:case Y.PLAYREADY:o=["cenc"];break;case Y.CLEARKEY:o=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+t)}return[{initDataTypes:o,persistentState:(r=s).persistentState||"not-allowed",distinctiveIdentifier:r.distinctiveIdentifier||"not-allowed",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:e.map((function(t){return{contentType:'audio/mp4; codecs="'+t+'"',robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null}})),videoCapabilities:i.map((function(t){return{contentType:'video/mp4; codecs="'+t+'"',robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}}))}]}(t,e,i,this.config.drmSystemOptions),this.keySystemAccessPromises[t]);if(i=null==o?void 0:o.keySystemAccess)return i.then((function(){return o.mediaKeys}));this.log('Requesting encrypted media "'+t+'" key-system access with config: '+JSON.stringify(e)),i=this.requestMediaKeySystemAccess(t,e);var r=this.keySystemAccessPromises[t]={keySystemAccess:i};return i.catch((function(e){s.log('Failed to obtain access to key-system "'+t+'": '+e)})),i.then((function(e){s.log('Access for key-system "'+e.keySystem+'" obtained');var i=s.fetchServerCertificate(t);return s.log('Create media-keys for "'+t+'"'),r.mediaKeys=e.createMediaKeys().then((function(e){return s.log('Media-keys created for "'+t+'"'),i.then((function(i){return i?s.setMediaKeysServerCertificate(e,t,i):e}))})),r.mediaKeys.catch((function(e){s.error('Failed to create media-keys for "'+t+'"}: '+e)})),r.mediaKeys}))},Ks.createMediaKeySessionContext=function(t){var e=t.decryptdata,i=t.keySystem,s=t.mediaKeys;return this.log('Creating key-system session "'+i+'" keyId: '+bt(e.keyId||[])),t=s.createSession(),t={decryptdata:e,keySystem:i,mediaKeys:s,mediaKeysSession:t,keyStatus:"status-pending"},this.mediaKeySessions.push(t),t},Ks.renewKeySession=function(t){var e,i,s=t.decryptdata;s.pssh?(e=this.createMediaKeySessionContext(t),i=this.getKeyIdString(s),this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(e,"cenc",s.pssh,"expired")):this.warn("Could not renew expired session. Missing pssh initData."),this.removeSession(t)},Ks.getKeyIdString=function(t){if(!t)throw new Error("Could not read keyId of undefined decryptdata");if(null===t.keyId)throw new Error("keyId is null");return bt(t.keyId)},Ks.updateKeySession=function(t,e){var i=t.mediaKeysSession;return this.log('Updating key-session "'+i.sessionId+'" for keyID '+bt((null==(t=t.decryptdata)?void 0:t.keyId)||[])+"\n      } (data length: "+(e&&e.byteLength)+")"),i.update(e)},Ks.selectKeySystemFormat=function(t){var e=Object.keys(t.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+t.sn+" "+t.type+": "+t.level+") key formats "+e.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(e)),this.keyFormatPromise},Ks.getKeyFormatPromise=function(t){var e=this;return new Promise((function(i,s){var o=ot(e.config),r=t.map(et).filter((function(t){return!!t&&-1!==o.indexOf(t)}));return e.getKeySystemSelectionPromise(r).then((function(t){var e=t.keySystem;(t=st(e))?i(t):s(new Error('Unable to find format for key-system "'+e+'"'))})).catch(s)}))},Ks.loadKey=function(t){var e=this,i=t.keyInfo.decryptdata,s=this.getKeyIdString(i),o="(keyId: "+s+' format: "'+i.keyFormat+'" method: '+i.method+" uri: "+i.uri+")";this.log("Starting session for key "+o);var r=this.keyIdToKeySessionPromise[s];return r||(r=this.keyIdToKeySessionPromise[s]=this.getKeySystemForKeyPromise(i).then((function(s){var r=s.keySystem,n=s.mediaKeys;return e.throwIfDestroyed(),e.log("Handle encrypted media sn: "+t.frag.sn+" "+t.frag.type+": "+t.frag.level+" using key "+o),e.attemptSetMediaKeys(r,n).then((function(){e.throwIfDestroyed();var t=e.createMediaKeySessionContext({keySystem:r,mediaKeys:n,decryptdata:i});return e.generateRequestWithPreferredKeySession(t,"cenc",i.pssh,"playlist-key")}))}))).catch((function(t){return e.handleError(t)})),r},Ks.throwIfDestroyed=function(t){if(!this.hls)throw new Error("invalid state")},Ks.handleError=function(t){this.hls&&(this.error(t.message),t instanceof Zr?this.hls.trigger(w.ERROR,t.data):this.hls.trigger(w.ERROR,{type:x.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_NO_KEYS,error:t,fatal:!0}))},Ks.getKeySystemForKeyPromise=function(t){var e=this.getKeyIdString(t);return(e=this.keyIdToKeySessionPromise[e])?e:(t=(t=et(t.keyFormat))?[t]:ot(this.config),this.attemptKeySystemAccess(t))},Ks.getKeySystemSelectionPromise=function(t){if(t.length||(t=ot(this.config)),0===t.length)throw new Zr({type:x.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(t)},Ks._onMediaEncrypted=function(t){var e,i,s=this,o=t.initDataType,r=t.initData;if(this.debug('"'+t.type+'" event: init data type: "'+o+'"'),null!==r){if("sinf"===o&&this.config.drmSystems[Y.FAIRPLAY]){var n=xt(new Uint8Array(r));try{var a=q(JSON.parse(n).sinf);if(!(a=At(new Uint8Array(a))))return;e=a.subarray(8,24),i=Y.FAIRPLAY}catch(t){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var l=function(t){if(!(t instanceof ArrayBuffer)||t.byteLength<32)return null;var e={version:0,systemId:"",kids:null,data:null},i=new DataView(t),s=i.getUint32(0);if(t.byteLength!==s&&44<s)return null;if(1886614376!==i.getUint32(4))return null;if(e.version=i.getUint32(8)>>>24,1<e.version)return null;e.systemId=bt(new Uint8Array(t,12,16));var o=i.getUint32(28);if(0===e.version){if(s-32<o)return null;e.data=new Uint8Array(t,32,o)}else if(1===e.version){e.kids=[];for(var r=0;r<o;r++)e.kids.push(new Uint8Array(t,32+16*r,16))}return e}(r);if(null===l)return;0===l.version&&l.systemId===it&&l.data&&(e=l.data.subarray(8,24)),i=function(){if(l.systemId===it)return Y.WIDEVINE}()}if(i&&e){for(var c=bt(e),u=this.keyIdToKeySessionPromise,d=this.mediaKeySessions,h=u[c],f=0;f<d.length;f++){var p=function(){var t=d[f],i=t.decryptdata;if(i.pssh||!i.keyId)return"continue";var n=bt(i.keyId);return c===n||-1!==i.uri.replace(/-/g,"").indexOf(c)?(h=u[n],delete u[n],i.pssh=new Uint8Array(r),i.keyId=e,h=u[c]=h.then((function(){return s.generateRequestWithPreferredKeySession(t,o,r,"encrypted-event-key-match")})),"break"):void 0}();if("continue"!==p&&"break"===p)break}(h=h||(u[c]=this.getKeySystemSelectionPromise([i]).then((function(t){var i=t.keySystem,n=t.mediaKeys;s.throwIfDestroyed();var a=new Ft("ISO-23001-7",c,null!=(t=st(i))?t:"");return a.pssh=new Uint8Array(r),a.keyId=e,s.attemptSetMediaKeys(i,n).then((function(){s.throwIfDestroyed();var t=s.createMediaKeySessionContext({decryptdata:a,keySystem:i,mediaKeys:n});return s.generateRequestWithPreferredKeySession(t,o,r,"encrypted-event-no-match")}))})))).catch((function(t){return s.handleError(t)}))}}},Ks._onWaitingForKey=function(t){this.log('"'+t.type+'" event')},Ks.attemptSetMediaKeys=function(t,e){var i=this,s=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+t+'"');var o=Promise.all(s).then((function(){if(!i.media)throw new Error("Attempted to set mediaKeys without media element attached");return i.media.setMediaKeys(e)}));return this.setMediaKeysQueue.push(o),o.then((function(){i.log('Media-keys set for "'+t+'"'),s.push(o),i.setMediaKeysQueue=i.setMediaKeysQueue.filter((function(t){return-1===s.indexOf(t)}))}))},Ks.generateRequestWithPreferredKeySession=function(t,e,i,s){var o,r,n=this,a=null==(o=this.config.drmSystems)||null==(r=o[t.keySystem])?void 0:r.generateRequest;if(a)try{var l=a.call(this.hls,e,i,t);if(!l)throw new Error("Invalid response from configured generateRequest filter");e=l.initDataType,i=t.decryptdata.pssh=l.initData?new Uint8Array(l.initData):null}catch(t){if(this.warn(t.message),null!=(r=this.hls)&&r.config.debug)throw t}if(null===i)return this.log('Skipping key-session request for "'+s+'" (no initData)'),Promise.resolve(t);var c=this.getKeyIdString(t.decryptdata);this.log('Generating key-session request for "'+s+'": '+c+" (init data type: "+e+" length: "+(i?i.byteLength:null)+")");var u=new mo;t.mediaKeysSession.onmessage=function(e){var i,s=t.mediaKeysSession;s?(i=e.messageType,e=e.message,n.log('"'+i+'" message event for session "'+s.sessionId+'" message size: '+e.byteLength),"license-request"===i||"license-renewal"===i?n.renewLicense(t,e).catch((function(t){n.handleError(t),u.emit("error",t)})):"license-release"===i?t.keySystem===Y.FAIRPLAY&&(n.updateKeySession(t,K("acknowledged")),n.removeSession(t)):n.warn('unhandled media key message type "'+i+'"')):u.emit("error",new Error("invalid state"))},t.mediaKeysSession.onkeystatuseschange=function(e){var i;t.mediaKeysSession?(n.onKeyStatusChange(t),i=t.keyStatus,u.emit("keyStatus",i),"expired"===i&&(n.warn(t.keySystem+" expired for key "+c),n.renewKeySession(t))):u.emit("error",new Error("invalid state"))};var d=new Promise((function(t,e){u.on("error",e),u.on("keyStatus",(function(i){i.startsWith("usable")?t():"output-restricted"===i?e(new Zr({type:x.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===i?e(new Zr({type:x.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+i+'"')):"expired"===i?e(new Error("key expired while generating request")):n.warn('unhandled key status change "'+i+'"')}))}));return t.mediaKeysSession.generateRequest(e,i).then((function(){var e;n.log('Request generated for key-session "'+(null==(e=t.mediaKeysSession)?void 0:e.sessionId)+'" keyId: '+c)})).catch((function(t){throw new Zr({type:x.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_NO_SESSION,error:t,fatal:!1},"Error generating key-session request: "+t)})).then((function(){return d})).catch((function(e){throw u.removeAllListeners(),n.removeSession(t),e})).then((function(){return u.removeAllListeners(),t}))},Ks.onKeyStatusChange=function(t){var e=this;t.mediaKeysSession.keyStatuses.forEach((function(i,s){e.log('key status change "'+i+'" for keyStatuses keyId: '+bt("buffer"in s?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s))+" session keyId: "+bt(new Uint8Array(t.decryptdata.keyId||[]))+" uri: "+t.decryptdata.uri),t.keyStatus=i}))},Ks.fetchServerCertificate=function(t){var e=this.config,i=new e.loader(e),o=this.getServerCertificateUrl(t);return o?(this.log('Fetching serverCertificate for "'+t+'"'),new Promise((function(r,n){var a={responseType:"arraybuffer",url:o},l={loadPolicy:c=e.certLoadPolicy.default,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:function(t,e,i,s){r(t.data)},onError:function(e,i,r,l){n(new Zr({type:x.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:r,response:s({url:a.url,data:void 0},e)},'"'+t+'" certificate request failed ('+o+"). Status: "+e.code+" ("+e.text+")"))},onTimeout:function(e,i,s){n(new Zr({type:x.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:s,response:{url:a.url,data:void 0}},'"'+t+'" certificate request timed out ('+o+")"))},onAbort:function(t,e,i){n(new Error("aborted"))}};i.load(a,l,c)}))):Promise.resolve()},Ks.setMediaKeysServerCertificate=function(t,e,i){var s=this;return new Promise((function(o,r){t.setServerCertificate(i).then((function(r){s.log("setServerCertificate "+(r?"success":"not supported by CDM")+" ("+(null==i?void 0:i.byteLength)+') on "'+e+'"'),o(t)})).catch((function(t){r(new Zr({type:x.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:t,fatal:!0},t.message))}))}))},Ks.renewLicense=function(t,e){var i=this;return this.requestLicense(t,new Uint8Array(e)).then((function(e){return i.updateKeySession(t,new Uint8Array(e)).catch((function(t){throw new Zr({type:x.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:t,fatal:!0},t.message)}))}))},Ks.setupLicenseXHR=function(t,e,i,s){var o=this,r=this.config.licenseXhrSetup;return r?Promise.resolve().then((function(){if(!i.decryptdata)throw new Error("Key removed");return r.call(o.hls,t,e,i,s)})).catch((function(n){if(!i.decryptdata)throw n;return t.open("POST",e,!0),r.call(o.hls,t,e,i,s)})).then((function(i){return t.readyState||t.open("POST",e,!0),{xhr:t,licenseChallenge:i||s}})):(t.open("POST",e,!0),Promise.resolve({xhr:t,licenseChallenge:s}))},Ks.requestLicense=function(t,e){var i=this,s=this.config.keyLoadPolicy.default;return new Promise((function(o,r){var n=i.getLicenseServerUrl(t.keySystem);i.log("Sending license request to URL: "+n);var a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=function(){if(!i.hls||!t.mediaKeysSession)return r(new Error("invalid state"));if(4===a.readyState)if(200===a.status){i._requestLicenseFailureCount=0;var l=a.response;i.log("License received "+(l instanceof ArrayBuffer?l.byteLength:l));var c=i.config.licenseResponseCallback;if(c)try{l=c.call(i.hls,a,n,t)}catch(l){i.error(l)}o(l)}else{var u=(u=s.errorRetry)?u.maxNumRetry:0;i._requestLicenseFailureCount++,i._requestLicenseFailureCount>u||400<=a.status&&a.status<500?r(new Zr({type:x.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:n,data:void 0,code:a.status,text:a.statusText}},"License Request XHR failed ("+n+"). Status: "+a.status+" ("+a.statusText+")")):(u=u-i._requestLicenseFailureCount+1,i.warn("Retrying license request, "+u+" attempts left"),i.requestLicense(t,e).then(o,r))}},t.licenseXhr&&t.licenseXhr.readyState!==XMLHttpRequest.DONE&&t.licenseXhr.abort(),t.licenseXhr=a,i.setupLicenseXHR(a,n,t,e).then((function(t){var e=t.xhr;t=t.licenseChallenge;e.send(t)}))}))},Ks.onMediaAttached=function(t,e){this.config.emeEnabled&&(e=e.media,(this.media=e).addEventListener("encrypted",this.onMediaEncrypted),e.addEventListener("waitingforkey",this.onWaitingForKey))},Ks.onMediaDetached=function(){var t=this,e=this.media,i=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Ft.clearKeyUriToKeyIdMap();var s=i.length;Xr.CDMCleanupPromise=Promise.all(i.map((function(e){return t.removeSession(e)})).concat(null==e?void 0:e.setMediaKeys(null).catch((function(i){t.log("Could not clear media keys: "+i+". media.src: "+(null==e?void 0:e.src))})))).then((function(){s&&(t.log("finished closing key sessions and clearing media keys"),i.length=0)})).catch((function(i){t.log("Could not close sessions and clear media keys: "+i+". media.src: "+(null==e?void 0:e.src))}))},Ks.onManifestLoading=function(){this.keyFormatPromise=null},Ks.onManifestLoaded=function(t,e){(e=e.sessionKeys)&&this.config.emeEnabled&&!this.keyFormatPromise&&(e=e.reduce((function(t,e){return-1===t.indexOf(e.keyFormat)&&t.push(e.keyFormat),t}),[]),this.log("Selecting key-system from session-keys "+e.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(e))},Ks.removeSession=function(t){var e=this,i=t.mediaKeysSession,s=t.licenseXhr;if(i)return this.log("Remove licenses and keys and close session "+i.sessionId),i.onmessage=null,i.onkeystatuseschange=null,s&&s.readyState!==XMLHttpRequest.DONE&&s.abort(),t.mediaKeysSession=t.decryptdata=t.licenseXhr=void 0,-1<(t=this.mediaKeySessions.indexOf(t))&&this.mediaKeySessions.splice(t,1),i.remove().catch((function(t){e.log("Could not remove session: "+t)})).then((function(){return i.close()})).catch((function(t){e.log("Could not close session: "+t)}))},cs=Xr;function Xr(t){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=Xr.CDMCleanupPromise?[Xr.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=I.debug.bind(I,Qr),this.log=I.log.bind(I,Qr),this.warn=I.warn.bind(I,Qr),this.error=I.error.bind(I,Qr),this.hls=t,this.config=t.config,this.registerListeners()}function qr(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}function Kr(t){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}cs.CDMCleanupPromise=void 0;var Yr,Zr=(a(sn,Yr=d(Error)),sn),Jr="a",$r="av";(Ye=en.prototype).registerListeners=function(){var t=this.hls;t.on(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(w.MEDIA_DETACHED,this.onMediaDetached,this),t.on(w.BUFFER_CREATED,this.onBufferCreated,this)},Ye.unregisterListeners=function(){var t=this.hls;t.off(w.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(w.MEDIA_DETACHED,this.onMediaDetached,this),t.off(w.BUFFER_CREATED,this.onBufferCreated,this)},Ye.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},Ye.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},Ye.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},Ye.onBufferCreated=function(t,e){var i;this.audioBuffer=null==(i=e.tracks.audio)?void 0:i.buffer,this.videoBuffer=null==(e=e.tracks.video)?void 0:e.buffer},Ye.createData=function(){var t;return{v:1,sf:"h",sid:this.sid,cid:this.cid,pr:null==(t=this.media)?void 0:t.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},Ye.apply=function(t,e){void 0===e&&(e={}),n(e,this.createData());var i="i"===e.ot||"v"===e.ot||e.ot===$r;this.starved&&i&&(e.bs=!0,e.su=!0,this.starved=!1),null==e.su&&(e.su=this.buffering),this.useHeaders?(i=en.toHeaders(e),Object.keys(i).length&&(t.headers||(t.headers={}),n(t.headers,i))):(e=en.toQuery(e))&&(t.url=en.appendQueryToUri(t.url,e))},Ye.getObjectType=function(t){var e=t.type;return"subtitle"===e?"tt":"initSegment"===t.sn?"i":"audio"===e?Jr:"main"===e?this.hls.audioTracks.length?"v":$r:void 0},Ye.getTopBandwidth=function(t){for(var e=0,i=this.hls,s=f(t===Jr?i.audioTracks:(t=-1<(t=i.maxAutoLevel)?t+1:i.levels.length,i.levels.slice(0,t)));!(o=s()).done;){var o=o.value;o.bitrate>e&&(e=o.bitrate)}return 0<e?e:NaN},Ye.getBufferLength=function(t){var e=this.hls.media;return(t=t===Jr?this.audioBuffer:this.videoBuffer)&&e?1e3*Si.bufferInfo(t,e.currentTime,this.config.maxBufferHole).len:NaN},Ye.createPlaylistLoader=function(){var t=this.config.pLoader,e=this.applyPlaylistData,i=t||this.config.loader;return(t=s.prototype).destroy=function(){this.loader.destroy()},t.abort=function(){this.loader.abort()},t.load=function(t,i,s){e(t),this.loader.load(t,i,s)},r(s,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),s;function s(t){this.loader=void 0,this.loader=new i(t)}},Ye.createFragmentLoader=function(){var t=this.config.fLoader,e=this.applyFragmentData,i=t||this.config.loader;return(t=s.prototype).destroy=function(){this.loader.destroy()},t.abort=function(){this.loader.abort()},t.load=function(t,i,s){e(t),this.loader.load(t,i,s)},r(s,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),s;function s(t){this.loader=void 0,this.loader=new i(t)}},en.uuid=function(){var t=URL.createObjectURL(new Blob),e=t.toString();return URL.revokeObjectURL(t),e.slice(e.lastIndexOf("/")+1)},en.serialize=function(t){for(var e,i=[],s=function(t){return Math.round(t)},o=function(t){return 100*s(t/100)},r={br:s,d:s,bl:o,dl:o,mtp:o,nor:function(t){return encodeURIComponent(t)},rtp:o,tb:s},n=f(Object.keys(t||{}).sort());!(a=n()).done;){var a,l,c=a.value,u=t[c];e=u,Number.isNaN(e)||null==e||""===e||!1===e||"v"===c&&1===u||"pr"==c&&1===u||((l=r[c])&&(u=l(u)),a=typeof u,l=void 0,l="ot"===c||"sf"===c||"st"===c?c+"="+u:"boolean"==a?c:"number"==a?c+"="+u:c+"="+JSON.stringify(u),i.push(l))}return i.join(",")},en.toHeaders=function(t){for(var e={},i=["Object","Request","Session","Status"],s=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},r=0,n=Object.keys(t);r<n.length;r++){var a=n[r];s[null!=o[a]?o[a]:1][a]=t[a]}for(var l=0;l<s.length;l++){var c=en.serialize(s[l]);c&&(e["CMCD-"+i[l]]=c)}return e},en.toQuery=function(t){return"CMCD="+encodeURIComponent(en.serialize(t))},en.appendQueryToUri=function(t,e){if(!e)return t;var i=t.includes("?")?"&":"?";return t+i+e},W=en,(Ks=tn.prototype).registerListeners=function(){var t=this.hls;t.on(w.MANIFEST_LOADING,this.onManifestLoading,this),t.on(w.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(w.MANIFEST_PARSED,this.onManifestParsed,this),t.on(w.ERROR,this.onError,this)},Ks.unregisterListeners=function(){var t=this.hls;t&&(t.off(w.MANIFEST_LOADING,this.onManifestLoading,this),t.off(w.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(w.MANIFEST_PARSED,this.onManifestParsed,this),t.off(w.ERROR,this.onError,this))},Ks.startLoad=function(){var t;this.started=!0,self.clearTimeout(this.reloadTimer),this.enabled&&this.uri&&(this.updated?(t=Math.max(1e3*this.timeToLoad-(performance.now()-this.updated),0),this.scheduleRefresh(this.uri,t)):this.loadSteeringManifest(this.uri))},Ks.stopLoad=function(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),self.clearTimeout(this.reloadTimer)},Ks.destroy=function(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null},Ks.removeLevel=function(t){var e=this.levels;e&&(this.levels=e.filter((function(e){return e!==t})))},Ks.onManifestLoading=function(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null},Ks.onManifestLoaded=function(t,e){null!==(e=e.contentSteering)&&(this.pathwayId=e.pathwayId,this.uri=e.uri,this.started&&this.startLoad())},Ks.onManifestParsed=function(t,e){this.audioTracks=e.audioTracks,this.subtitleTracks=e.subtitleTracks},Ks.onError=function(t,e){var i,s=e.errorAction;2===(null==s?void 0:s.action)&&1===s.flags&&(i=this.pathwayPriority,e=this.pathwayId,this.penalizedPathways[e]||(this.penalizedPathways[e]=performance.now()),!i&&this.levels&&(i=this.levels.reduce((function(t,e){return-1===t.indexOf(e.pathwayId)&&t.push(e.pathwayId),t}),[])),i&&1<i.length&&(this.updatePathwayPriority(i),s.resolved=this.pathwayId!==e))},Ks.filterParsedLevels=function(t){this.levels=t;var e,i=this.getLevelsForPathway(this.pathwayId);return 0===i.length&&(e=t[0].pathwayId,this.log("No levels found in Pathway "+this.pathwayId+'. Setting initial Pathway to "'+e+'"'),i=this.getLevelsForPathway(e),this.pathwayId=e),i.length!==t.length?(this.log("Found "+i.length+"/"+t.length+' levels in Pathway "'+this.pathwayId+'"'),i):t},Ks.getLevelsForPathway=function(t){return null===this.levels?[]:this.levels.filter((function(e){return t===e.pathwayId}))},Ks.updatePathwayPriority=function(t){this.pathwayPriority=t;var e=this.penalizedPathways,i=performance.now();Object.keys(e).forEach((function(t){3e5<i-e[t]&&delete e[t]}));for(var s=0;s<t.length;s++){var o=t[s];if(!e[o]){if(o===this.pathwayId)return;var r=this.hls.nextLoadLevel,n=this.hls.levels[r];if(0<(a=this.getLevelsForPathway(o)).length){this.log('Setting Pathway to "'+o+'"'),this.pathwayId=o,this.hls.trigger(w.LEVELS_UPDATED,{levels:a});var a=this.hls.levels[r];n&&a&&this.levels&&(a.attrs["STABLE-VARIANT-ID"]!==n.attrs["STABLE-VARIANT-ID"]&&a.bitrate!==n.bitrate&&this.log("Unstable Pathways change from bitrate "+n.bitrate+" to "+a.bitrate),this.hls.nextLoadLevel=r);break}}}},Ks.clonePathways=function(t){var e,i,s=this,o=this.levels;o&&(e={},i={},t.forEach((function(t){var r=t.ID,a=t["BASE-ID"],l=t["URI-REPLACEMENT"];o.some((function(t){return t.pathwayId===r}))||(a=s.getLevelsForPathway(a).map((function(t){var s=n({},t);s.details=void 0,s.url=rn(t.uri,t.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l);var o=new C(t.attrs);o["PATHWAY-ID"]=r;var a=o.AUDIO&&o.AUDIO+"_clone_"+r;t=o.SUBTITLES&&o.SUBTITLES+"_clone_"+r;return a&&(e[o.AUDIO]=a,o.AUDIO=a),t&&(i[o.SUBTITLES]=t,o.SUBTITLES=t),s.attrs=o,ti(s=new Ie(s),"audio",a),ti(s,"text",t),s})),o.push.apply(o,a),on(s.audioTracks,e,l,r),on(s.subtitleTracks,i,l,r))})))},Ks.loadSteeringManifest=function(t){var e,i=this,s=(o=this.hls.config).loader;this.loader&&this.loader.destroy(),this.loader=new s(o);try{e=new self.URL(t)}catch(e){return this.enabled=!1,void this.log("Failed to parse Steering Manifest URI: "+t)}"data:"!==e.protocol&&(r=0|(this.hls.bandwidthEstimate||o.abrEwmaDefaultEstimate),e.searchParams.set("_HLS_pathway",this.pathwayId),e.searchParams.set("_HLS_throughput",""+r));s={responseType:"json",url:e.href};var o=(r=o.steeringManifestLoadPolicy.default).errorRetry||r.timeoutRetry||{},r={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0};o={onSuccess:function(t,s,o,r){i.log('Loaded steering manifest: "'+e+'"');var n=t.data;if(1===n.VERSION){i.updated=performance.now(),i.timeToLoad=n.TTL;var a=n["RELOAD-URI"],l=n["PATHWAY-CLONES"],c=n["PATHWAY-PRIORITY"];if(a)try{i.uri=new self.URL(a,e).href}catch(t){return i.enabled=!1,void i.log("Failed to parse Steering Manifest RELOAD-URI: "+a)}i.scheduleRefresh(i.uri||o.url),l&&i.clonePathways(l),c&&i.updatePathwayPriority(c)}else i.log("Steering VERSION "+n.VERSION+" not supported!")},onError:function(t,e,s,o){if(i.log("Error loading steering manifest: "+t.code+" "+t.text+" ("+e.url+")"),i.stopLoad(),410===t.code)return i.enabled=!1,void i.log("Steering manifest "+e.url+" no longer available");var r=1e3*i.timeToLoad;429!==t.code?i.scheduleRefresh(i.uri||e.url,r):("function"!=typeof(null==(t=i.loader)?void 0:t.getResponseHeader)||(t=t.getResponseHeader("Retry-After"))&&(r=1e3*parseFloat(t)),i.log("Steering manifest "+e.url+" rate limited"))},onTimeout:function(t,e,s){i.log("Timeout loading steering manifest ("+e.url+")"),i.scheduleRefresh(i.uri||e.url)}};this.log("Requesting steering manifest: "+e),this.loader.load(s,r,o)},Ks.scheduleRefresh=function(t,e){var i=this;void 0===e&&(e=1e3*this.timeToLoad),self.clearTimeout(this.reloadTimer),this.reloadTimer=self.setTimeout((function(){i.loadSteeringManifest(t)}),e)},Ye=tn;function tn(t){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=t,this.log=I.log.bind(I,"[content-steering]:"),this.registerListeners()}function en(t){var e=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){e.initialized&&(e.starved=!0),e.buffering=!0},this.onPlaying=function(){e.initialized||(e.initialized=!0),e.buffering=!1},this.applyPlaylistData=function(t){try{e.apply(t,{ot:"m",su:!e.initialized})}catch(t){I.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=function(t){try{var i=t.frag,s=e.hls.levels[i.level],o=e.getObjectType(i);i={d:1e3*i.duration,ot:o};"v"!==o&&o!==Jr&&o!=$r||(i.br=s.bitrate/1e3,i.tb=e.getTopBandwidth(o)/1e3,i.bl=e.getBufferLength(o)),e.apply(t,i)}catch(t){I.warn("Could not generate segment CMCD data.",t)}},this.hls=t;var i=this.config=t.config;null!=(t=i.cmcd)&&(i.pLoader=this.createPlaylistLoader(),i.fLoader=this.createFragmentLoader(),this.sid=t.sessionId||en.uuid(),this.cid=t.contentId,this.useHeaders=!0===t.useHeaders,this.registerListeners())}function sn(t,e){var i;return(i=Yr.call(this,e)||this).data=void 0,t.error||(t.error=new Error(e)),(i.data=t).err=t.error,i}function on(t,e,i,s){t&&Object.keys(e).forEach((function(o){var r=t.filter((function(t){return t.groupId===o})).map((function(t){var r=n({},t);return r.details=void 0,r.attrs=new C(r.attrs),r.url=r.attrs.URI=rn(t.url,t.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",i),r.groupId=r.attrs["GROUP-ID"]=e[o],r.attrs["PATHWAY-ID"]=s,r}));t.push.apply(t,r)}))}function rn(t,e,i,s){var o,r=s.HOST,n=s.PARAMS;i=s[i];e&&(o=null==i?void 0:i[e])&&(t=o);var a=new self.URL(t);return r&&!o&&(a.host=r),n&&Object.keys(n).sort().forEach((function(t){t&&a.searchParams.set(t,n[t])})),a.href}var nn=/^age:\s*[\d.]+\s*$/im,an=((Ks=dn.prototype).destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},Ks.abortInternal=function(){var t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,4!==t.readyState&&(this.stats.aborted=!0,t.abort()))},Ks.abort=function(){var t;this.abortInternal(),null!=(t=this.callbacks)&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},Ks.load=function(t,e,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=e,this.callbacks=i,this.loadInternal()},Ks.loadInternal=function(){var t,e,i,s=this,o=this.config,r=this.context;o&&(t=this.loader=new self.XMLHttpRequest,(e=this.stats).loading.first=0,e.loaded=0,e.aborted=!1,(i=this.xhrSetup)?Promise.resolve().then((function(){if(!s.stats.aborted)return i(t,r.url)})).catch((function(e){return t.open("GET",r.url,!0),i(t,r.url)})).then((function(){s.stats.aborted||s.openAndSendXhr(t,r,o)})).catch((function(i){s.callbacks.onError({code:t.status,text:i.message},r,t,e)})):this.openAndSendXhr(t,r,o))},Ks.openAndSendXhr=function(t,e,i){t.readyState||t.open("GET",e.url,!0);var s=this.context.headers,o=(r=i.loadPolicy).maxTimeToFirstByteMs,r=r.maxLoadTimeMs;if(s)for(var n in s)t.setRequestHeader(n,s[n]);e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,self.clearTimeout(this.requestTimeout),i.timeout=o&&S(o)?o:r,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),t.send()},Ks.readystatechange=function(){var t,e,i,s,o=this.context,r=this.loader,n=this.stats;o&&r&&(i=r.readyState,s=this.config,!n.aborted&&2<=i&&(0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),4===i)&&(self.clearTimeout(this.requestTimeout),r.onreadystatechange=null,r.onprogress=null,t=r.status,e="text"!==r.responseType,200<=t&&t<300&&(e&&r.response||null!==r.responseText)?(n.loading.end=Math.max(self.performance.now(),n.loading.first),i=e?r.response:r.responseText,e="arraybuffer"===r.responseType?i.byteLength:i.length,n.loaded=n.total=e,n.bwEstimate=8e3*n.total/(n.loading.end-n.loading.first),this.callbacks&&((e=this.callbacks.onProgress)&&e(n,o,i,r),this.callbacks&&(i={url:r.responseURL,data:i,code:t},this.callbacks.onSuccess(i,n,o,r)))):je(s=s.loadPolicy.errorRetry,n.retry,!1,t)?this.retry(s):(I.error(t+" while loading "+o.url),this.callbacks.onError({code:t,text:r.statusText},o,r,n))))},Ks.loadtimeout=function(){var t=null==(t=this.config)?void 0:t.loadPolicy.timeoutRetry;je(t,this.stats.retry,!0)?this.retry(t):(I.warn("timeout while loading "+this.context.url),(t=this.callbacks)&&(this.abortInternal(),t.onTimeout(this.stats,this.context,this.loader)))},Ks.retry=function(t){var e=this.context,i=this.stats;this.retryDelay=Ve(t,i.retry),i.retry++,I.warn((status?"HTTP Status "+status:"Timeout")+" while loading "+e.url+", retrying "+i.retry+"/"+t.maxNumRetry+" in "+this.retryDelay+"ms"),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)},Ks.loadprogress=function(t){var e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total)},Ks.getCacheAge=function(){var t,e=null;return this.loader&&nn.test(this.loader.getAllResponseHeaders())&&(e=(t=this.loader.getResponseHeader("age"))?parseFloat(t):null),e},Ks.getResponseHeader=function(t){return this.loader&&new RegExp("^"+t+":\\s*[\\d.]+\\s*$","im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(t):null},dn),ln=/(\d+)-(\d+)\/(\d+)/,cn=((Ks=un.prototype).destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},Ks.abortInternal=function(){var t=this.response;null!=t&&t.ok||(this.stats.aborted=!0,this.controller.abort())},Ks.abort=function(){var t;this.abortInternal(),null!=(t=this.callbacks)&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},Ks.load=function(t,e,i){var s=this,o=this.stats;if(o.loading.start)throw new Error("Loader can only be used once.");o.loading.start=self.performance.now();var r=function(t,e){return e={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(n({},t.headers))},t.rangeEnd&&e.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),e}(t,this.controller.signal),a=i.onProgress,l="arraybuffer"===t.responseType,c=l?"byteLength":"length",u=e.loadPolicy,d=u.maxTimeToFirstByteMs,h=u.maxLoadTimeMs;this.context=t,this.config=e,this.callbacks=i,this.request=this.fetchSetup(t,r),self.clearTimeout(this.requestTimeout),e.timeout=d&&S(d)?d:h,this.requestTimeout=self.setTimeout((function(){s.abortInternal(),i.onTimeout(o,t,s.response)}),e.timeout),self.fetch(this.request).then((function(r){s.response=s.loader=r;var n=Math.max(self.performance.now(),o.loading.start);if(self.clearTimeout(s.requestTimeout),e.timeout=h,s.requestTimeout=self.setTimeout((function(){s.abortInternal(),i.onTimeout(o,t,s.response)}),h-(n-o.loading.start)),r.ok)return o.loading.first=n,o.total=function(t){var e=t.get("Content-Range");if(e){var i=function(){var t=ln.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}();if(S(i))return i}if(t=t.get("Content-Length"))return parseInt(t)}(r.headers)||o.total,a&&S(e.highWaterMark)?s.loadProgressively(r,o,t,e.highWaterMark,a):l?r.arrayBuffer():"json"===t.responseType?r.json():r.text();var c=r.status;n=r.statusText;throw new pn(n||"fetch, bad network response",c,r)})).then((function(r){var n=s.response;self.clearTimeout(s.requestTimeout),o.loading.end=Math.max(self.performance.now(),o.loading.first);var l=r[c];l&&(o.loaded=o.total=l),l={url:n.url,data:r,code:n.status},a&&!S(e.highWaterMark)&&a(o,t,r,n),i.onSuccess(l,o,t,n)})).catch((function(e){var r,n;self.clearTimeout(s.requestTimeout),o.aborted||(r=e&&e.code||0,n=e?e.message:null,i.onError({code:r,text:n},t,e?e.details:null,o))}))},Ks.getCacheAge=function(){var t,e=null;return this.response&&(e=(t=this.response.headers.get("age"))?parseFloat(t):null),e},Ks.getResponseHeader=function(t){return this.response?this.response.headers.get(t):null},Ks.loadProgressively=function(t,e,i,s,o){void 0===s&&(s=0);var r=new Ro,n=t.body.getReader();return function a(){return n.read().then((function(n){if(n.done)return r.dataLength&&o(e,i,r.flush(),t),Promise.resolve(new ArrayBuffer(0));var l=n.value;n=l.length;return e.loaded+=n,n<s||r.dataLength?(r.push(l),r.dataLength>=s&&o(e,i,r.flush(),t)):o(e,i,l,t),a()})).catch((function(){return Promise.reject()}))}()},un);function un(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||hn,this.controller=new self.AbortController,this.stats=new D}function dn(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=t&&t.xhrSetup||null,this.stats=new D,this.retryDelay=0}function hn(t,e){return new self.Request(t.url,e)}var fn,pn=(a(mn,fn=d(Error)),mn),gn=/\s/,vn=s(s({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:an,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:_s,bufferController:Go,capLevelController:$i,errorController:Ke,fpsController:ds,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:rt,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:{newCue:function(t,e,i,s){for(var o,r,n,a,l=[],c=self.VTTCue||self.TextTrackCue,u=0;u<s.rows.length;u++)if(r=!0,n=0,a="",!(o=s.rows[u]).isEmpty()){for(var d,h=0;h<o.chars.length;h++)gn.test(o.chars[h].uchar)&&r?n++:(a+=o.chars[h].uchar,r=!1);(o.cueStartTime=e)===i&&(i+=1e-4),16<=n?n--:n++;var f=Rr(a.trim()),p=Dr(e,i,f);null!=t&&null!=(d=t.cues)&&d.getCueById(p)||((f=new c(e,i,f)).id=p,f.line=u+1,f.align="left",f.position=10+Math.min(80,10*Math.floor(8*n/32)),l.push(f))}return t&&l.length&&(l.sort((function(t,e){return"auto"===t.line||"auto"===e.line?0:8<t.line&&8<e.line?e.line-t.line:t.line-e.line})),l.forEach((function(e){return me(t,e)}))),l}},enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:Fo,subtitleTrackController:Uo,timelineController:Qi,audioStreamController:Cs,audioTrackController:bi,emeController:cs,cmcdController:W,contentSteeringController:Ye});function mn(t,e,i){return(t=fn.call(this,t)||this).code=void 0,t.details=void 0,t.code=e,t.details=i,t}function yn(t){return t&&"object"==typeof t?Array.isArray(t)?t.map(yn):Object.keys(t).reduce((function(e,i){return e[i]=yn(t[i]),e}),{}):t}return Ye=function(){function t(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new mo,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,R(e.debug||!1,"Hls instance");var i=this.config=function(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==e.liveMaxLatencyDurationCount&&(void 0===e.liveSyncDurationCount||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(void 0===e.liveSyncDuration||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');var i=yn(t),o=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((function(t){var s=("level"===t?"playlist":t)+"LoadPolicy",r=void 0===e[s],n=[];o.forEach((function(o){var a=t+"Loading"+o,l=e[a];if(void 0!==l&&r){n.push(a);var c=i[s].default;switch(e[s]={default:c},o){case"TimeOut":c.maxLoadTimeMs=l,c.maxTimeToFirstByteMs=l;break;case"MaxRetry":c.errorRetry.maxNumRetry=l,c.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":c.errorRetry.retryDelayMs=l,c.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":c.errorRetry.maxRetryDelayMs=l,c.timeoutRetry.maxRetryDelayMs=l}}})),n.length&&I.warn('hls.js config: "'+n.join('", "')+'" setting(s) are deprecated, use "'+s+'": '+JSON.stringify(e[s]))})),s(s({},i),e)}(t.DefaultConfig,e);this.userConfig=e,this._autoLevelCapping=-1,i.progressive&&((f=(p=i).loader)!==cn&&f!==an?(I.log("[config]: Custom loader detected, cannot enable progressive streaming"),p.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),1}catch(t){}}()&&(p.loader=cn,p.progressive=!0,p.enableSoftwareAES=!0,I.log("[config]: Progressive streaming enabled, using FetchLoader")));var o=i.abrController,r=i.bufferController,n=i.capLevelController,a=i.errorController,l=i.fpsController,c=new a(this),u=this.abrController=new o(this),d=this.bufferController=new r(this),h=this.capLevelController=new n(this),f=(e=new l(this),new pe(this)),p=new _e(this);o=(a=i.contentSteeringController)?new a(this):null,r=this.levelController=new Ze(this,o),n=new ni(this),l=new yi(this.config),a=this.streamController=new _o(this,n,l);h.setStreamController(a),e.setStreamController(a),a=[f,r,a],o&&a.splice(1,0,o),this.networkControllers=a,e=[u,d,h,e,p,n],this.audioTrackController=this.createController(i.audioTrackController,a),(p=i.audioStreamController)&&a.push(new p(this,n,l)),this.subtitleTrackController=this.createController(i.subtitleTrackController,a),(p=i.subtitleStreamController)&&a.push(new p(this,n,l)),this.createController(i.timelineController,e),l.emeController=this.emeController=this.createController(i.emeController,e),this.cmcdController=this.createController(i.cmcdController,e),this.latencyController=this.createController(ke,e),this.coreComponents=e,a.push(c),"function"==typeof(a=c.onErrorOut)&&this.on(w.ERROR,a,c)}t.isSupported=function(){if(!(e=Vt()))return!1;var t=Zi(),e=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"');t=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!e&&!!t};var e=t.prototype;return e.createController=function(t,e){return t?(t=new t(this),e&&e.push(t),t):null},e.on=function(t,e,i){void 0===i&&(i=this),this._emitter.on(t,e,i)},e.once=function(t,e,i){void 0===i&&(i=this),this._emitter.once(t,e,i)},e.removeAllListeners=function(t){this._emitter.removeAllListeners(t)},e.off=function(t,e,i,s){void 0===i&&(i=this),this._emitter.off(t,e,i,s)},e.listeners=function(t){return this._emitter.listeners(t)},e.emit=function(t,e,i){return this._emitter.emit(t,e,i)},e.trigger=function(t,e){if(this.config.debug)return this.emit(t,t,e);try{return this.emit(t,t,e)}catch(e){I.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.trigger(w.ERROR,{type:x.OTHER_ERROR,details:E.INTERNAL_EXCEPTION,fatal:!1,event:t,error:e})}return!1},e.listenerCount=function(t){return this._emitter.listenerCount(t)},e.destroy=function(){I.log("destroy"),this.trigger(w.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(t){return t.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(t){return t.destroy()})),this.coreComponents.length=0;var t=this.config;t.xhrSetup=t.fetchSetup=void 0,this.userConfig=null},e.attachMedia=function(t){I.log("attachMedia"),this._media=t,this.trigger(w.MEDIA_ATTACHING,{media:t})},e.detachMedia=function(){I.log("detachMedia"),this.trigger(w.MEDIA_DETACHING,void 0),this._media=null},e.loadSource=function(t){this.stopLoad();var e=this.media,i=this.url,s=this.url=T.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});I.log("loadSource:"+s),e&&i&&(i!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(e)),this.trigger(w.MANIFEST_LOADING,{url:t})},e.startLoad=function(t){void 0===t&&(t=-1),I.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t)}))},e.stopLoad=function(){I.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad()}))},e.swapAudioCodec=function(){I.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.recoverMediaError=function(){I.log("recoverMediaError");var t=this._media;this.detachMedia(),t&&this.attachMedia(t)},e.removeLevel=function(t,e){void 0===e&&(e=0),this.levelController.removeLevel(t,e)},r(t,[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){I.log("set currentLevel:"+t),this.loadLevel=t,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){I.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){I.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){I.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){I.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(t){(t=!!t)!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){this._autoLevelCapping!==t&&(I.log("set autoLevelCapping:"+t),this._autoLevelCapping=t)}},{key:"bandwidthEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimate():NaN}},{key:"ttfbEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimateTTFB():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(t){-1<Pe.indexOf(t)&&(this._maxHdcpLevel=t)}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var t=this.levels,e=this.config.minAutoBitrate;if(!t)return 0;for(var i=t.length,s=0;s<i;s++)if(t[s].maxBitrate>=e)return s;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping,i=this.maxHdcpLevel;e=-1===e&&t&&t.length?t.length-1:e;if(i)for(var s=e;s--;){var o=t[s].attrs["HDCP-LEVEL"];if(o&&o<=i)return s}return e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(t){this.config.lowLatencyMode=t}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.4.10"}},{key:"Events",get:function(){return w}},{key:"ErrorTypes",get:function(){return x}},{key:"ErrorDetails",get:function(){return E}},{key:"DefaultConfig",get:function(){return t.defaultConfig||vn},set:function(e){t.defaultConfig=e}}]),t}(),Ye.defaultConfig=void 0,Ye};"object"==typeof exports&&"undefined"!=typeof module?module.exports=s():"function"==typeof define&&define.amd?define(s):(i="undefined"!=typeof globalThis?globalThis:i||self).Hls=s()}(!1);